var to=Object.defineProperty;var ni=t=>{throw TypeError(t)};var io=(t,e)=>{for(var i in e)to(t,i,{get:e[i],enumerable:!0})};var ai=(t,e,i)=>e.has(t)||ni("Cannot "+i);var f=(t,e,i)=>(ai(t,e,"read from private field"),i?i.call(t):e.get(t)),ce=(t,e,i)=>e.has(t)?ni("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),U=(t,e,i,o)=>(ai(t,e,"write to private field"),o?o.call(t,i):e.set(t,i),i);var Bi={};io(Bi,{ANDROID_VERSION:()=>Oi,CHROME_VERSION:()=>_t,CHROMIUM_VERSION:()=>he,IE_VERSION:()=>Ii,IOS_VERSION:()=>Li,IS_ANDROID:()=>Be,IS_CHROME:()=>Fe,IS_CHROMECAST_RECEIVER:()=>zo,IS_CHROMIUM:()=>ie,IS_EDGE:()=>te,IS_FIREFOX:()=>Lt,IS_IE:()=>Ri,IS_IOS:()=>No,IS_IPAD:()=>fe,IS_IPHONE:()=>je,IS_IPOD:()=>Ve,IS_MOBILE:()=>K,IS_SAFARI:()=>Ot,IS_SMART_TV:()=>Fo,IS_TIZEN:()=>Dt,IS_WEBOS:()=>Ht,IS_WINDOWS:()=>At,TOUCH_ENABLED:()=>Ai,addSafeClicks:()=>no,addSources:()=>mt,addTracks:()=>vt,assignDef:()=>ko,assignEl:()=>si,assignHTMLConfig:()=>yt,camelize:()=>xt,capitalize:()=>Oo,clamp:()=>z,clampRGBBri:()=>Pi,cleanKeyCombo:()=>Ue,cloneMedia:()=>ct,convertToMonoChrome:()=>_o,createEl:()=>M,createTimeRanges:()=>ue,deepClone:()=>ze,deleteAny:()=>Eo,deprecate:()=>Fi,deprecateForMajor:()=>qo,enterFullscreen:()=>nt,exitFullscreen:()=>at,formatKeyForDisplay:()=>_i,formatKeyShortcutsForDisplay:()=>Uo,formatMediaTime:()=>To,formatSize:()=>Io,formatVttLine:()=>wo,getAny:()=>pe,getDominantColor:()=>Ho,getElSiblingAt:()=>ro,getExtension:()=>Si,getMediaReport:()=>dt,getMimeTypeFromExtension:()=>Do,getRGBBri:()=>Mi,getRGBSat:()=>Rt,getRenderedBox:()=>ho,getSizeTier:()=>De,getSources:()=>He,getTermsForKey:()=>Hi,getTrackIdx:()=>$,getTracks:()=>_e,getTrailPaths:()=>wt,getTrailRecords:()=>Tt,inBoolArrOpt:()=>xo,inDocView:()=>oo,initArrowFocusNav:()=>po,initScrollAssist:()=>lo,initVScrollerator:()=>so,intersectionObserver:()=>ot,isArr:()=>R,isDef:()=>yi,isIter:()=>Q,isObj:()=>E,isSameSources:()=>ve,isSameTracks:()=>ht,isSameURL:()=>L,isUISetting:()=>wi,isValidNum:()=>xi,keyEventAllowed:()=>jo,limited:()=>zt,loadResource:()=>Oe,luid:()=>Ct,matchKeys:()=>be,mergeObjs:()=>X,mockAsync:()=>Go,mutationObserver:()=>ci,noExtension:()=>Ao,observeIntersection:()=>Ae,observeMutation:()=>q,observeResize:()=>Ie,onceEver:()=>Ko,oncePerSession:()=>Ni,parseAnyObj:()=>ee,parseCSSTime:()=>Po,parseCSSUnit:()=>Co,parseEvOpts:()=>D,parseForARIAKS:()=>Wo,parseIfPercent:()=>Mo,parseKeyCombo:()=>Vo,parsePanelBottomObj:()=>So,parseUIObj:()=>Ti,parseVttText:()=>yo,putSourceDetails:()=>lt,putTrackDetails:()=>ut,queryFullscreen:()=>le,queryFullscreenEl:()=>Z,queryMediaMobile:()=>Bo,remToPx:()=>ki,removeSafeClicks:()=>di,removeScrollAssist:()=>mo,removeSources:()=>gt,removeTracks:()=>pt,requestAnimationFrame:()=>We,resizeObserver:()=>rt,rippleHandler:()=>ao,rotate:()=>Lo,safeNum:()=>Et,setAny:()=>Y,setCurrentTrack:()=>ft,setInterval:()=>$o,setTimeout:()=>ye,srtToVtt:()=>bo,stepNum:()=>Ro,stringifyKeyCombo:()=>Di,stripTags:()=>bi,supportsFullscreen:()=>me,supportsPictureInPicture:()=>ge,uid:()=>Ne,uncamelize:()=>Pt});function M(t,e={},i={},o={}){return si(t?document?.createElement(t):void 0,e,i,o)??null}function si(t,e={},i={},o={}){if(t){for(let r of Object.keys(e))e[r]!==void 0&&(t[r]=e[r]);for(let r of Object.keys(i))i[r]!==void 0&&(t.dataset[r]=String(i[r]));for(let r of Object.keys(o))o[r]!==void 0&&(t.style[r]=o[r])}}var Le={};function Oe(t,e="style",{module:i,media:o,crossOrigin:r,integrity:n}={}){return Le[t]?Le[t]:(e==="script"?Array.prototype.some.call(document.scripts,a=>L(a.src,t)):e==="style"&&Array.prototype.some.call(document.styleSheets,a=>L(a.href??"",t)))?Promise.resolve():(Le[t]=new Promise((a,s)=>{if(e==="script"){let d=M("script",{src:t,type:i?"module":"text/javascript",crossOrigin:r,integrity:n,onload:()=>a(d),onerror:()=>s(new Error(`Script load error: ${t}`))});if(!d)return s(new Error(`Script load error: ${t}`));document.body.append(d)}else if(e==="style"){let d=M("link",{rel:"stylesheet",href:t,media:o,onload:()=>a(d),onerror:()=>s(new Error(`Stylesheet load error: ${t}`))});if(!d)return s(new Error(`Stylesheet load error: ${t}`));document.head.append(d)}else s(new Error(`Unsupported resource type: ${e}`))}),Le[t])}function oo(t,e="y"){let i=t.getBoundingClientRect(),o=i.left+window.scrollX>=0&&i.right+window.scrollX<=window.scrollX+(window.innerWidth||document.documentElement.clientWidth),r=i.top+window.scrollY>=0&&i.bottom+window.scrollY<=window.scrollY+(window.innerHeight||document.documentElement.clientHeight);return e==="x"?r:(e==="y"||r)&&o}var ro=(t,e,i,o="after")=>i?.reduce((r,n)=>{let{top:a,left:s,width:d,height:c}=n.getBoundingClientRect(),l=t-(e==="y"?a:s)-(e==="y"?c:d)/2;return(o==="after"?l<0&&l>r.offset:o==="before"?l>0&&l<r.offset:o==="at"?Math.abs(l)<=(e==="y"?c:d)/2&&Math.abs(l)<Math.abs(r.offset):!1)?{offset:l,element:n}:r},{offset:o==="after"?-1/0:1/0,element:void 0}).element,le=()=>!!Z(),Z=()=>{let t=document;return t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement||null},me=()=>{let t=document,e=HTMLVideoElement.prototype;return!!(t.fullscreenEnabled||t.mozFullscreenEnabled||t.msFullscreenEnabled||t.webkitFullscreenEnabled||t.webkitSupportsFullscreen||e.webkitEnterFullscreen)},ge=()=>{let t=window,e=document,i=HTMLVideoElement.prototype;return!!(e.pictureInPictureEnabled||i.requestPictureInPicture||t.documentPictureInPicture)},nt=t=>{let e=t;return e.webkitEnterFullscreen?e.webkitEnterFullscreen():e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():Promise.reject(new Error("Fullscreen API is not supported"))},at=t=>{let e=t,i=document;return e.webkitExitFullscreen?e.webkitExitFullscreen():i.exitFullscreen?i.exitFullscreen():i.mozCancelFullScreen?i.mozCancelFullScreen():i.webkitExitFullscreen?i.webkitExitFullscreen():i.msExitFullscreen?i.msExitFullscreen():Promise.reject(new Error("Fullscreen API is not supported"))};function no(t,e,i,o){t&&di(t),t?.addEventListener("click",t._clickHandler=r=>(clearTimeout(t._clickTimeoutId),t._clickTimeoutId=setTimeout(()=>e?.(r),300)),o),t?.addEventListener("dblclick",t._dblClickHandler=r=>(clearTimeout(t._clickTimeoutId),i?.(r)),o)}var di=t=>(t?.removeEventListener("click",t._clickHandler),t?.removeEventListener("dblclick",t._dblClickHandler)),ot=typeof window<"u"?new IntersectionObserver(t=>{for(let e of t)e.target._tmgIntersectCbs?.forEach(i=>i(e))},{root:null,rootMargin:"0px",threshold:.3}):null,rt=typeof window<"u"?new ResizeObserver(t=>{for(let e of t)e.target._tmgResizeCbs?.forEach(i=>i(e))}):null,ci=typeof window<"u"?new MutationObserver(t=>{t[0].target._tmgMutationCbs?.forEach(i=>i(t))}):null;function Ie(t,e){return(t._tmgResizeCbs??(t._tmgResizeCbs=new Set)).add(e),rt?.observe(t),()=>(t._tmgResizeCbs?.delete(e),!t._tmgResizeCbs?.size&&rt?.unobserve(t))}function Ae(t,e){return(t._tmgIntersectCbs??(t._tmgIntersectCbs=new Set)).add(e),ot?.observe(t),()=>(t._tmgIntersectCbs?.delete(e),!t._tmgIntersectCbs?.size&&ot?.unobserve(t))}function q(t,e,i){return(t._tmgMutationCbs??(t._tmgMutationCbs=new Set)).add(e),ci?.observe(t,i),()=>{t._tmgMutationCbs?.delete(e)}}var ao=(t,e,i=!1)=>{let o=e||t.currentTarget;if(t.target!==t.currentTarget&&t.target?.matches("button,[href],input,label,select,textarea,[tabindex]:not([tabindex='-1'])")||o?.hasAttribute("disabled")||t.pointerType==="mouse"&&t.button!==0)return;t.stopPropagation?.();let{offsetWidth:r,offsetHeight:n}=o,{width:a,height:s,left:d,top:c}=o.getBoundingClientRect(),l=Math.max(r,n),m=i?r/2-l/2:(t.clientX-d)*r/a-l/2,v=i?n/2-l/2:(t.clientY-c)*n/s-l/2,g=M("span",{className:"tmg-video-ripple-container"}),b=M("span",{className:"tmg-video-ripple tmg-video-ripple-hold"},{},{cssText:`width:${l}px;height:${l}px;left:${m}px;top:${v}px;`}),w=!1;b?.addEventListener("animationend",()=>w=!0,{once:!0}),o.append(g?.appendChild(b).parentElement);let u=()=>{if(!w)return b?.addEventListener("animationend",u,{once:!0});b?.classList.replace("tmg-video-ripple-hold","tmg-video-ripple-fade"),b?.addEventListener("animationend",()=>setTimeout(()=>g?.remove())),["pointerup","pointercancel"].forEach(h=>o.ownerDocument.defaultView?.removeEventListener(h,u))};["pointerup","pointercancel"].forEach(h=>o.ownerDocument.defaultView?.addEventListener(h,u))};var so=({baseSpeed:t=3,maxSpeed:e=10,stepDelay:i=2e3,baseRate:o=16,lineHeight:r=80,margin:n=80,car:a=window}={})=>{let s=t,d=null,c=null,l=(v,g=!1,b=0)=>{a!==window&&(v-=b);let w=performance.now(),u=s*r*((c?w-c:o)/1e3);return!g&&(v<n||v>(a.innerHeight??a.offsetHeight)-n)?(d===null?d=setTimeout(()=>s+=1,i):s>t&&(s=Math.min(s+1,e)),a.scrollBy?.(0,v<n?-u:u)):m(),c=g?null:w,u},m=()=>(d&&clearTimeout(d),d=null,s=t,c=null);return{drive:l,reset:m}},W=new WeakMap,li=typeof window<"u"&&new ResizeObserver(t=>t.forEach(({target:e})=>W.get(e)?.update())),co=typeof window<"u"&&new MutationObserver(t=>{let e=new Set;for(let i of t){let o=i.target instanceof Element?i.target:null;for(;o&&!W.has(o);)o=o.parentElement;o&&e.add(o)}for(let i of e)W.get(i)?.update()}),lo=(t,{pxPerSecond:e=80,assistClassName:i="tmg-video-controls-scroll-assist",vertical:o=!0,horizontal:r=!0}={})=>{let n=t?.parentElement;if(!n||W.has(t))return;let a={},s=null,d=performance.now(),c=20,l=20,m=()=>{let w=!!n.querySelector('button, a[href], input, select, textarea, [contenteditable="true"], [tabindex]:not([tabindex="-1"])');if(r){let u=a.left?.offsetWidth||c,h=w?t.clientWidth<u*2:!1;a.left.style.display=h?"none":t.scrollLeft>0?"block":"none",a.right.style.display=h?"none":t.scrollLeft+t.clientWidth<t.scrollWidth-1?"block":"none",c=u}if(o){let u=a.up?.offsetHeight||l,h=w?t.clientHeight<u*2:!1;a.up.style.display=h?"none":t.scrollTop>0?"block":"none",a.down.style.display=h?"none":t.scrollTop+t.clientHeight<t.scrollHeight-1?"block":"none",l=u}},v=w=>{let u=()=>{let h=performance.now(),ae=h-d;d=h;let _=e*ae/1e3;w==="left"&&(t.scrollLeft=Math.max(0,t.scrollLeft-_)),w==="right"&&(t.scrollLeft=Math.min(t.scrollWidth-t.clientWidth,t.scrollLeft+_)),w==="up"&&(t.scrollTop=Math.max(0,t.scrollTop-_)),w==="down"&&(t.scrollTop=Math.min(t.scrollHeight-t.clientHeight,t.scrollTop+_)),s=requestAnimationFrame(u)};d=performance.now(),u()},g=()=>(cancelAnimationFrame(s??0),s=null),b=w=>{let u=M("div",{className:i},{scrollDirection:w},{display:"none"});u&&(["pointerenter","dragenter"].forEach(h=>u.addEventListener(h,()=>v(w))),["pointerleave","pointerup","pointercancel","dragleave","dragend"].forEach(h=>u.addEventListener(h,g)),w==="left"||w==="up"?n.insertBefore(u,t):n.append(u),a[w]=u)};return r&&["left","right"].forEach(b),o&&["up","down"].forEach(b),t.addEventListener("scroll",m),li.observe(t),co.observe(t,{childList:!0,subtree:!0,characterData:!0}),W.set(t,{update:m,destroy(){g(),t.removeEventListener("scroll",m),li.unobserve(t),W.delete(t),Object.values(a).forEach(w=>w.remove())}}),m(),W.get(t)},mo=t=>W.get(t)?.destroy();var ui=["ArrowRight","ArrowLeft","Home","End"],go=["ArrowUp","ArrowDown","PageDown","PageUp"],uo=[...ui,...go],mi={enabled:null,selector:"[data-arrow-item]",focusOnHover:!0,loop:!0,virtual:!1,typeahead:!1,rovingTabIndex:null,defaultTabbableIndex:null,resetMs:500,rtl:null,grid:{},activeClass:"focus-outlined",inputSelector:"input[value],textarea,[contenteditable='true']",focusOptions:{preventScroll:!1},scrollIntoView:{block:"nearest",inline:"nearest"},onSelect:()=>{},onFocusOut:()=>{}},vi=(t,e)=>{if(!t||!e)return t||e||null;let i=new Set,o=t;for(;o;)i.add(o),o=o.parentElement;for(o=e;o;){if(i.has(o))return o;o=o.parentElement}return null},vo=(t,e=!0,i=!0,o=!0)=>{let r=t.length,n={};if(!r)return n;let a=t.findIndex(d=>d.offsetTop!==t[0].offsetTop);a=a>0?a:r,e&&(n.x=a);let s=Math.ceil(r/a);if(i&&(n.y=s),o){let d=vi(t[0],t[1])?.clientHeight??0,c=t[0].offsetHeight??0;s=z(1,Math.floor(d/c),s)||s,n.vY=s}return n},gi=({key:t,currIndex:e,length:i,gridX:o,gridY:r,vGridY:n,loop:a,ctrlKey:s=!1,rtl:d})=>{let c=e-e%o,l=Math.min(c+o-1,i-1),m=e%o,v=Math.min(m+o*(r-1),i-1),g=o>1,b=r>1,u={...d?{ArrowRight:g?-1:0,ArrowLeft:g?1:0}:{ArrowRight:g?1:0,ArrowLeft:g?-1:0},ArrowDown:b?o:0,ArrowUp:b?-o:0,Home:s?0:c,End:s?i-1:l,PageDown:(n-1)*o,PageUp:-(n-1)*o}[t]??0,h=t==="Home"||t==="End"?u:e+u;return t==="ArrowDown"?(h<o&&(h=0),!a&&h>=i&&(h-=u)):t==="ArrowUp"?!a&&h<0&&(h+=Math.abs(u)):t==="PageDown"?!a&&h>=i&&(h=v):t==="PageUp"&&!a&&h<0&&(h=m),a?(h+i)%i:z(0,h,i-1)},po=(t,e={})=>{let{enabled:i,selector:o,focusOnHover:r,loop:n,virtual:a,typeahead:s,resetMs:d,activeClass:c,inputSelector:l,defaultTabbableIndex:m,grid:v,rtl:g,focusOptions:b,scrollIntoView:w,onSelect:u,onFocusOut:h,rovingTabIndex:ae}={...mi,...e},_=v.x||1,Me=v.y||1,Pe=v.vY||1,C=-1,et="",se=null,y=[],Wt=i??a,$t=ae??!a,Gt=g??getComputedStyle(t).direction==="rtl",de=()=>!Wt||!t,Kt=p=>!p||p.hasAttribute("disabled")||p.hasAttribute("aria-disabled"),Zi=()=>y=Array.from(t.querySelectorAll(o)),tt=(p,T={key:"ArrowRight",ctrlKey:!1})=>{if(de()||!y.length)return null;let x=p,A=0;for(;A<y.length;){if(!Kt(y[x]))return x;x=gi({key:T.key,currIndex:x,gridX:_,gridY:Me,vGridY:Pe,length:y.length,loop:n,ctrlKey:T.ctrlKey,rtl:Gt}),A++}return null},Ce=(p,T={key:"ArrowRight"})=>{if(de())return;let x=tt(p,T);x!==null&&(C=x,u?.(y[x],T),a?(y[x]?.scrollIntoView(w),t.setAttribute("aria-activedescendant",y[x].id||"")):y[x]?.focus(b),qt())},qt=()=>{if(de()||!a&&!$t||!y.length)return;let p=m!=null&&!Kt(y[m])?m:tt(0);y.forEach((T,x)=>{let A=x===C;if($t){let Re=x===C||C===-1&&x===p;T.setAttribute("tabindex",Re?"0":"-1")}else if(a&&C>0){let Re=x>C;T.setAttribute("tabindex",Re?"0":"-1")}else T.setAttribute("tabindex","0");a&&(T.setAttribute("aria-selected",String(A)),T.classList.toggle(c,A))})},Yt=p=>{if(de()||!s)return;et+=p.toLowerCase(),se&&clearTimeout(se),se=setTimeout(()=>et="",d);let T=C>=0?C+1:0;for(let x=0;x<y.length;x++){let A=(T+x)%y.length;if((y[A].getAttribute("data-label")||y[A].innerText||"").trim().toLowerCase().startsWith(et))return Ce(A)}},it=p=>{if(de()||document.activeElement?.matches("option"))return;let{key:T}=p;if(!y.length)return;if(a&&(T===" "||T==="Enter"))return y[C]?.click();if(s&&T.length===1&&/^[a-z0-9]$/i.test(T))return Yt(T);if(!uo.includes(T))return;p.currentTarget?.matches(mi.inputSelector)&&_<=1&&ui.includes(T)||(p.preventDefault?.(),p.stopPropagation?.());let x=a?C:y.indexOf(document.activeElement),A=gi({currIndex:x,gridX:_,gridY:Me,vGridY:Pe,length:y.length,loop:n,rtl:Gt,key:T,ctrlKey:p.ctrlKey});Ce(A,p)},Xt=()=>(Zi(),qt());Xt();let Jt=a?[t.querySelector(l)]:[t];Jt.forEach(p=>p?.addEventListener("keydown",it));let Zt=p=>{if(!t.contains(p.relatedTarget))return C=-1,h?.();if(!y.includes(p.relatedTarget)&&(m??-1)>=0)return C=-1;a&&(C=-1)};t.addEventListener("focusout",Zt);let Qt=p=>{if(!Wt||!r)return;let T=p.currentTarget,x=y.indexOf(T);x!==-1&&Ce(x)},ei=new MutationObserver(()=>{let p=y[C];Xt();let T=y[C];p&&T&&p===T||(C=-1)});ei.observe(t,{childList:!0,subtree:!0});let ti=p=>{p.x!==void 0&&(_=p.x),p.y!==void 0&&(Me=p.y),p.vY!==void 0&&(Pe=p.vY)};ti(v);let ii=()=>ti(vo(y,!v.x,!v.y,!v.vY));ii();let oi=new ResizeObserver(()=>ii()),ri=y.length>1?vi(y[0],y[1]):t;ri&&oi.observe(ri);let Qi=()=>y.forEach(p=>p.addEventListener("mouseenter",Qt)),eo=()=>y.forEach(p=>p.removeEventListener("mouseenter",Qt));return Qi(),{goToIndex:Ce,simulateKey:it,getAbleIndex:tt,typeAhead:Yt,items:()=>y,activeItem:()=>y[C]??null,getGrid:()=>({x:_,y:Me,vY:Pe}),destroy:()=>{Jt.forEach(p=>p?.removeEventListener("keydown",it)),t.removeEventListener("focusout",Zt),eo(),ei.disconnect(),oi.disconnect(),se&&clearTimeout(se)}}};var st={src:"",currentTime:0,paused:!0,volume:1,muted:!1,playbackRate:1,pictureInPicture:!1,fullscreen:!1,airplay:!1,chromecast:!1,xrSession:!1,xrMode:"inline",xrReferenceSpace:"local",projection:"flat",stereoMode:"none",fieldOfView:90,aspectRatio:16/9,panningX:0,panningY:0,panningZ:0,xrInputSource:null,currentTextTrack:-1,currentAudioTrack:-1,currentVideoTrack:-1,autoLevel:!0,currentLevel:-1,poster:"",autoplay:!1,loop:!1,preload:"metadata",playsInline:!0,crossOrigin:null,controls:!1,controlsList:"",disablePictureInPicture:!1,sources:[],tracks:[]},pi=st,hi={readyState:0,networkState:0,error:null,bandwidth:null,waiting:!1,stalled:!1,seeking:!1,buffered:ue(),played:ue(),seekable:ue(),duration:NaN,ended:!1,videoWidth:0,videoHeight:0,loadedMetadata:!1,loadedData:!1,canPlay:!1,canPlayThrough:!1,textTracks:[],audioTracks:[],videoTracks:[],levels:[],xrCapabilities:null,activeCue:null},fi={defaultMuted:!1,defaultPlaybackRate:1,srcObject:null};function dt(t){let e=$(t,"Text"),i={state:{src:t.src,currentTime:t.currentTime,paused:t.paused,volume:t.volume,muted:t.muted,playbackRate:t.playbackRate,pictureInPicture:document.pictureInPictureElement===t,fullscreen:Z()===t,currentTextTrack:e,currentAudioTrack:$(t,"Audio"),currentVideoTrack:$(t,"Video"),poster:t instanceof HTMLVideoElement?t.poster:"",autoplay:t.autoplay,loop:t.loop,preload:t.preload,playsInline:t instanceof HTMLVideoElement?t.playsInline:!1,crossOrigin:t.crossOrigin,controls:t.controls,controlsList:t.getAttribute("controlsList")||"",disablePictureInPicture:t instanceof HTMLVideoElement?t.disablePictureInPicture:!1,sources:He(t),tracks:_e(t)},status:{readyState:t.readyState,networkState:t.networkState,error:t.error,seeking:t.seeking,buffered:t.buffered,played:t.played,seekable:t.seekable,duration:t.duration,ended:t.ended,loadedMetadata:t.readyState>=1,loadedData:t.readyState>=2,canPlay:t.readyState>=3,canPlayThrough:t.readyState>=4,videoWidth:t instanceof HTMLVideoElement?t.videoWidth:0,videoHeight:t instanceof HTMLVideoElement?t.videoHeight:0,textTracks:t.textTracks,audioTracks:t.audioTracks,videoTracks:t.videoTracks,activeCue:t.textTracks[e]?.activeCues?.[0]||null},settings:{defaultMuted:t.defaultMuted,defaultPlaybackRate:t.defaultPlaybackRate}};return{state:{...st,...i.state},intent:{...pi,...i.state},status:{...hi,...i.status},settings:{...fi,...i.settings}}}var ho=t=>{let e=d=>d.videoWidth&&d.videoHeight?{width:d.videoWidth,height:d.videoHeight}:null,i=(d,c,l)=>{let m=parseFloat(d);return d.endsWith("%")?c*(m/100)-l*(m/100):m},o=(d,c,l)=>{let[m,v]=d.split(" ");return{left:i(m,c.width,l.width),top:i(v,c.height,l.height)}},{objectFit:r,objectPosition:n}=getComputedStyle(t),a=t.getBoundingClientRect(),s=e(t);if(!s||!r||!n)return{};if(r==="scale-down"&&(r=a.width<s.width||a.height<s.height?"contain":"none"),r==="none")return{...o(n,a,s),...s};if(r==="contain"){let d=s.height/s.width,c=a.height/a.width,l=c>d?a.width:a.height/d,m=c>d?a.width*d:a.height;return{...o(n,a,{width:l,height:m}),width:l,height:m}}else if(r==="fill"){let{left:d,top:c}=o(n,a,s),l=n.split(" ");return{left:l[0].endsWith("%")?0:d,top:l[1].endsWith("%")?0:c,width:a.width,height:a.height}}else if(r==="cover"){let d=Math.min(a.width/s.width,a.height/s.height),c=s.width*d,l=s.height*d,m=1;return c<a.width&&(m=a.width/c),Math.abs(m-1)<1e-14&&l<a.height&&(m=a.height/l),c*=m,l*=m,{...o(n,a,{width:c,height:l}),width:c,height:l}}return{}};function De(t){let{offsetWidth:e,offsetHeight:i}=t;return{width:e,height:i,tier:i<=130?"xxxxx":e<=280?"xxxx":e<=380?"xxx":e<=480?"xx":e<=630?"x":""}}var ct=t=>{let e=t.cloneNode(!0);return e.tmgPlayer=t.tmgPlayer,t.parentElement?.replaceChild(e,t),t.currentTime&&(e.currentTime=t.currentTime),t.playbackRate!==1&&(e.playbackRate=t.playbackRate),t.defaultPlaybackRate!==1&&(e.defaultPlaybackRate=t.defaultPlaybackRate),t.volume!==1&&(e.volume=t.volume),t.muted&&(e.muted=!0),t.defaultMuted&&(e.defaultMuted=!0),t.srcObject&&(e.srcObject=t.srcObject),t.autoplay&&(e.autoplay=!0),t.loop&&(e.loop=!0),t.controls&&(e.controls=!0),t.crossOrigin&&(e.crossOrigin=t.crossOrigin),t.playsInline&&(e.playsInline=!0),t.controlsList?.length&&(e.controlsList=t.controlsList),t.disablePictureInPicture&&(e.disablePictureInPicture=!0),!t.paused&&e.isConnected&&e.play(),e};function lt(t,e){t.src&&(e.src=t.src),t.type&&(e.type=t.type),t.media&&(e.media=t.media)}function mt(t=[],e){let i=(o,r)=>{let n=M("source");return lt(o,n),r.appendChild(n)};return Q(t)?Array.from(t,o=>i(o,e)):i(t,e)}function He(t){let e=t.querySelectorAll("source"),i=[];return e.forEach(o=>{let r={};lt(o,r),i.push(r)}),i}var gt=t=>t?.querySelectorAll("source")?.forEach(e=>e.remove());function ve(t,e){return!t||!e||t.length!==e.length?!1:t.every(i=>e.some(o=>L(i.src,o.src)&&i.type===o.type&&i.media===o.media))}function ut(t,e){t.kind&&(e.kind=t.kind),t.label&&(e.label=t.label),t.srclang&&(e.srclang=t.srclang),t.src&&(e.src=t.src),t.default&&(e.default=t.default)}function vt(t=[],e){let i=(o,r)=>{let n=M("track");return ut(o,n),r.appendChild(n)};return Q(t)?Array.from(t,o=>i(o,e)):i(t,e)}function _e(t,e=!1){let i=t.querySelectorAll(e?"track:is([kind='captions'], [kind='subtitles'])":"track"),o=[];return i.forEach(r=>{let n={};ut(r,n),o.push(n)}),o}var pt=t=>t.querySelectorAll("track")?.forEach(e=>(e.kind==="subtitles"||e.kind==="captions")&&e.remove());function ht(t,e){return!t||!e||t.length!==e.length?!1:t.every(i=>e.some(o=>L(i.src,o.src)&&i.kind===o.kind&&i.label===o.label&&i.srclang===o.srclang&&i.default===o.default))}var fo=(t,e)=>`${t}Track`in window&&e instanceof window[`${t}Track`];function $(t,e,i="active"){if(typeof i=="number")return i;let o=t[`${e.toLowerCase()}Tracks`];if(i==="active"){if(e==="Text"){for(let r=0;r<+o?.length;r++)if(o[r].mode==="showing")return r}if(e==="Audio"){for(let r=0;r<+o?.length;r++)if(o[r].enabled)return r}if(e==="Video")return o.selectedIndex??-1}return fo(e,i)?Array.prototype.indexOf.call(o,i):typeof i=="string"?(i=i.toLowerCase(),isNaN(+i)?Array.prototype.findIndex.call(o,r=>r.id.toLowerCase()===i||r.label.toLowerCase()===i||r.srclang.toLowerCase()===i||r.language.toLowerCase()===i||L(r.src,i)):+i):-1}function ft(t,e,i,o=!1){let r=t[`${e.toLowerCase()}Tracks`],n=$(t,e,i);if(e!=="Video")for(let a=0;a<r.length;a++)e==="Text"?r[a].mode=a===n?"showing":o?"disabled":"hidden":r[a].enabled=a===n;else r[n]&&(r[n].selected=!0)}var bi=t=>t.replace(/<(\/)?([a-z0-9.:]+)([^>]*)>/gi,"");function bo(t,e=["WEBVTT",""]){let i=t.replace(/\r\n?/g,`
`).trim();for(let o of i.split(/\n{2,}/)){let r=o.split(`
`),n=/^\d+$/.test(r[0].trim())?1:0,a=r[n]?.trim().replace(/\s+/g," "),s=a?.match(/(\d{1,2}:\d{2}:\d{2})(?:[.,](\d{1,3}))?\s*-->\s*(\d{1,2}:\d{2}:\d{2})(?:[.,](\d{1,3}))?/);if(!s)continue;let[,d,c="0",l,m="0"]=s,v=g=>g.padEnd(3,"0").slice(0,3);e.push(d+"."+v(c)+" --> "+l+"."+v(m));for(let g=n+1;g<r.length;g++)e.push(r[g]);e.push("")}return e.join(`
`)}function yo(t){let e={tag:/<(\/)?([a-z0-9.:]+)([^>]*)>/gi,o:"",l:0,p:null,c:""},i=n=>n.replace(/[&<>"']/g,a=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[a]),o;for(;o=e.tag.exec(t);){let n=t.slice(e.l,o.index);n&&(e.c+=i(n));let[a,s,d,c]=o,l=d.toLowerCase();/^[0-9]/.test(d)?(e.o+=e.p?`<span data-part="timed" data-time="${e.p}">${e.c}</span>`:e.c,e.p=d,e.c=""):s?e.c+=["c","v","lang"].includes(l)?"</span>":`</${l}>`:["b","i","u","ruby","rt"].includes(l)?e.c+=`<${l}>`:l==="c"?e.c+=`<span class="vtt-c ${c.replace(/\.([a-z0-9_-]+)/gi,"$1 ").trim()}">`:l==="v"?e.c+=`<span data-part="voice"${c.trim()?` title="${i(c.trim())}"`:""}>`:l==="lang"&&(e.c+=`<span lang="${i(c.trim())}">`),e.l=e.tag.lastIndex}let r=t.slice(e.l);return r&&(e.c+=i(r)),e.o+(e.p?`<span data-part="timed" data-time="${e.p}">${e.c}</span>`:e.c)}function wo(t,e){let i={tokens:t.match(/<[^>]+>|\S+/g)||[],stack:[],parts:[],line:"",len:0,openStr:"",closeStr:"",timeTag:"",lastWasTag:!1},o=()=>(i.openStr=i.stack.map(n=>`<${n}>`).join(""),i.closeStr=i.stack.reduceRight((n,a)=>n+`</${a}>`,"")),r=()=>i.line&&(i.parts.push(i.line+i.closeStr),i.line=(i.timeTag||"")+i.openStr,i.len=0,i.lastWasTag=!0);return i.tokens.forEach(n=>{let a=n[0]==="<",s=a&&n[1]==="/";if(a){i.line&&!i.lastWasTag&&!s&&(i.line+=" ");let l=n.match(/^<\/?\s*([a-z0-9._:-]+)/i),m=l?.[1]||"";return/^\d/.test(m)?(i.timeTag=n,i.line+=n,i.lastWasTag=!0):(!s&&!n.endsWith("/>")&&m&&(i.stack.push(m),o()),s&&i.stack.length&&(i.stack.pop(),o()),i.lastWasTag=!0,i.line+=n)}let d=bi(n).length,c=i.line&&!i.lastWasTag;i.len+(c?1:0)+d>e&&r(),c&&(i.line+=" ",i.len+=1),i.line+=n,i.len+=d,i.lastWasTag=!1}),r(),i.parts}function To({time:t,format:e="digital",elapsed:i=!0,showMs:o=!1,casing:r="normal"}={time:0}){let n=e.endsWith("long"),a=(u=0)=>u==1?"":"s",s=u=>r==="upper"?u.toUpperCase():r==="title"?u.replace(/^([a-z])/i,h=>h.toUpperCase()):u.toLowerCase(),d=(u=0)=>({h:s(n?" hour"+a(u)+" ":"h"),m:s(n?" minute"+a(u)+" ":"m"),s:s(n?" second"+a(u)+" ":"s"),ms:s(n?" millisecond"+a(u)+" ":"ms")}),c=(u,h=2,ae)=>n&&!ae?u:String(u).padStart(h,typeof+h=="number"?"0":"-");if(isNaN(t??NaN)||t===1/0)return e!=="digital"?("-"+d().h+c("-")+d().m+(i?"":"left")).trim():i?"-:--":"--:--";let l=Math.floor(Math.abs(t)%60),m=Math.floor(Math.abs(t)/60)%60,v=Math.floor(Math.abs(t)/3600),g=Math.floor(Math.abs(t)%1*1e3);if(e==="digital"){let u=v?v+":"+c(m,2,!0)+":"+c(l,2,!0):m+":"+c(l,2,!0);return i?u:"-"+u}let b=v?v+d(v).h+c(m)+d(m).m+c(l)+d(l).s:m+d(m).m+c(l)+d(l).s,w=o&&g?c(g,3)+d(g).ms:"";return(b+w+(n?"":" ")+(i?"":"left")).trim()}var ue=t=>{if(!t||t.length!==void 0)return t||{length:0,start:()=>0,end:()=>0};let e=t.sort((i,o)=>i[0]-o[0]);return{length:e.length,start:i=>e[i]?e[i][0]:0,end:i=>e[i]?e[i][1]:0}};var bt=/^([^\[\]]+)\[(\d+)\]$/;function yi(t){return t!==void 0}function R(t){return Array.isArray(t)}function E(t){return typeof t=="object"&&t!==null&&!R(t)&&typeof t!="function"}function Q(t){return t!=null&&typeof t[Symbol.iterator]=="function"}function wi(t){return E(t)&&"options"in t&&R(t.options)}function xo(t,e){return t?.includes?.(e)??t}function ko(t,e,i){yi(i)&&t!=null&&Y(t,e,i)}function yt(t,e,i){let o=e.replace("tmg--",""),r=i.includes(",")?i.split(",")?.map(n=>n.replace(/\s+/g,"")):i==="true"?!0:i==="false"?!1:i==="null"?null:/^\d+$/.test(i)?Number(i):i;Y(t,o,r,"--",n=>xt(n))}function Y(t,e,i,o=".",r){var s,d;if(!e.includes(o))return void(t[r?r(e):e]=i);let n=e.split(o),a=t;for(let c=0;c<n.length;c++){let l=r?r(n[c]):n[c],m=l[0]==="["&&l.match(bt);if(m){let[,v,g]=m;R(a[v])||(a[v]=[]),c===n.length-1?a[v][Number(g)]=i:((s=a[v])[d=Number(g)]||(s[d]={}),a=a[v][Number(g)])}else c===n.length-1?a[l]=i:(a[l]||(a[l]={}),a=a[l])}}function pe(t,e,i=".",o){if(!e.includes(i))return t[o?o(e):e];let r=e.split(i),n=t;for(let a=0;a<r.length;a++){let s=o?o(r[a]):r[a],d=s[0]==="["&&s.match(bt);if(d){let[,c,l]=d;if(!R(n[c]))return;n=n[c][Number(l)]}else{if(!E(n)||!(s in n))return;n=n[s]}}return n}function Eo(t,e,i=".",o){if(!e.includes(i))return void delete t[o?o(e):e];let r=e.split(i),n=t;for(let a=0;a<r.length;a++){let s=o?o(r[a]):r[a],d=s[0]==="["&&s.match(bt);if(d){let[,c,l]=d;if(!R(n[c]))return;a===r.length-1?delete n[c][Number(l)]:n=n[c][Number(l)]}else{if(!E(n)||!(s in n))return;a===r.length-1?delete n[s]:n=n[s]}}}function Ti(t){let e={},i=Object.keys(t);for(let o=0;o<i.length;o++){let r=t[i[o]];E(r)&&(wi(r)?e[i[o]]={values:r.options.map(n=>"value"in n?n.value:n),displays:r.options.map(n=>"display"in n?n.display:String(n))}:e[i[o]]=Ti(r))}return e}function ee(t,e=".",i=r=>r,o=new WeakSet){if(!E(t)||o.has(t))return t;o.add(t);let r={};return Object.keys(t).forEach(n=>n.includes(e)?Y(r,n,ee(t[n],e,i,o),e,i):r[n]=E(t[n])?ee(t[n],e,i,o):t[n]),r}function So(t=[],e=!1){if(!E(t)&&!R(t))return!1;let[i=[],o=[],r=[]]=E(t)?Object.values(t).reverse():R(t[0])?[...t].reverse():[t];return e?[...i,...o,...r]:{1:r,2:o,3:i}}function D(t,e,i=e[0],o={}){for(let r=0;r<e.length;r++)o[e[r]]=!1;return Object.assign(o,typeof t=="boolean"?{[i]:t}:t),o}function X(t={},e={}){let i={...t||{},...e||{}};return Object.keys(i).forEach(o=>E(t?.[o])&&E(e?.[o])&&(i[o]=X(t[o],e[o]))),i}function wt(t,e=!0){let i=t.split("."),o=["*"],r="";for(let n=0;n<i.length;n++)r+=(n===0?"":".")+i[n],o.push(r);return e?o.reverse():o}function Tt(t,e){let i=e.split("."),o=[["*",t,t]],r="",n=t;for(let a=0;a<i.length;a++)r+=(a===0?"":".")+i[a],o.push([r,n,n=Reflect.get(n,i[a])]);return o}function ze(t,e=new WeakMap){if(!E(t)||e.has(t)||typeof t=="symbol"||typeof t=="function"||t instanceof Map||t instanceof Set||t instanceof WeakMap||t instanceof Promise||t instanceof Element||t instanceof EventTarget)return t;let i=R(t)?[]:{};e.set(t,i);let o=Object.keys(t);for(let r=0;r<o.length;r++){let n=t[o[r]];i[o[r]]=E(n)||R(n)?ze(n,e):n}return i}function xi(t){return!isNaN(t??NaN)&&t!==1/0}function z(t=0,e,i=1/0){return Math.min(Math.max(e,t),i)}function Et(t,e=0){return xi(t)?t:e}function Mo(t,e=100){return t?.endsWith?.("%")?Et(t.slice(0,-1)/100*e):t}function Po(t){return t?.endsWith?.("ms")?parseFloat(t):parseFloat(t)*1e3}function Co(t){return t?.endsWith?.("px")?parseFloat(t):ki(parseFloat(t))}function ki(t){return parseFloat(getComputedStyle(document.documentElement).fontSize)*t}function Ro(t=0,{min:e,max:i,step:o}){let r=Math.round((Et(t)-e)/o)*o+e;return z(e,+r.toFixed(10),i)}var kt=new Map;function Lo(t,e,i="forwards",o=!0){let r;if(Array.isArray(e))r=e;else{let a=`${e.min}|${e.max}|${e.step}`;kt.has(a)?r=kt.get(a):kt.set(a,r=Array.from({length:Math.floor((e.max-e.min)/e.step)+1},(s,d)=>e.min+d*e.step))}let n=typeof t=="number"?r.reduce((a,s,d)=>Math.abs(s-t)<Math.abs(r[a]-t)?d:a,0):r.indexOf(t);return n=n+(i==="forwards"?1:-1),r[o?(n+r.length)%r.length:z(0,n,r.length-1)]}var St="tmg_fn_registry",Mt="tmg_local_uid",Ei=[" ","enter","escape","arrowup","arrowdown","arrowleft","arrowright","home","end","0","1","2","3","4","5","6","7","8","9"];function Oo(t=""){return t.replace(/^(\s*)([a-z])/i,(e,i,o)=>i+o.toUpperCase())}function xt(t="",{source:e}=/[\s_-]+/,{preserveInnerCase:i=!0,upperFirst:o=!1}={}){return(i?t:t.toLowerCase()).replace(new RegExp(e+"(\\w)","g"),(r,n)=>n.toUpperCase()).replace(/^\w/,r=>r[o?"toUpperCase":"toLowerCase"]())}function Pt(t="",e=" "){return t.replace(/([a-z])([A-Z])/g,`$1${e}$2`).toLowerCase()}function Ne(t="tmg_"){return t+Date.now().toString(36)+"_"+performance.now().toString(36).replace(".","")+"_"+Math.random().toString(36).slice(2)}function Ct(t="tmg_"){let e=localStorage.getItem(Mt);return!e&&localStorage.setItem(Mt,e=Ne(t)),e||""}function L(t,e){if(typeof t!="string"||typeof e!="string"||!t||!e)return!1;try{let i=new URL(t,window.location.href),o=new URL(e,window.location.href);return decodeURIComponent(i.origin+i.pathname)===decodeURIComponent(o.origin+o.pathname)}catch{return t.replace(/\\/g,"/").split("?")[0].trim()===e.replace(/\\/g,"/").split("?")[0].trim()}}function Io(t,e=3,i=1e3){if(t<i)return t+" byte"+(t==1?"":"s");let o=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.min(Math.floor(Math.log(t)/Math.log(i)),o.length-1);return(t/Math.pow(i,r)).toFixed(e).replace(/\.0+$/,"")+" "+o[r]}function Si(t){return t.slice(t.lastIndexOf(".")+1).toLowerCase()??""}function Ao(t){return t.replace(/(?:\.(?:mp4|mkv|avi|mov|webm|flv|wmv|m4v|mpg|mpeg|3gp|ogv|ts))+$/i,"")}function Do(t){return{m3u8:"application/vnd.apple.mpegurl",mpd:"application/dash+xml",avi:"video/x-msvideo",mp4:"video/mp4",mkv:"video/x-matroska",mov:"video/quicktime",flv:"video/x-flv",webm:"video/webm",ogg:"video/ogg",wmv:"video/x-ms-wmv","3gp":"video/3gpp","3g2":"video/3gpp2",mpeg:"video/mpeg",ts:"video/mp2t",m4v:"video/x-m4v"}[Si(t)]||"application/octet-stream"}function Mi([t,e,i]){return .299*t+.587*e+.114*i}function Rt([t,e,i]){return Math.max(t,e,i)-Math.min(t,e,i)}function Pi([t,e,i],o=40){let r=Mi([t,e,i]),n=r<o?o-r:r>255-o?-(r-(255-o)):0;return[t+n,e+n,i+n].map(a=>z(0,a,255))}async function Ho(t,e="rgb",i=!1){typeof t=="string"&&(t=await new Promise((g,b)=>{let w=M("img",{src:String(t),crossOrigin:"anonymous",onload:()=>g(w),onerror:()=>b(new Error(`Image load error: ${t}`))})})),t?.canvas&&(t=t.canvas);let o=document.createElement("canvas"),r=o.getContext("2d"),n=Math.min(100,t.width,t.height);o.width=o.height=n,t&&r?.drawImage(t,0,0,n,n);let a=t&&r?.getImageData(0,0,n,n).data,s={},d={};for(let g=0;g<(a?.length??0);g+=4){if(a[g+3]<128)continue;let b=(a[g]&240)+","+(a[g+1]&240)+","+(a[g+2]&240);s[b]=(s[b]||0)+1,d[b]=d[b]?[d[b][0]+a[g],d[b][1]+a[g+1],d[b][2]+a[g+2]]:[a[g],a[g+1],a[g+2]]}let c=Object.keys(s).sort((g,b)=>s[b]-s[g]).slice(0,7).map(g=>({key:g,rgb:d[g].map(b=>Math.round(b/s[g]))}));if(!c.length)return null;let[l,m,v]=Pi(c.reduce((g,b)=>Rt(g.rgb)>Rt(b.rgb)?g:b,c[0]).rgb,70);return e==="hex"?`#${((1<<24)+(l<<16)+(m<<8)+v).toString(16).slice(1)}`:i==!1?`rgb(${l},${m},${v})`:[l,m,v]}function _o(t,e){let i=e.getImageData(0,0,t.width||1,t.height||1);for(let o=0;o<i.data.length/4;o++){let r=(i.data[o*4+0]+i.data[o*4+1]+i.data[o*4+2])/3;i.data[o*4+0]=r,i.data[o*4+1]=r,i.data[o*4+2]=r}e.putImageData(i,0,0)}var N=typeof window<"u"?window:void 0,It=N?.navigator,P=It?.userAgent||"",G=It?.userAgentData,Be=!1,At=!1,Lt=!1,te=!1,Fe=!1,ie=!1,Ot=!1,Ri=!1,Dt=!1,Ht=!1,Ve=!1,fe=!1,je=!1,Li=null,Oi=null,_t=null,he=null,Ii=null,zo=!!N?.cast?.framework?.CastReceiverContext,Ai=!!(N&&("ontouchstart"in N||It?.maxTouchPoints||N.DocumentTouch&&N.document instanceof N.DocumentTouch)),Ci=(t,e)=>t.find(i=>i.brand===e&&i.version)?.version||null;G?.platform&&G?.brands&&(Be=G.platform==="Android",At=G.platform==="Windows",te=G.brands.some(t=>t.brand==="Microsoft Edge"),ie=G.brands.some(t=>t.brand==="Chromium"||t.brand==="Google Chrome"),Fe=ie&&!te,he=_t=Ci(G.brands,"Chromium")||Ci(G.brands,"Google Chrome"));(!ie||!he)&&(Be=/Android/i.test(P),At||(At=/Windows/i.test(P)),Lt=/Firefox|FxiOS/i.test(P),te=/Edg|EdgiOS/i.test(P),ie=/Chrome|CriOS/i.test(P),Fe=ie&&!te,Ot=/Safari/i.test(P)&&!Fe&&!Lt&&!te,Ri=/MSIE|(Trident\/7.0)|(rv:11.0)/i.test(P),Dt=/Tizen/i.test(P),Ht=/Web0S/i.test(P),Ve=/iPod/i.test(P),fe=/iPad/i.test(P)||Ot&&Ai&&!/iPhone/i.test(P),je=/iPhone/i.test(P)&&!fe,Li=P.match(/OS (\d+)_/i)?.[1]??null,Oi=P.match(/Android\s(\d+(?:\.\d+)+)/i)?.[1]??null,he=_t=P.match(/(?:Chrome|CriOS)\/(\d+)/)?.[1]??he,Ii=P.match(/MSIE\s(\d+)\.\d/)?.[1]||(/Trident\/7.0/i.test(P)&&/rv:11.0/.test(P)?"11.0":null));var No=je||fe||Ve,K=!!(Be||je||Ve||fe),Fo=Dt||Ht,Bo=(t="(max-width: 480px), (max-width: 940px) and (max-height: 480px) and (orientation: landscape)")=>!!(N&&"matchMedia"in N&&N.matchMedia(t).matches);function Vo(t){let e=t.toLowerCase().split("+");return{ctrlKey:e.includes("ctrl"),shiftKey:e.includes("shift"),altKey:e.includes("alt"),metaKey:e.includes("meta")||e.includes("cmd"),key:e.find(i=>!["ctrl","shift","alt","meta","cmd"].includes(i))||""}}function Di(t){let e=[];return t.ctrlKey&&e.push("ctrl"),t.altKey&&e.push("alt"),t.shiftKey&&e.push("shift"),t.metaKey&&e.push("meta"),e.push(t.key?.toLowerCase()??""),e.join("+")}function Ue(t){let e=i=>{let o=["ctrl","alt","shift","meta"],r={cmd:"meta"};if(i===" "||i==="+")return i;i=i.replace(/\+\s*\+$/,"+plus");let n=i.toLowerCase().split("+").filter(a=>a!=="").map(a=>r[a]||(a==="plus"?"+":a.trim()||" "));return[...n.filter(a=>o.includes(a)).sort((a,s)=>o.indexOf(a)-o.indexOf(s)),...n.filter(a=>!o.includes(a))||""].join("+")};return R(t)?t.map(e):e(t)}function be(t,e,i=!1){let o=(r,n)=>{if(i)return r===n;let a=r.split("+"),s=n.split("+");return a.every(d=>s.includes(d))};return R(t)?t.some(r=>o(r,e)):o(t,e)}function Hi(t,e){let i={override:!1,block:!1,allowed:!1,action:null},{overrides:o=[],shortcuts:r={},blocks:n=[],strictMatches:a=!1}=e?.keys||{};return be(o,t,a)&&(i.override=!0),be(n,t,a)&&(i.block=!0),be(Ei,t)&&(i.allowed=!0),i.action=Object.keys(r).find(s=>be(r[s],t,a))||null,i}function jo(t,e){if(e?.keys?.disabled||(t.key===" "||t.key==="Enter")&&t.currentTarget?.document?.activeElement?.tagName==="BUTTON"||t.currentTarget?.document?.activeElement?.matches("input,textarea,[contenteditable='true']"))return!1;let i=Di(t),{override:o,block:r,action:n,allowed:a}=Hi(i,e);return r?!1:(o&&t.preventDefault(),n||(a?t.key.toLowerCase():!1))}var _i=t=>` ${(R(t)?t:[t]).map(e=>`(${e})`).join(" or ")}`;function Uo(t){let e={};for(let i of Object.keys(t))e[i]=_i(t[i]);return e}function Wo(t){let e={ctrl:"Control",cmd:"Meta",space:"Space",plus:"+"};return t.toLowerCase().replace(/[()]/g,"").replace(/\bor\b/g," ").replace(/\w+/g,i=>e[i]||i).replace(/\s+/g," ").trim()}var zi=t=>t instanceof AbortSignal;function ye(t,e,...i){let o=zi(i[0])?i.shift():void 0;if(o?.aborted)return-1;if(!o)return window.setTimeout(t,e,...i);let r=window.setTimeout(()=>(o.removeEventListener("abort",n),typeof t=="string"?new Function(t):t(...i)),e),n=()=>window.clearTimeout(r);return o.addEventListener("abort",n,{once:!0}),r}function $o(t,e,...i){let o=zi(i[0])?i.shift():void 0;if(o?.aborted)return-1;let r=window.setInterval(t,e,...i);return o?.addEventListener("abort",()=>window.clearInterval(r),{once:!0}),r}function We(t,e){if(e?.aborted)return-1;if(!e)return window.requestAnimationFrame(t);let i=window.requestAnimationFrame(r=>(e.removeEventListener("abort",o),t(r))),o=()=>window.cancelAnimationFrame(i);return e.addEventListener("abort",o,{once:!0}),i}var Go=(t=250)=>new Promise(e=>ye(e,t));function zt(t,e={}){let i=0,{key:o,maxTimes:r=1}=typeof e=="string"?{key:e}:e,n=()=>JSON.parse(localStorage.getItem(St)||"{}"),a=d=>localStorage.setItem(St,JSON.stringify(d)),s=(...d)=>{if(!o)return i++<r?t(...d):void 0;let c=n(),l=c[o]||0;return l<r?(c[o]=l+1,a(c),t(...d)):void 0};return s.left=r-(s.count=i),s.reset=()=>(i=0,o&&(d=>(delete d[o],a(d)))(n())),s.block=()=>(i=r,o&&(d=>(d[o]=r,a(d)))(n())),s}var Ni=t=>zt(t),Ko=(t,e=Ne())=>zt(t,e);function Fi(t){Ni(()=>console.warn(t))()}function qo(t,e,i){Fi(i?`${e} is deprecated and will be removed in ${t}.0; use ${i} instead.`:`${e} is deprecated and will be removed in ${t}.0.`)}var Vi={mediaPlayer:"TMG",mediaType:"video",media:{title:"",artist:"",profile:"",album:"",artwork:[],chapterInfo:[],links:{title:"",artist:"",profile:""}},disabled:!1,lightState:{disabled:!1,controls:["meta","bigplaypause","fullscreenorientation"],preview:{usePoster:!0,time:2}},debug:!0,settings:{auto:{next:2e6},css:{},brightness:{min:0,max:150,value:100,skip:5},captions:{disabled:!1,allowVideoOverride:!0,font:{family:{value:"inherit",options:[{value:"inherit",display:"Default"},{value:"monospace",display:"Monospace"},{value:"sans-serif",display:"Sans Serif"},{value:"serif",display:"Serif"},{value:"cursive",display:"Cursive"},{value:"fantasy",display:"Fantasy"},{value:"system-ui",display:"System UI"},{value:"arial",display:"Arial"},{value:"verdana",display:"Verdana"},{value:"tahoma",display:"Tahoma"},{value:"times new roman",display:"Times New Roman"},{value:"georgia",display:"Georgia"},{value:"impact",display:"Impact"},{value:"comic sans ms",display:"Comic Sans MS"}]},size:{min:100,max:400,value:100,skip:100,options:[{value:25,display:"25%"},{value:50,display:"50%"},{value:100,display:"100%"},{value:150,display:"150%"},{value:200,display:"200%"},{value:300,display:"300%"},{value:400,display:"400%"}]},color:{value:"white",options:[{value:"white",display:"White"},{value:"yellow",display:"Yellow"},{value:"green",display:"Green"},{value:"cyan",display:"Cyan"},{value:"blue",display:"Blue"},{value:"magenta",display:"Magenta"},{value:"red",display:"Red"},{value:"black",display:"Black"}]},opacity:{value:1,options:[{value:.25,display:"25%"},{value:.5,display:"50%"},{value:.75,display:"75%"},{value:1,display:"100%"}]},weight:{value:"400",options:[{value:"100",display:"Thin"},{value:"200",display:"Extra Light"},{value:"300",display:"Light"},{value:"400",display:"Normal"},{value:"500",display:"Medium"},{value:"600",display:"Semi Bold"},{value:"700",display:"Bold"},{value:"800",display:"Extra Bold"},{value:"900",display:"Black"}]},variant:{value:"normal",options:[{value:"normal",display:"Normal"},{value:"small-caps",display:"Small Caps"},{value:"all-small-caps",display:"All Small Caps"}]}},background:{color:{value:"black",options:[{value:"white",display:"White"},{value:"yellow",display:"Yellow"},{value:"green",display:"Green"},{value:"cyan",display:"Cyan"},{value:"blue",display:"Blue"},{value:"magenta",display:"Magenta"},{value:"red",display:"Red"},{value:"black",display:"Black"}]},opacity:{value:.75,options:[{value:0,display:"0%"},{value:.25,display:"25%"},{value:.5,display:"50%"},{value:.75,display:"75%"},{value:1,display:"100%"}]}},window:{color:{value:"black",options:[{value:"white",display:"White"},{value:"yellow",display:"Yellow"},{value:"green",display:"Green"},{value:"cyan",display:"Cyan"},{value:"blue",display:"Blue"},{value:"magenta",display:"Magenta"},{value:"red",display:"Red"},{value:"black",display:"Black"}]},opacity:{value:0,options:[{value:0,display:"0%"},{value:.25,display:"25%"},{value:.5,display:"50%"},{value:.75,display:"75%"},{value:1,display:"100%"}]}},characterEdgeStyle:{value:"none",options:[{value:"none",display:"None"},{value:"drop-shadow",display:"Drop Shadow"},{value:"raised",display:"Raised"},{value:"depressed",display:"Depressed"},{value:"outline",display:"Outline"}]},textAlignment:{value:"left",options:[{value:"left",display:"Left"},{value:"center",display:"Center"},{value:"right",display:"Right"}]}},controlPanel:{profile:!0,title:!0,artist:!0,top:["expandminiplayer","spacer","meta","spacer","capture","fullscreenlock","fullscreenorientation","removeminiplayer"],center:["bigprev","bigplaypause","bignext"],bottom:{1:[],2:["spacer","timeline","spacer"],3:["prev","playpause","next","brightness","volume","timeandduration","spacer","captions","settings","objectfit","pictureinpicture","theater","fullscreen"]},buffer:"eclipse",timeline:{thumbIndicator:!0,seek:{relative:!K,cancel:{delta:15,timeout:2e3}}},progressBar:K,draggable:["","wrapper"]},errorMessages:{1:"The video playback was aborted :(",2:"The video failed due to a network error :(",3:"The video could not be decoded :(",4:"The video source is not supported :("},fastPlay:{playbackRate:2,key:!0,pointer:{type:"all",threshold:800,inset:20},reset:!0,rewind:!0},gesture:{click:K?"":"togglePlay",dblClick:K?"togglePlay":"toggleFullscreenMode",touch:{volume:!0,brightness:!0,timeline:!0,threshold:200,axesRatio:3,inset:20,sliderTimeout:1e3,xRatio:1,yRatio:1},wheel:{volume:{normal:!0,slider:!0},brightness:{normal:!0,slider:!0},timeline:{normal:!0,slider:!0},timeout:2e3,xRatio:12,yRatio:6}},keys:{disabled:!1,strictMatches:!1,overrides:[" ","ArrowDown","ArrowUp","ArrowLeft","ArrowRight","Home","End"],shortcuts:{prev:"Shift+p",next:"Shift+n",playPause:"k",mute:"m",dark:"d",skipBwd:"j",skipFwd:"l",stepFwd:".",stepBwd:",",volumeUp:"ArrowUp",volumeDown:"ArrowDown",brightnessUp:"y",brightnessDown:"h",playbackRateUp:">",playbackRateDown:"<",timeFormat:"z",timeMode:"q",capture:"s",objectFit:"a",pictureInPicture:"i",theater:"t",fullscreen:"f",captions:"c",captionsFontSizeUp:["+","="],captionsFontSizeDown:["-","_"],captionsFontFamily:"u",captionsFontWeight:"g",captionsFontVariant:"v",captionsFontOpacity:"o",captionsBackgroundOpacity:"b",captionsWindowOpacity:"w",captionsCharacterEdgeStyle:"e",captionsTextAlignment:"x",settings:"?"},mods:{disabled:!1,skip:{ctrl:60,shift:10},volume:{ctrl:50,shift:10},brightness:{ctrl:50,shift:10},playbackRate:{ctrl:1},captionsFontSize:{}},blocks:["Ctrl+Tab","Ctrl+Shift+Tab","Ctrl+PageUp","Ctrl+PageDown","Cmd+Option+ArrowRight","Cmd+Option+ArrowLeft","Ctrl+1","Ctrl+2","Ctrl+3","Ctrl+4","Ctrl+5","Ctrl+6","Ctrl+7","Ctrl+8","Ctrl+9","Cmd+1","Cmd+2","Cmd+3","Cmd+4","Cmd+5","Cmd+6","Cmd+7","Cmd+8","Cmd+9","Alt+ArrowLeft","Alt+ArrowRight","Cmd+ArrowLeft","Cmd+ArrowRight","Ctrl+r","Ctrl+Shift+r","F5","Shift+F5","Cmd+r","Cmd+Shift+r","Ctrl+h","Ctrl+j","Ctrl+d","Ctrl+f","Cmd+y","Cmd+Option+b","Cmd+d","Cmd+f","Ctrl+Shift+i","Ctrl+Shift+j","Ctrl+Shift+c","Ctrl+u","F12","Cmd+Option+i","Cmd+Option+j","Cmd+Option+c","Cmd+Option+u","Ctrl+=","Ctrl+-","Ctrl+0","Cmd+=","Cmd+-","Cmd+0","Ctrl+p","Ctrl+s","Ctrl+o","Cmd+p","Cmd+s","Cmd+o"]},locked:{disabled:!0},modes:{fullscreen:{disabled:!1,orientationLock:"auto",onRotate:90},theater:!K,pictureInPicture:{disabled:!1,floatingPlayer:{disabled:!1,width:500,height:281,disallowReturnToOpener:!1,preferInitialWindowPlacement:!1}},miniplayer:{disabled:!1,minWindowWidth:240}},notifiers:!0,noOverride:!1,overlay:{delay:3e3,behavior:"strict"},persist:{disabled:!1,throttle:5e3},playbackRate:{min:.25,max:8,skip:.25},playsInline:!0,time:{min:0,skip:10,previews:!1,mode:"elapsed",format:"digital",seekSync:!1},toasts:{disabled:!1,nextVideoPreview:{usePoster:!0,time:2,tease:!0},captureAutoClose:15e6,maxToasts:7,position:"bottom-left",hideProgressBar:!0,closeButton:!K,animation:"slide-up",dragToCloseDir:"x||y"},volume:{min:0,max:300,skip:5}}},ji={media:{title:"",chapterInfo:[],links:{title:""}},src:"",tracks:[],settings:{time:{start:0,previews:!1}}};var Yo={fullScreen:me(),pictureInPicture:ge()},S,B,I,H,we=class{constructor(e={}){ce(this,S,null);ce(this,B,!1);ce(this,I,null);ce(this,H,structuredClone(Vi));this.configure({...e,id:e.id??`${Ct("tmg_Controller_")}_${F.length+1}`})}get Controller(){return f(this,I)}get build(){return f(this,H)}set build(e){this.configure(e)}queryBuild(){return f(this,B)&&this.notice({error:"Already deployed the custom controls of your build configuration",tip:"Consider setting your build configuration before attaching your media element"}),!1}notice({error:e,warning:i,tip:o}){e&&console.error(`[TMG Player] ${e}`),i&&console.warn(`[TMG Player] ${i}`),o&&console.info(`[TMG Player] ${o}`)}configure(e){if(!this.queryBuild()||!E(e))return;U(this,H,X(f(this,H),ee(e)));let i=f(this,H).settings.keys;i&&(Object.keys(i.shortcuts||{}).forEach(o=>i.shortcuts[o]=Ue(i.shortcuts[o])),["blocks","overrides"].forEach(o=>i[o]=Ue(i[o])))}async attach(e){return Q(e)?this.notice({error:"An iterable argument cannot be attached to the TMG media player",tip:"Consider looping the iterable argument to instantiate a new 'tmg.Player' for each"}):f(this,B)?e:(e.tmgPlayer?.detach(),e.tmgPlayer=this,U(this,S,e),await this.fetchCustomOptions(),await this.deployController(),f(this,I)?.fire("tmgattached",f(this,I).payload),e)}detach(){if(!f(this,B))return;let e=f(this,I)?.destroy()??null;return f(this,I)&&F.splice(F.indexOf(f(this,I)),1),e?.classList.remove(`tmg-${e?.tagName.toLowerCase()}`,"tmg-media"),e&&(e.tmgcontrols=!1,e.tmgPlayer=null),U(this,B,!1),f(this,I)?.fire("tmgdetached"),U(this,I,U(this,S,null)),e}async fetchCustomOptions(){if(!f(this,S))return;f(this,S).getAttribute("tmg")?.includes(".json")&&await fetch(f(this,S).getAttribute("tmg")).then(o=>{if(!o.ok)throw new Error(`JSON file not found at provided URL!. Status: ${o.status}`);return o.json()}).then(o=>this.configure(o)).catch(({message:o})=>this.notice({error:o,tip:"A valid JSON file is required for parsing your build configuration"}));let e={};f(this,S).getAttributeNames().filter(o=>o.startsWith("tmg--"))?.forEach(o=>yt(e,o,f(this,S).getAttribute(o))),f(this,S)instanceof HTMLVideoElement&&f(this,S).poster&&this.configure({"media.artwork[0].src":f(this,S).poster}),this.configure(e)}async deployController(){if(f(this,B)||!f(this,S)?.isConnected)return;if(f(this,H).playlist?.[0]&&this.configure(X(ji,ee(f(this,H).playlist[0]))),!(f(this,S)instanceof HTMLVideoElement))return this.notice({error:`Could not deploy custom controls on the '${f(this,S).tagName}' element as it is not supported`,warning:"Only the 'VIDEO' element is currently supported",tip:""});f(this,S).tmgcontrols=U(this,B,!0),f(this,S).controls=!1,f(this,S).classList.add(`tmg-${f(this,S).tagName.toLowerCase()}`,"tmg-media");let e=f(this,H).settings;Object.keys(e.modes).forEach(i=>e.modes[i]=e.modes[i]&&(Yo[String(i)]??!0)?e.modes[i]:!1),await Promise.all([Oe(window?.TMG_VIDEO_CSS_SRC),Oe(window?.T007_TOAST_JS_SRC,"script",{module:!0})]),F.push(U(this,I,new Te(f(this,S),f(this,H))))}};S=new WeakMap,B=new WeakMap,I=new WeakMap,H=new WeakMap;var O=null,Ft=null,$i=!1,Nt=null,$e=new WeakSet,F=[],Gi=t=>{for(let e of t){if(e.type!=="attributes")continue;let i=e.target;e.attributeName==="tmgcontrols"?!$e.has(i)&&(i.tmgcontrols=i.hasAttribute("tmgcontrols")):e.attributeName?.startsWith("tmg")?i.hasAttribute(e.attributeName)&&i.tmgPlayer?.fetchCustomOptions():e.attributeName==="controls"&&i.hasAttribute("tmgcontrols")&&i.removeAttribute("controls")}},Xo=t=>{for(let e of t){for(let i of Array.from(e.addedNodes)){if(!(i instanceof HTMLElement))continue;(i.matches("video:not(.tmg-media)")?[i]:i.querySelectorAll("video:not(.tmg-media)")).forEach(r=>{q(r,Gi,{attributes:!0}),r.tmgcontrols=r.hasAttribute("tmgcontrols")})}for(let i of Array.from(e.removedNodes)){if(!(i instanceof HTMLElement))continue;(i.matches(".tmg-media")?[i]:i.querySelectorAll(".tmg-media")).forEach(r=>{!r.tmgPlayer?.Controller?.mutatingDOMM&&r.tmgPlayer?.detach()})}}};function Ui(t,e=!0){!$e.has(t)&&e&&$e.add(t)}function Wi(t){clearTimeout(Nt),Nt=setTimeout(()=>!(Nt=null)&&$e.delete(t))}function Jo(){typeof HTMLVideoElement>"u"||Object.defineProperty(HTMLVideoElement.prototype,"tmgcontrols",{get:function(){return this.hasAttribute("tmgcontrols")},set:async function(t){t?(Ui(this),await(this.tmgPlayer||new we).attach(this),this.setAttribute("tmgcontrols",""),Wi(this)):(Ui(this,this.hasAttribute("tmgcontrols")),this.removeAttribute("tmgcontrols"),this.tmgPlayer?.detach(),Wi(this))},enumerable:!0,configurable:!0})}function mn(){delete HTMLVideoElement.prototype.tmgcontrols}function Zo(){if(!O&&$i&&typeof window<"u"){O=new(window.AudioContext||window.webkitAudioContext);let t=Ft=O.createDynamicsCompressor();t.threshold.value=-1,t.knee.value=0,t.ratio.value=20,t.attack.value=.001,t.release.value=.05,F.forEach(e=>e.state.audioContextReady=!0)}else O?.state==="suspended"&&O.resume()}function gn(t){if(!O)return"unavailable";t.mediaElementSourceNode??(t.mediaElementSourceNode=O.createMediaElementSource(t)),t._tmgGainNode??(t._tmgGainNode=O.createGain()),t._tmgDynamicsCompressorNode??(t._tmgDynamicsCompressorNode=O.createDynamicsCompressor()),t.mediaElementSourceNode.connect(t._tmgDynamicsCompressorNode),t._tmgDynamicsCompressorNode.connect(t._tmgGainNode),t._tmgGainNode.connect(Ft),Ft.connect(O.destination)}function un(){return O}function vn(){Jo(),["pointerdown","keydown"].forEach(t=>document?.addEventListener(t,()=>($i=!0,Zo()),!0)),document?.querySelectorAll("video").forEach(t=>{q(t,Gi,{attributes:!0}),t.tmgcontrols=t.hasAttribute("tmgcontrols")}),q(document.documentElement,Xo,{childList:!0,subtree:!0}),window?.addEventListener("resize",()=>F.forEach(t=>t.state.dimensions.window={width:window.innerWidth,height:window.innerHeight})),screen?.orientation.addEventListener("change",t=>F.forEach(e=>e.state.screenOrientation=t?.target)),document?.addEventListener("visibilitychange",()=>F.forEach(t=>t.state.docVisibilityState=document.visibilityState)),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange"].forEach(t=>document?.addEventListener(t,()=>F.forEach(e=>e.state.docInFullscreen=le())))}function Qo(t,e){let i=t;for(;i&&i!==Object.prototype;){for(let o of Object.getOwnPropertyNames(i))o!=="constructor"&&typeof Object.getOwnPropertyDescriptor(i,o)?.value=="function"&&e(o,t);i=Object.getPrototypeOf(i)}}function Ge(t,e=Bt,i=!0){Qo(t,(o,r)=>{r[o]=e(i?r[o].bind(r):r[o])})}function Bt(t,e=i=>console.error(i)){return((...i)=>{try{let o=t(...i);return o instanceof Promise?o.catch(r=>e(r)):o}catch(o){e(o)}})}var jt=Symbol.for("S.I.A_REJECTABLE"),Ut=Symbol.for("S.I.A_INERTIA"),Vt=Symbol.for("S.I.A_TERMINATOR"),V={LISTENER:["capture","once","signal","immediate"],MEDIATOR:["lazy","signal","immediate"]},j=class j{constructor(e,i=!0){this.eventPhase=j.NONE;this._propagationStopped=!1;this._immediatePropagationStopped=!1;this._resolved="";this._rejected="";this.type=this.staticType=e.type,this.target=e.target,this.currentTarget=e.currentTarget,this.root=e.root,this.value=e.target.value,this.oldValue=e.target.oldValue,this.path=e.target.path,this.rejectable=e.rejectable,this.bubbles=i}get propagationStopped(){return this._propagationStopped}stopPropagation(){this._propagationStopped=!0}get immediatePropagationStopped(){return this._immediatePropagationStopped}stopImmediatePropagation(){this._propagationStopped=!0,this._immediatePropagationStopped=!0}get resolved(){return this._resolved}resolve(e){if(!this.rejectable)return console.warn(`Ignored resolve() call on a non-rejectable ${this.staticType} at "${this.path}"`);this.eventPhase!==j.CAPTURING_PHASE&&console.warn(`Resolving an intent on ${this.staticType} at "${this.path}" outside of the capture phase is unadvised.`),this.rejectable&&(this._resolved=e||`Could ${this.staticType} intended value at "${this.path}"`)}get rejected(){return this._rejected}reject(e){if(!this.rejectable)return console.warn(`Ignored reject() call on a non-rejectable ${this.staticType} at "${this.path}"`);this.eventPhase!==j.CAPTURING_PHASE&&console.warn(`Rejecting an intent on ${this.staticType} at "${this.path}" outside of the capture phase is unadvised.`),this.rejectable&&(this._rejected=e||`Couldn't ${this.staticType} intended value at "${this.path}"`)}composedPath(){return wt(this.path)}};j.NONE=0,j.CAPTURING_PHASE=1,j.AT_TARGET=2,j.BUBBLING_PHASE=3;var J=j,oe=class{constructor(e={},i={}){this.getters=new Map;this.setters=new Map;this.watchers=new Map;this.listenersRecord=new Map;this.batch=new Map;this.isBatching=!1;this.queue=null;this.proxyCache=new WeakMap;this.core=this._proxify(e)}_proxify(e,i="",o=!1){if(!(E(e)||R(e))||typeof e=="symbol"||typeof e=="function"||e[Ut]||e instanceof Map||e instanceof Set||e instanceof WeakMap||e instanceof Promise||e instanceof Date||e instanceof RegExp||e instanceof Element||e instanceof EventTarget)return e;if(this.proxyCache.has(e))return this.proxyCache.get(e);o||(o=Ki(e));let r=new Proxy(e,{get:(n,a,s)=>{let d=String(a),c=i?i+"."+d:d,l={path:c,value:Reflect.get(n,a,s),key:d,object:n},m={type:"get",target:l,currentTarget:l,root:this.core,rejectable:o};return this.getters.has(c)&&(l.value=this._mediate(c,m,!1)),this._proxify(l.value,c,o)},set:(n,a,s,d)=>{let c=String(a),l=i?i+"."+c:c,m={path:l,value:s,oldValue:Reflect.get(n,a,d),key:c,object:n},v={type:"set",target:m,currentTarget:m,root:this.core,rejectable:o};return this.setters.has(l)&&(m.value=this._mediate(l,v,!0)),m.value===Vt||Reflect.set(n,a,m.value,d)&&(this._notify(l,v),!0)},deleteProperty:(n,a)=>{let s=String(a),d=i?i+"."+s:s,c={path:d,oldValue:Reflect.get(n,a),key:s,object:n},l={type:"delete",target:c,currentTarget:c,root:this.core,rejectable:o};return this.setters.has(d)&&(c.value=this._mediate(d,l,!0)),c.value===Vt||Reflect.deleteProperty(n,a)&&(this._notify(d,l),!0)}});return this.proxyCache.set(e,r),r}_mediate(e,i,o){let r=!1,n=i.target.value,a=(o?this.setters:this.getters)?.get(e);if(!a?.length)return n;for(let s=o?0:a.length-1;s!==(o?a.length:-1);s+=o?1:-1){o&&(r||(r=n===Vt)),a[s].once&&(a.splice(s--,1),!a.length&&(o?this.setters:this.getters)?.delete(e));let d=o?a[s].cb(n,r,i):a[s].cb(n,i);r||(n=d)}return n}_notify(e,i){let o=this.watchers.get(e);for(let r=0;r<(o?.length??0);r++)o[r].once&&(o.splice(r--,1),!o.length&&this.watchers.delete(e)),o[r].cb(i.target.value,i);this._schedule(e,i)}_schedule(e,i){this.batch.set(e,i),this._initBatching()}_initBatching(){this.isBatching||(this.isBatching=!0,queueMicrotask(()=>this._flush()))}_flush(){if(this.tick(this.batch.keys()),this.batch.clear(),this.isBatching=!1,this.queue?.size)for(let e of this.queue)e();this.queue?.clear()}_wave(e,i){let o=new J(i),r=Tt(this.core,e);o.eventPhase=J.CAPTURING_PHASE;for(let n=0;n<=r.length-2&&!o.propagationStopped;n++)this._fire(r[n],o,!0);if(!o.propagationStopped&&(o.eventPhase=J.AT_TARGET,this._fire(r[r.length-1],o,!0),!o.immediatePropagationStopped&&this._fire(r[r.length-1],o,!1),!!o.bubbles)){o.eventPhase=J.BUBBLING_PHASE;for(let n=r.length-2;n>=0&&!o.propagationStopped;n--)this._fire(r[n],o,!1);o.rejected}}_fire([e,i,o],r,n){let a=this.listenersRecord.get(e);if(a?.length){r.type=e!==r.target.path?"update":r.type,r.currentTarget={path:e,value:o,oldValue:r.type!=="update"?r.target.oldValue:void 0,key:r.type!=="update"?e:e.slice(e.lastIndexOf(".")+1)||"",object:i};for(let s=0;s<a.length&&!r.immediatePropagationStopped;s++)a[s].capture===n&&(a[s].once&&(a.splice(s--,1),!a.length&&this.listenersRecord.delete(e)),a[s].cb(r));r.type=r.staticType}}_getContext(e){let i=e.lastIndexOf("."),o=e==="*"?this.core:pe(this.core,e),r=i===-1?this.core:pe(this.core,e.slice(0,i));return{path:e,value:o,key:e.slice(i+1)||"",object:r}}_bind(e,i){return i?.aborted?e.clup():i?.addEventListener("abort",e.clup,{once:!0}),i?.aborted||(e.sclup=()=>i?.removeEventListener("abort",e.clup)),e.clup}tick(e){if(!e)return this._flush();if(typeof e=="string"){let i=this.batch.get(e);i&&(this._wave(e,i),this.batch.delete(e))}else for(let i of e){let o=this.batch.get(i);o&&(this._wave(i,o),this.batch.delete(i))}}stall(e){this.queue??(this.queue=new Set),this.queue.add(e),this._initBatching()}nostall(e){return this.queue?.delete(e)}get(e,i,o){let r=this.getters.get(e),{lazy:n,once:a,signal:s,immediate:d}=D(o,V.MEDIATOR),c={};for(let m=0;m<(r?.length??0);m++)if(r[m].cb===i){c=r[m];break}if(c)return c.clup;c={cb:i,once:a,clup:()=>(n&&this.nostall(l),this.noget(e,i))},d&&pe(this.core,e);let l=()=>(this.getters.get(e)??this.getters.set(e,[]).get(e)).push(c);return n?this.stall(l):l(),this._bind(c,s)}gonce(e,i,o){return this.get(e,i,{...D(o,V.MEDIATOR),once:!0})}noget(e,i){let o=this.getters.get(e);if(o){for(let r=0;r<o.length;r++)if(o[r].cb===i)return o[r].sclup?.(),o.splice(r--,1),!o.length&&this.getters.delete(e),!0;return!1}}set(e,i,o){let r=this.setters.get(e),{lazy:n,once:a,signal:s,immediate:d}=D(o,V.MEDIATOR),c={};for(let m=0;m<(r?.length??0);m++)if(r[m].cb===i){c=r[m];break}if(c)return c.clup;c={cb:i,once:a,clup:()=>(n&&this.nostall(l),this.noset(e,i))},d&&Y(this.core,e,this._getContext(e).value);let l=()=>(this.setters.get(e)??this.setters.set(e,[]).get(e)).push(c);return n?this.stall(l):l(),this._bind(c,s)}sonce(e,i,o){return this.set(e,i,{...D(o,V.MEDIATOR),once:!0})}noset(e,i){let o=this.setters.get(e);if(o){for(let r=0;r<o.length;r++)if(o[r].cb===i)return o[r].sclup?.(),o.splice(r--,1),!o.length&&this.setters.delete(e),!0;return!1}}watch(e,i,o){let r=this.watchers.get(e),{lazy:n,once:a,signal:s,immediate:d}=D(o,V.MEDIATOR),c={};for(let m=0;m<(r?.length??0);m++)if(r[m].cb===i){c=r[m];break}if(c)return c.clup;if(c={cb:i,once:a,clup:()=>(n&&this.nostall(l),this.nowatch(e,i))},d){let m=this._getContext(e);i(m.value,{type:"init",target:m,currentTarget:m,root:this.core,rejectable:!1})}let l=()=>(r??this.watchers.set(e,[]).get(e)).push(c);return n?this.stall(l):l(),this._bind(c,s)}wonce(e,i,o){return this.watch(e,i,{...D(o,V.MEDIATOR),once:!0})}nowatch(e,i){let o=this.watchers.get(e);if(o){for(let r=0;r<o.length;r++)if(o[r].cb===i)return o[r].sclup?.(),o.splice(r--,1),!o.length&&this.watchers.delete(e),!0;return!1}}on(e,i,o){let r=this.listenersRecord.get(e),{capture:n,once:a,signal:s,immediate:d}=D(o,V.LISTENER),c={};for(let l=0;l<(r?.length??0);l++)if(r[l].cb===i&&n===r[l].capture){c=r[l];break}if(c)return c.clup;if(c={cb:i,capture:n,once:a,clup:()=>this.off(e,i,o)},d){let l=this._getContext(e);i(new J({type:"init",target:l,currentTarget:l,root:this.core,rejectable:!1},!1))}return(r??this.listenersRecord.set(e,[]).get(e)).push(c),this._bind(c,s)}once(e,i,o){return this.on(e,i,{...D(o,V.LISTENER),once:!0})}off(e,i,o){let r=this.listenersRecord.get(e);if(!r)return;let{capture:n}=D(o,V.LISTENER);for(let a=0;a<r.length;a++)if(r[a].cb===i&&r[a].capture===n)return r[a].sclup?.(),r.splice(a--,1),!r.length&&this.listenersRecord.delete(e),!0;return!1}cascade({type:e,currentTarget:{path:i,value:o,oldValue:r}},n=!0){if(!E(o)||!E(r)||e!=="set"&&e!=="delete")return;let a=n?X(r,o):o;for(let s of Object.keys(a))Y(this.core,i+"."+s,a[s])}snapshot(){return ze(this.core)}reset(){this.getters.clear(),this.setters.clear(),this.watchers.clear(),this.listenersRecord.clear(),this.queue?.clear(),this.batch.clear(),this.isBatching=!1,this.proxyCache=new WeakMap}destroy(){this.reset(),re(this)}};var er=["tick","stall","nostall","get","gonce","noget","set","sonce","noset","watch","wonce","nowatch","on","once","off","cascade","snapshot","reset","destroy"];function ne(t,e){let i={},o=t instanceof oe?t:new oe(t,e);for(let r of er)i[r]={value:o[r].bind(o),writable:!1,enumerable:!1,configurable:!0};return Object.defineProperties(o.core,i),o.core}function qi(t){return t[Ut]=!0,t}function Yi(t){return t[jt]=!0,t}function Ki(t){return!!t[jt]}function re(t){let e=t;for(;e&&e!==Object.prototype;){for(let i of Object.getOwnPropertyNames(e)){if(i==="constructor")continue;let o=Object.getOwnPropertyDescriptor(e,i);typeof o?.value!="function"&&(o?.get||o?.set||(e[i]=null))}e=Object.getPrototypeOf(e)}}var xe=class{constructor(){this.items=[]}register(e,i,o){return this.unregister(e),this.items.push({name:e,value:i,options:o}),this}unregister(e){return this.items=this.items.filter(i=>i.name!==e),this}get(e){return this.items.find(i=>i.name===e)?.value}getAll(e){return e?this.items.sort((i,o)=>{let r=e.indexOf(i.name),n=e.indexOf(o.name);return r===-1&&n===-1?0:r===-1?1:n===-1?-1:r-n}).map(i=>i.value):this.items.map(i=>i.value)}},Ke=class extends xe{registerPriority(e,i,o){return this.unregister(e),this.items.unshift({name:e,value:i,options:o}),this}registerBefore(e,i,o,r){let n=this.items.findIndex(a=>a.name===e);return n===-1?(console.warn(`[TMG Registry] Cannot register '${i}' before '${e}': Target '${e}' not found.`),this):(this.unregister(i),this.items.splice(n,0,{name:i,value:o,options:r}),this)}registerAfter(e,i,o,r){let n=this.items.findIndex(a=>a.name===e);return n===-1?(console.warn(`[TMG Registry] Cannot register '${i}' after '${e}': Target '${e}' not found.`),this):(this.unregister(i),this.items.splice(n+1,0,{name:i,value:o,options:r}),this)}},Ye=class Ye extends xe{static get(e){return this.instance.get(e)||"<svg></svg>"}static register(e,i){this.instance.register(e,i)}static registerAll(e){Object.entries(e).forEach(([i,o])=>this.instance.register(i,o))}};Ye.instance=new Ye;var Xi=Ye,Xe=class Xe extends Ke{static get(e){return this.instance.get(e)}static register(e){this.instance.register(e.techName,e)}static unregister(e){this.instance.unregister(e)}static registerBefore(e,i){this.instance.registerBefore(e,i.techName,i)}static registerAfter(e,i){this.instance.registerAfter(e,i.techName,i)}static pick(e,i){return this.instance.getAll(i).find(o=>o.canPlaySource(e))||null}};Xe.instance=new Xe;var ke=Xe,Je=class Je extends Ke{static get(e){return this.instance.get(e)}static register(e,i){this.instance.register(e.plugName,e,i)}static unregister(e){this.instance.unregister(e)}static registerBefore(e,i){this.instance.registerBefore(e,i.plugName,i)}static registerAfter(e,i){this.instance.registerAfter(e,i.plugName,i)}static getOrdered(){return this.instance.getAll()}};Je.instance=new Je;var qe=Je,Ze=class Ze extends xe{static get(e){return this.instance.get(e)}static register(e){this.instance.register(e.componentName,e)}static init(e,i,o={}){let r=this.instance.get(e);if(!r)return null;let n=new r(i,o),a=n.create();return n.setup(),{element:a,instance:n}}static getAll(){return this.instance.getAll()}};Ze.instance=new Ze;var Ji=Ze;var Qe=class{constructor(e,i,o){this.ac=new AbortController;this.signal=this.ac.signal;Ge(this,e.guard,!0),this.signal=AbortSignal.any([this.signal,e.signal]),this.ctl=e,this.guard=e.guard,this.config=i,o&&(this.state=E(o)?ne(o):o)}setup(){this.onSetup()}destroy(){!this.signal.aborted&&this.ac.abort("[TMG Controllable] Instance is being destroyed"),this.onDestroy(),this.state?.destroy?.(),this.config?.destroy?.(),re(this)}onDestroy(){}};var Ee=class extends Qe{get name(){return this.constructor.techName}get features(){return this.constructor.features}get el(){return this.element}constructor(e,i){super(e,i),this.element=i.element}onSetup(){this.mount(),this.ctl.state.readyState?this.wire():this.ctl.state.wonce("readyState",this.wire,{signal:this.signal})}onDestroy(){this.unmount()}static canPlaySource(e){return!1}mount(){this.element&&this.element!==this.config.element&&this.config.element.replaceWith(this.element)}unmount(){this.element&&this.config.element!==this.element&&this.element.replaceWith(this.config.element)}wire(){this.wireSrc(),this.wireCurrentTime(),this.wireDuration(),this.wirePaused(),this.wireEnded(),this.wireFeatures()}wireFeatures(){let e=this.features;e.volume&&this.wireVolume?.(),e.muted&&this.wireMuted?.(),e.playbackRate&&this.wirePlaybackRate?.(),e.pictureInPicture&&this.wirePictureInPicture?.(),e.fullscreen&&this.wireFullscreen?.(),e.airplay&&this.wireAirplay?.(),e.chromecast&&this.wireChromecast?.(),e.xrSession&&this.wireXRSession?.(),e.xrMode&&this.wireXRMode?.(),e.xrReferenceSpace&&this.wireXRReferenceSpace?.(),e.projection&&this.wireProjection?.(),e.stereoMode&&this.wireStereoMode?.(),e.fieldOfView&&this.wireFieldOfView?.(),e.aspectRatio&&this.wireAspectRatio?.(),e.panningX&&this.wirePanningX?.(),e.panningY&&this.wirePanningY?.(),e.panningZ&&this.wirePanningZ?.(),e.xrInputSource&&this.wireXRInputSource?.(),e.currentTextTrack&&this.wireCurrentTextTrack?.(),e.currentAudioTrack&&this.wireCurrentAudioTrack?.(),e.currentVideoTrack&&this.wireCurrentVideoTrack?.(),e.autoLevel&&this.wireAutoLevel?.(),e.currentLevel&&this.wireCurrentLevel?.(),e.poster&&this.wirePoster?.(),e.autoplay&&this.wireAutoplay?.(),e.loop&&this.wireLoop?.(),e.preload&&this.wirePreload?.(),e.playsInline&&this.wirePlaysInline?.(),e.crossOrigin&&this.wireCrossOrigin?.(),e.controls&&this.wireControls?.(),e.controlsList&&this.wireControlsList?.(),e.disablePictureInPicture&&this.wireDisablePictureInPicture?.(),e.sources&&this.wireSources?.(),e.tracks&&this.wireTracks?.()}};Ee.features={};var k=class k extends Ee{static canPlaySource(e){return!0}constructor(e,i){super(e,i),this.eOpts={EL:{signal:this.signal},REACTOR:{capture:!0,signal:this.signal,immediate:this.ctl.payload.initialized}}}wireSrc(){this.el.addEventListener("loadstart",this.handleLoadStartState,this.eOpts.EL),this.config.on("intent.src",this.handleSrcIntent,this.eOpts.REACTOR)}wireCurrentTime(){this.el.addEventListener("timeupdate",this.handleTimeUpdateState,this.eOpts.EL),this.el.addEventListener("seeking",this.handleSeekingState,this.eOpts.EL),this.el.addEventListener("seeked",this.handleSeekedState,this.eOpts.EL),this.config.on("intent.currentTime",this.handleCurrentTimeIntent,this.eOpts.REACTOR)}wireDuration(){this.el.addEventListener("durationchange",this.handleDurationChangeState,this.eOpts.EL)}wirePaused(){this.el.addEventListener("play",this.handlePlayState,this.eOpts.EL),this.el.addEventListener("pause",this.handlePauseState,this.eOpts.EL),this.config.on("intent.paused",this.handlePausedIntent,this.eOpts.REACTOR)}wireEnded(){this.el.addEventListener("ended",this.handleEndedState,this.eOpts.EL)}wireFeatures(){super.wireFeatures(),this.wireHTMLState(),["loadstart","progress","suspend","abort","emptied","stalled"].forEach(i=>this.el.addEventListener(i,this.handleLoadStatus,this.eOpts.REACTOR)),this.el.addEventListener("error",this.handleErrorStatus,this.eOpts.REACTOR),this.el.addEventListener("waiting",this.handleWaitingStatus,this.eOpts.REACTOR),this.el.addEventListener("playing",this.handlePlayingStatus,this.eOpts.REACTOR),this.el.addEventListener("stalled",this.handleStalledStatus,this.eOpts.REACTOR),this.el.addEventListener("loadedmetadata",this.handleLoadedMetadataStatus,this.eOpts.REACTOR),this.el.addEventListener("loadeddata",this.handleLoadedDataStatus,this.eOpts.REACTOR),this.el.addEventListener("canplay",this.handleCanPlayStatus,this.eOpts.REACTOR),this.el.addEventListener("canplaythrough",this.handleCanPlayThroughStatus,this.eOpts.REACTOR),this.features.textTracks&&this.wireTracksStatus("textTracks"),this.features.videoTracks&&this.wireTracksStatus("videoTracks"),this.features.audioTracks&&this.wireTracksStatus("audioTracks"),this.features.activeCue&&this.wireActiveCueStatus?.()}wireVolume(){this.el.addEventListener("volumechange",this.handleVolumeChangeState,this.eOpts.EL),this.config.on("intent.volume",this.handleVolumeIntent,this.eOpts.REACTOR)}wireMuted(){this.config.on("intent.muted",this.handleMutedIntent,this.eOpts.REACTOR)}wirePlaybackRate(){this.el.addEventListener("ratechange",this.handleRateChangeState,this.eOpts.EL),this.config.on("intent.playbackRate",this.handlePlaybackRateIntent,this.eOpts.REACTOR)}wirePictureInPicture(){this.el.addEventListener("enterpictureinpicture",this.handleEnterPiPState,this.eOpts.EL),this.el.addEventListener("leavepictureinpicture",this.handleLeavePiPState,this.eOpts.EL),this.config.on("intent.pictureInPicture",this.handlePiPIntent,this.eOpts.REACTOR)}wireFullscreen(){this.ctl.state.watch("docInFullscreen",this.handleFullscreenChangeState,this.eOpts.REACTOR),this.el.addEventListener("webkitbeginfullscreen",this.handleWebkitBeginFullscreenState,this.eOpts.REACTOR),this.el.addEventListener("webkitendfullscreen",this.handleWebkitEndFullscreenState,this.eOpts.REACTOR),this.config.on("intent.fullscreen",this.handleFullscreenIntent,this.eOpts.REACTOR)}wireCurrentTrack(e){this.config.set(`intent.current${e}Track`,o=>$(this.el,e,o),{signal:this.signal});let i=this.el[`${e.toLowerCase()}Tracks`];i?.addEventListener("change",()=>this.handleCurrentTrackState(e,i),this.eOpts.REACTOR),this.config.on(`intent.current${e}Track`,o=>this.handleCurrentTrackIntent(o,e),this.eOpts.REACTOR)}wireCurrentAudioTrack(){this.wireCurrentTrack("Audio")}wireCurrentVideoTrack(){this.wireCurrentTrack("Video")}wireCurrentTextTrack(){this.wireCurrentTrack("Text")}wireHTMLState(){this.signal.addEventListener("abort",q(this.el,this.handleHTMLState,{attributes:!0,childList:!0,subtree:!1}),{once:!0})}bindAttr(e,i=!1){this.config.on(`intent.${e}`,o=>this.handleAttributeIntent(o,e,i),this.eOpts.REACTOR)}wirePoster(){this.bindAttr("poster")}wireAutoplay(){this.bindAttr("autoplay",!0)}wireLoop(){this.bindAttr("loop",!0)}wirePreload(){this.bindAttr("preload")}wirePlaysInline(){this.bindAttr("playsInline",!0)}wireCrossOrigin(){this.bindAttr("crossOrigin")}wireControls(){this.bindAttr("controls",!0)}wireControlsList(){this.bindAttr("controlsList")}wireDisablePictureInPicture(){this.bindAttr("disablePictureInPicture",!0)}wireSources(){this.config.on("intent.sources",this.handleSourcesIntent,this.eOpts.REACTOR)}wireTracks(){this.config.on("intent.tracks",this.handleTracksIntent,this.eOpts.REACTOR)}wireTracksStatus(e){let i=this.el[e];i&&["addtrack","removetrack"].forEach(o=>i.addEventListener(o,()=>this.handleTracksStatus(e,i),this.eOpts.REACTOR))}wireActiveCueStatus(){this.config.on("state.currentTextTrack",({value:e,oldValue:i})=>{i!==-1&&this.el.textTracks[i]?.removeEventListener("cuechange",this.handleActiveCueStatus,this.eOpts.EL),this.el.textTracks[e]?.addEventListener("cuechange",this.handleActiveCueStatus,this.eOpts.EL),this.handleActiveCueStatus({target:this.el.textTracks[e]})},this.eOpts.REACTOR)}wireDefaultMuted(){this.config.on("settings.defaultMuted",this.handleDefaultMutedSetting,this.eOpts.REACTOR)}wireDefaultPlaybackRate(){this.config.on("settings.defaultPlaybackRate",this.handleDefaultPlaybackRateSetting,this.eOpts.REACTOR)}handleLoadStartState(){let{state:e,status:i}=this.config;i.error=null,i.waiting=!0,i.ended=i.stalled=i.loadedData=i.loadedMetadata=i.canPlay=i.canPlayThrough=!1,i.duration=NaN,i.buffered=this.el.buffered,i.seekable=this.el.seekable,L(this.el.src,e.src)||(e.src=this.el.src),this.config.state.paused=this.el.paused}handleTimeUpdateState(){this.config.state.currentTime=this.el.currentTime}handleSeekingState(){this.config.status.seeking=!0}handleSeekedState(){this.config.status.seeking=!1}handleDurationChangeState(){this.config.status.duration=this.el.duration}handlePlayState(){this.config.state.paused=!1}handlePauseState(){this.config.state.paused=!0}handleEndedState(){this.config.status.ended=this.config.state.paused=!0}handleSrcIntent(e){e.resolved||L(this.el.src,e.value)||(this.el.src=e.value??"",this.el.load(),e.resolve(k.techName))}handleCurrentTimeIntent(e){e.resolved||(this.el.currentTime=e.value,e.resolve(k.techName))}handlePausedIntent(e){if(e.resolved)return;let i=e.value?this.el.pause():this.el.play();i?.then?i.then(()=>e.resolve(k.techName)).catch(o=>e.reject(o.message)):e.resolve(k.techName)}handleVolumeChangeState(){this.config.state.volume=this.el.volume,this.config.state.muted=this.el.muted}handleRateChangeState(){this.config.state.playbackRate=this.el.playbackRate}handleEnterPiPState(){this.config.state.pictureInPicture=!0}handleLeavePiPState(){this.config.state.pictureInPicture=!1}handleFullscreenChangeState(e){this.config.state.fullscreen=e?Z()===this.el:!1}handleWebkitBeginFullscreenState(){this.config.state.fullscreen=!0}handleWebkitEndFullscreenState(){this.config.state.fullscreen=!1}handleCurrentTrackState(e,i){this.config.state[`current${e}Track`]=$(this.el,e,"active")}handleHTMLState(e){e.forEach(i=>{let{state:o,settings:r}=this.config;if(i.type==="attributes"&&i.attributeName)switch(i.attributeName){case"poster":return o.poster=this.el.poster;case"autoplay":return o.autoplay=this.el.autoplay;case"loop":return o.loop=this.el.loop;case"preload":return o.preload=this.el.preload;case"crossorigin":return o.crossOrigin=this.el.crossOrigin;case"controls":return o.controls=this.el.controls;case"playsinline":case"webkit-playsinline":return o.playsInline=this.el.playsInline;case"controlslist":return o.controlsList=this.el.getAttribute("controlslist")||"";case"disablepictureinpicture":return o.disablePictureInPicture=this.el.disablePictureInPicture;case"muted":return o.muted=this.el.muted,r.defaultMuted=this.el.defaultMuted}else if(i.type==="childList"){let n=[...i.addedNodes,...i.removedNodes];n.some(({nodeName:a})=>a==="SOURCE")&&(o.sources=He(this.el)),n.some(({nodeName:a})=>a==="TRACK")&&(o.tracks=_e(this.el))}})}handleVolumeIntent(e){e.resolved||(this.el.volume=e.value,e.resolve(k.techName))}handleMutedIntent(e){e.resolved||(this.el.muted=e.value,e.resolve(k.techName))}handlePlaybackRateIntent(e){e.resolved||(this.el.playbackRate=e.value,e.resolve(k.techName))}handlePiPIntent(e){e.resolved||(e.value?this.el.requestPictureInPicture():document.exitPictureInPicture(),e.resolve(k.techName))}handleFullscreenIntent(e){e.resolved||(e.value?nt(this.el):at(this.el),e.resolve(k.techName))}handleCurrentTrackIntent(e,i){e.resolved||(ft(this.el,i,e.value,!1),e.resolve(k.techName))}handleAttributeIntent(e,i,o){e.resolved||(this.el[i]=o?!!e.value:e.value??"",i==="playsInline"&&this.el.toggleAttribute("webkit-playsinline",e.value),e.resolve(k.techName))}handleSourcesIntent(e){e.resolved||(ve(this.config.state.sources,e.value)||(gt(this.el),mt(e.value,this.el)),e.resolve(k.techName))}handleTracksIntent(e){e.resolved||(ht(this.config.state.tracks,e.value)||(pt(this.el),vt(e.value,this.el)),e.resolve(k.techName))}handleLoadStatus(){this.config.status.readyState=this.el.readyState,this.config.status.networkState=this.el.networkState,this.config.status.buffered=this.el.buffered,this.config.status.seekable=this.el.seekable}handleLoadedMetadataStatus(){this.config.status.loadedMetadata=!0,this.config.status.videoWidth=this.el.videoWidth,this.config.status.videoHeight=this.el.videoHeight,this.config.status.duration=this.el.duration,this.handleLoadStatus()}handleLoadedDataStatus(){this.config.status.loadedData=!0}handleCanPlayStatus(){this.config.status.canPlay=!0}handleCanPlayThroughStatus(){this.config.status.canPlayThrough=!0}handleStalledStatus(){this.config.status.stalled=!0}handleWaitingStatus(){this.config.status.waiting=!0}handlePlayingStatus(){this.config.status.waiting=this.config.status.stalled=!1}handleErrorStatus(){this.config.status.error=this.el.error,this.config.status.waiting=!1}handleTracksStatus(e,i){this.config.status[e]=i}handleActiveCueStatus(e){let i=e?.target;this.config.status.activeCue=i?.activeCues?.[0]||null}handleDefaultMutedSetting(e){this.el.defaultMuted=e.value}handleDefaultPlaybackRateSetting(e){this.el.defaultPlaybackRate=e.value}static canControlVolume(){if(!this.DUMMY)return!1;try{let e=this.DUMMY.volume;this.DUMMY.volume=.5;let i=this.DUMMY.volume===.5;return this.DUMMY.volume=e,i}catch{return!1}}static canMuteVolume(){return!!this.DUMMY&&"muted"in this.DUMMY}static canControlRate(){if(!this.DUMMY)return!1;try{let e=this.DUMMY.playbackRate;this.DUMMY.playbackRate=.5;let i=this.DUMMY.playbackRate===.5;return this.DUMMY.playbackRate=e,i}catch{return!1}}static supportsTextTracks(){return!!this.DUMMY&&"textTracks"in this.DUMMY}static supportsVideoTracks(){return!!this.DUMMY&&"videoTracks"in this.DUMMY}static supportsAudioTracks(){return!!this.DUMMY&&"audioTracks"in this.DUMMY}};k.techName="html5",k.features={volume:k.canControlVolume(),muted:k.canMuteVolume(),playbackRate:k.canControlRate(),pictureInPicture:ge(),fullscreen:me(),poster:!0,autoplay:!0,loop:!0,playsInline:!0,crossOrigin:!0,controls:!0,controlsList:!0,disablePictureInPicture:!0,preload:!0,textTracks:k.supportsTextTracks(),videoTracks:k.supportsVideoTracks(),audioTracks:k.supportsAudioTracks(),activeCue:k.supportsTextTracks(),readyState:!0,networkState:!0,error:!0,waiting:!0,stalled:!0,seeking:!0,buffered:!0,seekable:!0,videoWidth:!0,videoHeight:!0,loadedMetadata:!0,canPlay:!0,canPlayThrough:!0,defaultMuted:!0,defaultPlaybackRate:!0},k.DUMMY=M("video");var Se=k;var Te=class{constructor(e,i){this.plugs=new Map;this.ac=new AbortController;this.signal=this.ac.signal;this.payloadCache={instance:this};this.videoContainer=M("div");this.pseudoVideo=M("video");this.pseudoVideoContainer=M("div");this.DOM={};this.throttleMap=new Map;this.rafLoopMap=new Map;this.rafLoopFnMap=new Map;this.mutatingDOMM=!0;this.guard=(e,{silent:i=!1}={})=>Bt(e,o=>this.log(o,"error","swallow"));this.setReadyState(0,e),Ge(this,this.guard,!0),this.id=i.id,this.buildCache={...i},this.config=ne(i),this.state=ne({readyState:0,audioContextReady:!!O,mediaIntersecting:!0,mediaParentIntersecting:!0,dimensions:{container:{width:0,height:0,tier:"x"},pseudoContainer:{width:0,height:0,tier:"x"},window:{width:window.innerWidth,height:window.innerHeight}},screenOrientation:window.screen.orientation,docVisibilityState:document.visibilityState,docInFullscreen:le()});let o=dt(e);this.media=ne({tech:{},element:e,intent:Yi(o.intent),state:o.state,status:o.status,settings:o.settings}),this.media.set("tech",r=>qi(r),{signal:this.signal}),this.boot()}getPlug(e){return this.plugs.get(e)}boot(){this.connectPlugs(),this.wireTechOverseer(),this.wireRuntimeState(),this.setReadyState(),this.media.state.paused?this.media.wonce("state.paused",()=>this.setReadyState(),{signal:this.signal}):this.setReadyState(),ye(()=>this.mutatingDOMM=!1,0,this.signal)}connectPlugs(){for(let e of qe.getOrdered()){let i=e.plugName,o=i in this.config?this.config[i]:this.config.settings[i];this.plugin(e,o)}}plugin(e,i){if(this.config.noPlugList.includes(e.plugName)&&!e.isCore)return;this.getPlug(e.plugName)?.destroy();let o=new e(this,i);this.plugs.set(e.plugName,(o.setup(),o))}wireTechOverseer(){let e={capture:!0,signal:this.signal};this.media.on("intent.src",()=>this.overseeTech(),{...e,immediate:!0}),this.media.on("intent.sources",()=>this.overseeTech(),e),this.media.on("state.src",()=>this.overseeTech("state"),e),this.media.on("state.sources",()=>this.overseeTech("intent"),e),this.media.on("settings.srcObject",()=>this.overseeTech(),e)}overseeTech(e="intent"){let{src:i,sources:o}=e==="intent"?this.media.intent:this.media.state,{src:r,sources:n}=e==="intent"?this.media.state:this.media.intent;if(this.media.settings.srcObject)return this.switchTech(Se);let a=null,s=null;if(L(i,r)||(a=ke.pick(i,this.config.settings.techOrder),a&&(s=i)),!a&&!ve(o,n)){for(let d of o)if(a=ke.pick(d.src,this.config.settings.techOrder),a){s=d.src;break}}this.switchTech(a||Se),s!==i&&!a?.features?.sources&&(this.media.intent.src=s)}switchTech(e,i=this.media){this.media.tech&&e===this.media.tech.constructor||(this.media.tech&&(this.media.tech.destroy(),this.log(`Switching tech from '${this.media.tech.name}' -> '${e.name}'`)),(this.media.tech=new e(this,i)).setup())}wireRuntimeState(){let e=[];e.push(Ae(this.videoContainer.parentElement,i=>this.state.mediaParentIntersecting=i.isIntersecting)),e.push(Ae(this.videoContainer,i=>this.state.mediaIntersecting=i.isIntersecting)),e.push(Ie(this.videoContainer,()=>this.state.dimensions.container=De(this.videoContainer))),e.push(Ie(this.pseudoVideoContainer,()=>this.state.dimensions.pseudoContainer=De(this.pseudoVideoContainer))),this.signal.addEventListener("abort",()=>e.forEach(i=>i()),{once:!0})}get payload(){let e=this.state?.readyState??0;return this.payloadCache.readyState=e,this.payloadCache.initialized=e>0,this.payloadCache.destroyed=e<0,this.payloadCache}setReadyState(e,i){let o=this.state?z(0,e??this.state.readyState+1,3):0;this.state&&(this.state.readyState=o),this.fire("tmgreadystatechange",this.payload,i)}log(e,i="log",o){if(this.config.debug)switch(i){case"error":return o==="swallow"?console.warn("[TMG Controller] swallowed error:",e):console.error("[TMG Controller] error:",e);case"warn":return console.warn("[TMG Controller] warning:",e);default:return console.log("[TMG Controller] log:",e)}}fire(e,i=null,o=this.media.element,r=!0,n=!0){e&&o?.dispatchEvent(new CustomEvent(e,{detail:i,bubbles:r,cancelable:n}))}throttle(e,i,o=30,r=!0){if(r){let a=performance.now();return a-(this.throttleMap.get(e)??0)<o?void 0:(this.throttleMap.set(e,a),i())}if(this.throttleMap.has(e))return;let n=ye(()=>this.throttleMap.delete(e),o,this.signal);return this.throttleMap.set(e,n),i()}RAFLoop(e,i){this.rafLoopFnMap.set(e,i);let o=()=>(this.rafLoopFnMap.get(e)?.(),this.rafLoopMap.set(e,We(o,this.signal)));!this.rafLoopMap.has(e)&&this.rafLoopMap.set(e,We(o,this.signal))}cancelRAFLoop(e){cancelAnimationFrame(this.rafLoopMap.get(e)),this.rafLoopFnMap.delete(e),this.rafLoopMap.delete(e)}queryDOM(e,i=!1,o=!1){let r=o?this.pseudoVideoContainer:this.videoContainer;return i?r.querySelectorAll(e):r.querySelector(e)}setImgLoadState({target:e}){e?.setAttribute("data-loaded",String(e.complete&&e.naturalWidth>0))}setImgFallback({target:e}){e.src=window.TMG_VIDEO_ALT_IMG_SRC}setCanvasFallback(e,i,o){o=e&&M("img",{src:window.TMG_VIDEO_ALT_IMG_SRC,onload:()=>i?.drawImage(o,0,0,e.width,e.height)})}isUIActive(e,i=this.videoContainer){return e==="settings"&&(e="settings-view"),i.classList.contains(`tmg-video-${Pt(e)}`)}destroy(){this.setReadyState(-1),this.rafLoopMap.keys().forEach(this.cancelRAFLoop),this.ac.abort("[TMG Controller] Instance is being destroyed"),this.mutatingDOMM=!0,[...this.plugs.values()].reverse().forEach(i=>i.destroy()),this.media.tech.destroy(),[this.plugs,this.throttleMap,this.rafLoopMap,this.rafLoopFnMap].forEach(i=>i.clear()),this.media.destroy(),this.state.destroy(),this.config.destroy();let e=this.config.cloneOnDetach?ct(this.media.element):this.media.element;return re(this),e}};typeof window<"u"?(window.tmg||(window.tmg={}),window.TMG_VIDEO_ALT_IMG_SRC??(window.TMG_VIDEO_ALT_IMG_SRC="/TMG_MEDIA_PROTOTYPE/assets/icons/movie-tape.png"),window.TMG_VIDEO_CSS_SRC??(window.TMG_VIDEO_CSS_SRC="/TMG_MEDIA_PROTOTYPE/prototype-3/prototype-3-video.css"),window.T007_TOAST_JS_SRC??(window.T007_TOAST_JS_SRC="/T007_TOOLS/T007_toast_library/T007_toast.js")):(console.log("\x1B[38;2;139;69;19mTMG Media Player Unavailable\x1B[0m"),console.error("TMG Media Player cannot run in a terminal!"),console.warn("Consider moving to a browser environment to use the TMG Media Player"));export{O as AUDIO_CONTEXT,Ft as AUDIO_LIMITER,Te as Controller,F as Controllers,$i as IS_DOC_TRANSIENT,we as Player,gn as connectMediaToAudioManager,un as getAudioContext,vn as init,Jo as mountMedia,Zo as startAudioManager,mn as unmountMedia,Bi as utils};
