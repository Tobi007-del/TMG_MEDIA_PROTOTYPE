{
  "version": 3,
  "sources": ["../prototype-3/src/ts/core/reactor.ts", "../prototype-3/src/ts/utils/dom.ts", "../prototype-3/src/ts/utils/obj.ts", "../prototype-3/src/ts/utils/chores.ts", "../prototype-3/src/ts/utils/num.ts", "../prototype-3/src/ts/utils/str.ts", "../prototype-3/src/ts/index.ts"],
  "sourcesContent": ["import { Target, Payload, Mediator, Listener, ListenerOptions, ListenerRecord, Terminator, ListenerOptionsTuple, ReactorOptions } from \"../types/reactor\";\nimport type { Paths, WCPaths } from \"../types/paths\";\nimport { isObj, isArr, assignAny, deriveAny, getTrailPaths, getTrailRecord } from \"../utils\";\n\nexport const TERMINATOR: Terminator = Symbol(\"TERMINATOR\");\n\nexport class Event<T, P extends WCPaths<T> = WCPaths<T>> {\n  static readonly NONE = 0;\n  static readonly CAPTURING_PHASE = 1;\n  static readonly AT_TARGET = 2;\n  static readonly BUBBLING_PHASE = 3;\n  public type: string;\n  public currentTarget: Payload<T, P>[\"target\"];\n  public eventPhase: number = Event.NONE;\n  readonly target: Payload<T, P>[\"target\"];\n  readonly path: Target<T, P>[\"path\"];\n  readonly value: Target<T, P>[\"value\"];\n  readonly oldValue: Target<T, P>[\"oldValue\"];\n  readonly bubbles: boolean;\n  readonly rejectable: boolean;\n  readonly timestamp: number;\n  private _propagationStopped = false;\n  private _immediatePropagationStopped = false;\n  private _rejected = \"\";\n\n  constructor(payload: Payload<T, P> & { bubbles?: boolean; rejectable?: boolean }) {\n    this.type = payload.type;\n    this.target = payload.target;\n    this.currentTarget = payload.currentTarget;\n    this.value = payload.target.value;\n    this.oldValue = payload.target.oldValue;\n    this.path = payload.target.path;\n    this.bubbles = payload.bubbles ?? true;\n    this.rejectable = payload.rejectable ?? true;\n    this.timestamp = Date.now();\n  }\n  get propagationStopped(): boolean {\n    return this._propagationStopped;\n  }\n  stopPropagation(): void {\n    this._propagationStopped = true;\n  }\n  get immediatePropagationStopped(): boolean {\n    return this._immediatePropagationStopped;\n  }\n  stopImmediatePropagation(): void {\n    this._propagationStopped = true;\n    this._immediatePropagationStopped = true;\n  }\n  get rejected(): string {\n    return this._rejected;\n  }\n  reject(reason?: string): void {\n    if (!this.rejectable) return console.warn(`Ignored reject() call on a non-rejectable \"${this.type}\" at \"${this.path}\"`);\n    if (this.eventPhase !== Event.CAPTURING_PHASE) console.warn(`Rejecting an intent on \"${this.type}\" at \"${this.path}\" outside of the capture phase is unadvised.`);\n    if (this.rejectable) console.log((this._rejected = reason || `Couldn't ${this.type} intended value at \"${this.path}\"`));\n  }\n  composedPath(): WCPaths<T>[] {\n    return getTrailPaths(this.path);\n  }\n}\n// uses low level loops considering this is surgical work on the root of data\nexport default class Reactor<T extends object> {\n  private rejectable: boolean;\n  private getters = new Map<Paths<T>, Set<Mediator<T>>>();\n  private setters = new Map<Paths<T>, Set<Mediator<T>>>();\n  private listenersRecord = new Map<WCPaths<T>, Set<ListenerRecord<T>>>();\n  private batch = new Map<WCPaths<T>, Payload<T>>();\n  private isBatching = false;\n  private proxyCache = new WeakMap<object, any>();\n  public root: T;\n\n  constructor(obj: T, options: ReactorOptions = {}) {\n    this.root = this._proxify(obj);\n    this.rejectable = options.rejectable ?? false;\n  }\n\n  private _proxify(target: any, path = \"\"): any {\n    if (target instanceof Element || target instanceof Window || target instanceof EventTarget) return target;\n    if (this.proxyCache.has(target)) return this.proxyCache.get(target);\n    // Robust Proxy handler\n    const proxy = new Proxy(target, {\n      get: (object, key, receiver) => {\n        const safeKey = String(key),\n          fullPath = (path ? `${path}.${safeKey}` : safeKey) as WCPaths<T>,\n          target: Target<T> = { path: fullPath, value: Reflect.get(object, key, receiver), key: safeKey, object },\n          payload: Payload<T> = { type: \"get\", target, currentTarget: target, root: this.root };\n        if (this.getters.has(fullPath as Paths<T>)) return this._mediate(fullPath as Paths<T>, payload as Payload<T, Paths<T>>, false);\n        if (typeof key === \"symbol\" || !(isObj(target.value) || isArr(target.value))) return target.value;\n        return this._proxify(target.value, fullPath);\n      },\n      set: (object, key, value, receiver) => {\n        const safeKey = String(key),\n          fullPath = (path ? `${path}.${safeKey}` : safeKey) as WCPaths<T>,\n          target: Target<T> = { path: fullPath, value, oldValue: Reflect.get(object, key, receiver), key: safeKey, object },\n          payload: Payload<T> = { type: \"set\", target, currentTarget: target, root: this.root };\n        if (this.setters.has(fullPath as Paths<T>)) target.value = this._mediate(fullPath as Paths<T>, payload as Payload<T, Paths<T>>, true);\n        if (target.value === TERMINATOR) return false;\n        if (!Reflect.set(object, key, target.value, receiver)) return false;\n        return this._schedule(fullPath, payload), true;\n      },\n      deleteProperty: (object, key) => {\n        const safeKey = String(key),\n          fullPath = (path ? `${path}.${safeKey}` : safeKey) as WCPaths<T>,\n          target: Target<T> = { path: fullPath, oldValue: Reflect.get(object, key), key: safeKey, object },\n          payload: Payload<T> = { type: \"delete\", target, currentTarget: target, root: this.root };\n        if (this.setters.has(fullPath as Paths<T>)) target.value = this._mediate(fullPath as Paths<T>, payload as Payload<T, Paths<T>>, true);\n        if (target.value === TERMINATOR) return false;\n        if (!Reflect.deleteProperty(object, key)) return false;\n        return this._schedule(fullPath, payload), true;\n      },\n    });\n\n    this.proxyCache.set(target, proxy);\n    return proxy;\n  }\n\n  private _mediate<P extends Paths<T>>(path: Paths<T>, payload: Payload<T, P>, set: boolean): any {\n    let terminated = false,\n      value = payload.target.value;\n    const fns = (set ? this.setters : this.getters)?.get(path);\n    if (!fns?.size) return value;\n    const arr = Array.from(fns);\n    for (let i = set ? 0 : arr.length - 1; i !== (set ? arr.length : -1); i += set ? 1 : -1) {\n      terminated ||= value === TERMINATOR;\n      value = terminated ? TERMINATOR : arr[i](value, terminated, payload);\n    }\n    return value;\n  }\n\n  private _wave(path: WCPaths<T>, payload: Payload<T>): void {\n    // we could either build a large array of all refs to climb back up or have to derive\n    const e = new Event<T>({ ...payload, rejectable: this.rejectable }),\n      chain = getTrailRecord(this.root, path);\n    // 1: Capture phase (root -> parent)\n    e.eventPhase = Event.CAPTURING_PHASE;\n    for (let i = 0; i <= chain.length - 2; i++) {\n      if (e.propagationStopped) break;\n      this._fire(chain[i], e, true);\n    }\n    if (e.propagationStopped) return;\n    // 2: Target phase (leaf)\n    e.eventPhase = Event.AT_TARGET;\n    this._fire(chain[chain.length - 1], e, true);\n    !e.immediatePropagationStopped && this._fire(chain[chain.length - 1], e, false);\n    //`3: Bubble phase (parent -> root)\n    if (!e.bubbles) return;\n    e.eventPhase = Event.BUBBLING_PHASE;\n    for (let i = chain.length - 2; i >= 0; i--) {\n      if (e.propagationStopped) break;\n      this._fire(chain[i], e, false);\n    }\n    if (e.rejected) return; // 4: Defaults phase if ever\n  }\n\n  private _fire([path, object, value]: ReturnType<typeof getTrailRecord<T>>[number], e: Event<T>, isCapture: boolean): void {\n    const records = this.listenersRecord.get(path);\n    if (!records?.size) return;\n    const originalType = e.type;\n    e.type = path !== e.target.path ? \"update\" : e.type; // `update` for ancestors\n    e.currentTarget = { path, value, key: path.split(\".\").pop() || \"\", object };\n    for (const record of [...records]) {\n      if (e.immediatePropagationStopped) break;\n      if (record.capture !== isCapture) continue;\n      if (record.once) records.delete(record);\n      record.cb(e);\n    }\n    e.type = originalType;\n  }\n\n  private _schedule(path: WCPaths<T>, payload: Payload<T>): void {\n    this.batch.set(path, payload);\n    if (this.isBatching) return;\n    this.isBatching = true;\n    queueMicrotask(() => this._flush());\n  }\n\n  private _flush(): void {\n    for (const [path, payload] of this.batch.entries()) this._wave(path, payload);\n    this.batch.clear(), (this.isBatching = false);\n  }\n\n  get<P extends Paths<T>>(path: P, cb: Mediator<T, P>): void {\n    (this.getters.get(path) ?? this.getters.set(path, new Set()).get(path)!).add(cb as Mediator<T>); // keeping devs typesafe not internals - generic cast\n  }\n  noget<P extends Paths<T>>(path: P, cb: Mediator<T, P>): void {\n    this.getters.get(path)?.delete(cb as Mediator<T>);\n  }\n\n  set<P extends Paths<T>>(path: P, cb: Mediator<T, P>): void {\n    (this.setters.get(path) ?? this.setters.set(path, new Set()).get(path)!).add(cb as Mediator<T>);\n  }\n  noset<P extends Paths<T>>(path: P, cb: Mediator<T, P>): void {\n    this.setters.get(path)?.delete(cb as Mediator<T>);\n  }\n\n  on<P extends WCPaths<T>>(path: P, cb: Listener<T, P>, options?: ListenerOptions): (typeof this)[\"off\"] {\n    const records = this.listenersRecord.get(path),\n      capture = _getOpt(options, \"capture\");\n    let hasRecord = false;\n    for (const record of records ?? []) {\n      if (record.cb === cb && capture === record.capture) {\n        hasRecord = true;\n        break;\n      }\n    }\n    if (!hasRecord) (records ?? this.listenersRecord.set(path, new Set()).get(path)!).add({ cb: cb as Listener<T>, capture, once: _getOpt(options, \"once\") });\n    return () => this.off<P>(path, cb, options);\n  }\n  off<P extends WCPaths<T>>(path: P, cb: Listener<T, P>, options?: ListenerOptions): void {\n    const records = this.listenersRecord.get(path),\n      capture = _getOpt(options, \"capture\");\n    if (!records) return;\n    let recordToDelete: ListenerRecord<T> | null = null;\n    for (const record of records) {\n      if (record.cb === cb && record.capture === capture) {\n        recordToDelete = record;\n        break;\n      }\n    }\n    if (recordToDelete) records.delete(recordToDelete);\n    if (!records.size) this.listenersRecord.delete(path);\n  }\n\n  cascade = ({ type, currentTarget: { path, value: sets } }: Event<T>): void => {\n    if (!sets || (type !== \"set\" && type !== \"delete\")) return;\n    for (const [k, v] of Object.entries(sets)) assignAny(this.root, `${path}.${k}` as Paths<T>, v);\n  };\n\n  tick = this._flush;\n\n  reset(): void {\n    this.getters.clear(), this.setters.clear(), this.listenersRecord.clear();\n    this.batch.clear(), (this.isBatching = false);\n    this.proxyCache = new WeakMap();\n    (this.root as any) = null;\n  }\n}\nconst _getOpt = (options: ListenerOptions = false, opt: keyof ListenerOptionsTuple) => (\"boolean\" === typeof options ? options : !!options?.[opt]);\n", "export function inDocView(el: Element, axis: \"x\" | \"y\" = \"y\") {\n  const rect = el.getBoundingClientRect(),\n    inX = rect.left + window.scrollX >= 0 && rect.right + window.scrollX <= window.scrollX + (window.innerWidth || document.documentElement.clientWidth),\n    inY = rect.top + window.scrollY >= 0 && rect.bottom + window.scrollY <= window.scrollY + (window.innerHeight || document.documentElement.clientHeight);\n  return axis === \"x\" ? inY : axis === \"y\" ? inX : inY && inX;\n}\n", "import type { WCPaths, Paths, PathValue } from \"../types/paths\";\nimport type { UIObject, UISettings } from \"../types/UIOptions\";\nimport { isDef, camelize } from \".\";\n\nexport function isIter(obj: any): boolean {\n  return obj != null && \"function\" === typeof obj[Symbol.iterator];\n}\n\nexport function isObj(obj: any): boolean {\n  return \"object\" === typeof obj && obj !== null && !isArr(obj) && \"function\" !== typeof obj;\n}\n\nexport function isArr(obj: any): boolean {\n  return Array.isArray(obj);\n}\n\nexport function assignDef(target: any, key: string, value: any): void {\n  isDef(value) && target != null && assignAny(target, key, value);\n}\n\nexport function assignHTMLConfig<T extends object>(target: T, attr: `tmg--${Paths<T, \"--\">}`, value: any): void {\n  assignAny<T, \"--\">(\n    target,\n    attr.replace(\"tmg--\", \"\") as Paths<T, \"--\">,\n    (() => {\n      if (value.includes(\",\")) return value.split(\",\")?.map((v: string) => v.replace(/\\s+/g, \"\"));\n      if (/^(true|false|null|\\d+)$/.test(value)) return JSON.parse(value);\n      return value;\n    })(),\n    \"--\",\n    (p) => camelize(p)\n  );\n}\n\nexport function assignAny<T extends object, const S extends string = \".\">(target: T, key: Paths<T, S>, value: any, separator: S = \".\" as S, keyFunc = (p: string): string => p): void {\n  const keys = key.split(separator).map((p) => keyFunc(p));\n  let currObj: any = target;\n  keys.forEach((key, i) => {\n    const match = key.match(/^([^\\[\\]]+)\\[(\\d+)\\]$/);\n    if (match) {\n      const [, key, iStr] = match;\n      if (!isArr(currObj[key])) currObj[key] = [];\n      if (i === keys.length - 1) currObj[key][Number(iStr)] = value;\n      else (currObj[key][Number(iStr)] ||= {}), (currObj = currObj[key][Number(iStr)]);\n    } else {\n      if (i === keys.length - 1) currObj[key] = value;\n      else (currObj[key] ||= {}), (currObj = currObj[key]);\n    }\n  });\n}\n\nexport function deriveAny<T extends object, const S extends string = \".\">(source: T, key: Paths<T, S>, separator: S = \".\" as S, keyFunc = (p: string): string => p): PathValue<T, typeof key, S> | undefined {\n  const keys = key.split(separator).map((p) => keyFunc(p));\n  let currObj: any = source;\n  for (const key of keys) {\n    const match = key.match(/^([^\\[\\]]+)\\[(\\d+)\\]$/);\n    if (match) {\n      const [, key, iStr] = match;\n      if (!isArr(currObj[key])) return undefined;\n      currObj = currObj[key][Number(iStr)];\n    } else {\n      if (!isObj(currObj) || !(key in currObj)) return undefined;\n      currObj = currObj[key];\n    }\n  }\n  return currObj;\n}\n\nexport function getTrailPaths<T>(path: WCPaths<T>, reverse: boolean = true): WCPaths<T>[] {\n  const parts = path.split(\".\"),\n    chain: WCPaths<T>[] = [\"*\"];\n  let acc = \"\";\n  for (let i = 0; i < parts.length; i++) {\n    acc += (i === 0 ? \"\" : \".\") + parts[i];\n    chain.push(acc as WCPaths<T>);\n  }\n  return reverse ? chain.reverse() : chain; // for logs\n}\n\nexport function getTrailRecord<T extends object>(obj: T, path: WCPaths<T>): [WCPaths<T>, PathValue<T, WCPaths<T>>, PathValue<T, WCPaths<T>>][] {\n  const parts = path.split(\".\"),\n    record: ReturnType<typeof getTrailRecord<T>> = [[\"*\", obj, obj]];\n  let acc = \"\",\n    currObj: any = obj;\n  for (let i = 0; i < parts.length; i++) {\n    acc += (i === 0 ? \"\" : \".\") + parts[i];\n    record.push([acc as WCPaths<T>, currObj, (currObj = Reflect.get(currObj, parts[i]))]); // at most one iteration per depth, storage over derivation\n  }\n  return record;\n}\n\nfunction isUISetting(obj: any): obj is UISettings<any> {\n  return isObj(obj) && \"options\" in obj && isArr(obj.options);\n}\nexport function parseUIObj<T extends object>(obj: T): UIObject<T> {\n  const result: any = {} as UIObject<T>;\n  for (const key of Object.keys(obj)) {\n    const entry = (obj as any)[key];\n    if (!isObj(entry)) continue;\n    if (isUISetting(entry)) {\n      result[key] = {\n        values: entry.options.map((opt: any) => (\"value\" in opt ? opt.value : opt)),\n        displays: entry.options.map((opt: any) => (\"display\" in opt ? opt.display : `${opt}`)),\n      };\n    } else result[key] = parseUIObj(entry); // recurse on sub-branch\n  }\n  return result;\n}\n", "export function uid(prefix = \"tmg-\"): string {\n  return `${prefix}${Date.now().toString(36)}_${performance.now().toString(36).replace(\".\", \"\")}_${Math.random().toString(36).slice(2)}`;\n}\n\nexport function remToPx(val: number): number {\n  return parseFloat(getComputedStyle(document.documentElement).fontSize) * val;\n}\n\nexport function isDef(val: any): boolean {\n  return val !== undefined;\n}", "import { remToPx } from \".\";\n\nexport function clamp(min = 0, val: number, max = Infinity) {\n  return Math.min(Math.max(val, min), max);\n}\n\nexport function isValidNumber(val: any): boolean {\n  return !isNaN(val ?? NaN) && val !== Infinity\n};\n\nexport function parseNumber(number: any, fallback = 0): number {\n  return isValidNumber(number) ? number : fallback;\n}\n\nexport function parseIfPercent(percent: any, amount = 100): number {\n  return percent?.endsWith?.(\"%\") ? parseNumber((percent.slice(0, -1) / 100) * amount) : percent;\n}\n\nexport function parseCSSTime(time: string): number {\n  return time.endsWith(\"ms\") ? parseFloat(time) : parseFloat(time) * 1000;\n}\n\nexport function parseCSSUnit(val: string): number {\n  return val.endsWith(\"px\") ? parseFloat(val) : remToPx(parseFloat(val));\n}", "export function capitalize(word = \"\"): string {\n  return word.replace(/^(\\s*)([a-z])/i, (_, s, l) => s + l.toUpperCase());\n}\n\nexport function camelize(str = \"\", { source } = /[\\s_-]+/, { preserveInnerCase: pIC = true, upperFirst: uF = false } = {}): string {\n  return (pIC ? str : str.toLowerCase()).replace(new RegExp(`${source}(\\\\w)`, \"g\"), (_, c) => c.toUpperCase()).replace(/^\\w/, (c) => c[uF ? \"toUpperCase\" : \"toLowerCase\"]());\n}\n\nexport function uncamelize(str = \"\", separator = \" \"): string {\n  return str.replace(/([a-z])([A-Z])/g, `$1${separator}$2`).toLowerCase();\n}", "if (typeof window !== \"undefined\") {\n  window.tmg ||= {};\n  window.TMG_VIDEO_ALT_IMG_SRC ??= \"/TMG_MEDIA_PROTOTYPE/assets/icons/movie-tape.png\";\n  window.TMG_VIDEO_CSS_SRC ??= \"/TMG_MEDIA_PROTOTYPE/prototype-3/prototype-3-video.css\";\n  window.T007_TOAST_JS_SRC ??= \"/T007_TOOLS/T007_toast_library/T007_toast.js\";\n} else {\n  console.log(\"\\x1b[38;2;139;69;19mTMG Media Player Unavailable\\x1b[0m\");\n  console.error(\"TMG Media Player cannot run in a terminal!\"), console.warn(\"Consider moving to a browser environment to use the TMG Media Player\");\n}\n\nexport * as reactor from \"./core/reactor\";\n// export * as browser from \"./utils/browser\";\nexport * as chores from \"./utils/chores\";\nexport * as dom from \"./utils/dom\";\nexport * as num from \"./utils/num\";\nexport * as obj from \"./utils/obj\";\nexport * as str from \"./utils/str\";"],
  "mappings": "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",
  "names": ["key", "target"]
}
