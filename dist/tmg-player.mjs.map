{
  "version": 3,
  "sources": ["../src/ts/utils/index.ts", "../src/ts/utils/quirks/ripple.ts", "../src/ts/utils/quirks/scroll.ts", "../src/ts/utils/quirks/arrowFocusNav.ts", "../src/ts/consts/media-defaults.ts", "../src/ts/utils/media.ts", "../src/ts/utils/time.ts", "../src/ts/utils/obj.ts", "../src/ts/utils/num.ts", "../src/ts/consts/generics.ts", "../src/ts/utils/str.ts", "../src/ts/utils/file.ts", "../src/ts/utils/color.ts", "../src/ts/utils/browser.ts", "../src/ts/utils/keys.ts", "../src/ts/utils/fn.ts", "../src/ts/utils/dom.ts", "../src/ts/tools/mixins/index.ts", "../src/ts/tools/mixins/methodist.ts", "../src/ts/core/reactor.ts", "../src/ts/tools/mixins/reactive.ts", "../src/ts/tools/mixins/nuke.ts", "../src/ts/core/registry.ts", "../src/ts/media/index.ts", "../src/ts/core/controllable.ts", "../src/ts/media/base.ts", "../src/ts/media/html5.ts", "../src/ts/core/controller.ts", "../src/ts/consts/config-defaults.ts", "../src/ts/tools/player.ts", "../src/ts/tools/runtime.ts", "../src/ts/core/storage.ts", "../src/ts/tools/queue.ts", "../src/ts/plugs/index.ts", "../src/ts/plugs/base.ts", "../src/ts/plugs/skeleton.ts", "../src/ts/plugs/media.ts", "../src/ts/plugs/playlist.ts", "../src/ts/plugs/css.ts", "../src/ts/plugs/controlPanel.ts", "../src/ts/plugs/overlay.ts", "../src/ts/plugs/persist.ts", "../src/ts/plugs/locked.ts", "../src/ts/plugs/light-state.ts", "../src/ts/plugs/time.ts", "../src/ts/plugs/timeTravel.ts", "../src/ts/plugs/gesture/wheel.ts", "../src/ts/plugs/gesture/touch.ts", "../src/ts/plugs/gesture/general.ts", "../src/ts/plugs/gesture/index.ts", "../src/ts/plugs/volume.ts", "../src/ts/plugs/playbackRate.ts", "../src/ts/plugs/brightness.ts", "../src/ts/plugs/auto.ts", "../src/ts/plugs/toasts.ts", "../src/ts/plugs/fastPlay.ts", "../src/ts/plugs/errorMessages.ts", "../src/ts/components/index.ts", "../src/ts/components/base.ts", "../src/ts/components/buffer.ts", "../src/ts/components/duration.ts", "../src/ts/components/playPause.ts", "../src/ts/components/range.ts", "../src/ts/components/screenlocked.ts", "../src/ts/components/time.ts", "../src/ts/components/timeandduration.ts", "../src/ts/components/timeline.ts", "../src/ts/consts/index.ts", "../src/index.ts"],
  "sourcesContent": ["// DOM & UI\nexport * from \"./dom\";\nexport * from \"./quirks\";\n// Media\nexport * from \"./media\";\nexport * from \"./time\";\n// Data & Objects\nexport * from \"./obj\";\nexport * from \"./num\";\nexport * from \"./str\";\nexport * from \"./file\";\nexport * from \"./color\";\n// Browser & Environment\nexport * from \"./browser\";\nexport * from \"./keys\";\n// Utilities\nexport * from \"./fn\";\n", "import { createEl } from \"..\";\n\nexport function rippleHandler(e: PointerEvent, target?: HTMLElement, forceCenter: boolean = false): void {\n  const el = target || (e.currentTarget as HTMLElement);\n  if ((e.target !== e.currentTarget && (e.target as unknown as Element)?.matches(\"button,[href],input,label,select,textarea,[tabindex]:not([tabindex='-1'])\")) || el?.hasAttribute(\"disabled\") || (e.pointerType === \"mouse\" && e.button !== 0)) return;\n  e.stopPropagation?.();\n  const { offsetWidth: rW, offsetHeight: rH } = el,\n    { width: w, height: h, left: l, top: t } = el.getBoundingClientRect(),\n    size = Math.max(rW, rH),\n    x = forceCenter ? rW / 2 - size / 2 : ((e.clientX - l) * rW) / w - size / 2,\n    y = forceCenter ? rH / 2 - size / 2 : ((e.clientY - t) * rH) / h - size / 2,\n    wrapper = createEl(\"span\", { className: \"tmg-video-ripple-container\" }),\n    ripple = createEl(\"span\", { className: \"tmg-video-ripple tmg-video-ripple-hold\" }, {}, { cssText: `width:${size}px;height:${size}px;left:${x}px;top:${y}px;` });\n  let canRelease = false;\n  ripple?.addEventListener(\"animationend\", () => (canRelease = true), { once: true });\n  el.append(wrapper?.appendChild(ripple!)!.parentElement!);\n  const release = (): void => {\n    if (!canRelease) return ripple?.addEventListener(\"animationend\", release, { once: true });\n    ripple?.classList.replace(\"tmg-video-ripple-hold\", \"tmg-video-ripple-fade\");\n    ripple?.addEventListener(\"animationend\", () => setTimeout(() => wrapper?.remove()));\n    [\"pointerup\", \"pointercancel\"].forEach((evt) => el.ownerDocument.defaultView?.removeEventListener(evt, release));\n  };\n  [\"pointerup\", \"pointercancel\"].forEach((evt) => el.ownerDocument.defaultView?.addEventListener(evt, release));\n}\n", "import { createEl } from \"..\";\n\n// ============ Vertical Scrollerator ============\ninterface ScrolleratorOptions {\n  baseSpeed?: number;\n  maxSpeed?: number;\n  stepDelay?: number;\n  baseRate?: number;\n  lineHeight?: number;\n  margin?: number;\n  car?: Window | HTMLElement;\n}\n\ninterface Scrollerator {\n  drive: (clientY: number, brake?: boolean, offsetY?: number) => number;\n  reset: () => void;\n}\n\nexport function initVScrollerator({ baseSpeed = 3, maxSpeed = 10, stepDelay = 2000, baseRate = 16, lineHeight = 80, margin = 80, car = window }: ScrolleratorOptions = {}): Scrollerator {\n  let linesPerSec = baseSpeed,\n    accelId: ReturnType<typeof setTimeout> | null = null,\n    lastTime: number | null = null;\n  const drive = (clientY: number, brake = false, offsetY = 0): number => {\n    if (car !== window) clientY -= offsetY;\n    const now = performance.now(),\n      speed = linesPerSec * lineHeight * ((lastTime ? now - lastTime : baseRate) / 1000);\n    if (!brake && (clientY < margin || clientY > ((car as any).innerHeight ?? (car as any).offsetHeight) - margin)) {\n      accelId === null ? (accelId = setTimeout(() => (linesPerSec += 1), stepDelay)) : linesPerSec > baseSpeed && (linesPerSec = Math.min(linesPerSec + 1, maxSpeed));\n      (car as any).scrollBy?.(0, clientY < margin ? -speed : speed);\n    } else reset();\n    return ((lastTime = !brake ? now : null), speed);\n  };\n  const reset = () => (accelId && clearTimeout(accelId), (accelId = null), (linesPerSec = baseSpeed), (lastTime = null));\n  return { drive, reset };\n}\n\n// ============ Scroll Assist ============\ninterface ScrollAssistControl {\n  update: () => void;\n  destroy: () => void;\n}\n\ninterface ScrollAssistOptions {\n  pxPerSecond?: number;\n  assistClassName?: string;\n  vertical?: boolean;\n  horizontal?: boolean;\n}\n\nconst _SCROLLERS = new WeakMap<HTMLElement, ScrollAssistControl>();\nconst _SCROLLER_R_OBSERVER: ResizeObserver | false = typeof window !== \"undefined\" && new ResizeObserver((entries) => entries.forEach(({ target }) => _SCROLLERS.get(target as HTMLElement)?.update()));\nconst _SCROLLER_M_OBSERVER: MutationObserver | false =\n  typeof window !== \"undefined\" &&\n  new MutationObserver((entries) => {\n    const els = new Set<HTMLElement>();\n    for (const entry of entries) {\n      let node: Element | null = entry.target instanceof Element ? entry.target : null;\n      while (node && !_SCROLLERS.has(node as HTMLElement)) node = node.parentElement;\n      if (node) els.add(node as HTMLElement);\n    }\n    for (const el of els) _SCROLLERS.get(el)?.update();\n  });\n\nexport function initScrollAssist(el: HTMLElement, { pxPerSecond = 80, assistClassName = \"tmg-video-controls-scroll-assist\", vertical = true, horizontal = true }: ScrollAssistOptions = {}): ScrollAssistControl | void {\n  const parent = el?.parentElement;\n  if (!parent || _SCROLLERS.has(el)) return;\n  const assist: Record<string, HTMLElement> = {};\n  let scrollId: number | null = null,\n    last = performance.now(),\n    assistWidth = 20,\n    assistHeight = 20;\n  const update = () => {\n    const hasInteractive = !!parent.querySelector('button, a[href], input, select, textarea, [contenteditable=\"true\"], [tabindex]:not([tabindex=\"-1\"])');\n    if (horizontal) {\n      const w = assist.left?.offsetWidth || assistWidth,\n        check = hasInteractive ? el.clientWidth < w * 2 : false;\n      assist.left.style.display = check ? \"none\" : el.scrollLeft > 0 ? \"block\" : \"none\";\n      assist.right.style.display = check ? \"none\" : el.scrollLeft + el.clientWidth < el.scrollWidth - 1 ? \"block\" : \"none\";\n      assistWidth = w;\n    }\n    if (vertical) {\n      const h = assist.up?.offsetHeight || assistHeight,\n        check = hasInteractive ? el.clientHeight < h * 2 : false;\n      assist.up.style.display = check ? \"none\" : el.scrollTop > 0 ? \"block\" : \"none\";\n      assist.down.style.display = check ? \"none\" : el.scrollTop + el.clientHeight < el.scrollHeight - 1 ? \"block\" : \"none\";\n      assistHeight = h;\n    }\n  };\n  const scroll = (dir: string) => {\n    const frame = () => {\n      const now = performance.now(),\n        dt = now - last;\n      last = now;\n      const d = (pxPerSecond * dt) / 1000;\n      if (dir === \"left\") el.scrollLeft = Math.max(0, el.scrollLeft - d);\n      if (dir === \"right\") el.scrollLeft = Math.min(el.scrollWidth - el.clientWidth, el.scrollLeft + d);\n      if (dir === \"up\") el.scrollTop = Math.max(0, el.scrollTop - d);\n      if (dir === \"down\") el.scrollTop = Math.min(el.scrollHeight - el.clientHeight, el.scrollTop + d);\n      scrollId = requestAnimationFrame(frame);\n    };\n    last = performance.now();\n    frame();\n  };\n  const stop = () => (cancelAnimationFrame(scrollId ?? 0), (scrollId = null));\n  const addAssist = (dir: string): void => {\n    const div = createEl(\"div\", { className: assistClassName }, { scrollDirection: dir }, { display: \"none\" });\n    if (!div) return;\n    [\"pointerenter\", \"dragenter\"].forEach((evt) => div.addEventListener(evt, () => scroll(dir)));\n    [\"pointerleave\", \"pointerup\", \"pointercancel\", \"dragleave\", \"dragend\"].forEach((evt) => div.addEventListener(evt, stop));\n    dir === \"left\" || dir === \"up\" ? parent.insertBefore(div, el) : parent.append(div);\n    assist[dir] = div;\n  };\n  if (horizontal) [\"left\", \"right\"].forEach(addAssist);\n  if (vertical) [\"up\", \"down\"].forEach(addAssist);\n  el.addEventListener(\"scroll\", update);\n  (_SCROLLER_R_OBSERVER as ResizeObserver).observe(el);\n  (_SCROLLER_M_OBSERVER as MutationObserver).observe(el, { childList: true, subtree: true, characterData: true });\n  _SCROLLERS.set(el, {\n    update,\n    destroy() {\n      stop();\n      el.removeEventListener(\"scroll\", update);\n      (_SCROLLER_R_OBSERVER as ResizeObserver).unobserve(el);\n      _SCROLLERS.delete(el);\n      Object.values(assist).forEach((a) => a.remove());\n    },\n  });\n  update();\n  return _SCROLLERS.get(el);\n}\n\nexport const removeScrollAssist = (el: HTMLElement) => _SCROLLERS.get(el)?.destroy();\n", "import { clamp } from \"..\";\n\n// Key sets\nconst H_NAV_KEYS = [\"ArrowRight\", \"ArrowLeft\", \"Home\", \"End\"] as const;\nconst V_NAV_KEYS = [\"ArrowUp\", \"ArrowDown\", \"PageDown\", \"PageUp\"] as const;\nconst NAV_KEYS = [...H_NAV_KEYS, ...V_NAV_KEYS];\n\nexport interface ArrowNavConfig {\n  enabled?: boolean | null;\n  selector?: string;\n  focusOnHover?: boolean;\n  loop?: boolean;\n  virtual?: boolean;\n  typeahead?: boolean;\n  resetMs?: number;\n  rtl?: boolean | null;\n  rovingTabIndex?: boolean | null;\n  defaultTabbableIndex?: number | null;\n  activeClass?: string;\n  inputSelector?: string;\n  scrollIntoView?: ScrollIntoViewOptions;\n  focusOptions?: FocusOptions;\n  grid?: Partial<Record<\"x\" | \"y\" | \"vY\", number>>;\n  onSelect?: (el: HTMLElement, e: Partial<KeyboardEvent> & { key: string }) => void;\n  onFocusOut?: () => void;\n}\n\nconst DEFAULT_CONFIG: Required<ArrowNavConfig> = {\n  enabled: null,\n  selector: \"[data-arrow-item]\",\n  focusOnHover: true,\n  loop: true,\n  virtual: false,\n  typeahead: false,\n  rovingTabIndex: null,\n  defaultTabbableIndex: null,\n  resetMs: 500,\n  rtl: null,\n  grid: {},\n  activeClass: \"focus-outlined\",\n  inputSelector: \"input[value],textarea,[contenteditable='true']\",\n  focusOptions: { preventScroll: false },\n  scrollIntoView: { block: \"nearest\", inline: \"nearest\" },\n  onSelect: () => {},\n  onFocusOut: () => {},\n};\n\ntype KeyEvent = Partial<KeyboardEvent> & { key: string };\n\nconst getCommonAncestor = (a?: Element | null, b?: Element | null): Element | null => {\n  if (!a || !b) return a || b || null;\n  const ancestors = new Set<Element>();\n  let node: Element | null = a;\n  while (node) {\n    ancestors.add(node);\n    node = node.parentElement;\n  }\n  node = b;\n  while (node) {\n    if (ancestors.has(node)) return node;\n    node = node.parentElement;\n  }\n  return null;\n};\n\nconst getGrid = (all: HTMLElement[], x = true, y = true, vY = true) => {\n  const len = all.length;\n  const grid: ArrowNavConfig[\"grid\"] = {};\n  if (!len) return grid;\n  let cols = all.findIndex((el) => el.offsetTop !== all[0].offsetTop);\n  cols = cols > 0 ? cols : len;\n  if (x) grid.x = cols;\n  let rows = Math.ceil(len / cols);\n  if (y) grid.y = rows;\n  if (vY) {\n    const containerHeight = getCommonAncestor(all[0], all[1])?.clientHeight ?? 0;\n    const itemHeight = all[0].offsetHeight ?? 0;\n    rows = clamp(1, Math.floor(containerHeight / itemHeight), rows) || rows;\n    grid.vY = rows;\n  }\n  return grid;\n};\n\nconst getTargetIndex = ({ key, currIndex, length, gridX, gridY, vGridY, loop, ctrlKey = false, rtl }: { key: string; currIndex: number; length: number; gridX: number; gridY: number; vGridY: number; loop: boolean; ctrlKey?: boolean; rtl: boolean }): number => {\n  const rowStart = currIndex - (currIndex % gridX);\n  const rowEnd = Math.min(rowStart + gridX - 1, length - 1);\n  const colStart = currIndex % gridX;\n  const colEnd = Math.min(colStart + gridX * (gridY - 1), length - 1);\n  const canX = gridX > 1,\n    canY = gridY > 1;\n  const horizontalMove = rtl ? { ArrowRight: canX ? -1 : 0, ArrowLeft: canX ? 1 : 0 } : { ArrowRight: canX ? 1 : 0, ArrowLeft: canX ? -1 : 0 };\n  const move =\n    {\n      ...horizontalMove,\n      ArrowDown: canY ? gridX : 0,\n      ArrowUp: canY ? -gridX : 0,\n      Home: ctrlKey ? 0 : rowStart,\n      End: ctrlKey ? length - 1 : rowEnd,\n      PageDown: (vGridY - 1) * gridX,\n      PageUp: -(vGridY - 1) * gridX,\n    }[key] ?? 0;\n\n  let targetIndex = key === \"Home\" || key === \"End\" ? move : currIndex + move;\n  if (key === \"ArrowDown\") {\n    if (targetIndex < gridX) targetIndex = 0;\n    if (!loop && targetIndex >= length) targetIndex -= move;\n  } else if (key === \"ArrowUp\") {\n    if (!loop && targetIndex < 0) targetIndex += Math.abs(move);\n  } else if (key === \"PageDown\") {\n    if (!loop && targetIndex >= length) targetIndex = colEnd;\n  } else if (key === \"PageUp\") {\n    if (!loop && targetIndex < 0) targetIndex = colStart;\n  }\n\n  return loop ? (targetIndex + length) % length : clamp(0, targetIndex, length - 1);\n};\n\nexport type ArrowNavHandle = {\n  goToIndex: (index: number, e?: KeyEvent) => void;\n  simulateKey: (e: KeyEvent) => void;\n  getAbleIndex: (targetIndex: number, e?: KeyEvent) => number | null;\n  typeAhead: (key: string) => void;\n  items: () => HTMLElement[];\n  activeItem: () => HTMLElement | null;\n  getGrid: () => { x: number; y: number; vY: number };\n  destroy: () => void;\n};\n\nexport function initArrowFocusNav(container: HTMLElement, cfg: ArrowNavConfig = {}): ArrowNavHandle {\n  const { enabled: isEnabled, selector, focusOnHover, loop, virtual, typeahead, resetMs, activeClass, inputSelector, defaultTabbableIndex, grid, rtl: isRtl, focusOptions, scrollIntoView, onSelect, onFocusOut, rovingTabIndex } = { ...DEFAULT_CONFIG, ...cfg };\n\n  let gridX = grid.x || 1;\n  let gridY = grid.y || 1;\n  let vGridY = grid.vY || 1;\n  let activeIndex = -1;\n  let buffer = \"\";\n  let timeout: ReturnType<typeof setTimeout> | null = null;\n  let items: HTMLElement[] = [];\n\n  const enabled = isEnabled ?? virtual;\n  const roving = rovingTabIndex ?? !virtual;\n  const rtl = isRtl ?? getComputedStyle(container).direction === \"rtl\";\n\n  const shouldSnub = () => !enabled || !container;\n  const isItemDisabled = (el?: HTMLElement) => !el || el.hasAttribute(\"disabled\") || el.hasAttribute(\"aria-disabled\");\n  const getItems = () => (items = Array.from(container.querySelectorAll<HTMLElement>(selector)));\n\n  const getAbleIndex = (targetIndex: number, e: KeyEvent = { key: \"ArrowRight\", ctrlKey: false }) => {\n    if (shouldSnub()) return null;\n    if (!items.length) return null;\n    let index = targetIndex;\n    let attempts = 0;\n    while (attempts < items.length) {\n      if (!isItemDisabled(items[index])) return index;\n      index = getTargetIndex({ key: e.key, currIndex: index, gridX, gridY, vGridY, length: items.length, loop, ctrlKey: e.ctrlKey, rtl });\n      attempts++;\n    }\n    return null;\n  };\n\n  const goToIndex = (targetIndex: number, e: KeyEvent = { key: \"ArrowRight\" }) => {\n    if (shouldSnub()) return;\n    const idx = getAbleIndex(targetIndex, e);\n    if (idx === null) return;\n    activeIndex = idx;\n    onSelect?.(items[idx], e);\n    if (virtual) {\n      items[idx]?.scrollIntoView(scrollIntoView);\n      container.setAttribute(\"aria-activedescendant\", items[idx].id || \"\");\n    } else {\n      items[idx]?.focus(focusOptions);\n    }\n    updateDOM();\n  };\n\n  const updateDOM = () => {\n    if (shouldSnub()) return;\n    if (!virtual && !roving) return;\n    if (!items.length) return;\n    const tabbableIndex = defaultTabbableIndex !== null && defaultTabbableIndex !== undefined && !isItemDisabled(items[defaultTabbableIndex]) ? defaultTabbableIndex : getAbleIndex(0);\n    items.forEach((el, i) => {\n      const isActive = i === activeIndex;\n      if (roving) {\n        const shouldBeTabbable = i === activeIndex || (activeIndex === -1 && i === tabbableIndex);\n        el.setAttribute(\"tabindex\", shouldBeTabbable ? \"0\" : \"-1\");\n      } else if (virtual && activeIndex > 0) {\n        const shouldBeTabbable = i > activeIndex;\n        el.setAttribute(\"tabindex\", shouldBeTabbable ? \"0\" : \"-1\");\n      } else el.setAttribute(\"tabindex\", \"0\");\n      if (virtual) {\n        el.setAttribute(\"aria-selected\", String(isActive));\n        el.classList.toggle(activeClass, isActive);\n      }\n    });\n  };\n\n  const typeAhead = (key: string) => {\n    if (shouldSnub() || !typeahead) return;\n    buffer += key.toLowerCase();\n    if (timeout) clearTimeout(timeout);\n    timeout = setTimeout(() => (buffer = \"\"), resetMs);\n    const start = activeIndex >= 0 ? activeIndex + 1 : 0;\n    for (let i = 0; i < items.length; i++) {\n      const idx = (start + i) % items.length;\n      const label = (items[idx].getAttribute(\"data-label\") || items[idx].innerText || \"\").trim().toLowerCase();\n      if (label.startsWith(buffer)) return goToIndex(idx);\n    }\n  };\n\n  const simulateKey = (e: KeyEvent) => {\n    if (shouldSnub()) return;\n    if (document.activeElement?.matches(\"option\")) return;\n    const { key } = e;\n    if (!items.length) return;\n    if (virtual && (key === \" \" || key === \"Enter\")) return items[activeIndex]?.click();\n    if (typeahead && key.length === 1 && /^[a-z0-9]$/i.test(key)) return typeAhead(key);\n    if (!NAV_KEYS.includes(key as any)) return;\n    if (!((e.currentTarget as HTMLElement)?.matches(DEFAULT_CONFIG.inputSelector) && gridX <= 1 && H_NAV_KEYS.includes(key as any))) {\n      e.preventDefault?.();\n      e.stopPropagation?.();\n    }\n    const currIndex = virtual ? activeIndex : items.indexOf(document.activeElement as HTMLElement);\n    const targetIndex = getTargetIndex({ currIndex, gridX, gridY, vGridY, length: items.length, loop, rtl, key, ctrlKey: (e as KeyboardEvent).ctrlKey });\n    goToIndex(targetIndex, e);\n  };\n\n  // Setup\n  const refresh = () => (getItems(), updateDOM());\n  refresh();\n\n  // Keydown binding\n  const interactiveEls = !virtual ? [container] : [container.querySelector<HTMLElement>(inputSelector)];\n  interactiveEls.forEach((el) => el?.addEventListener(\"keydown\", simulateKey as EventListener));\n\n  // Focus out handling\n  const handleFocusOut = (evt: FocusEvent) => {\n    if (!container.contains(evt.relatedTarget as Node)) {\n      activeIndex = -1;\n      return onFocusOut?.();\n    }\n    const among = items.includes(evt.relatedTarget as HTMLElement);\n    if (!among && (defaultTabbableIndex ?? -1) >= 0) return (activeIndex = -1);\n    if (virtual) activeIndex = -1;\n  };\n  container.addEventListener(\"focusout\", handleFocusOut);\n\n  // Hover handling\n  const handleHover = (evt: Event) => {\n    if (!enabled || !focusOnHover) return;\n    const el = evt.currentTarget as HTMLElement;\n    const i = items.indexOf(el);\n    if (i !== -1) goToIndex(i);\n  };\n\n  // Mutation handling\n  const mutationObserver = new MutationObserver(() => {\n    const oldEl = items[activeIndex];\n    refresh();\n    const newEl = items[activeIndex];\n    if (oldEl && newEl && oldEl === newEl) return;\n    activeIndex = -1;\n  });\n  mutationObserver.observe(container, { childList: true, subtree: true });\n\n  // Grid handling (ResizeObserver)\n  const setGrid = (g: Required<ArrowNavConfig>[\"grid\"]) => {\n    if (g.x !== undefined) gridX = g.x;\n    if (g.y !== undefined) gridY = g.y;\n    if (g.vY !== undefined) vGridY = g.vY;\n  };\n  setGrid(grid);\n  const calcGrid = () => setGrid(getGrid(items, !grid.x, !grid.y, !grid.vY));\n  calcGrid();\n  const resizeObserver = new ResizeObserver(() => calcGrid());\n  const ancestor = items.length > 1 ? getCommonAncestor(items[0], items[1]) : container;\n  ancestor && resizeObserver.observe(ancestor);\n\n  // Hover listeners on items\n  const bindHover = () => items.forEach((el) => el.addEventListener(\"mouseenter\", handleHover));\n  const unbindHover = () => items.forEach((el) => el.removeEventListener(\"mouseenter\", handleHover));\n  bindHover();\n\n  const destroy = () => {\n    interactiveEls.forEach((el) => el?.removeEventListener(\"keydown\", simulateKey as EventListener));\n    container.removeEventListener(\"focusout\", handleFocusOut);\n    unbindHover();\n    mutationObserver.disconnect();\n    resizeObserver.disconnect();\n    if (timeout) clearTimeout(timeout);\n  };\n\n  return {\n    goToIndex,\n    simulateKey,\n    getAbleIndex,\n    typeAhead,\n    items: () => items,\n    activeItem: () => items[activeIndex] ?? null,\n    getGrid: () => ({ x: gridX, y: gridY, vY: vGridY }),\n    destroy,\n  };\n};\n", "import { createTimeRanges } from \"../utils\";\nimport type { MediaIntent, MediaState, MediaStatus, MediaSettings } from \"../types/contract\";\n\n// DEFAULT STATE (The Reality)\nexport const DEFAULT_MEDIA_STATE: MediaState = {\n  // Core\n  src: \"\",\n  currentTime: 0,\n  paused: true,\n  // Engine\n  volume: 1,\n  muted: false,\n  playbackRate: 1,\n  // Modes\n  pictureInPicture: false,\n  fullscreen: false,\n  // Casting\n  airplay: false,\n  chromecast: false,\n  // VR / XR\n  xrSession: false,\n  xrMode: \"inline\",\n  xrReferenceSpace: \"local\",\n  projection: \"flat\",\n  stereoMode: \"none\",\n  fieldOfView: 90, // Standard FOV\n  aspectRatio: 16 / 9, // Standard Aspect Ratio\n  panningX: 0,\n  panningY: 0,\n  panningZ: 0,\n  xrInputSource: null,\n  // Tracks & Streaming\n  currentTextTrack: -1,\n  currentAudioTrack: -1,\n  currentVideoTrack: -1,\n  autoLevel: true, // Adaptive Streaming on by default\n  currentLevel: -1,\n  // HTML Attributes\n  poster: \"\",\n  autoplay: false,\n  loop: false,\n  preload: \"metadata\",\n  playsInline: true,\n  crossOrigin: null,\n  controls: false, // We disable native controls\n  controlsList: \"\",\n  disablePictureInPicture: false,\n  // HTML Lists\n  sources: [],\n  tracks: [],\n};\n\n// DEFAULT INTENT (The Wishes)\nexport const DEFAULT_MEDIA_INTENT: MediaIntent = DEFAULT_MEDIA_STATE as MediaIntent; // Intent starts as State but can diverge\n\n// DEFAULT INFO (The Facts)\nexport const DEFAULT_MEDIA_STATUS: MediaStatus = {\n  // Network\n  readyState: 0, // HAVE_NOTHING\n  networkState: 0, // EMPTY\n  error: null,\n  bandwidth: null,\n  // Buffering\n  waiting: false,\n  stalled: false,\n  seeking: false,\n  buffered: createTimeRanges(),\n  played: createTimeRanges(),\n  seekable: createTimeRanges(),\n  duration: NaN, // HTML5 Standard for \"Unknown\"\n  ended: false,\n  // Dimensions\n  videoWidth: 0,\n  videoHeight: 0,\n  // Gates\n  loadedMetadata: false,\n  loadedData: false,\n  canPlay: false,\n  canPlayThrough: false,\n  // Lists (We start with empty lists or nulls)\n  textTracks: [],\n  audioTracks: [],\n  videoTracks: [],\n  levels: [],\n  // VR\n  xrCapabilities: null,\n  // Active\n  activeCue: null,\n};\n\n// DEFAULT SETTINGS (The Config)\nexport const DEFAULT_MEDIA_SETTINGS: MediaSettings = {\n  defaultMuted: false,\n  defaultPlaybackRate: 1,\n  srcObject: null,\n};\n", "import { DEFAULT_MEDIA_INTENT, DEFAULT_MEDIA_SETTINGS, DEFAULT_MEDIA_STATE, DEFAULT_MEDIA_STATUS } from \"../consts/media-defaults\";\nimport { MediaState, MediaReport } from \"../types/contract\";\nimport type { Source, Sources, Track, Tracks } from \"../plugs\";\nimport { createEl, isIter, isSameURL, loadResource, queryFullscreenEl } from \".\";\n\n// ============ Video Utilities ============\n\n// Types\nexport type Dimensions = Record<\"width\" | \"height\", number>;\n\ntype SourceLike = Source | (HTMLSourceElement & Record<string, any>);\ntype TrackLike = Track | (HTMLTrackElement & Record<string, any>);\n\n// Report Generation\nexport function getMediaReport(m: HTMLMediaElement): MediaReport {\n  const txtTrackIdx = getTrackIdx(m, \"Text\");\n  const report = {\n    state: {\n      src: m.src,\n      currentTime: m.currentTime,\n      paused: m.paused,\n      volume: m.volume,\n      muted: m.muted,\n      playbackRate: m.playbackRate,\n      pictureInPicture: document.pictureInPictureElement === m,\n      fullscreen: queryFullscreenEl() === m,\n      currentTextTrack: txtTrackIdx,\n      currentAudioTrack: getTrackIdx(m, \"Audio\"),\n      currentVideoTrack: getTrackIdx(m, \"Video\"),\n      poster: m instanceof HTMLVideoElement ? m.poster : \"\",\n      autoplay: m.autoplay,\n      loop: m.loop,\n      preload: m.preload,\n      playsInline: m instanceof HTMLVideoElement ? m.playsInline : false,\n      crossOrigin: m.crossOrigin,\n      controls: m.controls,\n      controlsList: m.controlsList ?? m.getAttribute(\"controlsList\"),\n      disablePictureInPicture: m instanceof HTMLVideoElement ? m.disablePictureInPicture ?? m.hasAttribute(\"disablePictureInPicture\") : false,\n      sources: getSources(m),\n      tracks: getTracks(m),\n    },\n    status: {\n      readyState: m.readyState,\n      networkState: m.networkState,\n      error: m.error,\n      seeking: m.seeking,\n      buffered: m.buffered,\n      played: m.played,\n      seekable: m.seekable,\n      duration: m.duration,\n      ended: m.ended,\n      loadedMetadata: m.readyState >= 1,\n      loadedData: m.readyState >= 2,\n      canPlay: m.readyState >= 3,\n      canPlayThrough: m.readyState >= 4,\n      videoWidth: m instanceof HTMLVideoElement ? m.videoWidth : 0,\n      videoHeight: m instanceof HTMLVideoElement ? m.videoHeight : 0,\n      textTracks: m.textTracks,\n      audioTracks: (m as any).audioTracks,\n      videoTracks: (m as any).videoTracks,\n      activeCue: m.textTracks[txtTrackIdx]?.activeCues?.[0] || null,\n    },\n    settings: {\n      defaultMuted: m.defaultMuted,\n      defaultPlaybackRate: m.defaultPlaybackRate,\n    },\n  };\n  return {\n    state: { ...DEFAULT_MEDIA_STATE, ...report.state },\n    intent: { ...DEFAULT_MEDIA_INTENT, ...report.state },\n    status: { ...DEFAULT_MEDIA_STATUS, ...report.status },\n    settings: { ...DEFAULT_MEDIA_SETTINGS, ...report.settings },\n  };\n}\n\n// Geometry\nexport function getRenderedBox(elem: HTMLElement & { videoWidth?: number; videoHeight?: number }): Partial<Dimensions & { left: number; top: number }> {\n  const getResourceDimensions = (source: HTMLElement & { videoWidth?: number; videoHeight?: number }): Dimensions | null => (source.videoWidth && source.videoHeight ? { width: source.videoWidth, height: source.videoHeight } : null);\n  const parsePositionAsPx = (str: string, bboxSize: number, objectSize: number): number => {\n    const num = parseFloat(str);\n    return !str.endsWith(\"%\") ? num : bboxSize * (num / 100) - objectSize * (num / 100);\n  };\n  const parseObjectPosition = (position: string, bbox: DOMRect, object: Dimensions): { left: number; top: number } => {\n    const [left, top] = position.split(\" \");\n    return { left: parsePositionAsPx(left, bbox.width, object.width), top: parsePositionAsPx(top, bbox.height, object.height) };\n  };\n  let { objectFit, objectPosition } = getComputedStyle(elem);\n  const bbox = elem.getBoundingClientRect(),\n    object = getResourceDimensions(elem);\n  if (!object || !objectFit || !objectPosition) return {};\n  if (objectFit === \"scale-down\") objectFit = bbox.width < object.width || bbox.height < object.height ? \"contain\" : \"none\";\n  if (objectFit === \"none\") return { ...parseObjectPosition(objectPosition, bbox, object), ...object };\n  else if (objectFit === \"contain\") {\n    const objectRatio = object.height / object.width,\n      bboxRatio = bbox.height / bbox.width,\n      width = bboxRatio > objectRatio ? bbox.width : bbox.height / objectRatio,\n      height = bboxRatio > objectRatio ? bbox.width * objectRatio : bbox.height;\n    return { ...parseObjectPosition(objectPosition, bbox, { width, height }), width, height };\n  } else if (objectFit === \"fill\") {\n    const { left, top } = parseObjectPosition(objectPosition, bbox, object),\n      objPosArr = objectPosition.split(\" \");\n    return { left: objPosArr[0].endsWith(\"%\") ? 0 : left, top: objPosArr[1].endsWith(\"%\") ? 0 : top, width: bbox.width, height: bbox.height };\n  } else if (objectFit === \"cover\") {\n    const minRatio = Math.min(bbox.width / object.width, bbox.height / object.height);\n    let width = object.width * minRatio,\n      height = object.height * minRatio,\n      outRatio = 1;\n    if (width < bbox.width) outRatio = bbox.width / width;\n    if (Math.abs(outRatio - 1) < 1e-14 && height < bbox.height) outRatio = bbox.height / height;\n    width *= outRatio;\n    height *= outRatio;\n    return { ...parseObjectPosition(objectPosition, bbox, { width, height }), width, height };\n  }\n  return {};\n};\n\nexport function getSizeTier(container: HTMLElement) {\n  const { offsetWidth: w, offsetHeight: h } = container;\n  return { width: w, height: h, tier: h <= 130 ? \"xxxxx\" : w <= 280 ? \"xxxx\" : w <= 380 ? \"xxx\" : w <= 480 ? \"xx\" : w <= 630 ? \"x\" : \"\" };\n}\n\n// Media Element Cloning\nexport function cloneMedia<M extends HTMLMediaElement>(v: M): M {\n  const newV = v.cloneNode(true) as M;\n  newV.tmgPlayer = v.tmgPlayer;\n  v.parentElement?.replaceChild(newV, v);\n  if (v.currentTime) newV.currentTime = v.currentTime;\n  if (v.playbackRate !== 1) newV.playbackRate = v.playbackRate;\n  if (v.defaultPlaybackRate !== 1) newV.defaultPlaybackRate = v.defaultPlaybackRate;\n  if (v.volume !== 1) newV.volume = v.volume;\n  if (v.muted) newV.muted = true;\n  if (v.defaultMuted) newV.defaultMuted = true;\n  if (v.srcObject) newV.srcObject = v.srcObject;\n  if (v.autoplay) newV.autoplay = true;\n  if (v.loop) newV.loop = true;\n  if (v.controls) newV.controls = true;\n  if (v.crossOrigin) newV.crossOrigin = v.crossOrigin;\n  if (v.playsInline) newV.playsInline = true;\n  if (v.controlsList?.length) newV.controlsList = v.controlsList;\n  if (v.disablePictureInPicture) newV.disablePictureInPicture = true;\n  if (!v.paused && newV.isConnected) newV.play();\n  return newV;\n};\n\n// Source Management\nexport function putSourceDetails(source: any, el: HTMLSourceElement | Record<string, any>) {\n  if (source.src) el.src = source.src;\n  if (source.type) el.type = source.type;\n  if (source.media) el.media = source.media;\n}\nexport function addSources(sources: SourceLike | Iterable<SourceLike> = [], medium: HTMLElement): HTMLSourceElement | HTMLSourceElement[] {\n  const addSource = (source: SourceLike, med: HTMLElement) => {\n    const sourceEl = createEl(\"source\");\n    putSourceDetails(source, sourceEl);\n    return med.appendChild(sourceEl);\n  };\n  return isIter(sources) ? Array.from(sources as Iterable<SourceLike>, (source) => addSource(source, medium)) : addSource(sources, medium);\n}\nexport function getSources(medium: HTMLElement): MediaState[\"sources\"] {\n  const sources = medium.querySelectorAll<HTMLSourceElement>(\"source\"),\n    _sources: SourceLike[] = [];\n  sources.forEach((source) => {\n    const obj: Record<string, any> = {};\n    putSourceDetails(source, obj);\n    _sources.push(obj as SourceLike);\n  });\n  return _sources as MediaState[\"sources\"];\n}\nexport const removeSources = (medium: HTMLElement): void => medium?.querySelectorAll(\"source\")?.forEach((source) => source.remove());\nexport function isSameSources(a?: Sources, b?: Sources): boolean {\n  if (!a || !b || a.length !== b.length) return false;\n  return a.every((s1) => b.some((s2) => isSameURL(s1.src, s2.src) && s1.type === s2.type && s1.media === s2.media));\n}\n\n// Track Management\nexport type TrackType = \"Audio\" | \"Video\" | \"Text\";\nexport function putTrackDetails(track: any, el: HTMLTrackElement | Record<string, any>) {\n  if (track.id) el.id = track.id;\n  if (track.kind) el.kind = track.kind;\n  if (track.label) el.label = track.label;\n  if (track.srclang) el.srclang = track.srclang;\n  if (track.src) el.src = track.src;\n  if (track.default) el.default = track.default;\n}\nexport function addTracks(tracks: TrackLike | Iterable<TrackLike> = [], medium: HTMLElement): HTMLTrackElement | HTMLTrackElement[] {\n  const addTrack = (track: TrackLike, med: HTMLElement) => {\n    const trackEl = createEl(\"track\");\n    putTrackDetails(track, trackEl);\n    return med.appendChild(trackEl);\n  };\n  return isIter(tracks) ? Array.from(tracks as Iterable<TrackLike>, (track) => addTrack(track, medium)) : addTrack(tracks, medium);\n}\nexport function getTracks(medium: HTMLElement, cues = false): TrackLike[] {\n  const tracks = medium.querySelectorAll<HTMLTrackElement>(!cues ? \"track\" : \"track:is([kind='captions'], [kind='subtitles'])\"),\n    _tracks: TrackLike[] = [];\n  tracks.forEach((track) => {\n    const obj: Record<string, any> = {};\n    putTrackDetails(track, obj);\n    _tracks.push(obj as TrackLike);\n  });\n  return _tracks;\n}\nexport const removeTracks = (medium: HTMLElement): void => medium.querySelectorAll(\"track\")?.forEach((track) => (track.kind === \"subtitles\" || track.kind === \"captions\") && track.remove());\nexport function isSameTracks(a?: Tracks, b?: Tracks): boolean {\n  if (!a || !b || a.length !== b.length) return false;\n  return a.every((t1) => b.some((t2) => isSameURL(t1.src, t2.src) && t1.kind === t2.kind && t1.label === t2.label && t1.srclang === t2.srclang && t1.default === t2.default));\n}\nconst isTrack = (type: TrackType, term: any) => `${type}Track` in window && term instanceof (window as any)[`${type}Track`];\nexport function getTrackIdx(medium: HTMLMediaElement, type: TrackType, term: any = \"active\"): number {\n  if (\"number\" === typeof term) return term;\n  const list = (medium as any)[`${type.toLowerCase()}Tracks`];\n  if (term === \"active\") {\n    if (type === \"Text\") for (let i = 0; i < +list?.length; i++) if (list[i].mode === \"showing\") return i;\n    if (type === \"Audio\") for (let i = 0; i < +list?.length; i++) if (list[i].enabled) return i;\n    if (type === \"Video\") return list.selectedIndex ?? -1;\n  }\n  if (isTrack(type, term)) return Array.prototype.indexOf.call(list, term);\n  if (\"string\" === typeof term) {\n    term = term.toLowerCase();\n    return !isNaN(+term) ? +term : Array.prototype.findIndex.call(list, (t: any) => t.id.toLowerCase() === term || t.label.toLowerCase() === term || t.srclang.toLowerCase() === term || t.language.toLowerCase() === term || isSameURL(t.src, term));\n  }\n  return -1;\n}\nexport function setCurrentTrack(medium: HTMLMediaElement, type: TrackType, term: any, flush = false): void {\n  const list = (medium as any)[`${type.toLowerCase()}Tracks`],\n    idx = getTrackIdx(medium, type, term);\n  if (type !== \"Video\") for (let i = 0; i < list.length; i++) type === \"Text\" ? (list[i].mode = i === idx ? \"showing\" : flush ? \"disabled\" : \"hidden\") : (list[i].enabled = i === idx);\n  else list[idx] && (list[idx].selected = true);\n}\n\n// ============ Caption/Subtitle Utilities ============\n\nexport const stripTags = (text: string): string => text.replace(/<(\\/)?([a-z0-9.:]+)([^>]*)>/gi, \"\");\n\n// SRT/VTT Conversion\nexport function srtToVtt(srt: string, vttLines: string[] = [\"WEBVTT\", \"\"]): string {\n  const input = srt.replace(/\\r\\n?/g, \"\\n\").trim();\n  for (const block of input.split(/\\n{2,}/)) {\n    const lines = block.split(\"\\n\");\n    let idx = /^\\d+$/.test(lines[0].trim()) ? 1 : 0;\n    const timing = lines[idx]?.trim().replace(/\\s+/g, \" \"),\n      m = timing?.match(/(\\d{1,2}:\\d{2}:\\d{2})(?:[.,](\\d{1,3}))?\\s*-->\\s*(\\d{1,2}:\\d{2}:\\d{2})(?:[.,](\\d{1,3}))?/);\n    if (!m) continue;\n    const [, startHms, startMsRaw = \"0\", endHms, endMsRaw = \"0\"] = m,\n      to3 = (ms: string) => ms.padEnd(3, \"0\").slice(0, 3);\n    vttLines.push(startHms + \".\" + to3(startMsRaw) + \" --> \" + endHms + \".\" + to3(endMsRaw));\n    for (let i = idx + 1; i < lines.length; i++) vttLines.push(lines[i]);\n    vttLines.push(\"\");\n  }\n  return vttLines.join(\"\\n\");\n}\n\nexport function parseVttText(text: string): string {\n  const state = { tag: /<(\\/)?([a-z0-9.:]+)([^>]*)>/gi, o: \"\", l: 0, p: null as string | null, c: \"\" },\n    esc = (s: string) => s.replace(/[&<>\"']/g, (c) => ({ \"&\": \"&amp;\", \"<\": \"&lt;\", \">\": \"&gt;\", '\"': \"&quot;\", \"'\": \"&#39;\" })[c]!);\n  let m: RegExpExecArray | null;\n  while ((m = state.tag.exec(text))) {\n    const chunk = text.slice(state.l, m.index);\n    if (chunk) state.c += esc(chunk);\n    const [_, cls, tag_n, rest] = m,\n      low = tag_n.toLowerCase();\n    if (/^[0-9]/.test(tag_n)) {\n      state.o += state.p ? `<span data-part=\"timed\" data-time=\"${state.p}\">${state.c}</span>` : state.c;\n      state.p = tag_n;\n      state.c = \"\";\n    } else {\n      if (cls) state.c += [\"c\", \"v\", \"lang\"].includes(low) ? \"</span>\" : `</${low}>`;\n      else if ([\"b\", \"i\", \"u\", \"ruby\", \"rt\"].includes(low)) state.c += `<${low}>`;\n      else if (low === \"c\") state.c += `<span class=\"vtt-c ${rest.replace(/\\.([a-z0-9_-]+)/gi, \"$1 \").trim()}\">`;\n      else if (low === \"v\") state.c += `<span data-part=\"voice\"${rest.trim() ? ` title=\"${esc(rest.trim())}\"` : \"\"}>`;\n      else if (low === \"lang\") state.c += `<span lang=\"${esc(rest.trim())}\">`;\n    }\n    state.l = state.tag.lastIndex;\n  }\n  const lChunk = text.slice(state.l);\n  if (lChunk) state.c += esc(lChunk);\n  return state.o + (state.p ? `<span data-part=\"timed\" data-time=\"${state.p}\">${state.c}</span>` : state.c);\n}\n\nexport function formatVttLine(p: string, maxChars: number): string[] {\n  const state = { tokens: p.match(/<[^>]+>|\\S+/g) || [], stack: [] as string[], parts: [] as string[], line: \"\", len: 0, openStr: \"\", closeStr: \"\", timeTag: \"\", lastWasTag: false },\n    updateTags = () => ((state.openStr = state.stack.map((n) => `<${n}>`).join(\"\")), (state.closeStr = state.stack.reduceRight((a, n) => a + `</${n}>`, \"\"))),\n    flush = () => state.line && (state.parts.push(state.line + state.closeStr), (state.line = (state.timeTag || \"\") + state.openStr), (state.len = 0), (state.lastWasTag = true));\n  state.tokens.forEach((tok) => {\n    const tag = tok[0] === \"<\",\n      closeTag = tag && tok[1] === \"/\";\n    if (tag) {\n      if (state.line && !state.lastWasTag && !closeTag) state.line += \" \";\n      const m = tok.match(/^<\\/?\\s*([a-z0-9._:-]+)/i),\n        n = m?.[1] || \"\",\n        timing = /^\\d/.test(n);\n      if (timing) return ((state.timeTag = tok), (state.line += tok), (state.lastWasTag = true));\n      if (!closeTag && !tok.endsWith(\"/>\") && n) (state.stack.push(n), updateTags());\n      if (closeTag && state.stack.length) (state.stack.pop(), updateTags());\n      return ((state.lastWasTag = true), (state.line += tok));\n    }\n    const len = stripTags(tok).length,\n      needSpace = state.line && !state.lastWasTag;\n    if (state.len + (needSpace ? 1 : 0) + len > maxChars) flush();\n    if (needSpace) ((state.line += \" \"), (state.len += 1));\n    ((state.line += tok), (state.len += len), (state.lastWasTag = false));\n  });\n  return (flush(), state.parts);\n}\n", "// Media Time Formatting\nexport function formatMediaTime({ time, format = \"digital\", elapsed = true, showMs = false, casing = \"normal\" }: { time?: number; format?: string; elapsed?: boolean; showMs?: boolean; casing?: \"normal\" | \"upper\" | \"title\" } = { time: 0 }): string {\n  const long = format.endsWith(\"long\"),\n    sx = (n = 0) => (n == 1 ? \"\" : \"s\"),\n    cs = (str: string) => (casing === \"upper\" ? str.toUpperCase() : casing === \"title\" ? str.replace(/^([a-z])/i, (m) => m.toUpperCase()) : str.toLowerCase()),\n    wrd = (n = 0) => ({ h: cs(long ? \" hour\" + sx(n) + \" \" : \"h\"), m: cs(long ? \" minute\" + sx(n) + \" \" : \"m\"), s: cs(long ? \" second\" + sx(n) + \" \" : \"s\"), ms: cs(long ? \" millisecond\" + sx(n) + \" \" : \"ms\") }),\n    pad = (v: string | number, n = 2, f?: boolean) => (long && !f ? v : String(v).padStart(n, \"number\" === typeof +n ? \"0\" : \"-\"));\n  if (isNaN(time ?? NaN) || time === Infinity) return format !== \"digital\" ? (\"-\" + wrd().h + pad(\"-\") + wrd().m + (!elapsed ? \"left\" : \"\")).trim() : (!elapsed ? \"--:--\" : \"-:--\");\n  const s = Math.floor(Math.abs(time!) % 60),\n    m = Math.floor(Math.abs(time!) / 60) % 60,\n    h = Math.floor(Math.abs(time!) / 3600),\n    ms = Math.floor((Math.abs(time!) % 1) * 1000); // returns early so \"!\"\n  if (format === \"digital\") {\n    const base = h ? h + \":\" + pad(m, 2, true) + \":\" + pad(s, 2, true) : m + \":\" + pad(s, 2, true);\n    return !elapsed ? \"-\" + base : base;\n  }\n  const base = h ? h + wrd(h).h + pad(m) + wrd(m).m + pad(s) + wrd(s).s : m + wrd(m).m + pad(s) + wrd(s).s,\n    msPart = showMs && ms ? pad(ms, 3) + wrd(ms).ms : \"\";\n  return (base + msPart + (!long ? \" \" : \"\") + (!elapsed ? \"left\" : \"\")).trim();\n}\n\n// Time Ranges\nexport interface TimeRange {\n  length: number;\n  start(index: number): number;\n  end(index: number): number;\n}\n\nexport function createTimeRanges(ranges?: [number, number][] | TimeRange): TimeRange {\n  if (!ranges || (ranges as TimeRange).length !== undefined) return (ranges as TimeRange) || { length: 0, start: () => 0, end: () => 0 };\n  const pairs = (ranges as [number, number][]).sort((a, b) => a[0] - b[0]);\n  return {\n    length: pairs.length,\n    start: (i: number) => (pairs[i] ? pairs[i][0] : 0),\n    end: (i: number) => (pairs[i] ? pairs[i][1] : 0),\n  };\n};\n", "import type { Control, ControlPanelBottomTuple } from \"../plugs\";\nimport type { DeepMerge, Unflatten, WCPaths, Paths, PathValue } from \"../types/obj\";\nimport type { UIObject, UISettings } from \"../types/UIOptions\";\nimport { camelize } from \".\";\nconst arrRx = /^([^\\[\\]]+)\\[(\\d+)\\]$/;\n\n// Type Guards\nexport function isDef(val: any): boolean {\n  return val !== undefined;\n}\n\nexport function isArr<T = unknown>(obj: any): obj is T[] {\n  return Array.isArray(obj);\n}\n\nexport function isObj<T extends object = object>(obj: any): obj is T {\n  return \"object\" === typeof obj && obj !== null && !isArr(obj) && \"function\" !== typeof obj;\n}\n\nexport function isIter<T = unknown>(obj: any): obj is Iterable<T> {\n  return obj != null && \"function\" === typeof obj[Symbol.iterator];\n}\n\nexport function isUISetting<T = unknown>(obj: any): obj is UISettings<T> {\n  return isObj(obj) && \"options\" in obj && isArr(obj.options);\n}\n\nexport function inBoolArrOpt(opt: any, str: string): boolean {\n  return opt?.includes?.(str) ?? opt;\n}\n\n// Assignment & Derivation\nexport function setHTMLConfig<T extends object>(target: T, attr: `tmg--${Paths<T, \"--\">}`, value: string): void {\n  value = value.trim();\n  const path = attr.replace(\"tmg--\", \"\") as Paths<T, \"--\">;\n  const parsedValue = (() => {\n    if (value.includes(\",\")) return value.split(\",\")?.map((v: string) => v.trim());\n    if (value === \"true\") return true;\n    if (value === \"false\") return false;\n    if (value === \"null\") return null;\n    if (/^\\d+$/.test(value)) return Number(value);\n    return value;\n  })() as PathValue<T, typeof path, \"--\">;\n  setAny<T, \"--\">(target, path, parsedValue, \"--\", (p) => camelize(p));\n}\n\nexport function setAny<T extends object, const S extends string = \".\">(target: T, key: Paths<T, S>, value: PathValue<T, typeof key, S>, separator: S = \".\" as S, keyFunc?: (p: string) => string): void {\n  if (!key.includes(separator)) return void ((target as any)[keyFunc ? keyFunc(key) : key] = value);\n  const keys = key.split(separator);\n  let currObj: any = target;\n  for (let i = 0; i < keys.length; i++) {\n    const key = keyFunc ? keyFunc(keys[i]) : keys[i],\n      match = key.includes(\"[\") && key.match(arrRx);\n    if (match) {\n      const [, key, iStr] = match;\n      if (!isArr(currObj[key])) currObj[key] = [];\n      if (i === keys.length - 1) currObj[key][Number(iStr)] = value;\n      else ((currObj[key][Number(iStr)] ||= {}), (currObj = currObj[key][Number(iStr)]));\n    } else {\n      if (i === keys.length - 1) currObj[key] = value;\n      else ((currObj[key] ||= {}), (currObj = currObj[key]));\n    }\n  }\n}\n\nexport function getAny<T extends object, const S extends string = \".\">(source: T, key: Paths<T, S>, separator: S = \".\" as S, keyFunc?: (p: string) => string): PathValue<T, typeof key, S> | undefined {\n  if (!key.includes(separator)) return (source as any)[keyFunc ? keyFunc(key) : key];\n  const keys = key.split(separator);\n  let currObj: any = source;\n  for (let i = 0; i < keys.length; i++) {\n    const key = keyFunc ? keyFunc(keys[i]) : keys[i],\n      match = key.includes(\"[\") && key.match(arrRx);\n    if (match) {\n      const [, key, iStr] = match;\n      if (!isArr(currObj[key]) || !(key in currObj)) return undefined;\n      currObj = currObj[key][Number(iStr)];\n    } else {\n      if (!isObj<Record<string, any>>(currObj) || !(key in currObj)) return undefined;\n      currObj = currObj[key];\n    }\n  }\n  return currObj;\n}\n\nexport function deleteAny<T extends object, const S extends string = \".\">(target: T, key: Paths<T, S>, separator: S = \".\" as S, keyFunc?: (p: string) => string): void {\n  if (!key.includes(separator)) return void delete (target as any)[keyFunc ? keyFunc(key) : key];\n  const keys = key.split(separator);\n  let currObj: any = target;\n  for (let i = 0; i < keys.length; i++) {\n    const key = keyFunc ? keyFunc(keys[i]) : keys[i],\n      match = key.includes(\"[\") && key.match(arrRx);\n    if (match) {\n      const [, key, iStr] = match;\n      if (!isArr(currObj[key]) || !(key in currObj)) return;\n      if (i === keys.length - 1) delete currObj[key][Number(iStr)];\n      else currObj = currObj[key][Number(iStr)];\n    } else {\n      if (!isObj<Record<string, any>>(currObj) || !(key in currObj)) return;\n      if (i === keys.length - 1) delete currObj[key];\n      else currObj = currObj[key];\n    }\n  }\n}\n\nexport function inAny<T extends object, const S extends string = \".\">(source: T, key: string | Paths<T, S>, separator: S = \".\" as S, keyFunc?: (p: string) => string): boolean {\n  if (!key.includes(separator)) return key in source;\n  const keys = key.split(separator);\n  let currObj: any = source;\n  for (let i = 0; i < keys.length; i++) {\n    const key = keyFunc ? keyFunc(keys[i]) : keys[i],\n      match = key.includes(\"[\") && key.match(arrRx);\n    if (match) {\n      const [, key, iStr] = match;\n      if (!isArr(currObj[key]) || !(key in currObj)) return false;\n      if (i === keys.length - 1) return true;\n      currObj = currObj[key][Number(iStr)];\n    } else {\n      if (!isObj<Record<string, any>>(currObj) || !(key in currObj)) return false;\n      if (i === keys.length - 1) return true;\n      currObj = currObj[key];\n    }\n  }\n  return true;\n}\n\nexport function parseUIObj<T extends Record<string, any>>(obj: T): UIObject<T> {\n  const result: any = {} as UIObject<T>,\n    keys = Object.keys(obj);\n  for (let i = 0; i < keys.length; i++) {\n    const entry = obj[keys[i]];\n    if (!isObj(entry)) continue;\n    if (isUISetting(entry)) {\n      result[keys[i]] = {\n        values: entry.options.map((opt: any) => (\"value\" in opt ? opt.value : opt)),\n        displays: entry.options.map((opt: any) => (\"display\" in opt ? opt.display : String(opt))),\n      };\n    } else result[keys[i]] = parseUIObj(entry); // recurse on sub-branch\n  }\n  return result;\n}\n\nexport function parseAnyObj<T extends Record<string, any>, const S extends string = \".\">(obj: T, separator: S = \".\" as S, keyFunc = (p: string) => p, visited = new WeakSet()): Unflatten<T, S> {\n  if (!isObj(obj) || visited.has(obj)) return obj as Unflatten<T, S>; // no circular references\n  visited.add(obj);\n  const result: any = {};\n  Object.keys(obj).forEach((k) => (k.includes(separator) ? setAny(result, k as any, parseAnyObj(obj[k] as any, separator, keyFunc, visited), separator, keyFunc) : (result[k] = isObj(obj[k]) ? parseAnyObj(obj[k] as any, separator, keyFunc, visited) : obj[k])));\n  return result as Unflatten<T, S>;\n}\n\nexport function parsePanelBottomObj(obj: Partial<ControlPanelBottomTuple> | Control[][] | Control[] | unknown, arr?: false): ControlPanelBottomTuple | false;\nexport function parsePanelBottomObj(obj: Partial<ControlPanelBottomTuple> | Control[][] | Control[] | unknown, arr: true): Control[] | false;\nexport function parsePanelBottomObj(obj: Partial<ControlPanelBottomTuple> | Control[][] | Control[] | unknown = [], arr = false): ControlPanelBottomTuple | Control[] | false {\n  if (!isObj(obj) && !isArr(obj)) return false;\n  const [third = [], second = [], first = []] = isObj<Partial<ControlPanelBottomTuple>>(obj) ? (Object.values(obj).reverse() as Control[][]) : isArr((obj as Control[][])[0]) ? [...(obj as Control[][])].reverse() : [obj as Control[]];\n  return arr ? ([...third, ...second, ...first] as Control[]) : ({ 1: first, 2: second, 3: third } as ControlPanelBottomTuple);\n}\n\nexport function parseEvOpts<T extends object>(options: T | boolean | undefined, opts: (keyof T)[] | readonly (keyof T)[], boolOpt: keyof T = opts[0], result = {} as T): T {\n  return (Object.assign(result, \"boolean\" === typeof options ? { [boolOpt]: options } : options), result);\n}\n\n// Merging & Traversal\nexport function mergeObjs<T1 extends object, T2 extends object>(o1: T1, o2: T2): DeepMerge<T1, T2>;\nexport function mergeObjs<T1 extends object>(o1: T1): T1;\nexport function mergeObjs<T2 extends object>(o1: undefined | null, o2: T2): T2;\nexport function mergeObjs(o1: any = {}, o2: any = {}): any {\n  const merged = { ...(o1 || {}), ...(o2 || {}) };\n  return (Object.keys(merged).forEach((k) => isObj(o1?.[k]) && isObj(o2?.[k]) && (merged[k] = mergeObjs(o1[k], o2[k]))), merged);\n}\n\nexport function getTrailPaths<T>(path: WCPaths<T>, reverse: boolean = true): WCPaths<T>[] {\n  const parts = path.split(\".\"),\n    chain: WCPaths<T>[] = [\"*\"];\n  let acc = \"\";\n  for (let i = 0; i < parts.length; i++) {\n    acc += (i === 0 ? \"\" : \".\") + parts[i];\n    chain.push(acc as WCPaths<T>);\n  }\n  return reverse ? chain.reverse() : chain; // for mostly logs\n}\n\nexport function getTrailRecords<T extends object>(obj: T, path: WCPaths<T>): [WCPaths<T>, PathValue<T, WCPaths<T>>, PathValue<T, WCPaths<T>>][] {\n  const parts = path.split(\".\"),\n    record: ReturnType<typeof getTrailRecords<T>> = [[\"*\", obj, obj]];\n  let acc = \"\",\n    currObj: any = obj;\n  for (let i = 0; i < parts.length; i++) {\n    acc += (i === 0 ? \"\" : \".\") + parts[i];\n    record.push([acc as WCPaths<T>, currObj, (currObj = Reflect.get(currObj, parts[i]))]); // at most one iteration per depth, storage over derivation\n  }\n  return record;\n}\n\n// Cloning\nexport function deepClone<T>(obj: T, visited = new WeakMap()): T {\n  if (!isObj(obj) || visited.has(obj) || \"symbol\" === typeof obj || \"function\" === typeof obj || obj instanceof Map || obj instanceof Set || obj instanceof WeakMap || obj instanceof Promise || obj instanceof Element || obj instanceof EventTarget) return obj; // no circular references\n  const clone: any = isArr(obj) ? [] : {};\n  visited.set(obj, clone);\n  const keys = Object.keys(obj);\n  for (let i = 0; i < keys.length; i++) {\n    const val = (obj as any)[keys[i]];\n    clone[keys[i]] = isObj(val) || isArr(val) ? deepClone(val, visited) : val;\n  }\n  return clone;\n}\n", "import { AptRange } from \"../types/generics\";\n\n// Validators\nexport function isValidNum(val: any): boolean {\n  return !isNaN(val ?? NaN) && val !== Infinity;\n}\n\nexport function clamp(min = 0, val: number, max = Infinity) {\n  return Math.min(Math.max(val, min), max);\n}\n\nexport function safeNum(number: any, fallback = 0): number {\n  return isValidNum(number) ? number : fallback;\n}\n\n// Parsers\nexport function parseIfPercent(percent: any, amount = 100): number {\n  return percent?.endsWith?.(\"%\") ? safeNum((percent.slice(0, -1) / 100) * amount) : percent;\n}\n\nexport function parseCSSTime(time: any): number {\n  return time?.endsWith?.(\"ms\") ? parseFloat(time) : parseFloat(time) * 1000;\n}\n\nexport function parseCSSUnit(val: any): number {\n  return val?.endsWith?.(\"px\") ? parseFloat(val) : remToPx(parseFloat(val));\n}\n\nexport function remToPx(val: number): number {\n  return parseFloat(getComputedStyle(document.documentElement).fontSize) * val;\n}\n\n// Helpers\nexport function stepNum<T extends AptRange>(v = 0, { min, max, step }: T): number {\n  const s = Math.round((safeNum(v) - min) / step) * step + min;\n  return clamp(min, +s.toFixed(10), max);\n}\n\nconst _stepsCache = new Map<string, number[]>();\nexport function rotate<T>(cur: T, steps: T[], dir?: \"forwards\" | \"backwards\", wrap?: boolean): T;\nexport function rotate(cur: number, steps: AptRange, dir?: \"forwards\" | \"backwards\", wrap?: boolean): number;\nexport function rotate(cur: any, steps: any, dir: \"forwards\" | \"backwards\" = \"forwards\", wrap = true): any {\n  let list: any[];\n  if (Array.isArray(steps)) list = steps;\n  else {\n    const key = `${steps.min}|${steps.max}|${steps.step}`; // Generate cache key from min|max|step\n    if (_stepsCache.has(key)) list = _stepsCache.get(key)!;\n    else _stepsCache.set(key, (list = Array.from({ length: Math.floor((steps.max - steps.min) / steps.step) + 1 }, (_, i) => steps.min + i * steps.step)));\n  }\n  let idx = \"number\" === typeof cur ? list.reduce((p, c, x) => (Math.abs(c - cur) < Math.abs(list[p] - cur) ? x : p), 0) : list.indexOf(cur);\n  idx = idx + (dir === \"forwards\" ? 1 : -1);\n  return list[wrap ? (idx + list.length) % list.length : clamp(0, idx, list.length - 1)];\n}\n", "// ============ Constants ============\n\nexport const FN_KEY = \"tmg_fn_registry\";\nexport const LUID_KEY = \"tmg_local_uid\";\n\nexport const whiteListedKeys = [\" \", \"enter\", \"escape\", \"arrowup\", \"arrowdown\", \"arrowleft\", \"arrowright\", \"home\", \"end\", \"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"] as const;\n\nexport const errorCodes = [\n  1, // MEDIA_ERR_ABORTED\n  2, // MEDIA_ERR_NETWORK\n  3, // MEDIA_ERR_DECODE\n  4, // MEDIA_ERR_SRC_NOT_SUPPORTED\n  5, // MEDIA_ERR_UNKNOWN\n] as const;\n\n// ============ Configurations ============\n\nexport const modes = [\"fullscreen\", \"theater\", \"pictureInPicture\", \"miniplayer\"] as const;\n\nexport const controls = [\"expandminiplayer\", \"removeminiplayer\", \"meta\", \"timeline\", \"capture\", \"fullscreenorientation\", \"fullscreenlock\", \"prev\", \"playpause\", \"next\", \"brightness\", \"volume\", \"timeandduration\", \"spacer\", \"playbackrate\", \"captions\", \"settings\", \"objectfit\", \"pictureinpicture\", \"theater\", \"fullscreen\"] as const;\n\nexport const bigControls = [\"bigprev\", \"bigplaypause\", \"bignext\"] as const;\n\nexport const keyShortcutActions = [\"prev\", \"next\", \"playPause\", \"skipBwd\", \"skipFwd\", \"stepFwd\", \"stepBwd\", \"mute\", \"dark\", \"volumeUp\", \"volumeDown\", \"brightnessUp\", \"brightnessDown\", \"playbackRateUp\", \"playbackRateDown\", \"timeMode\", \"timeFormat\", \"capture\", \"objectFit\", \"pictureInPicture\", \"theater\", \"fullscreen\", \"captions\", \"captionsFontSizeUp\", \"captionsFontSizeDown\", \"captionsFontFamily\", \"captionsFontWeight\", \"captionsFontVariant\", \"captionsFontOpacity\", \"captionsBackgroundOpacity\", \"captionsWindowOpacity\", \"captionsCharacterEdgeStyle\", \"captionsTextAlignment\", \"settings\"] as const;\n\nexport const moddedKeyShortcutActions = [\"skip\", \"volume\", \"brightness\", \"playbackRate\", \"captionsFontSize\"] as const; // numerical values\n\nexport const aptAutoplayOptions = [\"in-view\", \"out-view\", \"in-view-always\", \"out-view-always\"];\n\nexport const orientationOptions = [\"auto\", \"landscape\", \"portrait\", \"portrait-primary\", \"portrait-secondary\", \"landscape-primary\", \"landscape-secondary\"] as const;\n", "import { LUID_KEY } from \"../consts/generics\";\n\n// Case Conversion\nexport function capitalize(word = \"\"): string {\n  return word.replace(/^(\\s*)([a-z])/i, (_, s, l) => s + l.toUpperCase());\n}\n\nexport function camelize(str = \"\", { source } = /[\\s_-]+/, { preserveInnerCase: pIC = true, upperFirst: uF = false } = {}): string {\n  return (pIC ? str : str.toLowerCase()).replace(new RegExp(source + \"(\\\\w)\", \"g\"), (_, c) => c.toUpperCase()).replace(/^\\w/, (c) => c[uF ? \"toUpperCase\" : \"toLowerCase\"]());\n}\n\nexport function uncamelize(str = \"\", separator = \" \"): string {\n  return str.replace(/([a-z])([A-Z])/g, `$1${separator}$2`).toLowerCase();\n}\n\n// Generation\nexport function uid(prefix = \"tmg_\"): string {\n  return prefix + Date.now().toString(36) + \"_\" + performance.now().toString(36).replace(\".\", \"\") + \"_\" + Math.random().toString(36).slice(2);\n}\nexport function luid(prefix = \"tmg_local_\"): string {\n  let id = localStorage.getItem(LUID_KEY);\n  return (!id && localStorage.setItem(LUID_KEY, (id = uid(prefix))), id || \"\");\n}\n\n// Checkers\nexport function isSameURL(src1: unknown, src2: unknown): boolean {\n  if (typeof src1 !== \"string\" || typeof src2 !== \"string\" || !src1 || !src2) return false;\n  try {\n    const u1 = new URL(src1, window.location.href),\n      u2 = new URL(src2, window.location.href);\n    return decodeURIComponent(u1.origin + u1.pathname) === decodeURIComponent(u2.origin + u2.pathname);\n  } catch {\n    return src1.replace(/\\\\/g, \"/\").split(\"?\")[0].trim() === src2.replace(/\\\\/g, \"/\").split(\"?\")[0].trim();\n  }\n}\n", "// File Size Formatting\nexport function formatSize(size: number, decimals = 3, base = 1e3): string {\n  if (size < base) return size + \" byte\" + (size == 1 ? \"\" : \"s\");\n  const units = [\"B\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"],\n    exponent = Math.min(Math.floor(Math.log(size) / Math.log(base)), units.length - 1);\n  return (size / Math.pow(base, exponent)).toFixed(decimals).replace(/\\.0+$/, \"\") + \" \" + units[exponent];\n}\n\n// Extension Helpers\nexport function getExtension(fn: string): string {\n  return fn.slice(fn.lastIndexOf(\".\") + 1).toLowerCase() ?? \"\";\n}\n\nexport function noExtension(fn: string): string {\n  return fn.replace(/(?:\\.(?:mp4|mkv|avi|mov|webm|flv|wmv|m4v|mpg|mpeg|3gp|ogv|ts))+$/i, \"\");\n}\n\n// MIME Type Resolution\nexport function getMimeTypeFromExtension(fn: string): string {\n  return (\n    (\n      {\n        m3u8: \"application/vnd.apple.mpegurl\",\n        mpd: \"application/dash+xml\",\n        avi: \"video/x-msvideo\",\n        mp4: \"video/mp4\",\n        mkv: \"video/x-matroska\",\n        mov: \"video/quicktime\",\n        flv: \"video/x-flv\",\n        webm: \"video/webm\",\n        ogg: \"video/ogg\",\n        wmv: \"video/x-ms-wmv\",\n        \"3gp\": \"video/3gpp\",\n        \"3g2\": \"video/3gpp2\",\n        mpeg: \"video/mpeg\",\n        ts: \"video/mp2t\",\n        m4v: \"video/x-m4v\",\n      } as Record<string, string>\n    )[getExtension(fn)] || \"application/octet-stream\"\n  );\n}\n", "import { createEl } from \"./dom\";\nimport { clamp } from \"./num\";\n\n// Types\ntype RGB = [number, number, number];\ntype DominantColorFormat = \"rgb\" | \"hex\";\n\n// RGB Analysis\nexport function getRGBBri([r, g, b]: RGB): number {\n  return 0.299 * r + 0.587 * g + 0.114 * b;\n}\n\nexport function getRGBSat([r, g, b]: RGB): number {\n  return Math.max(r, g, b) - Math.min(r, g, b);\n}\n\nexport function clampRGBBri([r, g, b]: RGB, m = 40): RGB {\n  const br = getRGBBri([r, g, b]),\n    d = br < m ? m - br : br > 255 - m ? -(br - (255 - m)) : 0;\n  return [r + d, g + d, b + d].map((v) => clamp(0, v, 255)) as RGB;\n}\n\n// Dominant Color Detection\nexport async function getDominantColor(src: string | HTMLImageElement | HTMLCanvasElement | { canvas: HTMLCanvasElement; width: number; height: number }, format: DominantColorFormat = \"rgb\", raw = false): Promise<string | RGB | null> {\n  if (typeof src == \"string\")\n    src = await new Promise<HTMLImageElement>((res, rej) => {\n      const i = createEl(\"img\", { src: String(src), crossOrigin: \"anonymous\", onload: () => res(i), onerror: () => rej(new Error(`Image load error: ${src}`)) });\n    });\n  if ((src as { canvas?: HTMLCanvasElement })?.canvas) src = (src as { canvas: HTMLCanvasElement }).canvas;\n  const c = document.createElement(\"canvas\"),\n    x = c.getContext(\"2d\"),\n    s = Math.min(64, (src as HTMLImageElement | HTMLCanvasElement).width, (src as HTMLImageElement | HTMLCanvasElement).height);\n  c.width = c.height = s;\n  src && x?.drawImage(src as CanvasImageSource, 0, 0, s, s);\n  const d = src && (x?.getImageData(0, 0, s, s).data as Uint8ClampedArray), // had to fool ts, coallesced to 0 below\n    ct: Record<string, number> = {},\n    pt: Record<string, RGB> = {} as Record<string, RGB>;\n  for (let i = 0; i < (d?.length ?? 0); i += 4) {\n    if (d[i + 3] < 128) continue;\n    const r = d[i] & 0xf0,\n      g = d[i + 1] & 0xf0,\n      b = d[i + 2] & 0xf0; // Optimized bitwise extraction\n    const k = (r << 16) | (g << 8) | b;\n    ct[k] = (ct[k] || 0) + 1;\n    pt[k] = pt[k] ? [pt[k][0] + d[i], pt[k][1] + d[i + 1], pt[k][2] + d[i + 2]] : [d[i], d[i + 1], d[i + 2]];\n  }\n  const clrs = Object.keys(ct)\n    .sort((a, b) => ct[b] - ct[a])\n    .slice(0, 7)\n    .map((k) => ({ key: k, rgb: pt[k].map((v) => Math.round(v / ct[k])) as RGB }));\n  if (!clrs.length) return null;\n  const [r, g, b] = clampRGBBri(clrs.reduce((sat, curr) => (getRGBSat(sat.rgb) > getRGBSat(curr.rgb) ? sat : curr), clrs[0]).rgb, 70);\n  return format === \"hex\" ? `#${((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1)}` : raw == false ? `rgb(${r},${g},${b})` : [r, g, b];\n}\n\nexport function convertToMonoChrome(canvas: HTMLCanvasElement, context: CanvasRenderingContext2D) {\n  const frame = context.getImageData(0, 0, canvas.width || 1, canvas.height || 1);\n  for (let i = 0; i < frame.data.length / 4; i++) {\n    const grey = (frame.data[i * 4 + 0] + frame.data[i * 4 + 1] + frame.data[i * 4 + 2]) / 3;\n    ((frame.data[i * 4 + 0] = grey), (frame.data[i * 4 + 1] = grey), (frame.data[i * 4 + 2] = grey));\n  }\n  context.putImageData(frame, 0, 0);\n}\n", "/*\n * Portions of this code are derived from Video.js\n * https://github.com/videojs/video.js\n * Licensed under Apache License 2.0\n * Copyright (c) Brightcove, Inc. and contributors\n */\n\n// Types\ntype BrandEntry = { brand?: string; version?: string };\n\n// Environment guards\nconst w = typeof window !== \"undefined\" ? window : undefined;\nconst nav = w?.navigator;\nconst ua = nav?.userAgent || \"\";\nconst uaData = (nav as Navigator & { userAgentData?: { platform?: string; brands?: BrandEntry[] } })?.userAgentData;\n\n// Base flags: bools first, versions second for readability\nexport let IS_ANDROID = false;\nexport let IS_WINDOWS = false;\nexport let IS_FIREFOX = false;\nexport let IS_EDGE = false;\nexport let IS_CHROME = false;\nexport let IS_CHROMIUM = false;\nexport let IS_SAFARI = false;\nexport let IS_IE = false;\nexport let IS_TIZEN = false;\nexport let IS_WEBOS = false;\nexport let IS_IPOD = false;\nexport let IS_IPAD = false;\nexport let IS_IPHONE = false;\n// Versioned details\ntype Version = string | null;\nexport let IOS_VERSION: Version = null;\nexport let ANDROID_VERSION: Version = null;\nexport let CHROME_VERSION: Version = null;\nexport let CHROMIUM_VERSION: Version = null;\nexport let IE_VERSION: Version = null;\n\n// Capabilities\nexport const IS_CHROMECAST_RECEIVER = Boolean((w as any)?.cast?.framework?.CastReceiverContext);\nexport const TOUCH_ENABLED = Boolean(w && (\"ontouchstart\" in w || (nav as Navigator & { maxTouchPoints?: number })?.maxTouchPoints || ((w as any).DocumentTouch && w.document instanceof (w as any).DocumentTouch)));\n\n// Helpers\nconst pickVersion = (brands: BrandEntry[], needle: string): Version => brands.find((b) => b.brand === needle && b.version)?.version || null;\n\n// Modern detection first (userAgentData)\nif (uaData?.platform && uaData?.brands) {\n  // Platform first\n  IS_ANDROID = uaData.platform === \"Android\";\n  IS_WINDOWS = uaData.platform === \"Windows\";\n  // Browser family\n  IS_EDGE = uaData.brands.some((b) => b.brand === \"Microsoft Edge\");\n  IS_CHROMIUM = uaData.brands.some((b) => b.brand === \"Chromium\" || b.brand === \"Google Chrome\");\n  IS_CHROME = IS_CHROMIUM && !IS_EDGE;\n  // Versions\n  CHROMIUM_VERSION = CHROME_VERSION = pickVersion(uaData.brands, \"Chromium\") || pickVersion(uaData.brands, \"Google Chrome\");\n}\n\n// Fallback / additional parsing via UA string\nif (!IS_CHROMIUM || !CHROMIUM_VERSION) {\n  // General Platforms\n  IS_ANDROID = /Android/i.test(ua);\n  IS_WINDOWS ||= /Windows/i.test(ua);\n  // Desktop & general browsers (include iOS-branded variants)\n  IS_FIREFOX = /Firefox|FxiOS/i.test(ua);\n  IS_EDGE = /Edg|EdgiOS/i.test(ua);\n  IS_CHROMIUM = /Chrome|CriOS/i.test(ua);\n  IS_CHROME = IS_CHROMIUM && !IS_EDGE;\n  IS_SAFARI = /Safari/i.test(ua) && !IS_CHROME && !IS_FIREFOX && !IS_EDGE;\n  IS_IE = /MSIE|(Trident\\/7.0)|(rv:11.0)/i.test(ua);\n  // TVs\n  IS_TIZEN = /Tizen/i.test(ua);\n  IS_WEBOS = /Web0S/i.test(ua);\n  // Apple desktop/mobile device refinement\n  IS_IPOD = /iPod/i.test(ua);\n  IS_IPAD = /iPad/i.test(ua) || (IS_SAFARI && TOUCH_ENABLED && !/iPhone/i.test(ua));\n  IS_IPHONE = /iPhone/i.test(ua) && !IS_IPAD;\n  // Versions\n  IOS_VERSION = ua.match(/OS (\\d+)_/i)?.[1] ?? null;\n  ANDROID_VERSION = ua.match(/Android\\s(\\d+(?:\\.\\d+)+)/i)?.[1] ?? null;\n  CHROMIUM_VERSION = CHROME_VERSION = ua.match(/(?:Chrome|CriOS)\\/(\\d+)/)?.[1] ?? CHROMIUM_VERSION;\n  IE_VERSION = ua.match(/MSIE\\s(\\d+)\\.\\d/)?.[1] || (/Trident\\/7.0/i.test(ua) && /rv:11.0/.test(ua) ? \"11.0\" : null);\n}\n\n// Composite Flags\nexport const IS_IOS = IS_IPHONE || IS_IPAD || IS_IPOD;\nexport const IS_MOBILE = Boolean(IS_ANDROID || IS_IPHONE || IS_IPOD || IS_IPAD);\nexport const IS_SMART_TV = IS_TIZEN || IS_WEBOS;\n\n// Media Queries\nexport const queryMediaMobile = (query = \"(max-width: 480px), (max-width: 940px) and (max-height: 480px) and (orientation: landscape)\"): boolean => Boolean(w && \"matchMedia\" in w && w.matchMedia(query).matches);\n", "import { whiteListedKeys } from \"../consts/generics\";\nimport { isArr } from \"./obj\";\n\ntype KeyStruct = Record<\"ctrlKey\" | \"shiftKey\" | \"altKey\" | \"metaKey\", boolean> & { key: string };\n\nexport function parseKeyCombo(combo: string): KeyStruct {\n  const parts = combo.toLowerCase().split(\"+\");\n  return { ctrlKey: parts.includes(\"ctrl\"), shiftKey: parts.includes(\"shift\"), altKey: parts.includes(\"alt\"), metaKey: parts.includes(\"meta\") || parts.includes(\"cmd\"), key: parts.find((p) => ![\"ctrl\", \"shift\", \"alt\", \"meta\", \"cmd\"].includes(p)) || \"\" };\n}\n\nexport function stringifyKeyCombo(e: KeyStruct | KeyboardEvent): string {\n  const parts: string[] = [];\n  if (e.ctrlKey) parts.push(\"ctrl\");\n  if (e.altKey) parts.push(\"alt\");\n  if (e.shiftKey) parts.push(\"shift\");\n  if (e.metaKey) parts.push(\"meta\");\n  parts.push(e.key?.toLowerCase() ?? \"\");\n  return parts.join(\"+\");\n}\n\n// export function cleanKeyCombo(combo: string): string;\n// export function cleanKeyCombo(combo: string[]): string[];\nexport function cleanKeyCombo(combo: string | string[]): string | string[] {\n  const clean = (combo: string): string => {\n    const m = [\"ctrl\", \"alt\", \"shift\", \"meta\"],\n      alias: Record<string, string> = { cmd: \"meta\" };\n    if (combo === \" \" || combo === \"+\") return combo;\n    combo = combo.replace(/\\+\\s*\\+$/, \"+plus\");\n    const p = combo\n      .toLowerCase()\n      .split(\"+\")\n      .filter((k) => k !== \"\")\n      .map((k) => alias[k] || (k === \"plus\" ? \"+\" : k.trim() || \" \"));\n    return [...p.filter((k) => m.includes(k)).sort((a, b) => m.indexOf(a) - m.indexOf(b)), ...(p.filter((k) => !m.includes(k)) || \"\")].join(\"+\");\n  };\n  return isArr(combo) ? combo.map(clean) : clean(combo);\n}\n\nexport function matchKeys(required: string | string[], actual: string, strict = false): boolean {\n  const match = (required: string, actual: string): boolean => {\n    if (strict) return required === actual;\n    const reqKeys = required.split(\"+\"),\n      actKeys = actual.split(\"+\");\n    return reqKeys.every((k) => actKeys.includes(k));\n  };\n  return isArr(required) ? required.some((req) => match(req, actual)) : match(required, actual);\n}\n\nexport function getTermsForKey(combo: string, settings: any): { override: boolean; block: boolean; allowed: boolean; action: string | null } {\n  const terms = { override: false, block: false, allowed: false, action: null as string | null },\n    { overrides = [], shortcuts = {}, blocks = [], strictMatches: s = false } = settings?.keys || {};\n  if (matchKeys(overrides, combo, s)) terms.override = true;\n  if (matchKeys(blocks, combo, s)) terms.block = true;\n  if (matchKeys(whiteListedKeys as unknown as string[], combo)) terms.allowed = true;\n  terms.action = Object.keys(shortcuts).find((key) => matchKeys(shortcuts[key] as string | string[], combo, s)) || null;\n  return terms;\n}\n\nexport function keyEventAllowed(e: KeyboardEvent, settings: any): boolean | string {\n  if (settings?.keys?.disabled || ((e.key === \" \" || e.key === \"Enter\") && (e.currentTarget as any)?.document?.activeElement?.tagName === \"BUTTON\") || (e.currentTarget as any)?.document?.activeElement?.matches(\"input,textarea,[contenteditable='true']\")) return false;\n  const combo = stringifyKeyCombo(e),\n    { override, block, action, allowed } = getTermsForKey(combo, settings);\n  if (block) return false;\n  if (override) e.preventDefault();\n  if (action) return action;\n  if (allowed) return e.key.toLowerCase();\n  return false;\n}\n\nexport const formatKeyForDisplay = (combo: string | string[]): string => ` ${(isArr(combo) ? combo : [combo]).map((c) => `(${c})`).join(\" or \")}`;\n\nexport function formatKeyShortcutsForDisplay(keyShortcuts: Record<string, string | string[]>): Record<string, string> {\n  const shortcuts: Record<string, string> = {};\n  for (const action of Object.keys(keyShortcuts)) shortcuts[action] = formatKeyForDisplay(keyShortcuts[action]);\n  return shortcuts;\n}\n\nexport function parseForARIAKS(s: string) {\n  const m = { ctrl: \"Control\", cmd: \"Meta\", space: \"Space\", plus: \"+\" };\n  return s\n    .toLowerCase()\n    .replace(/[()]/g, \"\") // 1. Remove parens\n    .replace(/\\bor\\b/g, \" \") // 2. Replace \"or\" with the REQUIRED space\n    .replace(/\\w+/g, (k: any) => m[k as keyof typeof m] || k) // 3. Map keys (ctrl -> Control)\n    .replace(/\\s+/g, \" \")\n    .trim(); // 4. Cleanup extra spaces\n}\n", "import { FN_KEY } from \"../consts/generics\";\nimport { uid } from \".\";\n\n// ============ Timer Utilities ============\n\nexport function setTimeout(handler: TimerHandler, timeout?: number, ...args: any[]) {\n  const sig = args[0] instanceof AbortSignal ? args.shift() : undefined;\n  if (sig?.aborted) return -1;\n  if (!sig) return window.setTimeout(handler, timeout, ...args);\n  const id = window.setTimeout(() => (sig.removeEventListener(\"abort\", kill), typeof handler === \"string\" ? new Function(handler) : handler(...args)), timeout),\n    kill = () => window.clearTimeout(id);\n  return (sig.addEventListener(\"abort\", kill, { once: true }), id);\n}\n\nexport function setInterval(handler: TimerHandler, timeout?: number, ...args: any[]) {\n  const sig = args[0] instanceof AbortSignal ? args.shift() : undefined;\n  if (sig?.aborted) return -1;\n  const id = window.setInterval(handler, timeout, ...args);\n  return (sig?.addEventListener(\"abort\", () => window.clearInterval(id), { once: true }), id);\n}\n\nexport function requestAnimationFrame(callback: FrameRequestCallback, sig?: AbortSignal) {\n  if (sig?.aborted) return -1;\n  if (!sig) return window.requestAnimationFrame(callback);\n  const id = window.requestAnimationFrame((t) => (sig.removeEventListener(\"abort\", kill), callback(t))),\n    kill = () => window.cancelAnimationFrame(id);\n  return (sig.addEventListener(\"abort\", kill, { once: true }), id);\n}\n\n// ============ Async Utilities ============\n\nexport const mockAsync = (timeout = 250): Promise<void> => new Promise((resolve) => setTimeout(resolve, timeout));\n\n// ============ Limited Call Utilities ============\n\ninterface LimitedOptions {\n  key?: string; /** Key for localStorage persistence (if omitted, uses session-only) */\n  maxTimes?: number; /** Max times to call (default: 1) */\n}\ninterface LimitedHandle<T extends (...args: any[]) => any> {\n  (...args: Parameters<T>): ReturnType<T> | void;\n  count: number;\n  left: number;\n  reset: () => void;\n  block: () => void;\n}\n\nexport function limited<T extends (...args: any[]) => any>(fn: T, opts: LimitedOptions | string = {}): LimitedHandle<T> {\n  let count = 0,\n    { key, maxTimes: max = 1 } = \"string\" === typeof opts ? { key: opts } : opts;\n  const getReg = () => JSON.parse(localStorage.getItem(FN_KEY) || \"{}\"),\n    setReg = (r: Record<string, number>) => localStorage.setItem(FN_KEY, JSON.stringify(r));\n  const handle = (...args: Parameters<T>): ReturnType<T> | void => {\n    if (!key) return count++ < max ? fn(...args) : undefined;\n    const r = getReg(),\n      c = r[key] || 0;\n    return c < max ? ((r[key] = c + 1), setReg(r), fn(...args)) : undefined;\n  };\n  handle.left = max - (handle.count = count);\n  handle.reset = () => ((count = 0), key && ((r) => (delete r[key], setReg(r)))(getReg()));\n  handle.block = () => ((count = max), key && ((r) => ((r[key] = max), setReg(r)))(getReg()));\n  return handle;\n}\n\nexport const oncePerSession = <T extends (...args: any[]) => any>(fn: T) => limited(fn);\nexport const onceEver = <T extends (...args: any[]) => any>(fn: T, key = uid()) => limited(fn, key);\n\n// ============ Deprecation Helpers ============\n\n/**\n * Log a deprecation warning (once per session)\n * @param message - Deprecation warning message\n */\nexport function deprecate(message: string): void {\n  oncePerSession(() => console.warn(message))();\n}\n\n/**\n * Log a deprecation warning for a major version upgrade\n * @param major - Major version number when removal occurs\n * @param oldName - Name of deprecated feature\n * @param newName - Optional replacement feature name\n */\nexport function deprecateForMajor(major: number, oldName: string, newName?: string): void {\n  deprecate(newName ? `${oldName} is deprecated and will be removed in ${major}.0; use ${newName} instead.` : `${oldName} is deprecated and will be removed in ${major}.0.`);\n}\n", "import { isSameURL } from \".\";\n\n// Types\nexport type Dataset = Record<string, string | number>;\nexport type Style = Partial<CSSStyleDeclaration>;\ntype Direction = \"x\" | \"y\";\ntype Position = \"before\" | \"after\" | \"at\";\ntype ResourceType = \"style\" | \"script\" | string;\ntype SafeClickEl = HTMLElement & {\n  _clickHandler?: (e: MouseEvent) => void;\n  _dblClickHandler?: (e: MouseEvent) => void;\n  _clickTimeoutId?: ReturnType<typeof setTimeout>;\n};\ntype LoadResourceOptions = Partial<{\n  module: boolean;\n  media: string;\n  crossOrigin: \"anonymous\" | \"use-credentials\" | string | null;\n  integrity: string;\n  referrerPolicy: \"no-referrer\" | \"origin\" | \"strict-origin-when-cross-origin\" | string;\n  nonce: string;\n  fetchPriority: \"high\" | \"low\" | \"auto\";\n  attempts: number;\n  retryKey: boolean | string; // retry token\n}>;\n\n// Element Factory\nexport function createEl<K extends keyof HTMLElementTagNameMap>(tag: K, props?: Partial<HTMLElementTagNameMap[K]>, dataset?: Dataset, styles?: Style): HTMLElementTagNameMap[K];\nexport function createEl(tag: string, props?: Partial<HTMLElement>, dataset?: Dataset, styles?: Style): HTMLElement | null;\nexport function createEl(tag: string, props: Record<string, unknown> = {}, dataset: Dataset = {}, styles: Style = {}): HTMLElement | null {\n  return assignEl(tag ? document?.createElement(tag) : undefined, props, dataset, styles) ?? null;\n}\n\nexport function assignEl<K extends keyof HTMLElementTagNameMap>(el?: HTMLElementTagNameMap[K], props?: Partial<HTMLElementTagNameMap[K]>, dataset?: Dataset, styles?: Style): void;\nexport function assignEl(el?: HTMLElement, props?: Partial<HTMLElement>, dataset?: Dataset, styles?: Style): void;\nexport function assignEl(el?: HTMLElement, props: Record<string, unknown> = {}, dataset: Dataset = {}, styles: Style = {}): void {\n  if (!el) return;\n  for (const k of Object.keys(props)) if (props[k] !== undefined) (el as unknown as Record<string, unknown>)[k] = props[k];\n  for (const k of Object.keys(dataset)) if (dataset[k] !== undefined) (el.dataset as DOMStringMap)[k] = String(dataset[k]);\n  for (const k of Object.keys(styles)) if (styles[k as keyof Style] !== undefined) (el.style as unknown as Record<string, unknown>)[k] = styles[k as keyof Style];\n}\n\n// Resource Loading\nexport function loadResource(src: string, type: ResourceType = \"style\", { module, media, crossOrigin, integrity, referrerPolicy, nonce, fetchPriority, attempts = 3, retryKey = false }: LoadResourceOptions = {}): Promise<HTMLElement | void> {\n  ((window.t007 ??= {} as any), (t007._resourceCache ??= {}));\n  if (t007._resourceCache[src]) return t007._resourceCache[src]; // set crossorigin on (links|scripts) if provided due to document.(styleSheets|scripts)\n  if (type === \"script\" ? Array.prototype.some.call(document.scripts, (s) => isSameURL(s.src, src)) : type === \"style\" ? Array.prototype.some.call(document.styleSheets, (s) => isSameURL((s as CSSStyleSheet).href ?? \"\", src)) : false) return Promise.resolve();\n  t007._resourceCache[src] = new Promise<HTMLElement | void>((resolve, reject) => {\n    (function tryLoad(remaining: number, el?: HTMLElement) {\n      const onerror = () => {\n        el?.remove(); // Remove failed element before retrying\n        if (remaining > 1) {\n          setTimeout(tryLoad, 1000, remaining - 1);\n          console.warn(`Retrying ${type} load (${attempts - remaining + 1}): ${src}...`);\n        } else {\n          delete t007._resourceCache[src]; // Final fail: clear cache so user can manually retry\n          reject(new Error(`${type} load failed after ${attempts} attempts: ${src}`));\n        }\n      };\n      const url = retryKey && remaining < attempts ? `${src}${src.includes(\"?\") ? \"&\" : \"?\"}_${retryKey}=${Date.now()}` : src;\n      if (type === \"script\") document.body.append((el = createEl(\"script\", { src: url, type: module ? \"module\" : \"text/javascript\", crossOrigin, integrity, referrerPolicy, nonce, fetchPriority, onload: () => resolve(el), onerror })));\n      else if (type === \"style\") document.head.append((el = createEl(\"link\", { rel: \"stylesheet\", href: url, media, crossOrigin, integrity, referrerPolicy, nonce, fetchPriority, onload: () => resolve(el), onerror })));\n      else reject(new Error(`Unsupported resource type: ${type}`));\n    })(attempts);\n  });\n  return t007._resourceCache[src];\n}\n\n// Viewport Checks\nexport function inDocView(el: Element, axis: \"x\" | \"y\" = \"y\"): boolean {\n  const rect = el.getBoundingClientRect(),\n    inX = rect.left + window.scrollX >= 0 && rect.right + window.scrollX <= window.scrollX + (window.innerWidth || document.documentElement.clientWidth),\n    inY = rect.top + window.scrollY >= 0 && rect.bottom + window.scrollY <= window.scrollY + (window.innerHeight || document.documentElement.clientHeight);\n  return axis === \"x\" ? inY : axis === \"y\" ? inX : inY && inX;\n}\n\nexport function getElSiblingAt(p: number, dir: Direction, els: HTMLElement[] | NodeListOf<HTMLElement>, pos: Position = \"after\"): Element | undefined {\n  return (\n    els.length &&\n    (\n      Array.prototype.reduce.call(\n        els,\n        ((closest: { offset: number; element: Element | undefined }, child: Element) => {\n          const { top: cT, left: cL, width: cW, height: cH } = child.getBoundingClientRect(),\n            offset = p - (dir === \"y\" ? cT : cL) - (dir === \"y\" ? cH : cW) / 2,\n            condition = pos === \"after\" ? offset < 0 && offset > closest.offset : pos === \"before\" ? offset > 0 && offset < closest.offset : pos === \"at\" ? Math.abs(offset) <= (dir === \"y\" ? cH : cW) / 2 && Math.abs(offset) < Math.abs(closest.offset) : false;\n          return condition ? { offset, element: child } : closest;\n        }) as any,\n        { offset: pos === \"after\" ? -Infinity : Infinity, element: undefined }\n      ) as any\n    ).element\n  );\n}\n\n// Fullscreen & Picture-in-Picture\nexport const queryFullscreen = (): boolean => Boolean(queryFullscreenEl());\nexport function queryFullscreenEl(): Element | null {\n  const d = document as any;\n  return d.fullscreenElement || d.webkitFullscreenElement || d.mozFullScreenElement || d.msFullscreenElement || null;\n}\n\nexport function supportsFullscreen(): boolean {\n  const d = document as any,\n    v = HTMLVideoElement.prototype as any;\n  return Boolean(d.fullscreenEnabled || d.mozFullscreenEnabled || d.msFullscreenEnabled || d.webkitFullscreenEnabled || d.webkitSupportsFullscreen || v.webkitEnterFullscreen);\n}\nexport function supportsPictureInPicture(): boolean {\n  const w = window as any,\n    d = document as any,\n    v = HTMLVideoElement.prototype as any;\n  return Boolean(d.pictureInPictureEnabled || v.requestPictureInPicture || w.documentPictureInPicture);\n}\n\nexport function enterFullscreen(el: Element): Promise<void> {\n  const e = el as any;\n  return e.webkitEnterFullscreen ? e.webkitEnterFullscreen() : e.requestFullscreen ? e.requestFullscreen() : e.mozRequestFullScreen ? e.mozRequestFullScreen() : e.webkitRequestFullscreen ? e.webkitRequestFullscreen() : e.msRequestFullscreen ? e.msRequestFullscreen() : Promise.reject(new Error(\"Fullscreen API is not supported\"));\n}\nexport function exitFullscreen(el: Element): Promise<void> {\n  const e = el as any,\n    d = document as any;\n  return e.webkitExitFullscreen ? e.webkitExitFullscreen() : d.exitFullscreen ? d.exitFullscreen() : d.mozCancelFullScreen ? d.mozCancelFullScreen() : d.webkitExitFullscreen ? d.webkitExitFullscreen() : d.msExitFullscreen ? d.msExitFullscreen() : Promise.reject(new Error(\"Fullscreen API is not supported\"));\n}\n\n// Safe Click Handling\nexport function addSafeClicks(el: SafeClickEl | null | undefined, onClick?: (e: MouseEvent) => void | null, onDblClick?: (e: MouseEvent) => void | null, options?: boolean | AddEventListenerOptions): void {\n  el && removeSafeClicks(el);\n  el?.addEventListener(\"click\", (el._clickHandler = (e: MouseEvent) => (clearTimeout(el._clickTimeoutId), (el._clickTimeoutId = setTimeout(() => onClick?.(e), 300)))), options);\n  el?.addEventListener(\"dblclick\", (el._dblClickHandler = (e: MouseEvent) => (clearTimeout(el._clickTimeoutId), onDblClick?.(e))), options);\n}\nexport function removeSafeClicks(el: SafeClickEl | null | undefined): void {\n  el?.removeEventListener(\"click\", el._clickHandler as EventListener);\n  el?.removeEventListener(\"dblclick\", el._dblClickHandler as EventListener);\n}\n\n// DOM Observers\ndeclare global {\n  interface Element {\n    _tmgResizeCbs?: Set<(entry: ResizeObserverEntry) => void>;\n    _tmgIntersectCbs?: Set<(entry: IntersectionObserverEntry) => void>;\n    _tmgMutationCbs?: Set<(mutations: MutationRecord[]) => void>;\n  }\n}\n\nexport const intersectionObserver =\n  typeof window !== \"undefined\"\n    ? new IntersectionObserver(\n        (entries) => {\n          for (const entry of entries) entry.target._tmgIntersectCbs?.forEach((cb) => cb(entry));\n        },\n        { root: null, rootMargin: \"0px\", threshold: 0.3 }\n      )\n    : null;\n\nexport const resizeObserver =\n  typeof window !== \"undefined\"\n    ? new ResizeObserver((entries) => {\n        for (const entry of entries) entry.target._tmgResizeCbs?.forEach((cb) => cb(entry));\n      })\n    : null;\n\nexport const mutationObserver =\n  typeof window !== \"undefined\"\n    ? new MutationObserver((mutations) => {\n        // Dispatch to specific targets if they are being observed directly\n        // Note: MutationObserver works differently; this handles the 'root' observer callbacks\n        // We map the *target* of the observation, not the mutation target usually.\n        // For this util, we assume the observer instance calls the callback associated with the observed node.\n        // Since we use one global observer, we need to map back.\n        // Actually, for MutationObserver it's cleaner to keep separate instances if configs differ,\n        // but for \"utils\" style, we can use a Map logic or just basic callback sets.\n        // Current implementation assumes the caller handles the mutation list.\n        const target = mutations[0].target as Element; // Batch usually targets one observer\n        target._tmgMutationCbs?.forEach((cb) => cb(mutations));\n      })\n    : null;\n\n// --- PUBLIC API ---\nexport function observeResize(el: Element, cb: (entry: ResizeObserverEntry) => void) {\n  (el._tmgResizeCbs ?? (el._tmgResizeCbs = new Set())).add(cb);\n  resizeObserver?.observe(el);\n  return () => (el._tmgResizeCbs?.delete(cb), !el._tmgResizeCbs?.size && resizeObserver?.unobserve(el));\n}\n\nexport function observeIntersection(el: Element, cb: (entry: IntersectionObserverEntry) => void) {\n  (el._tmgIntersectCbs ?? (el._tmgIntersectCbs = new Set())).add(cb);\n  intersectionObserver?.observe(el);\n  return () => (el._tmgIntersectCbs?.delete(cb), !el._tmgIntersectCbs?.size && intersectionObserver?.unobserve(el));\n}\n\nexport function observeMutation(el: Element, cb: (mutations: MutationRecord[]) => void, options: MutationObserverInit) {\n  (el._tmgMutationCbs ?? (el._tmgMutationCbs = new Set())).add(cb);\n  mutationObserver?.observe(el, options);\n  return () => {\n    el._tmgMutationCbs?.delete(cb);\n    // Note: MutationObserver.unobserve stops EVERYTHING on that observer.\n    // If we share one observer, we can't unobserve just one element easily without disconnecting all.\n    // For safety in this \"util\" pattern with a shared observer, we just leave it connected or use dedicated observers.\n    // Given the constraints, we'll keep it simple: disconnect if empty only works if 1-to-1.\n    // For now, we assume persistent observation for system logic.\n  };\n}\n", "export * from \"./methodist\";\nexport * from \"./reactive\";\nexport * from \"./nuke\";", "// A mixin method expert often used to bind all methods of a class to an instance\nexport function onAllMethods(owner: any, callback: (method: string, owner: any) => void): void {\n  let proto = owner;\n  while (proto && proto !== Object.prototype) {\n    for (const method of Object.getOwnPropertyNames(proto)) {\n      if (method === \"constructor\") continue;\n      if (\"function\" !== typeof Object.getOwnPropertyDescriptor(proto, method)?.value) continue;\n      callback(method, owner);\n    }\n    proto = Object.getPrototypeOf(proto);\n  }\n}\n\nexport function bindAllMethods(owner: any): void {\n  onAllMethods(owner, (method: string, owner: any) => {\n    owner[method] = owner[method].bind(owner);\n  });\n}\n\nexport function guardAllMethods(owner: any, guardFn: (fn: Function) => Function = guardMethod, bound = true): void {\n  onAllMethods(owner, (method: string, owner: any) => {\n    owner[method] = guardFn(bound ? owner[method].bind(owner) : owner[method]);\n  });\n}\n\nexport function guardMethod<T extends Function>(fn: T, onError: (e: any) => void = (e) => console.error(e)): T {\n  return ((...args: any[]) => {\n    try {\n      const result = fn(...args);\n      return result instanceof Promise ? result.catch((e) => onError(e)) : result;\n    } catch (e) {\n      onError(e);\n    }\n  }) as unknown as T;\n}\n", "import { Target, Payload, Getter, Setter, Listener, ListenerOptions, ListenerRecord, ReactorOptions, Watcher, WatcherRecord, GetterRecord, SetterRecord, SyncOptions } from \"../types/reactor\";\nimport type { PathParentValue, Paths, PathValue, WCPaths } from \"../types/obj\";\nimport { isObj, isArr, setAny, mergeObjs, getTrailPaths, getTrailRecords, parseEvOpts, getAny, inAny, deepClone } from \"../utils\";\nimport { isIntent, nuke } from \"../tools/mixins\";\n// low level non-stack loops considering this is surgical work on the root of reactivity, also `cord` is an alias for record and `es` for entries\n\nexport const RAW: unique symbol = Symbol.for(\"S.I.A_RAW\"); // \"Get Original Obj\" Marker\nexport const REJECTABLE: unique symbol = Symbol.for(\"S.I.A_REJECTABLE\"); // \"State Vs. Intent\" Marker\nexport const INERTIA: unique symbol = Symbol.for(\"S.I.A_INERTIA\"); // \"No Proxy\" Marker\nexport const TERMINATOR: unique symbol = Symbol.for(\"S.I.A_TERMINATOR\"); // \"Obj Operation Terminator\" Marker\nexport const REOPTS = { LISTENER: [\"capture\", \"depth\", \"once\", \"signal\", \"immediate\"], MEDIATOR: [\"lazy\", \"signal\", \"immediate\"] } as const;\n\nexport class Event<T, P extends WCPaths<T> = WCPaths<T>> {\n  static readonly NONE = 0;\n  static readonly CAPTURING_PHASE = 1;\n  static readonly AT_TARGET = 2;\n  static readonly BUBBLING_PHASE = 3;\n  public type: Payload<T, P>[\"type\"];\n  public currentTarget: Payload<T, P>[\"currentTarget\"];\n  public eventPhase: number = Event.NONE;\n  readonly staticType: Payload<T, P>[\"type\"];\n  readonly target: Payload<T, P>[\"target\"];\n  readonly root: Payload<T, P>[\"root\"];\n  readonly path: Target<T, P>[\"path\"];\n  readonly value: Target<T, P>[\"value\"];\n  readonly oldValue: Target<T, P>[\"oldValue\"];\n  readonly rejectable: boolean;\n  readonly bubbles: boolean;\n  // readonly timestamp: number;\n  private _propagationStopped = false;\n  private _immediatePropagationStopped = false;\n  private _resolved = \"\";\n  private _rejected = \"\";\n\n  constructor(payload: Payload<T, P>, bubbles = true) {\n    this.type = this.staticType = payload.type;\n    this.target = payload.target;\n    this.currentTarget = payload.currentTarget;\n    this.root = payload.root;\n    this.value = payload.target.value;\n    this.oldValue = payload.target.oldValue;\n    this.path = payload.target.path;\n    this.rejectable = payload.rejectable;\n    this.bubbles = bubbles;\n    // this.timestamp = Date.now();\n  }\n  get propagationStopped(): boolean {\n    return this._propagationStopped;\n  }\n  stopPropagation(): void {\n    this._propagationStopped = true;\n  }\n  get immediatePropagationStopped(): boolean {\n    return this._immediatePropagationStopped;\n  }\n  stopImmediatePropagation(): void {\n    this._propagationStopped = true;\n    this._immediatePropagationStopped = true;\n  }\n  get resolved(): string {\n    return this._resolved;\n  }\n  resolve(message?: string): void {\n    if (!this.rejectable) return console.warn(`Ignored resolve() call on a non-rejectable ${this.staticType} at \"${this.path}\"`);\n    if (this.eventPhase !== Event.CAPTURING_PHASE) console.warn(`Resolving an intent on ${this.staticType} at \"${this.path}\" outside of the capture phase is unadvised.`);\n    if (this.rejectable) this._resolved = message || `Could ${this.staticType} intended value at \"${this.path}\"`;\n  }\n  get rejected(): string {\n    return this._rejected;\n  }\n  reject(reason?: string): void {\n    if (!this.rejectable) return console.warn(`Ignored reject() call on a non-rejectable ${this.staticType} at \"${this.path}\"`);\n    if (this.eventPhase !== Event.CAPTURING_PHASE) console.warn(`Rejecting an intent on ${this.staticType} at \"${this.path}\" outside of the capture phase is unadvised.`);\n    if (this.rejectable) this._rejected = reason || `Couldn't ${this.staticType} intended value at \"${this.path}\"`;\n  }\n  composedPath(): WCPaths<T>[] {\n    return getTrailPaths(this.path);\n  }\n}\n\nexport default class Reactor<T extends object> {\n  private getters = new Map<Paths<T>, Array<GetterRecord<T>>>();\n  private setters = new Map<Paths<T>, Array<SetterRecord<T>>>();\n  private watchers = new Map<Paths<T>, Array<WatcherRecord<T>>>();\n  private listenersRecord = new Map<WCPaths<T>, Array<ListenerRecord<T>>>();\n  private batch = new Map<Paths<T>, Payload<T>>();\n  private isBatching = false;\n  private queue: Set<() => void> | null = null; // Tasks to run after flush, `null` | pay the empty set 64 byte price for what u might never use\n  private proxyCache = new WeakMap<object, any>();\n  private lineage = new WeakMap<object, { p: object; k: string }[]>(); // The Engine Room: Tracks Target -> Array of { parent, key }\n  public core: T;\n\n  constructor(obj: T = {} as T, options?: ReactorOptions) {\n    this.core = this.proxify(obj);\n  }\n\n  private proxify<O>(obj: O, rejectable = false, p?: object, k?: string): O {\n    if (!obj || typeof obj !== \"object\") return obj;\n    const tag = Object.prototype.toString.call(obj);\n    if ((tag !== \"[object Object]\" && tag !== \"[object Array]\") || (obj as any)[INERTIA]) return obj; // handles direct objects and arrays unless inert\n    obj = (obj as any)[RAW] || obj; // prevents nested proxies\n    if (p && k) this.link(obj, p, k);\n    if (this.proxyCache.has(obj as object)) return this.proxyCache.get(obj as object);\n    rejectable ||= isIntent(obj as object);\n    const proxy = new Proxy(obj as object, {\n      // Robust Proxy handler\n      get: (object, key, receiver) => {\n        if (key === RAW) return object;\n        const safeKey = String(key);\n        let value = Reflect.get(object, key, receiver) as PathValue<T>;\n        this.trace(object, safeKey, (fullPath) => {\n          if (!this.getters.has(fullPath)) return;\n          const target: Target<T> = { path: fullPath, value, key: safeKey, object: receiver as PathParentValue<T> };\n          value = this.mediate(fullPath as Paths<T>, { type: \"get\", target, currentTarget: target, root: this.core, rejectable } as Payload<T, Paths<T>>, false);\n        }); // Mediators\n        return this.proxify(value, rejectable, object, safeKey);\n      },\n      set: (object, key, value, receiver) => {\n        const safeKey = String(key),\n          oldValue = Reflect.get(object, key, receiver) as PathValue<T>,\n          rawValue = (value = (value && (value as any)[RAW]) || value);\n        this.trace(object, safeKey, (fullPath) => {\n          if (!this.setters.has(fullPath)) return;\n          const target: Target<T> = { path: fullPath, value, oldValue, key: safeKey, object: receiver },\n            result = this.mediate(fullPath as Paths<T>, { type: \"set\", target: target, currentTarget: target, root: this.core, rejectable } as Payload<T, Paths<T>>, true);\n          if (result !== TERMINATOR) value = result;\n        }); // Mediators\n        if (value === TERMINATOR) return true; // soft rejection if terminated: `true`\n        if (!Reflect.set(object, key, value, receiver)) return false;\n        if (rawValue !== ((oldValue && (oldValue as any)[RAW]) || oldValue)) (this.unlink(oldValue, object, safeKey), this.link(value, object, safeKey));\n        this.trace(object, safeKey, (p) => {\n          const target: Target<T> = { path: p, value, oldValue, key: safeKey, object: receiver };\n          this.notify(p, { type: \"set\", target, currentTarget: target, root: this.core, rejectable } as Payload<T, Paths<T>>);\n        }); // Listeners\n        return true;\n      },\n      deleteProperty: (object, key) => {\n        const safeKey = String(key),\n          oldValue = Reflect.get(object, key),\n          receiver = this.proxyCache.get(object);\n        let value = undefined;\n        this.trace(object, safeKey, (fullPath) => {\n          if (!this.setters.has(fullPath)) return;\n          const target: Target<T> = { path: fullPath, oldValue, key: safeKey, object: receiver },\n            result = this.mediate(fullPath as Paths<T>, { type: \"delete\", target, currentTarget: target, root: this.core, rejectable } as Payload<T, Paths<T>>, true);\n          if (result !== TERMINATOR) value = result;\n        }); // Mediators\n        if (value === TERMINATOR) return true; // soft rejection if terminated: `true`\n        if (!Reflect.deleteProperty(object, key)) return false;\n        this.unlink(oldValue, object, safeKey);\n        this.trace(object, safeKey, (p) => {\n          const target: Target<T> = { path: p, oldValue, key: safeKey, object: receiver };\n          this.notify(p, { type: \"delete\", target, currentTarget: target, root: this.core, rejectable } as Payload<T, Paths<T>>);\n        }); // Listeners\n        return true;\n      },\n    });\n    return (this.proxyCache.set(obj as object, proxy), proxy) as O;\n  }\n  private trace(target: object, key: string, cb: (path: Paths<T>) => void, visited = new WeakSet<object>()): void {\n    if (target === ((this.core as any)[RAW] || this.core)) return cb(key as Paths<T>);\n    if (visited.has(target)) return; // Stop infinite loops\n    visited.add(target);\n    const parents = this.lineage.get(target);\n    if (!parents) return;\n    for (let i = 0; i < parents.length; i++) {\n      const { p, k } = parents[i];\n      this.trace(p, k ? k + \".\" + key : key, cb, visited);\n    }\n  }\n  private link(child: any, p: object, k: string, es?: { p: object; k: string }[]): void {\n    const target = (child && (child as any)[RAW]) || child;\n    if (!isObj(target) && !isArr(target)) return;\n    es = this.lineage.get(target) ?? (this.lineage.set(target, (es = [])), es);\n    for (let i = 0; i < es.length; i++) if (es[i].p === p && es[i].k === k) return;\n    es.push({ p, k });\n  }\n  private unlink(child: any, p: object, k: string): void {\n    const target = (child && (child as any)[RAW]) || child;\n    if (!target || typeof target !== \"object\") return;\n    const es = this.lineage.get(target);\n    if (es) for (let i = 0; i < es.length; i++) if (es[i].p === p && es[i].k === k) return void es.splice(i, 1);\n  }\n\n  private mediate<P extends Paths<T>>(path: Paths<T>, payload: Payload<T, P>, set: boolean): any {\n    let terminated = false,\n      value = payload.target.value;\n    const cords = (set ? this.setters : this.getters)?.get(path);\n    if (!cords?.length) return value;\n    for (let i = set ? 0 : cords.length - 1; i !== (set ? cords.length : -1); i += set ? 1 : -1) {\n      if (set) terminated ||= value === TERMINATOR;\n      if (cords[i].once) (cords.splice(i--, 1), !cords.length && (set ? this.setters : this.getters)?.delete(path));\n      const response = set ? (cords[i].cb as Setter<T>)(value, terminated, payload) : (cords[i].cb as Getter<T>)(value, payload); // all will mediate\n      if (!terminated) value = response as PathValue<T, P>;\n    }\n    return value; // set - FIFO, get - LIFO\n  }\n\n  private notify<P extends Paths<T>>(path: P, payload: Payload<T, P>) {\n    const cords = this.watchers.get(path);\n    for (let i = 0; i < (cords?.length ?? 0); i++) {\n      if (cords![i].once) (cords!.splice(i--, 1), !cords!.length && this.watchers.delete(path));\n      cords![i].cb(payload.target.value, payload); // watchers do not support termination\n    }\n    this.schedule(path, payload);\n  }\n  private schedule(path: Paths<T>, payload: Payload<T>): void {\n    (this.batch.set(path, payload), this.initBatching());\n  }\n  private initBatching(): void {\n    if (this.isBatching) return;\n    this.isBatching = true;\n    queueMicrotask(() => this.flush());\n  }\n  private flush(): void {\n    (this.tick(this.batch.keys()), this.batch.clear(), (this.isBatching = false));\n    if (this.queue?.size) for (const task of this.queue) task();\n    this.queue?.clear();\n  }\n\n  private wave(path: Paths<T>, payload: Payload<T>): void {\n    const e = new Event<T>(payload),\n      chain = getTrailRecords(this.core, path); // either build a large array to climb back up or have to derive\n    // 1: CAPTURE phase (core -> parent) - intent owners reject here, capture should preferably be used to reject\n    e.eventPhase = Event.CAPTURING_PHASE;\n    for (let i = 0; i <= chain.length - 2; i++) {\n      if (e.propagationStopped) break;\n      this.fire(chain[i], e, true);\n    }\n    if (e.propagationStopped) return;\n    // 2: TARGET phase (leaf)\n    e.eventPhase = Event.AT_TARGET;\n    this.fire(chain[chain.length - 1], e, true); // CAPTURE\n    !e.immediatePropagationStopped && this.fire(chain[chain.length - 1], e, false); // BUBBLE\n    if (!e.bubbles) return;\n    // 3: BUBBLE phase (parent -> core) - listeners always see it, rejection is just a flag for smart optimists\n    e.eventPhase = Event.BUBBLING_PHASE;\n    for (let i = chain.length - 2; i >= 0; i--) {\n      if (e.propagationStopped) break;\n      this.fire(chain[i], e, false);\n    }\n    if (e.rejected) return; // 4: DEFAULT phase if ever, whole architecture can be reimagined: `State vs Intent` is my view; reactor is dumb\n  }\n  private fire([path, object, value]: ReturnType<typeof getTrailRecords<T>>[number], e: Event<T>, isCapture: boolean): void {\n    const cords = this.listenersRecord.get(path);\n    if (!cords?.length) return;\n    e.type = path !== e.target.path ? \"update\" : e.staticType; // `update` for ancestors\n    e.currentTarget = { path, value, oldValue: e.type !== \"update\" ? e.target.oldValue : undefined, key: e.type !== \"update\" ? path : path.slice(path.lastIndexOf(\".\") + 1) || \"\", object: object as PathParentValue<T> };\n    let tDepth, lDepth;\n    for (let i = 0; i < cords.length; i++) {\n      if (e.immediatePropagationStopped) break;\n      if (cords[i].capture !== isCapture) continue;\n      if (cords[i].depth !== undefined) {\n        ((tDepth ??= this.getDepth(e.target.path)), (lDepth ??= this.getDepth(path))); // calc if ever needed\n        if (tDepth > lDepth + cords[i].depth!) continue;\n      }\n      if (cords[i].once) (cords.splice(i--, 1), !cords.length && this.listenersRecord.delete(path));\n      cords[i].cb(e);\n    }\n  }\n\n  private bind<Cb>(cord: any, signal?: AbortSignal): Cb {\n    signal?.aborted ? cord.clup() : signal?.addEventListener?.(\"abort\", cord.clup, { once: true });\n    if (signal && !signal.aborted) cord.sclup = () => signal.removeEventListener?.(\"abort\", cord.clup);\n    return cord.clup as Cb; // once incase spec changes, memory leaks too\n  }\n  private getContext<P extends WCPaths<T>>(path: P): Target<T, P> {\n    const lastDot = path.lastIndexOf(\".\"),\n      value = (path === \"*\" ? this.core : getAny(this.core, path as Paths<T>)) as PathValue<T, P>,\n      object = lastDot === -1 ? this.core : getAny(this.core, path.slice(0, lastDot) as Paths<T>);\n    return { path: path as P, value, key: path.slice(lastDot + 1) || \"\", object: object as PathParentValue<T, P> };\n  }\n  public getDepth(p: string, d = !p ? 0 : 1): number {\n    for (let i = 0; i < p.length; i++) if (p.charCodeAt(i) === 46) d++; // zero alloc; so when we say it's optmized, it's not cap :)\n    return d;\n  }\n\n  public tick(paths?: Paths<T> | Iterable<Paths<T>>): void {\n    if (!paths) return this.flush();\n    if (\"string\" === typeof paths) {\n      const task = this.batch.get(paths);\n      task && (this.wave(paths, task), this.batch.delete(paths));\n    } else\n      for (const path of paths) {\n        const task = this.batch.get(path);\n        task && (this.wave(path, task), this.batch.delete(path));\n      }\n  }\n  public stall(task: () => any): void {\n    ((this.queue ??= new Set()), this.queue.add(task), this.initBatching());\n  }\n  public nostall(task: () => any): boolean | undefined {\n    return this.queue?.delete(task);\n  }\n\n  public get<P extends Paths<T>>(path: P, cb: Getter<T, P>, opts?: SyncOptions): Reactor<T>[\"noget\"] {\n    const { lazy = false, once = false, signal, immediate = false } = parseEvOpts(opts, REOPTS.MEDIATOR);\n    let cords = this.getters.get(path),\n      cord = {} as GetterRecord<T>;\n    for (let i = 0; i < (cords?.length ?? 0); i++)\n      if (cords![i].cb === (cb as unknown as Getter<T>)) {\n        cord = cords![i];\n        break;\n      }\n    if (cord) return cord.clup;\n    cord = { cb: cb as unknown as Getter<T>, once, clup: () => (lazy && this.nostall(task), this.noget<P>(path, cb)) };\n    if (immediate) (immediate !== \"auto\" || inAny(this.core, path)) && getAny(this.core, path as Paths<T>);\n    const task = () => (this.getters.get(path) ?? (this.getters.set(path, (cords = [])), cords)).push(cord);\n    lazy ? this.stall(task) : task(); // a progressive enhancment for gets that are virtual and should not affect init\n    return this.bind(cord, signal);\n  }\n  public gonce<P extends Paths<T>>(path: P, cb: Getter<T, P>, opts?: SyncOptions): Reactor<T>[\"noget\"] {\n    return this.get<P>(path, cb, { ...parseEvOpts(opts, REOPTS.MEDIATOR), once: true });\n  }\n  public noget<P extends Paths<T>>(path: P, cb: Getter<T, P>): boolean | undefined {\n    const cords = this.getters.get(path);\n    if (!cords) return undefined;\n    for (let i = 0; i < cords.length; i++) if (cords[i].cb === (cb as unknown as Getter<T>)) return (cords[i].sclup?.(), cords.splice(i--, 1), !cords.length && this.getters.delete(path), true);\n    return false;\n  }\n\n  public set<P extends Paths<T>>(path: P, cb: Setter<T, P>, opts?: SyncOptions): Reactor<T>[\"noset\"] {\n    const { lazy = false, once = false, signal, immediate = false } = parseEvOpts(opts, REOPTS.MEDIATOR);\n    let cords = this.setters.get(path),\n      cord = {} as SetterRecord<T>;\n    for (let i = 0; i < (cords?.length ?? 0); i++)\n      if (cords![i].cb === (cb as unknown as Setter<T>)) {\n        cord = cords![i];\n        break;\n      }\n    if (cord) return cord.clup;\n    cord = { cb: cb as unknown as Setter<T>, once, clup: () => (lazy && this.nostall(task), this.noset<P>(path, cb)) };\n    if (immediate) (immediate !== \"auto\" || inAny(this.core, path)) && setAny(this.core, path as Paths<T>, this.getContext(path).value!);\n    const task = () => (this.setters.get(path) ?? (this.setters.set(path, (cords = [])), cords)).push(cord);\n    lazy ? this.stall(task) : task();\n    return this.bind(cord, signal);\n  }\n  public sonce<P extends Paths<T>>(path: P, cb: Setter<T, P>, opts?: SyncOptions): Reactor<T>[\"noset\"] {\n    return this.set<P>(path, cb, { ...parseEvOpts(opts, REOPTS.MEDIATOR), once: true });\n  }\n  public noset<P extends Paths<T>>(path: P, cb: Setter<T, P>): boolean | undefined {\n    const cords = this.setters.get(path);\n    if (!cords) return undefined;\n    for (let i = 0; i < cords.length; i++) if (cords[i].cb === (cb as unknown as Setter<T>)) return (cords[i].sclup?.(), cords.splice(i--, 1), !cords.length && this.setters.delete(path), true);\n    return false;\n  }\n\n  public watch<P extends Paths<T>>(path: P, cb: Watcher<T, P>, opts?: SyncOptions): Reactor<T>[\"nowatch\"] {\n    const { lazy = false, once = false, signal, immediate = false } = parseEvOpts(opts, REOPTS.MEDIATOR);\n    let cords = this.watchers.get(path),\n      cord = {} as WatcherRecord<T>;\n    for (let i = 0; i < (cords?.length ?? 0); i++)\n      if (cords![i].cb === cb) {\n        cord = cords![i];\n        break;\n      }\n    if (cord) return cord.clup;\n    cord = { cb: cb as Watcher<T>, once, clup: () => (lazy && this.nostall(task), this.nowatch<P>(path, cb)) };\n    if (immediate && immediate !== \"auto\" && inAny(this.core, path)) {\n      const target = this.getContext(path);\n      cb(target.value, { type: \"init\", target, currentTarget: target, root: this.core, rejectable: false } as Payload<T, P>);\n    }\n    const task = () => (cords ?? (this.watchers.set(path, (cords = [])), cords)).push(cord);\n    lazy ? this.stall(task) : task();\n    return this.bind(cord, signal);\n  }\n  public wonce<P extends Paths<T>>(path: P, cb: Watcher<T, P>, opts?: SyncOptions): Reactor<T>[\"nowatch\"] {\n    return this.watch<P>(path, cb, { ...parseEvOpts(opts, REOPTS.MEDIATOR), once: true });\n  }\n  public nowatch<P extends Paths<T>>(path: P, cb: Watcher<T, P>): boolean | undefined {\n    const cords = this.watchers.get(path);\n    if (!cords) return undefined;\n    for (let i = 0; i < cords.length; i++) if (cords[i].cb === cb) return (cords[i].sclup?.(), cords.splice(i--, 1), !cords.length && this.watchers.delete(path), true);\n    return false;\n  }\n\n  public on<P extends WCPaths<T>>(path: P, cb: Listener<T, P>, options?: ListenerOptions): Reactor<T>[\"off\"] {\n    const { capture = false, once = false, signal, immediate = false, depth } = parseEvOpts(options, REOPTS.LISTENER);\n    let cords = this.listenersRecord.get(path),\n      cord = {} as ListenerRecord<T>;\n    for (let i = 0; i < (cords?.length ?? 0); i++)\n      if (cords![i].cb === cb && capture === cords![i].capture) {\n        cord = cords![i];\n        break;\n      }\n    if (cord) return cord.clup;\n    cord = { cb: cb as Listener<T>, capture, depth, once, clup: () => this.off<P>(path, cb, options) };\n    if (immediate && (immediate !== \"auto\" || inAny(this.core, path))) {\n      const target = this.getContext(path as Paths<T>) as Target<T, P>;\n      cb(new Event<T, P>({ type: \"init\", target, currentTarget: target, root: this.core, rejectable: false }, false));\n    }\n    (cords ?? (this.listenersRecord.set(path, (cords = [])), cords)).push(cord);\n    return this.bind(cord, signal);\n  }\n  public once<P extends WCPaths<T>>(path: P, cb: Listener<T, P>, options?: ListenerOptions): Reactor<T>[\"off\"] {\n    return this.on<P>(path, cb, { ...parseEvOpts(options, REOPTS.LISTENER), once: true });\n  }\n  public off<P extends WCPaths<T>>(path: P, cb: Listener<T, P>, options?: ListenerOptions): boolean | undefined {\n    const cords = this.listenersRecord.get(path);\n    if (!cords) return undefined;\n    const { capture } = parseEvOpts(options, REOPTS.LISTENER);\n    for (let i = 0; i < cords.length; i++) if (cords[i].cb === cb && cords[i].capture === capture) return (cords[i].sclup?.(), cords.splice(i--, 1), !cords.length && this.listenersRecord.delete(path), true);\n    return false;\n  }\n\n  public cascade({ type, currentTarget: { path, value: news, oldValue: olds } }: Event<T>, objSafe = true): void {\n    if (!isObj(news) || !isObj(olds) || (type !== \"set\" && type !== \"delete\")) return;\n    const obj = objSafe ? mergeObjs(olds, news) : news,\n      keys = Object.keys(obj);\n    for (let i = 0; i < keys.length; i++) setAny(this.core, (path + \".\" + keys[i]) as Paths<T>, (obj as any)[keys[i]]); // smart progressive enhancement for objects; !*\n  }\n\n  public snapshot(): T {\n    return deepClone(this.core);\n  }\n\n  public reset(): void {\n    (this.getters.clear(), this.setters.clear(), this.watchers.clear(), this.listenersRecord.clear());\n    (this.queue?.clear(), this.batch.clear(), (this.isBatching = false));\n    this.proxyCache = new WeakMap();\n  }\n  public destroy(): void {\n    (this.reset(), nuke(this));\n  }\n}\n", "import Reactor, { INERTIA, REJECTABLE } from \"../../core/reactor\";\nimport type { ReactorOptions, Inert, Intent, Live, State } from \"../../types/reactor\";\n\nconst methods = [\n  // --- Reactor public methods ---\n  \"tick\",\n  \"stall\",\n  \"nostall\",\n  \"get\",\n  \"gonce\",\n  \"noget\",\n  \"set\",\n  \"sonce\",\n  \"noset\",\n  \"watch\",\n  \"wonce\",\n  \"nowatch\",\n  \"on\",\n  \"once\",\n  \"off\",\n  \"cascade\",\n  \"snapshot\",\n  \"reset\",\n  \"destroy\",\n] as const;\nexport type Reactive<T extends object> = T & Pick<Reactor<T>, (typeof methods)[number]>;\n\nexport function reactive<T extends object>(target: T | Reactor<T>, options?: ReactorOptions): Reactive<T> {\n  const descriptors: PropertyDescriptorMap = {},\n    r = target instanceof Reactor ? target : new Reactor(target, options);\n  for (const m of methods)\n    descriptors[m] = {\n      value: r[m].bind(r),\n      writable: false,\n      enumerable: false,\n      configurable: true,\n    };\n  Object.defineProperties(r.core, descriptors);\n  return r.core as Reactive<T>;\n}\n\nexport function inert<T extends object>(target: T): Inert<T> {\n  (target as any)[INERTIA] = true;\n  return target as Inert<T>;\n}\nexport function live<T extends object>(target: T): Live<T> {\n  delete (target as any)[INERTIA];\n  return target as Live<T>;\n}\nexport function isInert<T extends object>(target: T): target is Inert<T> {\n  return !!(target as any)[INERTIA];\n}\n\nexport function intent<T extends object>(target: T): Intent<T> {\n  (target as any)[REJECTABLE] = true;\n  return target as Intent<T>;\n}\nexport function state<T extends object>(target: T): State<T> {\n  delete (target as any)[REJECTABLE];\n  return target as State<T>;\n}\nexport function isIntent<T extends object>(target: T): target is Intent<T> {\n  return !!(target as any)[REJECTABLE];\n}\n", "// A mixin method to completely nuke a class or object, it walks the whole tree nullifying everything\nexport function nuke(target: any): void {\n  let proto = target;\n  while (proto && proto !== Object.prototype) {\n    for (const key of Object.getOwnPropertyNames(proto)) {\n      if (key === \"constructor\") continue;\n      const desc = Object.getOwnPropertyDescriptor(proto, key);\n      if (\"function\" === typeof desc?.value) continue;\n      if (desc?.get || desc?.set) continue;\n      proto[key] = null; // See ya!, it's armageddon baby!\n    }\n    proto = Object.getPrototypeOf(proto);\n  }\n}\n", "import type { BaseTech, TechConstructor } from \"../media\";\nimport type { BasePlug, PlugConstructor } from \"../plugs\";\nimport type { BaseComponent, ComponentConstructor } from \"../components\";\n\nexport interface RegistryItem<T> {\n  name: string;\n  value: T;\n  options?: any; // no closed doors\n}\n\nexport class BaseRegistry<T> {\n  protected items: RegistryItem<T>[] = [];\n\n  public register(name: string, value: T, options?: any) {\n    this.unregister(name); // Safety replacement\n    return (this.items.push({ name, value, options }), this);\n  }\n\n  public unregister(name: string) {\n    return ((this.items = this.items.filter((i) => i.name !== name)), this);\n  }\n\n  public get(name: string): T | undefined {\n    return this.items.find((i) => i.name === name)?.value;\n  }\n\n  public getAll(order?: string[]): T[] {\n    if (!order) return this.items.map((i) => i.value);\n    return this.items\n      .sort((a, b) => {\n        const aIdx = order.indexOf(a.name),\n          bIdx = order.indexOf(b.name);\n        return aIdx === -1 && bIdx === -1 ? 0 : aIdx === -1 ? 1 : bIdx === -1 ? -1 : aIdx - bIdx;\n      })\n      .map((i) => i.value);\n  }\n}\n\nexport class OrderedRegistry<T> extends BaseRegistry<T> {\n  public registerPriority(name: string, value: T, options?: any) {\n    this.unregister(name);\n    return (this.items.unshift({ name, value, options }), this);\n  }\n\n  public registerBefore(key: string, name: string, value: T, options?: any) {\n    const idx = this.items.findIndex((i) => i.name === key);\n    if (idx === -1) return (console.warn(`[TMG Registry] Cannot register '${name}' before '${key}': Target '${key}' not found.`), this);\n    this.unregister(name);\n    return (this.items.splice(idx, 0, { name, value, options }), this);\n  }\n\n  public registerAfter(key: string, name: string, value: T, options?: any) {\n    const idx = this.items.findIndex((i) => i.name === key);\n    if (idx === -1) return (console.warn(`[TMG Registry] Cannot register '${name}' after '${key}': Target '${key}' not found.`), this);\n    this.unregister(name);\n    return (this.items.splice(idx + 1, 0, { name, value, options }), this);\n  }\n}\n\nexport class IconRegistry extends BaseRegistry<string> {\n  private static instance = new IconRegistry();\n\n  static get(name: string) {\n    return this.instance.get(name) || `<svg></svg>`;\n  }\n  static register(name: string, svgContent: string) {\n    this.instance.register(name, svgContent);\n  }\n  // Bulk register a map of icons { play: \"<svg...>\", pause: \"<svg...>\" }\n  static registerAll(icons: Record<string, string>) {\n    Object.entries(icons).forEach(([k, v]) => this.instance.register(k, v));\n  }\n}\n\nexport class TechRegistry extends OrderedRegistry<TechConstructor> {\n  private static instance = new TechRegistry();\n\n  static get<T extends BaseTech = BaseTech>(name: string) {\n    return this.instance.get(name) as TechConstructor<T> | undefined;\n  }\n  static register(Tech: TechConstructor) {\n    this.instance.register(Tech.techName, Tech);\n  }\n  static unregister(name: string) {\n    this.instance.unregister(name);\n  }\n  static registerBefore(key: string, Tech: TechConstructor) {\n    this.instance.registerBefore(key, Tech.techName, Tech);\n  }\n  static registerAfter(key: string, Tech: TechConstructor) {\n    this.instance.registerAfter(key, Tech.techName, Tech);\n  }\n  static pick(src: string, techOrder?: string[]): TechConstructor | null {\n    return this.instance.getAll(techOrder).find((T) => T.canPlaySource(src)) || null;\n  }\n}\n\nexport class PlugRegistry extends OrderedRegistry<PlugConstructor> {\n  private static instance = new PlugRegistry();\n\n  static get<T extends BasePlug = BasePlug>(name: string) {\n    return this.instance.get(name) as PlugConstructor<T> | undefined;\n  }\n  static register(Plug: PlugConstructor, opts?: any) {\n    this.instance.register(Plug.plugName, Plug, opts);\n  }\n  static unregister(name: string) {\n    this.instance.unregister(name);\n  }\n  static registerBefore(key: string, Plug: PlugConstructor) {\n    this.instance.registerBefore(key, Plug.plugName, Plug);\n  }\n  static registerAfter(key: string, Plug: PlugConstructor) {\n    this.instance.registerAfter(key, Plug.plugName, Plug);\n  }\n  static getOrdered(): PlugConstructor[] {\n    return this.instance.getAll();\n  }\n}\n\nexport class ComponentRegistry extends BaseRegistry<ComponentConstructor> {\n  private static instance = new ComponentRegistry();\n\n  static get<T extends BaseComponent = BaseComponent>(name: string) {\n    return this.instance.get(name) as ComponentConstructor<T> | undefined;\n  }\n  static register(Comp: ComponentConstructor) {\n    this.instance.register(Comp.componentName, Comp);\n  }\n  static init<T extends BaseComponent = BaseComponent>(name: string, ctlr: any, options = {}): { element: HTMLElement; instance: T } | null {\n    const Comp = this.instance.get(name);\n    if (!Comp) return null;\n    const instance = new Comp(ctlr, options) as T,\n      element = instance.create();\n    instance.setup();\n    return { element, instance };\n  }\n  static getAll(): ComponentConstructor[] {\n    return this.instance.getAll();\n  }\n}\n", "export * from \"./base\";\nexport * from \"./html5\";", "import { Controller } from \"./controller\";\nimport { guardAllMethods, type Reactive, nuke, reactive } from \"../tools/mixins\";\nimport { isObj } from \"../utils\";\n\n// A lifecylce controlled by it's Controller\n// Try to use methods for most things so they can be customized when extended and also auto guarded\nexport abstract class Controllable<Config = any, State = any> {\n  protected readonly ac = new AbortController();\n  protected readonly signal = this.ac.signal;\n\n  protected readonly ctlr: Controller;\n  protected readonly guard: Controller[\"guard\"];\n  public config: Config; // may be a reactive obj node or the obj itself\n  public state!: State extends object ? Reactive<State> : State; // for reactivity needs of those who pass it up\n\n  constructor(ctlr: Controller, config: Config, state?: State) {\n    guardAllMethods(this, ctlr.guard, true);\n    this.signal = AbortSignal.any([this.signal, ctlr.signal]);\n    this.ctlr = ctlr;\n    this.guard = ctlr.guard;\n    this.config = config;\n    if (state) this.state = (isObj(state) ? reactive(state) : state) as Controllable[\"state\"];\n  }\n\n  public setup() {\n    this.onSetup(); // We let the subclass do its work\n  }\n  protected abstract onSetup(): void;\n\n  public destroy() {\n    !this.signal.aborted && this.ac.abort(`[TMG Controllable] Instance is being destroyed`); // incase controller already aborted, kills all listeners and timers before proper destruction below\n    this.onDestroy();\n    ((this.state as any)?.destroy?.(), (this.config as any)?.destroy?.()); // Can I clean here?... Anatoly :)\n    nuke(this);\n  }\n  protected onDestroy() {}\n}\n", "import { Controllable } from \"../core/controllable\";\nimport type { Controller } from \"../core/controller\";\nimport { Reactive } from \"../tools/mixins/reactive\";\nimport type { CMedia, MediaFeatures } from \"../types/contract\";\n\nexport type BaseTechConfig = Reactive<CMedia>; // Must extend to add more\n\nexport interface TechConstructor<T extends BaseTech = BaseTech> {\n  new (ctlr: Controller, config: any): T;\n  techName: string;\n  features: MediaFeatures;\n  canPlaySource(src: string): boolean;\n}\n\nexport abstract class BaseTech<Config extends BaseTechConfig = BaseTechConfig, El extends HTMLElement = HTMLElement> extends Controllable<Config> {\n  public static readonly techName: string;\n  public get name() {\n    return (this.constructor as TechConstructor).techName;\n  }\n  public static readonly features: MediaFeatures = {};\n  public get features() {\n    return (this.constructor as TechConstructor).features;\n  }\n  public element!: HTMLElement;\n  protected get el() {\n    return this.element as El;\n  }\n\n  constructor(ctlr: Controller, config: Config) {\n    super(ctlr, config);\n    this.element = config.element; // must reassign if not using original\n  }\n  public onSetup() {\n    this.mount();\n    if (this.ctlr.state.readyState) this.wire();\n    else this.ctlr.state.wonce(\"readyState\", this.wire, { signal: this.signal }); // wire after all plugs setup\n  }\n  public onDestroy() {\n    this.unmount();\n  }\n\n  public static canPlaySource(src: string): boolean {\n    return false;\n  }\n\n  public mount() {\n    this.element && this.element !== this.config.element && this.config.element.replaceWith(this.element);\n  }\n  public unmount() {\n    this.element && this.config.element !== this.element && this.element.replaceWith(this.config.element);\n  }\n\n  // --- THE MANDATORY CORE 5 ---\n  public wire() {\n    this.wireSrc();\n    this.wireCurrentTime();\n    this.wireDuration();\n    this.wirePaused();\n    this.wireEnded();\n    this.wireFeatures();\n  }\n  // --- The Core 5 (CMedia \"Must Haves\") ---\n  protected abstract wireSrc(): void;\n  protected abstract wireCurrentTime(): void;\n  protected abstract wireDuration(): void;\n  protected abstract wirePaused(): void;\n  protected abstract wireEnded(): void;\n  // --- THE EXTENSIONS ---\n  protected wireFeatures() {\n    const f = this.features;\n    f.volume && this.wireVolume?.();\n    f.muted && this.wireMuted?.();\n    f.playbackRate && this.wirePlaybackRate?.();\n    f.pictureInPicture && this.wirePictureInPicture?.();\n    f.fullscreen && this.wireFullscreen?.();\n    f.airplay && this.wireAirplay?.();\n    f.chromecast && this.wireChromecast?.();\n    f.xrSession && this.wireXRSession?.();\n    f.xrMode && this.wireXRMode?.();\n    f.xrReferenceSpace && this.wireXRReferenceSpace?.();\n    f.projection && this.wireProjection?.();\n    f.stereoMode && this.wireStereoMode?.();\n    f.fieldOfView && this.wireFieldOfView?.();\n    f.aspectRatio && this.wireAspectRatio?.();\n    f.panningX && this.wirePanningX?.();\n    f.panningY && this.wirePanningY?.();\n    f.panningZ && this.wirePanningZ?.();\n    f.xrInputSource && this.wireXRInputSource?.();\n    f.currentTextTrack && this.wireCurrentTextTrack?.();\n    f.currentAudioTrack && this.wireCurrentAudioTrack?.();\n    f.currentVideoTrack && this.wireCurrentVideoTrack?.();\n    f.autoLevel && this.wireAutoLevel?.();\n    f.currentLevel && this.wireCurrentLevel?.();\n    f.poster && this.wirePoster?.();\n    f.autoplay && this.wireAutoplay?.();\n    f.loop && this.wireLoop?.();\n    f.preload && this.wirePreload?.();\n    f.playsInline && this.wirePlaysInline?.();\n    f.crossOrigin && this.wireCrossOrigin?.();\n    f.controls && this.wireControls?.();\n    f.controlsList && this.wireControlsList?.();\n    f.disablePictureInPicture && this.wireDisablePictureInPicture?.();\n    f.sources && this.wireSources?.();\n    f.tracks && this.wireTracks?.();\n  }\n  // --- The Engine Inputs (Interceptable) ---\n  protected wireVolume?(): void;\n  protected wireMuted?(): void;\n  protected wirePlaybackRate?(): void;\n  // --- The Presentation Modes (Heavily Rejectable) ---\n  protected wirePictureInPicture?(): void;\n  protected wireFullscreen?(): void;\n  // --- Casting (Connection Handshakes) ---\n  protected wireAirplay?(): void;\n  protected wireChromecast?(): void;\n  // --- VR / XR (Spatial Realities) ---\n  protected wireXRSession?(): void;\n  protected wireXRMode?(): void;\n  protected wireXRReferenceSpace?(): void;\n  // --- Projection & Stereo (The \"Content\" Logic) ---\n  protected wireProjection?(): void;\n  protected wireStereoMode?(): void;\n  // --- Camera & Viewport (The \"Lens\") ---\n  protected wireFieldOfView?(): void;\n  protected wireAspectRatio?(): void;\n  // --- Orientation (The \"Head/Camera\" Pose) ---\n  protected wirePanningX?(): void;\n  protected wirePanningY?(): void;\n  protected wirePanningZ?(): void;\n  // --- Interaction (XR Controllers) ---\n  protected wireXRInputSource?(): void;\n  // --- Track Switching (Async Buffering/Streaming) ---\n  protected wireAutoLevel?(): void;\n  protected wireCurrentLevel?(): void;\n  protected wireCurrentAudioTrack?(): void;\n  protected wireCurrentVideoTrack?(): void;\n  protected wireCurrentTextTrack?(): void;\n  // --- HTML Attributes ---\n  protected wirePoster?(): void;\n  protected wireAutoplay?(): void;\n  protected wireLoop?(): void;\n  protected wirePreload?(): void;\n  protected wirePlaysInline?(): void;\n  protected wireCrossOrigin?(): void;\n  protected wireControls?(): void;\n  protected wireControlsList?(): void;\n  protected wireDisablePictureInPicture?(): void;\n  // --- HTML Lists ---\n  protected wireSources?(): void;\n  protected wireTracks?(): void;\n}\n", "import { BaseTech, BaseTechConfig } from \".\";\nimport type { Event, ListenerOptions } from \"../types/reactor\";\nimport type { Controller } from \"../core/controller\";\nimport type { CMedia, MediaIntent, MediaFeatures } from \"../types/contract\";\nimport type { WCPaths } from \"../types/obj\";\nimport { type TrackType, createEl, enterFullscreen, exitFullscreen, getSources, getTracks, isSameURL, queryFullscreenEl, supportsFullscreen, supportsPictureInPicture, observeMutation, removeSources, addSources, isSameSources, isSameTracks, removeTracks, addTracks, getTrackIdx, setCurrentTrack } from \"../utils\";\n\nexport class HTML5Tech extends BaseTech<BaseTechConfig, HTMLVideoElement> {\n  public static readonly techName: string = \"html5\";\n  // prettier-ignore\n  public static readonly features: MediaFeatures = {\n    // Kinda Core\n    volume: HTML5Tech.canControlVolume(),\n    muted: HTML5Tech.canMuteVolume(),\n    playbackRate: HTML5Tech.canControlRate(),\n    // Modes\n    pictureInPicture: supportsPictureInPicture(),\n    fullscreen: supportsFullscreen(),\n    // Attributes\n    poster: true, autoplay: true, loop: true, playsInline: true,\n    crossOrigin: true, controls: true, controlsList: true,\n    disablePictureInPicture: true, preload: true,\n    // Lists\n    textTracks: HTML5Tech.supportsTextTracks(),\n    videoTracks: HTML5Tech.supportsVideoTracks(),\n    audioTracks: HTML5Tech.supportsAudioTracks(),\n    activeCue: HTML5Tech.supportsTextTracks(),\n    // Infos\n    readyState: true, networkState: true, error: true, waiting: true,\n    stalled: true, seeking: true, buffered: true, seekable: true,\n    videoWidth: true, videoHeight: true, loadedMetadata: true,\n    canPlay: true, canPlayThrough: true,\n    // Settings\n    defaultMuted: true, defaultPlaybackRate: true,\n  };\n  private static readonly DUMMY = createEl(\"video\");\n  protected readonly eOpts: { EL: AddEventListenerOptions; REACTOR: ListenerOptions };\n  static canPlaySource(src: string): boolean {\n    return true;\n  }\n  constructor(ctlr: Controller, config: BaseTechConfig) {\n    super(ctlr, config);\n    this.eOpts = { EL: { signal: this.signal }, REACTOR: { capture: true, signal: this.signal, immediate: this.ctlr.payload.initialized } }; // Cached Event Options\n  }\n  // ===========================================================================\n  // WIRING (Connections Only)\n  // ===========================================================================\n  // --- Core Wiring ---\n  protected wireSrc() {\n    this.el.addEventListener(\"loadstart\", this.handleLoadStartState, this.eOpts.EL);\n    this.config.on(\"intent.src\", this.handleSrcIntent, this.eOpts.REACTOR);\n  }\n  protected wireCurrentTime() {\n    this.el.addEventListener(\"timeupdate\", this.handleTimeUpdateState, this.eOpts.EL);\n    this.el.addEventListener(\"seeking\", this.handleSeekingState, this.eOpts.EL);\n    this.el.addEventListener(\"seeked\", this.handleSeekedState, this.eOpts.EL);\n    this.config.on(\"intent.currentTime\", this.handleCurrentTimeIntent, this.eOpts.REACTOR);\n  }\n  protected wireDuration() {\n    this.el.addEventListener(\"durationchange\", this.handleDurationChangeState, this.eOpts.EL);\n  }\n  protected wirePaused() {\n    this.el.addEventListener(\"play\", this.handlePlayState, this.eOpts.EL);\n    this.el.addEventListener(\"pause\", this.handlePauseState, this.eOpts.EL);\n    this.config.on(\"intent.paused\", this.handlePausedIntent, this.eOpts.REACTOR);\n  }\n  protected wireEnded() {\n    this.el.addEventListener(\"ended\", this.handleEndedState, this.eOpts.EL);\n  }\n  // --- Features Wiring ---\n  protected override wireFeatures() {\n    super.wireFeatures(); // Calls individual feature wires (volume, etc.) above\n    this.wireHTMLState(); // Attributes Reverse-Sync (Mutation Observer)\n    // Status (Bulk wiring)\n    const loadEvents = [\"loadstart\", \"progress\", \"suspend\", \"abort\", \"emptied\", \"stalled\"];\n    loadEvents.forEach((e) => this.el.addEventListener(e, this.handleLoadStatus, this.eOpts.REACTOR));\n    this.el.addEventListener(\"error\", this.handleErrorStatus, this.eOpts.REACTOR);\n    this.el.addEventListener(\"waiting\", this.handleWaitingStatus, this.eOpts.REACTOR);\n    this.el.addEventListener(\"playing\", this.handlePlayingStatus, this.eOpts.REACTOR);\n    this.el.addEventListener(\"stalled\", this.handleStalledStatus, this.eOpts.REACTOR);\n    this.el.addEventListener(\"loadedmetadata\", this.handleLoadedMetadataStatus, this.eOpts.REACTOR);\n    this.el.addEventListener(\"loadeddata\", this.handleLoadedDataStatus, this.eOpts.REACTOR);\n    this.el.addEventListener(\"canplay\", this.handleCanPlayStatus, this.eOpts.REACTOR);\n    this.el.addEventListener(\"canplaythrough\", this.handleCanPlayThroughStatus, this.eOpts.REACTOR);\n    // Tracks\n    this.features.textTracks && this.wireTracksStatus(\"textTracks\");\n    this.features.videoTracks && this.wireTracksStatus(\"videoTracks\");\n    this.features.audioTracks && this.wireTracksStatus(\"audioTracks\");\n    this.features.activeCue && this.wireActiveCueStatus?.();\n  }\n  // --- Engine Inputs Wiring ---\n  protected wireVolume() {\n    this.el.addEventListener(\"volumechange\", this.handleVolumeChangeState, this.eOpts.EL);\n    this.config.on(\"intent.volume\", this.handleVolumeIntent, this.eOpts.REACTOR);\n  }\n  protected wireMuted() {\n    // Native 'volumechange' handles state update\n    this.config.on(\"intent.muted\", this.handleMutedIntent, this.eOpts.REACTOR);\n  }\n  protected wirePlaybackRate() {\n    this.el.addEventListener(\"ratechange\", this.handleRateChangeState, this.eOpts.EL);\n    this.config.on(\"intent.playbackRate\", this.handlePlaybackRateIntent, this.eOpts.REACTOR);\n  }\n  // --- Presentation Modes Wiring ---\n  protected wirePictureInPicture() {\n    this.el.addEventListener(\"enterpictureinpicture\", this.handleEnterPiPState, this.eOpts.EL);\n    this.el.addEventListener(\"leavepictureinpicture\", this.handleLeavePiPState, this.eOpts.EL);\n    this.config.on(\"intent.pictureInPicture\", this.handlePiPIntent, this.eOpts.REACTOR);\n  }\n  protected wireFullscreen() {\n    this.ctlr.state.watch(\"docInFullscreen\", this.handleFullscreenChangeState, this.eOpts.REACTOR);\n    this.el.addEventListener(\"webkitbeginfullscreen\", this.handleWebkitBeginFullscreenState, this.eOpts.REACTOR);\n    this.el.addEventListener(\"webkitendfullscreen\", this.handleWebkitEndFullscreenState, this.eOpts.REACTOR);\n    this.config.on(\"intent.fullscreen\", this.handleFullscreenIntent, this.eOpts.REACTOR);\n  }\n  // --- Track Switching Wiring ---\n  protected wireCurrentTrack(type: TrackType) {\n    this.config.set(`intent.current${type}Track`, (term) => getTrackIdx(this.el, type, term), { signal: this.signal }); // pass `any` term, the track will surely be found if available\n    const list = (this.el as any)[`${type.toLowerCase()}Tracks`];\n    list?.addEventListener(\"change\", () => this.handleCurrentTrackState(type, list), this.eOpts.REACTOR);\n    this.config.on(`intent.current${type}Track`, (e: Event<CMedia, `intent.current${typeof type}Track`>) => this.handleCurrentTrackIntent(e, type), this.eOpts.REACTOR);\n  }\n  protected wireCurrentAudioTrack() {\n    this.wireCurrentTrack(\"Audio\");\n  }\n  protected wireCurrentVideoTrack() {\n    this.wireCurrentTrack(\"Video\");\n  }\n  protected wireCurrentTextTrack() {\n    this.wireCurrentTrack(\"Text\");\n  }\n  // --- HTML (Bulk Wiring) ---\n  protected wireHTMLState() {\n    this.signal.addEventListener(\"abort\", observeMutation(this.el, this.handleHTMLState, { attributes: true, childList: true, subtree: false }), { once: true });\n  }\n  // --- Attribute Wiring ---\n  protected bindAttr<K extends keyof MediaIntent>(key: K, isBool = false) {\n    this.config.on(`intent.${key}`, (e: Event<CMedia, `intent.${K}`>) => this.handleAttributeIntent(e, key, isBool), this.eOpts.REACTOR);\n  }\n  protected wirePoster() {\n    this.bindAttr(\"poster\");\n  }\n  protected wireAutoplay() {\n    this.bindAttr(\"autoplay\", true);\n  }\n  protected wireLoop() {\n    this.bindAttr(\"loop\", true);\n  }\n  protected wirePreload() {\n    this.bindAttr(\"preload\");\n  }\n  protected wirePlaysInline() {\n    this.bindAttr(\"playsInline\", true);\n  }\n  protected wireCrossOrigin() {\n    this.bindAttr(\"crossOrigin\");\n  }\n  protected wireControls() {\n    this.bindAttr(\"controls\", true);\n  }\n  protected wireControlsList() {\n    this.bindAttr(\"controlsList\");\n  }\n  protected wireDisablePictureInPicture() {\n    this.bindAttr(\"disablePictureInPicture\", true);\n  }\n  // --- Lists Wiring ---\n  protected wireSources() {\n    this.config.on(\"intent.sources\", this.handleSourcesIntent, this.eOpts.REACTOR);\n  }\n  protected wireTracks() {\n    this.config.on(\"intent.tracks\", this.handleTracksIntent, this.eOpts.REACTOR);\n  }\n  // --- Status Tracks Wiring ---\n  protected wireTracksStatus(type: \"textTracks\" | \"videoTracks\" | \"audioTracks\") {\n    const list = (this.el as any)[type];\n    list && [\"addtrack\", \"removetrack\"].forEach((e) => list.addEventListener(e, () => this.handleTracksStatus(type, list), this.eOpts.REACTOR));\n  }\n  // --- Active Cue Wiring ---\n  protected wireActiveCueStatus() {\n    this.config.on(\n      \"state.currentTextTrack\",\n      ({ value: curr, oldValue: prev }: Event<CMedia, \"state.currentTextTrack\">) => {\n        if (prev !== -1) this.el.textTracks[prev!]?.removeEventListener(\"cuechange\", this.handleActiveCueStatus, this.eOpts.EL);\n        this.el.textTracks[curr!]?.addEventListener(\"cuechange\", this.handleActiveCueStatus, this.eOpts.EL);\n        this.handleActiveCueStatus({ target: this.el.textTracks[curr!] });\n      },\n      this.eOpts.REACTOR\n    );\n  }\n  // --- Settings Wiring ---\n  protected wireDefaultMuted() {\n    this.config.on(\"settings.defaultMuted\", this.handleDefaultMutedSetting, this.eOpts.REACTOR);\n  }\n  protected wireDefaultPlaybackRate() {\n    this.config.on(\"settings.defaultPlaybackRate\", this.handleDefaultPlaybackRateSetting, this.eOpts.REACTOR);\n  }\n  // ===========================================================================\n  // HANDLERS (The Logic - Auto-Guarded by Controllable)\n  // ===========================================================================\n  // --- Core States ---\n  protected handleLoadStartState() {\n    const { state: s, status: st } = this.config;\n    st.error = st.activeCue = null;\n    st.waiting = true;\n    st.ended = st.stalled = st.loadedData = st.loadedMetadata = st.canPlay = st.canPlayThrough = false;\n    st.duration = NaN;\n    st.buffered = this.el.buffered;\n    st.seekable = this.el.seekable;\n    if (!isSameURL(this.el.src, s.src)) s.src = this.el.src;\n    this.config.state.paused = this.el.paused;\n  }\n  protected handleTimeUpdateState() {\n    this.config.state.currentTime = this.el.currentTime;\n  }\n  protected handleSeekingState() {\n    this.config.status.seeking = true;\n  }\n  protected handleSeekedState() {\n    this.config.status.seeking = false;\n  }\n  protected handleDurationChangeState() {\n    this.config.status.duration = this.el.duration;\n  }\n  protected handlePlayState() {\n    this.config.state.paused = false;\n  }\n  protected handlePauseState() {\n    this.config.state.paused = true;\n  }\n  protected handleEndedState() {\n    this.config.status.ended = this.config.state.paused = true;\n  }\n  // --- Core Intents ---\n  protected handleSrcIntent(e: Event<CMedia, \"intent.src\">) {\n    if (e.resolved || isSameURL(this.el.src, e.value)) return;\n    this.el.src = e.value ?? \"\";\n    this.el.load();\n    e.resolve(HTML5Tech.techName);\n  }\n  protected handleCurrentTimeIntent(e: Event<CMedia, \"intent.currentTime\">) {\n    if (e.resolved) return;\n    this.el.currentTime = e.value!;\n    e.resolve(HTML5Tech.techName);\n  }\n  protected handlePausedIntent(e: Event<CMedia, \"intent.paused\">) {\n    if (e.resolved) return;\n    const p = e.value ? this.el.pause() : this.el.play();\n    if (p?.then) p.then(() => e.resolve(HTML5Tech.techName)).catch((err: any) => e.reject(err.message));\n    else e.resolve(HTML5Tech.techName);\n  }\n  // --- Feature States ---\n  protected handleVolumeChangeState() {\n    this.config.state.volume = this.el.volume;\n    this.config.state.muted = this.el.muted;\n  }\n  protected handleRateChangeState() {\n    this.config.state.playbackRate = this.el.playbackRate;\n  }\n  protected handleEnterPiPState() {\n    this.config.state.pictureInPicture = true;\n  }\n  protected handleLeavePiPState() {\n    this.config.state.pictureInPicture = false;\n  }\n  protected handleFullscreenChangeState(docInFs?: boolean) {\n    this.config.state.fullscreen = docInFs ? queryFullscreenEl() === this.el : false;\n  }\n  protected handleWebkitBeginFullscreenState() {\n    this.config.state.fullscreen = true;\n  }\n  protected handleWebkitEndFullscreenState() {\n    this.config.state.fullscreen = false;\n  }\n  protected handleCurrentTrackState(type: TrackType, list: any) {\n    this.config.state[`current${type}Track`] = getTrackIdx(this.el, type, \"active\");\n  }\n  protected handleHTMLState(mutations: MutationRecord[]) {\n    for (const m of mutations) {\n      const { state, settings } = this.config; // Reverse Bind: DOM -> State\n      if (m.type === \"childList\") {\n        const nodes = [...m.addedNodes, ...m.removedNodes];\n        if (nodes.some(({ nodeName: nm }) => nm === \"SOURCE\")) state.sources = getSources(this.el);\n        if (nodes.some(({ nodeName: nm }) => nm === \"TRACK\")) state.tracks = getTracks(this.el);\n      } else if (m.type !== \"attributes\" || !m.attributeName) return;\n      switch (m.attributeName) {\n        case \"poster\":\n          return (state.poster = this.el.poster);\n        case \"autoplay\":\n          return (state.autoplay = this.el.autoplay);\n        case \"loop\":\n          return (state.loop = this.el.loop);\n        case \"preload\":\n          return (state.preload = this.el.preload);\n        case \"crossorigin\":\n          return (state.crossOrigin = this.el.crossOrigin);\n        case \"controls\":\n          return (state.controls = this.el.controls);\n        case \"playsinline\":\n        case \"webkit-playsinline\":\n          return (state.playsInline = this.el.playsInline);\n        case \"controlslist\":\n          return (state.controlsList = this.el.controlsList ?? this.el.getAttribute(m.attributeName));\n        case \"disablepictureinpicture\":\n          return (state.disablePictureInPicture = this.el.disablePictureInPicture ?? this.el.hasAttribute(m.attributeName));\n        case \"muted\":\n          return ((state.muted = this.el.muted), (settings.defaultMuted = this.el.defaultMuted)); // Mutations report before Queued MicroTasks so double \"state.*\" sets is safely batched for `on` listeners.\n      }\n    }\n  }\n  // --- Feature Intents ---\n  protected handleVolumeIntent(e: Event<CMedia, \"intent.volume\">) {\n    if (e.resolved) return;\n    this.el.volume = e.value!;\n    e.resolve(HTML5Tech.techName);\n  }\n  protected handleMutedIntent(e: Event<CMedia, \"intent.muted\">) {\n    if (e.resolved) return;\n    this.el.muted = e.value!;\n    e.resolve(HTML5Tech.techName);\n  }\n  protected handlePlaybackRateIntent(e: Event<CMedia, \"intent.playbackRate\">) {\n    if (e.resolved) return;\n    this.el.playbackRate = e.value!;\n    e.resolve(HTML5Tech.techName);\n  }\n  protected handlePiPIntent(e: Event<CMedia, \"intent.pictureInPicture\">) {\n    if (e.resolved) return;\n    e.value ? this.el.requestPictureInPicture() : document.exitPictureInPicture();\n    e.resolve(HTML5Tech.techName);\n  }\n  protected handleFullscreenIntent(e: Event<CMedia, \"intent.fullscreen\">) {\n    if (e.resolved) return;\n    e.value ? enterFullscreen(this.el) : exitFullscreen(this.el);\n    e.resolve(HTML5Tech.techName);\n  }\n  protected handleCurrentTrackIntent(e: Event<CMedia, `intent.current${TrackType}Track`>, type: TrackType) {\n    if (e.resolved) return;\n    setCurrentTrack(this.el, type, e.value, false); // (el), (type), (idx), (no flush: `hidden` & !`disabled`)\n    e.resolve(HTML5Tech.techName);\n  }\n  protected handleAttributeIntent(e: Event<CMedia, WCPaths<CMedia>>, key: string, isBool: boolean) {\n    if (e.resolved) return;\n    (this.el as any)[key] = isBool ? !!e.value : (e.value ?? \"\"); // Generic handler for simple attributes\n    if (key === \"playsInline\") this.el.toggleAttribute(\"webkit-playsinline\", e.value);\n    e.resolve(HTML5Tech.techName);\n  }\n  protected handleSourcesIntent(e: Event<CMedia, \"intent.sources\">) {\n    if (e.resolved) return;\n    if (!isSameSources(this.config.state.sources, e.value)) (removeSources(this.el), addSources(e.value, this.el));\n    e.resolve(HTML5Tech.techName);\n  }\n  protected handleTracksIntent(e: Event<CMedia, \"intent.tracks\">) {\n    if (e.resolved) return;\n    if (!isSameTracks(this.config.state.tracks, e.value)) (removeTracks(this.el), addTracks(e.value, this.el));\n    e.resolve(HTML5Tech.techName);\n  }\n  // --- Status (Bulk) ---\n  protected handleLoadStatus() {\n    this.config.status.readyState = this.el.readyState;\n    this.config.status.networkState = this.el.networkState;\n    this.config.status.buffered = this.el.buffered;\n    this.config.status.seekable = this.el.seekable;\n  }\n  protected handleLoadedMetadataStatus() {\n    this.config.status.loadedMetadata = true;\n    this.config.status.videoWidth = this.el.videoWidth;\n    this.config.status.videoHeight = this.el.videoHeight;\n    this.config.status.duration = this.el.duration;\n    this.handleLoadStatus(); // Update buffers too\n  }\n  protected handleLoadedDataStatus() {\n    this.config.status.loadedData = true;\n  }\n  protected handleCanPlayStatus() {\n    this.config.status.canPlay = true;\n  }\n  protected handleCanPlayThroughStatus() {\n    this.config.status.canPlayThrough = true;\n  }\n  protected handleStalledStatus() {\n    this.config.status.stalled = true;\n  }\n  protected handleWaitingStatus() {\n    this.config.status.waiting = true;\n  }\n  protected handlePlayingStatus() {\n    this.config.status.waiting = this.config.status.stalled = false;\n  }\n  protected handleErrorStatus() {\n    this.config.status.error = this.el.error;\n    this.config.status.waiting = false;\n  }\n  protected handleTracksStatus(type: \"textTracks\" | \"videoTracks\" | \"audioTracks\", list: any) {\n    this.config.status[type] = list;\n  }\n  protected handleActiveCueStatus(e?: globalThis.Event | { target?: TextTrack }) {\n    const track = e?.target as TextTrack | null;\n    // if (getTrackIdx(this.el, \"Text\", track) !== this.config.state.currentTextTrack) return; // multiple tracks `cuechange`?\n    this.config.status.activeCue = track?.activeCues?.[0] || null;\n  }\n  // --- Settings ---\n  protected handleDefaultMutedSetting(e: Event<CMedia, \"settings.defaultMuted\">) {\n    this.el.defaultMuted = e.value!;\n  }\n  protected handleDefaultPlaybackRateSetting(e: Event<CMedia, \"settings.defaultPlaybackRate\">) {\n    this.el.defaultPlaybackRate = e.value!;\n  }\n  // --- Capabilities ---\n  protected static canControlVolume(): boolean {\n    if (!this.DUMMY) return false;\n    try {\n      const prev = this.DUMMY.volume;\n      this.DUMMY.volume = 0.5;\n      const works = this.DUMMY.volume === 0.5;\n      return ((this.DUMMY.volume = prev), works);\n    } catch {\n      return false;\n    }\n  }\n  protected static canMuteVolume(): boolean {\n    return !!this.DUMMY && \"muted\" in this.DUMMY;\n  }\n  protected static canControlRate(): boolean {\n    if (!this.DUMMY) return false;\n    try {\n      const prev = this.DUMMY.playbackRate;\n      this.DUMMY.playbackRate = 0.5;\n      const works = this.DUMMY.playbackRate === 0.5;\n      return ((this.DUMMY.playbackRate = prev), works);\n    } catch {\n      return false;\n    }\n  }\n  protected static supportsTextTracks(): boolean {\n    return !!this.DUMMY && \"textTracks\" in this.DUMMY;\n  }\n  protected static supportsVideoTracks(): boolean {\n    return !!this.DUMMY && \"videoTracks\" in this.DUMMY;\n  }\n  protected static supportsAudioTracks(): boolean {\n    return !!this.DUMMY && \"audioTracks\" in this.DUMMY;\n  }\n}\n", "import { AUDIO_CONTEXT, type RuntimeState } from \"../tools/runtime\";\nimport type { VideoBuild } from \"../types/build\";\nimport type { CMedia } from \"../types/contract\";\nimport { reactive, type Reactive, guardAllMethods, guardMethod, nuke, inert, intent } from \"../tools/mixins\";\nimport { TechRegistry, PlugRegistry } from \"./registry\";\nimport { TechConstructor, BaseTech, HTML5Tech } from \"../media\";\nimport { PlugConstructor, ToastsPlug, type BasePlug as Plug } from \"../plugs\";\nimport { setTimeout, requestAnimationFrame, clamp, uncamelize, cloneMedia, getMediaReport, isSameURL, isSameSources, observeIntersection, observeResize, queryFullscreen, getSizeTier, createEl } from \"../utils\";\n\ninterface LifePayload {\n  readyState: number;\n  initialized: boolean;\n  destroyed: boolean;\n  instance: Controller;\n}\n\n// --- CONTROLLER (The Orchestrator) ---\nexport class Controller {\n  // --- CORE SYSTEM ---\n  public readonly id: string;\n  public plugs = new Map<string, Plug>();\n  public getPlug<T extends Plug = Plug>(name: string): T | undefined {\n    return this.plugs.get(name) as T | undefined;\n  }\n  private ac = new AbortController();\n  public readonly signal = this.ac.signal;\n  // --- RUNTIME (Global Controller States) ---\n  public config: Reactive<VideoBuild>;\n  public state: Reactive<RuntimeState> & Record<string, any>; // runtime state and states to be populated for easy reach\n  public media: Reactive<CMedia>;\n  // --- MEMORY ---\n  public buildCache: VideoBuild;\n  private payloadCache: LifePayload = { instance: this } as any; // must use getter for payload\n  // DOM References (Utilized by Core Plugs)\n  public videoContainer: HTMLElement = createEl(\"div\");\n  public pseudoVideo: HTMLVideoElement = createEl(\"video\");\n  public pseudoVideoContainer: HTMLElement = createEl(\"div\");\n  public DOM: Record<string, HTMLElement | null> = {}; // To be populated with common elements for easy reach\n  // --- UTILS CACHE ---\n  private throttleMap = new Map<string, any>();\n  private rafLoopMap = new Map<string, number>();\n  private rafLoopFnMap = new Map<string, Function>();\n  // --- FLAGS (Essential Only) ---\n  public mutatingDOMM = true; // Critical for Player wrapper to know when swapping modes\n\n  constructor(medium: HTMLVideoElement, build: VideoBuild) {\n    this.setReadyState(0, medium);\n    guardAllMethods(this, this.guard, true);\n    this.buildCache = { ...build };\n    this.id = build.id;\n    this.config = reactive(build);\n    this.state = reactive<RuntimeState>({\n      readyState: 0,\n      audioContextReady: !!AUDIO_CONTEXT,\n      mediaIntersecting: true,\n      mediaParentIntersecting: true,\n      dimensions: { container: { width: 0, height: 0, tier: \"x\" }, pseudoContainer: { width: 0, height: 0, tier: \"x\" }, window: { width: window.innerWidth, height: window.innerHeight } },\n      screenOrientation: window.screen.orientation,\n      docVisibilityState: document.visibilityState,\n      docInFullscreen: queryFullscreen(),\n    });\n    const defaults = getMediaReport(medium); // returns defaults and initials\n    this.media = reactive<CMedia>({\n      tech: {} as BaseTech, // dummy tech to be replaced on boot\n      element: medium,\n      intent: intent(defaults.intent),\n      state: defaults.state,\n      status: defaults.status,\n      settings: defaults.settings,\n    });\n    this.media.set(\"tech\", (t) => inert(t!), { signal: this.signal });\n    this.boot();\n  }\n\n  private boot() {\n    this.connectPlugs();\n    this.wireTechOverseer();\n    this.wireRuntimeState();\n    this.setReadyState(); // boot complete\n    if (!this.media.state.paused) this.setReadyState();\n    else this.media.wonce(\"state.paused\", () => this.setReadyState(), { signal: this.signal }); // first play\n    setTimeout(() => (this.mutatingDOMM = false), 0, this.signal);\n  }\n\n  private connectPlugs() {\n    for (const PlugClass of PlugRegistry.getOrdered()) {\n      const key = PlugClass.plugName,\n        config = key in this.config ? (this.config as any)[key] : (this.config.settings as any)[key];\n      this.plugin(PlugClass, config);\n    }\n  }\n  public plugin(PlugClass: PlugConstructor, config?: any): void {\n    if (this.config.noPlugList.includes(PlugClass.plugName) && !PlugClass.isCore) return; // Core plugs are mandatory\n    this.getPlug(PlugClass.plugName)?.destroy();\n    const plug = new PlugClass(this, config);\n    this.plugs.set(PlugClass.plugName, (plug.setup(), plug));\n  }\n\n  protected wireTechOverseer() {\n    const opts = { capture: true, signal: this.signal };\n    this.media.on(\"intent.src\", () => this.overseeTech(), { ...opts, immediate: true }); // load initial\n    this.media.on(\"intent.sources\", () => this.overseeTech(), opts);\n    this.media.on(\"state.src\", () => this.overseeTech(\"state\"), opts); // just in case\n    this.media.on(\"state.sources\", () => this.overseeTech(\"intent\"), opts); // just in case\n    this.media.on(\"settings.srcObject\", () => this.overseeTech(), opts);\n  }\n  protected overseeTech(pref: \"state\" | \"intent\" = \"intent\") {\n    const { src: prefSrc, sources: prefSources } = pref === \"intent\" ? this.media.intent : this.media.state,\n      { src: altSrc, sources: altSources } = pref === \"intent\" ? this.media.state : this.media.intent;\n    if (this.media.settings.srcObject) return this.switchTech(HTML5Tech);\n    let selectedTech: TechConstructor | null = null,\n      selectedSource: string | null = null;\n    if (!isSameURL(prefSrc, altSrc)) {\n      selectedTech = TechRegistry.pick(prefSrc, this.config.settings.techOrder);\n      if (selectedTech) selectedSource = prefSrc;\n    }\n    if (!selectedTech && !isSameSources(prefSources, altSources)) {\n      for (const source of prefSources) {\n        selectedTech = TechRegistry.pick(source.src, this.config.settings.techOrder);\n        if (selectedTech) {\n          selectedSource = source.src;\n          break;\n        }\n      }\n    }\n    this.switchTech(selectedTech || HTML5Tech);\n    if (selectedSource !== prefSrc && !selectedTech?.features?.sources) this.media.intent.src = selectedSource!; // since tech can't handle sources\n  }\n  public switchTech(TechClass: TechConstructor, config = this.media): void {\n    if (this.media.tech && TechClass === this.media.tech.constructor) return;\n    if (this.media.tech) (this.media.tech.destroy(), this.log(`Switching tech from '${this.media.tech.name}' -> '${TechClass.name}'`));\n    (this.media.tech = new TechClass(this, config)).setup();\n  }\n\n  private wireRuntimeState() {\n    const clups = [] as Function[];\n    clups.push(observeIntersection(this.videoContainer.parentElement!, (entry) => (this.state.mediaParentIntersecting = entry.isIntersecting)));\n    clups.push(observeIntersection(this.videoContainer, (entry) => (this.state.mediaIntersecting = entry.isIntersecting)));\n    clups.push(observeResize(this.videoContainer, () => (this.state.dimensions.container = getSizeTier(this.videoContainer))));\n    clups.push(observeResize(this.pseudoVideoContainer, () => (this.state.dimensions.pseudoContainer = getSizeTier(this.pseudoVideoContainer))));\n    this.signal.addEventListener(\"abort\", () => clups.forEach((cb) => cb()), { once: true });\n  }\n\n  public get payload() {\n    const readyState = this.state?.readyState ?? 0;\n    ((this.payloadCache.readyState = readyState), (this.payloadCache.initialized = readyState > 0), (this.payloadCache.destroyed = readyState < 0));\n    return this.payloadCache;\n  }\n  public setReadyState(state?: number, medium?: HTMLVideoElement) {\n    const readyState = !this.state ? 0 : clamp(0, state ?? this.state.readyState + 1, 3);\n    if (this.state) this.state.readyState = readyState;\n    this.fire(\"tmgreadystatechange\", this.payload, medium);\n  }\n\n  public guard = <T extends Function>(fn: T, { silent = false } = {}) => {\n    return guardMethod(fn, (e) => (this.log(e, \"error\", \"swallow\"), !silent && this.getPlug<ToastsPlug>(\"toasts\")?.toast?.(\"Something went wrong\", { tag: \"tmg-stwr\" })));\n  }; // ()=>{}: needs to be bounded even before initialization\n  public log(mssg: any, type: \"error\" | \"warn\" | \"log\" = \"log\", action?: \"swallow\") {\n    if (!this.config.debug) return;\n    switch (type) {\n      case \"error\":\n        return action === \"swallow\" ? console.warn(`[TMG Controller] swallowed error:`, mssg) : console.error(`[TMG Controller] error:`, mssg);\n      case \"warn\":\n        return console.warn(`[TMG Controller] warning:`, mssg);\n      default:\n        return console.log(`[TMG Controller] log:`, mssg);\n    }\n  }\n  public fire(eN: string, detail: any = null, el: HTMLElement | EventTarget = this.media.element, bubbles = true, cancelable = true) {\n    eN && el?.dispatchEvent(new CustomEvent(eN, { detail, bubbles, cancelable }));\n  }\n\n  public throttle(key: string, fn: Function, delay = 30, strict = true) {\n    if (strict) {\n      const now = performance.now();\n      if (now - (this.throttleMap.get(key) ?? 0) < delay) return;\n      return (this.throttleMap.set(key, now), fn());\n    }\n    if (this.throttleMap.has(key)) return;\n    const id = setTimeout(() => this.throttleMap.delete(key), delay, this.signal); // uses timeout so code runs when sync thread is free\n    return (this.throttleMap.set(key, id), fn());\n  }\n  public RAFLoop(key: string, fn: Function) {\n    this.rafLoopFnMap.set(key, fn);\n    const loop = () => (this.rafLoopFnMap.get(key)?.(), this.rafLoopMap.set(key, requestAnimationFrame(loop, this.signal)));\n    !this.rafLoopMap.has(key) && this.rafLoopMap.set(key, requestAnimationFrame(loop, this.signal));\n  }\n  public cancelRAFLoop(key: string) {\n    (cancelAnimationFrame(this.rafLoopMap.get(key)!), this.rafLoopFnMap.delete(key), this.rafLoopMap.delete(key));\n  }\n  public cancelAllLoops = (): void => this.rafLoopMap.keys().forEach(this.cancelRAFLoop);\n\n  public queryDOM<K extends keyof HTMLElementTagNameMap>(query: K, all: true, isPseudo?: boolean): NodeListOf<HTMLElementTagNameMap[K]>;\n  public queryDOM<K extends keyof SVGElementTagNameMap>(query: K, all: true, isPseudo?: boolean): NodeListOf<SVGElementTagNameMap[K]>;\n  public queryDOM<E extends Element = HTMLElement>(query: string, all: true, isPseudo?: boolean): NodeListOf<E>;\n  public queryDOM<K extends keyof HTMLElementTagNameMap>(query: K, all?: false, isPseudo?: boolean): HTMLElementTagNameMap[K] | null;\n  public queryDOM<K extends keyof SVGElementTagNameMap>(query: K, all?: false, isPseudo?: boolean): SVGElementTagNameMap[K] | null;\n  public queryDOM<E extends Element = HTMLElement>(query: string, all?: false, isPseudo?: boolean): E | null;\n  public queryDOM(query: string, all = false, isPseudo = false) {\n    const container = isPseudo ? this.pseudoVideoContainer : this.videoContainer;\n    return all ? container.querySelectorAll(query) : container.querySelector(query);\n  }\n  setImgLoadState<T extends { target: HTMLImageElement }>({ target: img }: T): void {\n    img?.setAttribute(\"data-loaded\", String(img.complete && img.naturalWidth > 0));\n  }\n  setImgFallback<T extends { target: HTMLImageElement }>({ target: img }: T): void {\n    img.src = window.TMG_VIDEO_ALT_IMG_SRC;\n  }\n  setCanvasFallback(canvas: HTMLCanvasElement, context: CanvasRenderingContext2D, img?: HTMLImageElement): void {\n    img = canvas && createEl(\"img\", { src: window.TMG_VIDEO_ALT_IMG_SRC, onload: () => context?.drawImage(img!, 0, 0, canvas.width, canvas.height) });\n  }\n  public isUIActive(mode: string, el = this.videoContainer): boolean {\n    if (mode === \"settings\") mode = \"settings-view\";\n    return el.classList.contains(`tmg-video-${uncamelize(mode)}`);\n  }\n\n  public destroy() {\n    this.setReadyState(-1);\n    this.cancelAllLoops();\n    this.ac.abort(\"[TMG Controller] Instance is being destroyed\");\n    this.mutatingDOMM = true; // plugs will mutate, flag watchers\n    [...this.plugs.values()].reverse().forEach((p) => p.destroy());\n    this.media.tech.destroy();\n    [this.plugs, this.throttleMap, this.rafLoopMap, this.rafLoopFnMap].forEach((map) => map.clear());\n    (this.media.destroy(), this.state.destroy(), this.config.destroy());\n    const el = this.config.cloneOnDetach ? cloneMedia(this.media.element) : this.media.element;\n    return (nuke(this), el);\n  }\n}\n", "import { VideoBuild } from \"../types/build\";\nimport { PlaylistItemBuild } from \"../plugs\";\nimport { DeepPartial } from \"../types/obj\";\nimport { IS_MOBILE } from \"../utils\";\n\nexport const DEFAULT_VIDEO_BUILD: DeepPartial<VideoBuild> = {\n  mediaPlayer: \"TMG\",\n  mediaType: \"video\",\n  media: { title: \"\", artist: \"\", profile: \"\", album: \"\", artwork: [], chapterInfo: [], links: { title: \"\", artist: \"\", profile: \"\" } },\n  disabled: false,\n  lightState: { disabled: false, controls: [\"meta\", \"bigplaypause\", \"fullscreenorientation\"], preview: { usePoster: true, time: 2 } },\n  debug: true,\n  settings: {\n    auto: { next: { value: 20, videoPreview: { usePoster: true, time: 2, tease: true } } },\n    css: {},\n    brightness: { min: 0, max: 150, value: 100, skip: 5 },\n    captions: {\n      disabled: false,\n      allowVideoOverride: true,\n      font: {\n        family: {\n          value: \"inherit\",\n          options: [\n            { value: \"inherit\", display: \"Default\" },\n            { value: \"monospace\", display: \"Monospace\" },\n            { value: \"sans-serif\", display: \"Sans Serif\" },\n            { value: \"serif\", display: \"Serif\" },\n            { value: \"cursive\", display: \"Cursive\" },\n            { value: \"fantasy\", display: \"Fantasy\" },\n            { value: \"system-ui\", display: \"System UI\" },\n            { value: \"arial\", display: \"Arial\" },\n            { value: \"verdana\", display: \"Verdana\" },\n            { value: \"tahoma\", display: \"Tahoma\" },\n            { value: \"times new roman\", display: \"Times New Roman\" },\n            { value: \"georgia\", display: \"Georgia\" },\n            { value: \"impact\", display: \"Impact\" },\n            { value: \"comic sans ms\", display: \"Comic Sans MS\" },\n          ],\n        },\n        size: {\n          min: 100,\n          max: 400,\n          value: 100,\n          skip: 100,\n          options: [\n            { value: 25, display: \"25%\" },\n            { value: 50, display: \"50%\" },\n            { value: 100, display: \"100%\" },\n            { value: 150, display: \"150%\" },\n            { value: 200, display: \"200%\" },\n            { value: 300, display: \"300%\" },\n            { value: 400, display: \"400%\" },\n          ],\n        },\n        color: {\n          value: \"white\",\n          options: [\n            { value: \"white\", display: \"White\" },\n            { value: \"yellow\", display: \"Yellow\" },\n            { value: \"green\", display: \"Green\" },\n            { value: \"cyan\", display: \"Cyan\" },\n            { value: \"blue\", display: \"Blue\" },\n            { value: \"magenta\", display: \"Magenta\" },\n            { value: \"red\", display: \"Red\" },\n            { value: \"black\", display: \"Black\" },\n          ],\n        },\n        opacity: {\n          value: 1,\n          options: [\n            { value: 0.25, display: \"25%\" },\n            { value: 0.5, display: \"50%\" },\n            { value: 0.75, display: \"75%\" },\n            { value: 1, display: \"100%\" },\n          ],\n        },\n        weight: {\n          value: \"400\",\n          options: [\n            { value: \"100\", display: \"Thin\" },\n            { value: \"200\", display: \"Extra Light\" },\n            { value: \"300\", display: \"Light\" },\n            { value: \"400\", display: \"Normal\" },\n            { value: \"500\", display: \"Medium\" },\n            { value: \"600\", display: \"Semi Bold\" },\n            { value: \"700\", display: \"Bold\" },\n            { value: \"800\", display: \"Extra Bold\" },\n            { value: \"900\", display: \"Black\" },\n          ],\n        },\n        variant: {\n          value: \"normal\",\n          options: [\n            { value: \"normal\", display: \"Normal\" },\n            { value: \"small-caps\", display: \"Small Caps\" },\n            { value: \"all-small-caps\", display: \"All Small Caps\" },\n          ],\n        },\n      },\n      background: {\n        color: {\n          value: \"black\",\n          options: [\n            { value: \"white\", display: \"White\" },\n            { value: \"yellow\", display: \"Yellow\" },\n            { value: \"green\", display: \"Green\" },\n            { value: \"cyan\", display: \"Cyan\" },\n            { value: \"blue\", display: \"Blue\" },\n            { value: \"magenta\", display: \"Magenta\" },\n            { value: \"red\", display: \"Red\" },\n            { value: \"black\", display: \"Black\" },\n          ],\n        },\n        opacity: {\n          value: 0.75,\n          options: [\n            { value: 0, display: \"0%\" },\n            { value: 0.25, display: \"25%\" },\n            { value: 0.5, display: \"50%\" },\n            { value: 0.75, display: \"75%\" },\n            { value: 1, display: \"100%\" },\n          ],\n        },\n      },\n      window: {\n        color: {\n          value: \"black\",\n          options: [\n            { value: \"white\", display: \"White\" },\n            { value: \"yellow\", display: \"Yellow\" },\n            { value: \"green\", display: \"Green\" },\n            { value: \"cyan\", display: \"Cyan\" },\n            { value: \"blue\", display: \"Blue\" },\n            { value: \"magenta\", display: \"Magenta\" },\n            { value: \"red\", display: \"Red\" },\n            { value: \"black\", display: \"Black\" },\n          ],\n        },\n        opacity: {\n          value: 0,\n          options: [\n            { value: 0, display: \"0%\" },\n            { value: 0.25, display: \"25%\" },\n            { value: 0.5, display: \"50%\" },\n            { value: 0.75, display: \"75%\" },\n            { value: 1, display: \"100%\" },\n          ],\n        },\n      },\n      characterEdgeStyle: {\n        value: \"none\",\n        options: [\n          { value: \"none\", display: \"None\" },\n          { value: \"drop-shadow\", display: \"Drop Shadow\" },\n          { value: \"raised\", display: \"Raised\" },\n          { value: \"depressed\", display: \"Depressed\" },\n          { value: \"outline\", display: \"Outline\" },\n        ],\n      },\n      textAlignment: {\n        value: \"left\",\n        options: [\n          { value: \"left\", display: \"Left\" },\n          { value: \"center\", display: \"Center\" },\n          { value: \"right\", display: \"Right\" },\n        ],\n      },\n    },\n    controlPanel: {\n      profile: true,\n      title: true,\n      artist: true,\n      top: [\"expandminiplayer\", \"spacer\", \"meta\", \"spacer\", \"capture\", \"fullscreenlock\", \"fullscreenorientation\", \"removeminiplayer\"],\n      center: [\"bigprev\", \"bigplaypause\", \"bignext\"],\n      bottom: { 1: [], 2: [\"spacer\", \"timeline\", \"spacer\"], 3: [\"prev\", \"playpause\", \"next\", \"brightness\", \"volume\", \"timeandduration\", \"spacer\", \"captions\", \"settings\", \"objectfit\", \"pictureinpicture\", \"theater\", \"fullscreen\"] },\n      buffer: \"eclipse\",\n      timeline: { thumbIndicator: true, seek: { relative: !IS_MOBILE, cancel: { delta: 15, timeout: 2000 } } },\n      progressBar: IS_MOBILE,\n      draggable: [\"\", \"wrapper\"],\n    },\n    errorMessages: { 1: \"The video playback was aborted :(\", 2: \"The video failed due to a network error :(\", 3: \"The video could not be decoded :(\", 4: \"The video source is not supported :(\" },\n    fastPlay: { playbackRate: 2, key: true, pointer: { type: \"all\", threshold: 800, inset: 20 }, reset: true, rewind: true },\n    gesture: {\n      click: IS_MOBILE ? \"\" : \"togglePlay\",\n      dblClick: IS_MOBILE ? \"togglePlay\" : \"toggleFullscreenMode\",\n      touch: { volume: true, brightness: true, timeline: true, threshold: 200, axesRatio: 3, inset: 20, sliderTimeout: 1000, xRatio: 1, yRatio: 1 },\n      wheel: { volume: { normal: true, slider: true }, brightness: { normal: true, slider: true }, timeline: { normal: true, slider: true }, timeout: 2000, xRatio: 12, yRatio: 6 },\n    },\n    keys: {\n      disabled: false,\n      strictMatches: false,\n      overrides: [\" \", \"ArrowDown\", \"ArrowUp\", \"ArrowLeft\", \"ArrowRight\", \"Home\", \"End\"],\n      shortcuts: { prev: \"Shift+p\", next: \"Shift+n\", playPause: \"k\", mute: \"m\", dark: \"d\", skipBwd: \"j\", skipFwd: \"l\", stepFwd: \".\", stepBwd: \",\", volumeUp: \"ArrowUp\", volumeDown: \"ArrowDown\", brightnessUp: \"y\", brightnessDown: \"h\", playbackRateUp: \">\", playbackRateDown: \"<\", timeFormat: \"z\", timeMode: \"q\", capture: \"s\", objectFit: \"a\", pictureInPicture: \"i\", theater: \"t\", fullscreen: \"f\", captions: \"c\", captionsFontSizeUp: [\"+\", \"=\"], captionsFontSizeDown: [\"-\", \"_\"], captionsFontFamily: \"u\", captionsFontWeight: \"g\", captionsFontVariant: \"v\", captionsFontOpacity: \"o\", captionsBackgroundOpacity: \"b\", captionsWindowOpacity: \"w\", captionsCharacterEdgeStyle: \"e\", captionsTextAlignment: \"x\", settings: \"?\" },\n      mods: { disabled: false, skip: { ctrl: 60, shift: 10 }, volume: { ctrl: 50, shift: 10 }, brightness: { ctrl: 50, shift: 10 }, playbackRate: { ctrl: 1 }, captionsFontSize: {} },\n      // prettier-ignore\n      blocks: [\"Ctrl+Tab\", \"Ctrl+Shift+Tab\", \"Ctrl+PageUp\", \"Ctrl+PageDown\", \"Cmd+Option+ArrowRight\", \"Cmd+Option+ArrowLeft\", \"Ctrl+1\", \"Ctrl+2\", \"Ctrl+3\", \"Ctrl+4\", \"Ctrl+5\", \"Ctrl+6\", \"Ctrl+7\", \"Ctrl+8\", \"Ctrl+9\", \"Cmd+1\", \"Cmd+2\", \"Cmd+3\", \"Cmd+4\", \"Cmd+5\", \"Cmd+6\", \"Cmd+7\", \"Cmd+8\", \"Cmd+9\", \"Alt+ArrowLeft\", \"Alt+ArrowRight\", \"Cmd+ArrowLeft\", \"Cmd+ArrowRight\", \"Ctrl+r\", \"Ctrl+Shift+r\", \"F5\", \"Shift+F5\", \"Cmd+r\", \"Cmd+Shift+r\", \"Ctrl+h\", \"Ctrl+j\", \"Ctrl+d\", \"Ctrl+f\", \"Cmd+y\", \"Cmd+Option+b\", \"Cmd+d\", \"Cmd+f\", \"Ctrl+Shift+i\", \"Ctrl+Shift+j\", \"Ctrl+Shift+c\", \"Ctrl+u\", \"F12\", \"Cmd+Option+i\", \"Cmd+Option+j\", \"Cmd+Option+c\", \"Cmd+Option+u\", \"Ctrl+=\", \"Ctrl+-\", \"Ctrl+0\", \"Cmd+=\", \"Cmd+-\", \"Cmd+0\", \"Ctrl+p\", \"Ctrl+s\", \"Ctrl+o\", \"Cmd+p\", \"Cmd+s\", \"Cmd+o\"],\n    },\n    locked: { disabled: true },\n    modes: { fullscreen: { disabled: false, orientationLock: \"auto\", onRotate: 90 }, theater: !IS_MOBILE, pictureInPicture: { disabled: false, floatingPlayer: { disabled: false, width: 500, height: 281, disallowReturnToOpener: false, preferInitialWindowPlacement: false } }, miniplayer: { disabled: false, minWindowWidth: 240 } },\n    notifiers: true,\n    noOverride: false,\n    overlay: { delay: 3000, behavior: \"strict\" },\n    persist: { disabled: false, throttle: 5000 },\n    playbackRate: { min: 0.25, max: 8, skip: 0.25 },\n    playsInline: true,\n    time: { min: 0, skip: 10, previews: false, mode: \"elapsed\", format: \"digital\", seekSync: false },\n    toasts: { disabled: false, captureAutoClose: 15000, maxToasts: 7, position: \"bottom-left\", hideProgressBar: true, closeButton: !IS_MOBILE, animation: \"slide-up\", dragToCloseDir: \"x||y\" },\n    volume: { min: 0, max: 300, skip: 5 },\n  },\n};\n\nexport const DEFAULT_VIDEO_ITEM_BUILD: DeepPartial<PlaylistItemBuild> = {\n  media: { title: \"\", chapterInfo: [], links: { title: \"\" } },\n  src: \"\",\n  tracks: [],\n  settings: { time: { start: 0, previews: false } },\n}; // for a playlist\n", "import { Controller } from \"../core/controller\";\nimport { Controllers } from \"./runtime\";\nimport { loadResource, mergeObjs, parseAnyObj, isIter, setHTMLConfig, cleanKeyCombo, isObj, supportsFullscreen, supportsPictureInPicture, setAny, luid } from \"../utils\";\nimport { DEFAULT_VIDEO_BUILD, DEFAULT_VIDEO_ITEM_BUILD } from \"../consts/config-defaults\";\nimport type { VideoBuild } from \"../types/build\";\nimport { DeepPartial, Paths, PathValue } from \"../types/obj\";\n\nconst modes: Record<string, boolean> = { fullScreen: supportsFullscreen(), pictureInPicture: supportsPictureInPicture() };\n\nexport type BuildPaths = Paths<VideoBuild>;\nexport type BuildParam = DeepPartial<VideoBuild> & Record<BuildPaths, PathValue<VideoBuild, BuildPaths>>;\n\nexport class Player {\n  #medium: HTMLMediaElement | null = null;\n  #active: boolean = false;\n  #controller: Controller | null = null;\n  #build: VideoBuild = structuredClone(DEFAULT_VIDEO_BUILD as VideoBuild);\n\n  constructor(customBuild: BuildParam = {} as BuildParam) {\n    this.configure({ ...customBuild, id: customBuild.id ?? `${luid()}_Controller_${Controllers.length + 1}` });\n  }\n\n  public get Controller() {\n    return this.#controller;\n  }\n\n  public get build(): VideoBuild {\n    return this.#build;\n  }\n  public set build(customBuild: BuildParam) {\n    this.configure(customBuild);\n  }\n  private queryBuild(): boolean {\n    return (!this.#active ? true : this.notice({ error: \"Already deployed the custom controls of your build configuration\", tip: \"Consider setting your build configuration before attaching your media element\" }), false);\n  }\n\n  private notice({ error, warning, tip }: Partial<Record<\"error\" | \"warning\" | \"tip\", string>>) {\n    error && console.error(`[TMG Player] ${error}`);\n    warning && console.warn(`[TMG Player] ${warning}`);\n    tip && console.info(`[TMG Player] ${tip}`);\n  }\n\n  public configure(customBuild: BuildParam): void {\n    if (!this.queryBuild() || !isObj(customBuild)) return;\n    this.#build = mergeObjs(this.#build, parseAnyObj(customBuild));\n    const keys = this.#build.settings.keys;\n    if (!keys) return;\n    Object.keys(keys.shortcuts || {}).forEach((k) => ((keys.shortcuts as any)[k] = cleanKeyCombo((keys.shortcuts as any)[k])));\n    [\"blocks\", \"overrides\"].forEach((k) => ((keys as any)[k] = cleanKeyCombo((keys as any)[k])));\n  }\n\n  public async attach(medium: HTMLMediaElement) {\n    if (isIter(medium)) return this.notice({ error: \"An iterable argument cannot be attached to the TMG media player\", tip: \"Consider looping the iterable argument to instantiate a new 'tmg.Player' for each\" });\n    if (this.#active) return medium;\n    medium.tmgPlayer?.detach();\n    medium.tmgPlayer = this;\n    this.#medium = medium;\n    await this.fetchCustomOptions();\n    await this.deployController();\n    return (this.#controller?.fire(\"tmgattached\", this.#controller.payload), medium);\n  }\n\n  public detach() {\n    if (!this.#active) return;\n    const medium = this.#controller?.destroy() ?? null;\n    this.#controller && Controllers.splice(Controllers.indexOf(this.#controller), 1);\n    medium?.classList.remove(`tmg-${medium?.tagName.toLowerCase()}`, \"tmg-media\");\n    if (medium) ((medium.tmgcontrols = false), (medium.tmgPlayer = null));\n    this.#active = false;\n    this.#controller?.fire(\"tmgdetached\");\n    this.#controller = this.#medium = null;\n    return medium;\n  }\n\n  public async fetchCustomOptions() {\n    if (!this.#medium) return;\n    if (this.#medium.getAttribute(\"tmg\")?.includes(\".json\")) {\n      await fetch(this.#medium.getAttribute(\"tmg\")!)\n        .then((res) => {\n          if (!res.ok) throw new Error(`JSON file not found at provided URL!. Status: ${res.status}`);\n          return res.json();\n        })\n        .then((json) => this.configure(json))\n        .catch(({ message }) => this.notice({ error: message, tip: \"A valid JSON file is required for parsing your build configuration\" }));\n    }\n    const customBuild = {} as BuildParam,\n      attributes = this.#medium.getAttributeNames().filter((attr) => attr.startsWith(\"tmg--\"));\n    attributes?.forEach((attr) => setHTMLConfig<BuildParam>(customBuild, attr as `tmg--${BuildPaths}`, this.#medium!.getAttribute(attr)!));\n    if (this.#medium instanceof HTMLVideoElement && this.#medium.poster) this.configure({ \"media.artwork[0].src\": this.#medium.poster } as any);\n    this.configure(customBuild);\n  }\n\n  private async deployController() {\n    if (this.#active || !this.#medium?.isConnected) return;\n    if (this.#build.playlist?.[0]) this.configure(mergeObjs(DEFAULT_VIDEO_ITEM_BUILD as BuildParam, parseAnyObj(this.#build.playlist[0] as BuildParam)));\n    if (!(this.#medium instanceof HTMLVideoElement)) return this.notice({ error: `Could not deploy custom controls on the '${this.#medium.tagName}' element as it is not supported`, warning: \"Only the 'VIDEO' element is currently supported\", tip: \"\" });\n    this.#medium.tmgcontrols = this.#active = true;\n    this.#medium.controls = false;\n    this.#medium.classList.add(`tmg-${this.#medium.tagName.toLowerCase()}`, \"tmg-media\");\n    const s = this.#build.settings;\n    type Mode = keyof typeof s.modes;\n    Object.keys(s.modes).forEach((k) => (s.modes[k as Mode] = (s.modes[k as Mode] && (modes[String(k)] ?? true) ? s.modes[k as Mode] : false) as any));\n    await Promise.all([loadResource(window.TMG_VIDEO_CSS_SRC), loadResource(window.T007_TOAST_JS_SRC, \"script\", { module: true }), loadResource(window.T007_INPUT_JS_SRC, \"script\")]);\n    Controllers.push((this.#controller = new Controller(this.#medium, this.#build)));\n  }\n}\n", "import { Player } from \"./player\";\nimport { type Controller } from \"../core/controller\";\nimport { queryFullscreen, observeMutation, type Dimensions } from \"../utils\";\n\n// Defines states explicitly managed by the TMG Environment Observers\nexport interface RuntimeState {\n  readyState: number;\n  audioContextReady: boolean;\n  mediaIntersecting: boolean;\n  mediaParentIntersecting: boolean;\n  dimensions: {\n    container: Dimensions & { tier: string };\n    pseudoContainer: Dimensions & { tier: string };\n    window: Dimensions;\n  };\n  screenOrientation: ScreenOrientation;\n  docVisibilityState: DocumentVisibilityState;\n  docInFullscreen: boolean;\n}\n\n// --- GLOBAL STATE ---\nexport let AUDIO_CONTEXT: AudioContext | null = null;\nexport let AUDIO_LIMITER: DynamicsCompressorNode | null = null;\nexport let IS_DOC_TRANSIENT = false;\nlet _mutationId: any = null;\nconst _mutationSet = new WeakSet<HTMLElement>(); // weak set for true magic\n\n// --- EXPORTS ---\nexport const Controllers: Controller[] = [];\n\nconst handleVidMutation = (mutations: MutationRecord[]) => {\n  for (const mutation of mutations) {\n    if (mutation.type !== \"attributes\") continue;\n    const target = mutation.target as HTMLMediaElement;\n    if (mutation.attributeName === \"tmgcontrols\") !_mutationSet.has(target) && (target.tmgcontrols = target.hasAttribute(\"tmgcontrols\"));\n    else if (mutation.attributeName?.startsWith(\"tmg\")) target.hasAttribute(mutation.attributeName) && target.tmgPlayer?.fetchCustomOptions();\n    else if (mutation.attributeName === \"controls\") target.hasAttribute(\"tmgcontrols\") && target.removeAttribute(\"controls\");\n  }\n};\n\nconst handleDOMMutation = (mutations: MutationRecord[]) => {\n  for (const mutation of mutations) {\n    for (const node of Array.from(mutation.addedNodes)) {\n      if (!(node instanceof HTMLElement)) continue;\n      const videos = node.matches(\"video:not(.tmg-media)\") ? [node] : node.querySelectorAll(\"video:not(.tmg-media)\");\n      videos.forEach((el) => {\n        observeMutation(el, handleVidMutation, { attributes: true });\n        (el as HTMLMediaElement).tmgcontrols = el.hasAttribute(\"tmgcontrols\");\n      });\n    }\n    for (const node of Array.from(mutation.removedNodes)) {\n      if (!(node instanceof HTMLElement)) continue;\n      const videos = node.matches(\".tmg-media\") ? [node] : node.querySelectorAll(\".tmg-media\");\n      videos.forEach((el) => {\n        !(el as HTMLMediaElement).tmgPlayer?.Controller?.mutatingDOMM && (el as HTMLMediaElement).tmgPlayer?.detach(); // a div el without tmgcontrols eg. youtube tech\n      });\n    }\n  }\n};\n\nfunction flagMutation(m: HTMLElement, check = true) {\n  !_mutationSet.has(m) && check && _mutationSet.add(m);\n}\n\nfunction freeMutation(m: HTMLElement) {\n  clearTimeout(_mutationId);\n  _mutationId = setTimeout(() => !(_mutationId = null) && _mutationSet.delete(m));\n}\n\nexport function mountMedia() {\n  if (typeof HTMLVideoElement === \"undefined\") return;\n  Object.defineProperty(HTMLVideoElement.prototype, \"tmgcontrols\", {\n    get: function () {\n      return this.hasAttribute(\"tmgcontrols\");\n    },\n    set: async function (value) {\n      if (value) {\n        flagMutation(this);\n        await ((this as HTMLMediaElement).tmgPlayer || new Player()).attach(this);\n        this.setAttribute(\"tmgcontrols\", \"\");\n        freeMutation(this);\n      } else {\n        flagMutation(this, this.hasAttribute(\"tmgcontrols\"));\n        this.removeAttribute(\"tmgcontrols\");\n        (this as HTMLMediaElement).tmgPlayer?.detach();\n        freeMutation(this);\n      }\n    },\n    enumerable: true,\n    configurable: true,\n  });\n}\n\nexport function unmountMedia() {\n  delete (HTMLVideoElement.prototype as any).tmgcontrols;\n}\n\nexport function startAudioManager() {\n  if (!AUDIO_CONTEXT && IS_DOC_TRANSIENT && typeof window !== \"undefined\") {\n    AUDIO_CONTEXT = new (window.AudioContext || (window as any).webkitAudioContext)() as AudioContext;\n    const L = (AUDIO_LIMITER = AUDIO_CONTEXT!.createDynamicsCompressor());\n    ((L.threshold.value = -1.0), (L.knee.value = 0.0), (L.ratio.value = 20), (L.attack.value = 0.001), (L.release.value = 0.05));\n    Controllers.forEach((c) => (c.state.audioContextReady = true));\n  } else if (AUDIO_CONTEXT?.state === \"suspended\") AUDIO_CONTEXT.resume();\n}\n\nexport function connectMediaToAudioManager(medium: HTMLMediaElement) {\n  if (!AUDIO_CONTEXT) return \"unavailable\";\n  medium.mediaElementSourceNode ??= AUDIO_CONTEXT.createMediaElementSource(medium);\n  medium._tmgGainNode ??= AUDIO_CONTEXT.createGain();\n  medium._tmgDynamicsCompressorNode ??= AUDIO_CONTEXT.createDynamicsCompressor();\n  medium.mediaElementSourceNode.connect(medium._tmgDynamicsCompressorNode);\n  medium._tmgDynamicsCompressorNode.connect(medium._tmgGainNode);\n  medium._tmgGainNode.connect(AUDIO_LIMITER!);\n  AUDIO_LIMITER!.connect(AUDIO_CONTEXT!.destination);\n}\n\nexport function init() {\n  mountMedia();\n  [\"click\", \"pointerdown\", \"keydown\"].forEach((e) => document?.addEventListener(e, () => ((IS_DOC_TRANSIENT = true), startAudioManager()), true));\n  document?.querySelectorAll(\"video\").forEach((medium: any) => {\n    observeMutation(medium, handleVidMutation, { attributes: true });\n    medium.tmgcontrols = medium.hasAttribute(\"tmgcontrols\");\n  });\n  observeMutation(document.documentElement, handleDOMMutation, { childList: true, subtree: true });\n  window?.addEventListener(\"resize\", () => Controllers.forEach((c) => (c.state.dimensions.window = { width: window.innerWidth, height: window.innerHeight })));\n  screen?.orientation.addEventListener(\"change\", (e) => Controllers.forEach((c) => (c.state.screenOrientation = e?.target as ScreenOrientation)));\n  document?.addEventListener(\"visibilitychange\", () => Controllers.forEach((c) => (c.state.docVisibilityState = document.visibilityState)));\n  [\"fullscreenchange\", \"webkitfullscreenchange\", \"mozfullscreenchange\", \"msfullscreenchange\"].forEach((e) => document?.addEventListener(e, () => Controllers.forEach((c) => (c.state.docInFullscreen = queryFullscreen()))));\n}\n", "export interface StorageAdapterConstructor {\n  new (namespace: string): StorageAdapter;\n}\n\n// The Abstract Contract\nexport abstract class StorageAdapter {\n  public readonly namespace: string;\n  constructor(namespace: string) {\n    this.namespace = namespace;\n  }\n  abstract get(key: string): any;\n  abstract set(key: string, value: any): void;\n  abstract remove(key: string): void;\n}\n\n// The Default Implementation (Local Storage)\nexport class LocalStorageAdapter extends StorageAdapter {\n  get(key: string) {\n    try {\n      const v = localStorage.getItem(`${this.namespace}_${key}`);\n      return v ? JSON.parse(v) : undefined;\n    } catch {\n      return undefined;\n    }\n  }\n\n  set(key: string, value: any) {\n    try {\n      localStorage.setItem(`${this.namespace}_${key}`, JSON.stringify(value));\n    } catch (e) {\n      console.warn(\"[TMG Local Storage] Storage full or unavailable\", e);\n    }\n  }\n\n  remove(key: string) {\n    localStorage.removeItem(`${this.namespace}_${key}`);\n  }\n}\n", "export interface QueueJob<T = any> {\n  task: () => Promise<T>;\n  id?: string;\n  preTask?: () => void;\n  cancelled?: boolean;\n  resolve: (value: any) => void;\n}\n\nexport interface QueueResult {\n  success: boolean;\n  cancelled: boolean;\n  dropped: boolean;\n}\n\n// for ffmpeg future tasks\nexport class AsyncQueue {\n  // add jobs, performs and reports sequentially; drop job: reports; cancel job: records, reports when about to perform\n  private jobs: QueueJob[] = [];\n  private running = false;\n\n  private async handle(): Promise<void> {\n    if (this.running) return;\n    this.running = true;\n    while (this.jobs.length > 0) {\n      const job = this.jobs.shift();\n      if (job) job.cancelled ? job.resolve({ success: false, cancelled: true, dropped: false }) : (job.preTask?.(), job.resolve(await job.task()));\n    }\n    this.running = false;\n  }\n\n  public add<T = any>(task: () => Promise<T>, id?: string, cancelled?: boolean, preTask?: () => void): Promise<QueueResult | T> {\n    return new Promise((resolve) => (this.jobs.push({ task, id, preTask, cancelled, resolve }), this.handle()));\n  }\n\n  public drop(id: string): boolean {\n    const job = this.jobs.find((j) => j.id === id);\n    job?.resolve({ success: false, cancelled: true, dropped: true });\n    return (job && this.jobs.splice(this.jobs.indexOf(job), 1), !!job); // stops immediately, cant't remove a running job\n  }\n\n  public cancel(id: string): boolean {\n    const job = this.jobs.find((j) => j.id === id);\n    return (job && (job.cancelled = true), !!job?.cancelled); // stops when it should have for metrics, can't cancel a running job\n  }\n}\n", "export * from \"./base\";\nexport * from \"./skeleton\";\nexport * from \"./media\";\nexport * from \"./playlist\";\nexport * from \"./css\";\nexport * from \"./controlPanel\";\nexport * from \"./overlay\";\nexport * from \"./persist\";\nexport * from \"./locked\";\nexport * from \"./light-state\";\nexport * from \"./time\";\nexport * from \"./timeTravel\";\nexport * from \"./gesture\";\nexport * from \"./volume\";\nexport * from \"./playbackRate\";\nexport * from \"./brightness\";\nexport * from \"./auto\";\nexport * from \"./toasts\";\nexport * from \"./fastPlay\";\nexport * from \"./errorMessages\";\n", "import { Controllable } from \"../core/controllable\";\nimport type { Controller } from \"../core/controller\";\n\nexport interface PlugConstructor<T extends BasePlug = BasePlug> {\n  new (ctlr: Controller, config: any): T;\n  plugName: string;\n  isCore: boolean;\n}\n\nexport abstract class BasePlug<Config = any, State = any> extends Controllable<Config, State> {\n  public static readonly plugName: string;\n  public get name() {\n    return (this.constructor as PlugConstructor).plugName;\n  }\n  public static readonly isCore: boolean = false;\n\n  protected onSetup(): void {\n    this.mount?.();\n    if (this.ctlr.state.readyState) this.wire?.();\n    else this.wire && this.ctlr.state.wonce(\"readyState\", this.wire, { signal: this.signal }); // wire after all plugs setup\n  }\n\n  public mount?(): void {}\n  public wire?(): void {}\n}\n\nexport abstract class BaseModule<Config = any, State = any> extends Controllable<Config, State> {\n  public static readonly moduleName: string;\n  public get name() {\n    return (this.constructor as typeof BaseModule).moduleName;\n  }\n\n  protected onSetup(): void {\n    this.mount?.();\n    if (this.ctlr.state.readyState) this.wire?.();\n    else this.wire && this.ctlr.state.wonce(\"readyState\", this.wire, { signal: this.signal }); // wire after all plugs setup\n  }\n\n  public mount?(): void {}\n  public wire?(): void {}\n}\n", "import { BasePlug } from \".\";\nimport type { Event } from \"../types/reactor\";\nimport type { CMedia } from \"../types/contract\";\nimport { assignEl, IS_MOBILE } from \"../utils\";\n\nexport type Skeleton = undefined;\n\nexport class SkeletonPlug extends BasePlug<Skeleton> {\n  public static readonly plugName: string = \"skeleton\";\n  public static readonly isCore: boolean = true;\n\n  public mount(): void {\n    this.setupContainers();\n    this.injectInterface();\n  }\n\n  public wire(): void {\n    this.ctlr.media.on(\"state.paused\", this.handlePausedChange, { signal: this.signal, immediate: true });\n    this.ctlr.media.on(\"status.ended\", ({ target: { value } }) => this.ctlr.videoContainer.classList.toggle(\"tmg-video-replay\", value), { signal: this.signal, immediate: true });\n    this.ctlr.media.on(\"status.waiting\", ({ target: { value } }) => this.ctlr.videoContainer.classList.toggle(\"tmg-video-buffering\", value), { signal: this.signal, immediate: true });\n    this.ctlr.media.on(\"status.loadedMetadata\", this.handleLoadedMetadataStatus, { signal: this.signal, immediate: true });\n  }\n\n  protected setupContainers(): void {\n    assignEl(\n      this.ctlr.videoContainer,\n      {\n        role: \"region\",\n        ariaLabel: \"Video Player\",\n        className: `tmg-video-container tmg-media-container${IS_MOBILE ? \" tmg-video-mobile\" : \"\"}${this.ctlr.media.state.paused ? \" tmg-video-paused\" : \"\"}`,\n      },\n      {\n        trackKind: \"captions\",\n        volumeLevel: \"muted\",\n        brightnessLevel: \"dark\",\n        objectFit: this.ctlr.config.settings.css.objectFit || \"contain\", // object fit plug'll handle it\n      }\n    );\n    this.ctlr.media.element.parentElement?.insertBefore(this.ctlr.videoContainer, this.ctlr.media.element);\n    assignEl(this.ctlr.pseudoVideoContainer, {\n      role: \"status\",\n      className: \"tmg-pseudo-video-container tmg-media-container\",\n    });\n    assignEl(this.ctlr.pseudoVideo, {\n      ariaHidden: \"true\",\n      className: \"tmg-pseudo-video tmg-media\",\n      muted: true,\n      autoplay: false,\n    });\n    this.ctlr.pseudoVideoContainer.appendChild(this.ctlr.pseudoVideo);\n  }\n\n  protected injectInterface(): void {\n    this.ctlr.videoContainer.insertAdjacentHTML(\n      \"beforeend\",\n      `\n      <div class=\"tmg-video-container-content-wrapper\">\n        <div class=\"tmg-video-container-content\">\n          <div class=\"tmg-video-controls-container\">\n            <div class=\"tmg-video-curtain tmg-video-top-curtain\"></div>\n            <div class=\"tmg-video-curtain tmg-video-bottom-curtain\"></div>\n            <div class=\"tmg-video-curtain tmg-video-cover-curtain\"></div>\n          </div>\n        </div>\n        <div class=\"tmg-video-settings\" inert>\n          <div class=\"tmg-video-settings-content\">\n            <div class=\"tmg-video-settings-top-panel\">\n              <button type=\"button\" class=\"tmg-video-settings-close-btn\">\n                <svg viewBox=\"0 0 25 25\" class=\"tmg-video-settings-close-btn-icon\">\n                  <path transform=\"translate(0, 4)\" d=\"M1.307,5.988 L6.616,1.343 C7.027,0.933 7.507,0.864 7.918,1.275 L7.918,4.407 C8.014,4.406 8.098,4.406 8.147,4.406 C13.163,4.406 16.885,7.969 16.885,12.816 C16.885,14.504 16.111,13.889 15.788,13.3 C14.266,10.52 11.591,8.623 8.107,8.623 C8.066,8.623 7.996,8.624 7.917,8.624 L7.917,11.689 C7.506,12.099 6.976,12.05 6.615,11.757 L1.306,7.474 C0.897,7.064 0.897,6.399 1.307,5.988 L1.307,5.988 Z\"></path>\n                </svg>\n                <span>Close Settings</span>\n              </button>\n            </div>\n            <div class=\"tmg-video-settings-bottom-panel\">No Settings Available Yet!</div>\n          </div>\n        </div>\n      </div>\n    `\n    );\n    this.ctlr.DOM.containerContentWrapper = this.ctlr.queryDOM(\".tmg-video-container-content-wrapper\");\n    this.ctlr.DOM.containerContent = this.ctlr.queryDOM(\".tmg-video-container-content\");\n    this.ctlr.DOM.controlsContainer = this.ctlr.queryDOM(\".tmg-video-controls-container\");\n    this.ctlr.DOM.settingsContent = this.ctlr.queryDOM(\".tmg-video-settings-content\");\n    this.ctlr.DOM.settingsTopPanel = this.ctlr.queryDOM(\".tmg-video-settings-top-panel\");\n    this.ctlr.DOM.settingsBottomPanel = this.ctlr.queryDOM(\".tmg-video-settings-bottom-panel\");\n    this.ctlr.DOM.containerContent?.prepend(this.ctlr.media.element);\n  }\n\n  protected handlePausedChange({ target: { value } }: Event<CMedia, \"state.paused\">): void {\n    if (!value) for (const media of document.querySelectorAll<HTMLMediaElement>(\"video, audio\")) media !== this.ctlr.media.element && !media.paused && media.pause();\n    this.ctlr.videoContainer.classList.toggle(\"tmg-video-paused\", value);\n  }\n\n  protected handleLoadedMetadataStatus({ target: { value } }: Event<CMedia, \"status.loadedMetadata\">): void {\n    if (!value) return;\n    this.ctlr.pseudoVideo.src = this.ctlr.media.element.currentSrc;\n    this.ctlr.pseudoVideo.crossOrigin = this.ctlr.media.element.crossOrigin;\n  }\n\n  public activatePseudoMode(): void {\n    const pv = this.ctlr.pseudoVideo,\n      v = this.ctlr.media.element,\n      pvc = this.ctlr.pseudoVideoContainer,\n      vc = this.ctlr.videoContainer;\n    ((pv.id = v.id), (v.id = \"\"));\n    pv.className += \" \" + v.className.replace(/tmg-media|tmg-video/g, \"\");\n    pvc.className += \" \" + vc.className.replace(/tmg-media-container|tmg-pseudo-video-container/g, \"\");\n    vc.parentElement?.insertBefore(pvc, vc);\n    document.body.append(vc);\n  }\n\n  public deactivatePseudoMode(destroy?: boolean): void {\n    const pv = this.ctlr.pseudoVideo,\n      v = this.ctlr.media.element,\n      pvc = this.ctlr.pseudoVideoContainer,\n      vc = this.ctlr.videoContainer;\n    ((v.id = pv.id), (pv.id = \"\"));\n    pv.className = \"tmg-pseudo-video tmg-media\";\n    pvc.className = \"tmg-pseudo-video-container tmg-media-container\";\n    pvc.parentElement?.replaceChild(destroy ? v : vc, pvc);\n  }\n\n  protected onDestroy() {\n    this.ctlr.media.element.parentElement?.replaceChild(this.ctlr.media.element, this.ctlr.videoContainer);\n  }\n}\n", "import { BasePlug } from \".\";\nimport type { VideoBuild } from \"../types/build\";\nimport type { Event } from \"../types/reactor\";\nimport { capitalize } from \"../utils\";\nimport type { PlaylistPlug } from \"./playlist\";\nimport type { TimePlug } from \"./time\";\n\nexport type Src = string;\nexport interface Source {\n  src: string;\n  type: string;\n  media: string;\n}\nexport type Sources = Source[];\nexport type SrcObject = MediaSource | null;\n\nexport interface Track {\n  kind: string;\n  label: string;\n  srclang: string;\n  src: string;\n  default: boolean;\n  id: string;\n}\nexport type Tracks = Track[];\n\nexport type PlaysInline = boolean;\n\nexport interface Media extends MediaMetadata {\n  id: string;\n  title: string;\n  artist: string;\n  profile: string;\n  album: string;\n  artwork: Array<{ src: string; sizes: string; type: string }>;\n  chapterInfo: Array<{\n    title: string;\n    startTime: number;\n    artwork: Array<{ src: string; sizes: string; type: string }>;\n  }>;\n  links: Record<\"title\" | \"artist\" | \"profile\", string>;\n}\n\nexport class MediaPlug extends BasePlug<Media> {\n  public static readonly plugName: string = \"media\";\n  public static readonly isCore: boolean = true;\n\n  public mount(): void {\n    const videoProfile = this.ctlr.DOM.videoProfile as HTMLImageElement;\n    videoProfile && this.ctlr.setImgLoadState({ target: videoProfile });\n  }\n  public wire(): void {\n    this.ctlr.media.on(\"state.paused\", ({ target: { value } }) => !value && this.syncMediaSession(), { signal: this.signal });\n    this.ctlr.config.watch(\"media.title\", this.forwardTitle, { immediate: true, signal: this.signal });\n    this.ctlr.config.watch(\"media.artist\", this.forwardArtist, { immediate: true, signal: this.signal });\n    this.ctlr.config.watch(\"media.profile\", this.forwardProfile, { immediate: true, signal: this.signal });\n    this.ctlr.config.on(\"media.links.title\", this.handleMediaLink, { immediate: true, signal: this.signal });\n    this.ctlr.config.on(\"media.links.artist\", this.handleMediaLink, { immediate: true, signal: this.signal });\n    this.ctlr.config.on(\"media.links.profile\", this.handleMediaLink, { immediate: true, signal: this.signal });\n    this.ctlr.config.on(\"media.artwork\", this.handleArtwork, { immediate: true, signal: this.signal });\n    this.ctlr.config.on(\"media\", this.handleMediaChange, { immediate: true, signal: this.signal });\n  }\n  protected forwardTitle(value?: string): void {\n    this.ctlr.config.settings.controlPanel.title = value || \"\";\n  }\n  protected forwardArtist(value?: string): void {\n    this.ctlr.config.settings.controlPanel.artist = value || \"\";\n  }\n  protected forwardProfile(value?: string): void {\n    this.ctlr.config.settings.controlPanel.profile = value || \"\";\n  }\n  protected handleMediaLink({ target: { key, value } }: Event<VideoBuild, \"media.links.title\" | \"media.links.artist\" | \"media.links.profile\">): void {\n    const el = key !== \"profile\" ? (this.ctlr.DOM[`video${capitalize(key)}`] as HTMLAnchorElement) : (this.ctlr.DOM.videoProfile as HTMLImageElement)?.parentElement;\n    el && Object.entries({ href: value, \"tab-index\": value ? \"0\" : null, target: value ? \"_blank\" : null, rel: value ? \"noopener noreferrer\" : null }).forEach(([attr, val]) => (val ? el.setAttribute(attr, val) : el.removeAttribute(attr)));\n  }\n  protected handleArtwork({ currentTarget: { value } }: Event<VideoBuild, \"media.artwork\">): void {\n    this.ctlr.media.intent.poster = value?.[0]?.src || \"\";\n  }\n  protected handleMediaChange(): void {\n    if (!this.ctlr.media.state.paused) this.syncMediaSession();\n  }\n  public syncMediaSession(): void {\n    if (!navigator.mediaSession || (document.pictureInPictureElement && !this.ctlr.isUIActive(\"pictureInPicture\"))) return;\n    if (this.config) navigator.mediaSession.metadata = new MediaMetadata(this.config as MediaMetadataInit);\n    const set = (...args: Parameters<typeof navigator.mediaSession.setActionHandler>) => navigator.mediaSession.setActionHandler(...args);\n    set(\"play\", () => (this.ctlr.media.intent.paused = false));\n    set(\"pause\", () => (this.ctlr.media.intent.paused = true));\n    const timePlug = this.ctlr.getPlug<TimePlug>(\"time\");\n    set(\"seekbackward\", timePlug ? () => timePlug.skip(-this.ctlr.config.settings.time.skip) : null);\n    set(\"seekforward\", timePlug ? () => timePlug.skip(this.ctlr.config.settings.time.skip) : null);\n    const playlistPlug = this.ctlr.getPlug<PlaylistPlug>(\"playlist\"),\n      playlist = this.ctlr.config.playlist,\n      currentIndex = this.ctlr.state.currentPlaylistIndex ?? 0;\n    set(\"previoustrack\", playlist && currentIndex > 0 && playlistPlug ? playlistPlug.previousVideo : null);\n    set(\"nexttrack\", playlist && currentIndex < (playlist?.length ?? 0) - 1 && playlistPlug ? playlistPlug.nextVideo : null);\n  }\n}\n\nexport class SrcPlug extends BasePlug<Src> {\n  public static readonly plugName: string = \"src\";\n  public static readonly isCore: boolean = true;\n\n  public wire() {\n    this.ctlr.config.watch(\"src\", this.forwardSrc, { signal: this.signal, immediate: \"auto\" });\n  }\n  protected forwardSrc(value?: string) {\n    this.ctlr.media.intent.src = value!;\n  }\n}\n\nexport class SourcesPlug extends BasePlug<Sources> {\n  public static readonly plugName: string = \"sources\";\n  public static readonly isCore: boolean = true;\n\n  public wire() {\n    this.ctlr.config.watch(\"sources\", this.forwardSources, { signal: this.signal, immediate: \"auto\" });\n  }\n  protected forwardSources(value?: Sources) {\n    this.ctlr.media.intent.sources = value!;\n  }\n}\n\nexport class SrcObjectPlug extends BasePlug<SrcObject> {\n  public static readonly plugName: string = \"srcObject\";\n  public static readonly isCore: boolean = true;\n\n  public wire() {\n    this.ctlr.config.watch(\"srcObject\", this.forwardSrcObject, { signal: this.signal, immediate: \"auto\" });\n  }\n  protected forwardSrcObject(value?: SrcObject) {\n    this.ctlr.media.settings.srcObject = value!;\n  }\n}\n\nexport class TracksPlug extends BasePlug<Tracks> {\n  public static readonly plugName: string = \"tracks\";\n  public static readonly isCore: boolean = true;\n\n  public wire() {\n    this.ctlr.config.watch(\"tracks\", this.forwardTracks, { signal: this.signal, immediate: \"auto\" });\n  }\n  protected forwardTracks(value?: Tracks) {\n    this.ctlr.media.intent.tracks = value!;\n  }\n}\n\nexport class PlaysInlinePlug extends BasePlug<PlaysInline> {\n  public static readonly plugName: string = \"playsInline\";\n\n  public wire() {\n    this.ctlr.config.watch(\"settings.playsInline\", this.forwardPlaysInline, { signal: this.signal, immediate: true });\n  }\n  protected forwardPlaysInline(value?: boolean) {\n    this.ctlr.media.intent.playsInline = value!;\n  }\n}\n", "import { BasePlug } from \".\";\nimport type { VideoBuild, Settings } from \"../types/build\";\nimport type { Event } from \"../types/reactor\";\nimport { DEFAULT_VIDEO_ITEM_BUILD } from \"../consts/config-defaults\";\nimport { mergeObjs, isSameURL } from \"../utils\";\n\nconst timeKeys = [\"min\", \"max\", \"start\", \"end\", \"previews\"] as const;\nexport type PlaylistItemTimeKey = (typeof timeKeys)[number];\n\nexport interface PlaylistItemBuild extends Pick<VideoBuild, \"media\" | \"src\" | \"sources\" | \"tracks\"> {\n  settings: {\n    time: Pick<Settings[\"time\"], PlaylistItemTimeKey>;\n  };\n}\n\nexport type Playlist = PlaylistItemBuild[] | null;\n\nexport interface PlaylistState {\n  currentIndex: number;\n}\nexport class PlaylistPlug extends BasePlug<Playlist, PlaylistState> {\n  public static readonly plugName: string = \"playlist\";\n\n  public wire(): void {\n    this.ctlr.state.currentIndex = 0;\n    this.ctlr.config.get(\"playlist\", (v) => (v?.length ? v : null), { signal: this.signal });\n    this.ctlr.config.set(\"playlist\", (v): Playlist => v?.map((i: any) => mergeObjs(DEFAULT_VIDEO_ITEM_BUILD, i)) ?? null, { signal: this.signal });\n    this.ctlr.config.on(\"playlist\", this.handlePlaylistChange, { signal: this.signal, immediate: true, depth: 1 });\n    this.ctlr.config.watch(\"settings.time.start\", (v) => this.ctlr.config.playlist && this.ctlr.media.status.readyState && this.ctlr.media.state.currentTime && (this.ctlr.config.playlist[this.ctlr.state.currentIndex].settings.time.start = v), { signal: this.signal, immediate: \"auto\" });\n  }\n\n  protected handlePlaylistChange({ root }: Event<VideoBuild, \"playlist\">): void {\n    if (this.ctlr.media.status.readyState < 1) return;\n    const list = root.playlist;\n    const v = list?.find((v) => (v.media.id && v.media.id === root.media.id) || isSameURL(v.src, root.src));\n    this.ctlr.state.currentIndex = v ? list?.indexOf(v) : 0;\n    if (v) this.applyItem(v, false);\n    else this.movePlaylistTo(this.ctlr.state.currentIndex);\n  }\n\n  public movePlaylistTo(index: number, shouldPlay?: boolean): void {\n    if (!this.ctlr.config.playlist) return;\n    this.ctlr.state.currentIndex = index;\n    this.applyItem(this.ctlr.config.playlist[index]);\n    if (typeof shouldPlay === \"boolean\") this.ctlr.media.intent.paused = !shouldPlay;\n  }\n\n  protected applyItem(item: PlaylistItemBuild, reset = true): void {\n    this.ctlr.config.media = item.media;\n    timeKeys.forEach((p) => (this.ctlr.config.settings.time[p] = item.settings.time[p] as any));\n    this.ctlr.config.tracks = item.tracks ?? [];\n    if (reset) this.ctlr.config.src = item.src || \"\";\n    if (reset && \"sources\" in item && item.sources) this.ctlr.config.sources = item.sources;\n  }\n\n  public previousVideo(): void {\n    if (this.ctlr.media.state.currentTime >= 3) this.ctlr.media.intent.currentTime = 0;\n    else if (this.ctlr.config.playlist && this.ctlr.state.currentIndex > 0) this.movePlaylistTo(this.ctlr.state.currentIndex - 1, true);\n  }\n\n  public nextVideo(): void {\n    if (!this.ctlr.config.playlist) return;\n    if (this.ctlr.state.currentIndex < this.ctlr.config.playlist.length - 1) this.movePlaylistTo(this.ctlr.state.currentIndex + 1, true);\n  }\n}\n", "import { BasePlug } from \".\";\nimport { VideoBuild } from \"../types/build\";\nimport { CMedia } from \"../types/contract\";\nimport { Event } from \"../types/reactor\";\nimport { camelize, uncamelize } from \"../utils\";\n\nexport type Css = Record<string, string | number> & {\n  captionsCharacterEdgeStyle: \"none\" | \"raised\" | \"depressed\" | \"uniform\" | \"dropshadow\";\n  captionsTextAlignment: \"start\" | \"center\" | \"end\";\n  syncWithMedia: Record<keyof Css, boolean>;\n};\n\nexport class CSSPlug extends BasePlug<Css> {\n  public static readonly plugName: string = \"css\";\n  public static readonly isCore: boolean = true;\n  public classSettings = [\"captionsCharacterEdgeStyle\", \"captionsTextAlignment\"];\n  public CSSCache: Record<string, string> = {};\n\n  public wire(): void {\n    this.CSSCache = {};\n    this.ctlr.config.on(\"settings.css\", this.handleCSSChange, { signal: this.signal, immediate: true, depth: 1 });\n    this.classSettings.forEach(this.wireClassMediator);\n    this.wireSheetMediators();\n    this.wireComputedVars();\n  }\n\n  protected wireSheetMediators() {\n    for (const sheet of document.styleSheets) {\n      try {\n        if (!sheet.cssRules) continue;\n        for (const rule of sheet.cssRules) {\n          if (!(rule instanceof CSSStyleRule) || !rule.selectorText?.replace(/\\s/g, \"\")?.match(/(:root|\\.tmg-media-container)/)) continue;\n          for (const prop of rule.style) {\n            if (!prop.startsWith(\"--tmg-video-\")) continue;\n            const field = camelize(prop.replace(\"--tmg-video-\", \"\"));\n            this.CSSCache[field] = rule.style.getPropertyValue(prop); // Cache raw\n            this.ctlr.config.get(`settings.css.${field}`, () => getComputedStyle(this.ctlr.videoContainer).getPropertyValue(prop), { signal: this.signal });\n          }\n        }\n      } catch {\n        continue;\n      }\n    }\n  }\n\n  protected wireClassMediator(key: string) {\n    this.ctlr.config.get(`settings.css.${key}`, () => this.getValue(key), { signal: this.signal });\n  }\n\n  protected handleCSSChange({ type, target: { key, value } }: Event<VideoBuild, \"settings.css\">) {\n    type === \"update\" ? this.apply(key, value) : type === \"init\" && Object.keys(value!).forEach((k) => k !== \"syncWithMedia\" && this.apply(k, value![k]));\n  }\n\n  protected getValue(key: string): string {\n    const pre = `tmg-video-${uncamelize(key, \"-\")}`,\n      val = Array.prototype.find.call(this.ctlr.videoContainer.classList, (c) => c.startsWith(pre))?.replace(`${pre}-`, \"\");\n    return val || \"none\"; // Validation logic (can be expanded to use tmg.parseUIObj if available)\n  }\n\n  protected apply(key: string, value: any) {\n    this[this.classSettings.includes(key) ? \"updateClass\" : \"updateCssVariable\"](key, value);\n  }\n\n  protected updateCssVariable(key: string, value: any) {\n    const strVal = String(value),\n      cssVar = `--tmg-video-${uncamelize(key, \"-\")}`;\n    [this.ctlr.videoContainer, this.ctlr.pseudoVideoContainer].forEach((el) => el?.style.setProperty(cssVar, strVal));\n  }\n\n  protected updateClass(key: string, value: any) {\n    const pre = `tmg-video-${uncamelize(key, \"-\")}`;\n    this.ctlr.videoContainer.classList.forEach((c) => c.startsWith(pre) && this.ctlr.videoContainer.classList.remove(c));\n    this.ctlr.videoContainer.classList.add(`${pre}-${value}`);\n  }\n\n  protected wireComputedVars() {\n    this.ctlr.config.settings.css.altImgUrl = `url(${window.TMG_VIDEO_ALT_IMG_SRC})`;\n    this.ctlr.media.watch(\"status.videoWidth\", this.syncAspectRatio, { signal: this.signal, immediate: true });\n    this.ctlr.media.watch(\"status.videoHeight\", this.syncAspectRatio, { signal: this.signal });\n    this.ctlr.media.on(\"status.loadedMetadata\", this.handleLoadedMetadataChange, { signal: this.signal, immediate: true });\n    this.ctlr.state.watch(\"dimensions.container.width\", (w) => (this.ctlr.config.settings.css.currentContainerWidth = `${w || 0}px`), { signal: this.signal, immediate: true });\n    this.ctlr.state.watch(\"dimensions.container.height\", (h) => (this.ctlr.config.settings.css.currentContainerHeight = `${h || 0}px`), { signal: this.signal, immediate: true });\n    this.ctlr.state.on(\"dimensions.container.tier\", ({ value: tier }) => (this.ctlr.videoContainer.dataset.sizeTier = tier || \"\"), { signal: this.signal, immediate: true });\n    this.ctlr.state.on(\"dimensions.pseudoContainer.tier\", ({ value: tier }) => (this.ctlr.pseudoVideoContainer.dataset.sizeTier = tier || \"\"), { signal: this.signal, immediate: true });\n  }\n\n  protected syncAspectRatio() {\n    const { videoWidth: w, videoHeight: h } = this.ctlr.media.status;\n    this.ctlr.config.settings.css.aspectRatio = w && h ? `${w} / ${h}` : \"16 / 9\";\n  }\n\n  protected handleLoadedMetadataChange({ value }: Event<CMedia, \"status.loadedMetadata\">) {\n    const color = value && null, // use frame plug later instead of null\n      keys = Object.keys(this.ctlr.config.settings.css.syncWithMedia);\n    keys.forEach((k) => (this.ctlr.config.settings.css[k] = String((value ? color : null) ?? this.CSSCache[k])));\n  }\n}\n", "import { BasePlug, OverlayPlug } from \".\";\nimport type { VideoBuild } from \"../types/build\";\nimport type { Event } from \"../types/reactor\";\nimport { controls, bigControls } from \"../consts/generics\";\nimport { BaseComponent } from \"../components/base\";\nimport { ComponentRegistry } from \"../core/registry\";\nimport { createEl, parsePanelBottomObj, inBoolArrOpt, getElSiblingAt, setAny, getAny, setTimeout } from \"../utils\";\nimport { Timeline } from \"../components\";\n\nexport type Control = (typeof controls)[number];\nexport type SControl = Control | \"spacer\";\nexport type BigControl = (typeof bigControls)[number];\nexport type ControlPanelBottomTuple = Record<1 | 2 | 3, SControl[]>;\n\nexport interface ControlPanel {\n  profile: string | boolean;\n  title: string | boolean;\n  artist: string | boolean;\n  top: SControl[] | boolean;\n  center: BigControl[] | boolean;\n  bottom: boolean | SControl[] | SControl[][] | Partial<ControlPanelBottomTuple>;\n  buffer: \"eclipse\" | \"accent\" | boolean;\n  timeline: { thumbIndicator: boolean; seek: { relative: boolean; cancel: { delta: number; timeout: number } } };\n  progressBar: boolean;\n  draggable: (\"\" | \"big\" | \"wrapper\")[] | boolean;\n}\n\ntype ZoneW = { cover?: HTMLElement; zone: HTMLElement };\ntype Row = 1 | 2 | 3;\n\nexport class ControlPanelPlug extends BasePlug<ControlPanel> {\n  public static readonly plugName: string = \"controlPanel\";\n  public static readonly isCore: boolean = false;\n  public controls = new Map<string, { element: HTMLElement; instance?: BaseComponent<any, any> }>();\n  public getControl<T extends BaseComponent = BaseComponent>(name: string): T | undefined {\n    return this.controls.get(name)?.instance as T | undefined;\n  }\n  public getControlEl<T extends HTMLElement = HTMLElement>(name: string): T | undefined {\n    return this.getControl(name)?.element as T | undefined;\n  }\n  protected zoneWs!: { top: Record<\"left\" | \"center\" | \"right\", ZoneW>; center: ZoneW; bottom: Record<Row, Record<\"left\" | \"center\" | \"right\", ZoneW>> };\n  protected cZoneWs!: { top: Record<\"left\" | \"center\" | \"right\", ZoneW>; center: ZoneW; bottom: Record<Row, Record<\"left\" | \"center\" | \"right\", ZoneW>> };\n  protected dragging: HTMLElement | null = null;\n  protected dragReplaced: { target: HTMLElement; child: HTMLElement } | null = null;\n  protected dragSafeTimeoutId: number = -1;\n\n  public mount(): void {\n    this.ctlr.config.set(\"settings.controlPanel.bottom\", (value) => parsePanelBottomObj(value));\n    const cc = this.ctlr.DOM.controlsContainer,\n      buffer = ComponentRegistry.init(\"buffer\", this.ctlr);\n    buffer && this.controls.set(\"buffer\", buffer);\n    buffer && cc?.prepend(buffer.element);\n    this.zoneWs = { top: {}, center: {}, bottom: { 1: {}, 2: {}, 3: {} } } as typeof this.zoneWs;\n    this.zoneWs.top = { left: this.buildWSkel(\"left\"), center: this.buildWSkel(\"center\"), right: this.buildWSkel(\"right\") };\n    this.zoneWs.center = { zone: createEl(\"div\", { className: \"tmg-video-big-controls-wrapper\" }, { dropZone: \"\", dragId: \"big\" }) };\n    ([1, 2, 3] as Row[]).forEach((i) => (this.zoneWs.bottom[i] = { left: this.buildWSkel(\"left\"), center: this.buildWSkel(\"center\"), right: this.buildWSkel(\"right\") }));\n    const topW = createEl(\"div\", { className: \"tmg-video-top-controls-wrapper tmg-video-apt-controls-wrapper\" }, { dropZone: \"\", dragId: \"wrapper\" });\n    topW.append(this.zoneWs.top.left.cover!, this.zoneWs.top.center.cover!, this.zoneWs.top.right.cover!);\n    const bottomW = createEl(\"div\", { className: \"tmg-video-bottom-controls-wrapper\" });\n    ([1, 2, 3] as Row[]).forEach((i) => {\n      const row = createEl(\"div\", { className: `tmg-video-bottom-sub-controls-wrapper tmg-video-bottom-${i}-sub-controls-wrapper tmg-video-apt-controls-wrapper` }, { dropZone: \"\", dragId: \"wrapper\" });\n      row.append(this.zoneWs.bottom[i].left.cover!, this.zoneWs.bottom[i].center.cover!, this.zoneWs.bottom[i].right.cover!);\n      bottomW.append(row);\n    });\n    cc?.append(topW, this.zoneWs.center.zone, bottomW);\n    ComponentRegistry.getAll().forEach((Comp) => {\n      Comp.isControl && this.controls.set(Comp.componentName, ComponentRegistry.init(Comp.componentName, this.ctlr)!);\n    });\n  }\n\n  public wire(): void {\n    this.ctlr.config.on(\"settings.controlPanel.top\", this.handleTopLayout, { signal: this.signal, immediate: true });\n    this.ctlr.config.on(\"settings.controlPanel.center\", this.handleCenterLayout, { signal: this.signal, immediate: true });\n    this.ctlr.config.on(\"settings.controlPanel.bottom\", this.handleBottomLayout, { signal: this.signal, immediate: true });\n    this.ctlr.config.on(\"settings.controlPanel.buffer\", ({ target: { value } }) => (this.ctlr.videoContainer.dataset.buffer = String(value)), { signal: this.signal, immediate: true });\n    this.ctlr.config.on(\"settings.controlPanel.timeline.thumbIndicator\", ({ target: { value } }) => (this.ctlr.videoContainer.dataset.thumbIndicator = String(value)), { signal: this.signal, immediate: true });\n    this.ctlr.config.on(\n      \"settings.controlPanel.timeline.seek\",\n      ({ target: { value } }) => {\n        const timeline = this.getControl<Timeline>(\"timeline\");\n        if (!timeline) return;\n        timeline.config.scrub.relative = value!.relative;\n        timeline.config.scrub.cancel = value!.cancel;\n      },\n      { signal: this.signal, immediate: true }\n    );\n    this.ctlr.config.on(\"settings.controlPanel.progressBar\", ({ target: { value } }) => this.ctlr.videoContainer.classList.toggle(\"tmg-video-progress-bar\", !!value), { signal: this.signal, immediate: true });\n    this.ctlr.config.on(\"settings.controlPanel.draggable\", ({ target: { value } }) => this.setDragEventListeners(value ? \"add\" : \"remove\"), { signal: this.signal, immediate: true });\n  }\n\n  protected buildWSkel(side: string): ZoneW {\n    const zone = createEl(\"div\", { className: `tmg-video-side-controls-wrapper tmg-video-${side}-side-controls-wrapper` }, { dropZone: \"\", scroller: side === \"right\" ? \"reverse\" : \"\" }),\n      cover = createEl(\"div\", { className: `tmg-video-side-controls-wrapper-cover tmg-video-${side}-side-controls-wrapper-cover` });\n    return (cover.append(zone), { cover, zone });\n  }\n\n  protected getSplitControls(row: SControl[]): { left: SControl[]; center: SControl[]; right: SControl[] } {\n    if (!row?.length) return { left: [], center: [], right: [] };\n    const s1 = row.indexOf(\"spacer\"),\n      s2 = row.indexOf(\"spacer\", s1 + 1);\n    return s1 === -1 ? { left: row, center: [], right: [] } : s2 === -1 ? { left: row.slice(0, s1), center: [], right: row.slice(s1 + 1) } : { left: row.slice(0, s1), center: row.slice(s1 + 1, s2), right: row.slice(s2 + 1) };\n  }\n\n  protected fillZone(zoneW: ZoneW, ids: SControl[] | BigControl[]): void {\n    if (!zoneW.zone) return;\n    zoneW.zone.innerHTML = \"\";\n    ids.forEach((id) => this.controls.get(id)?.element && zoneW.zone.append(this.controls.get(id)!.element));\n  }\n\n  protected getZones(): HTMLElement[] {\n    return [...Object.values(this.zoneWs.top), ...Object.values(this.zoneWs.bottom).map((v) => Object.values(v))].flat().map((w) => w.zone);\n  }\n\n  protected handleTopLayout({ target: { value } }: Event<VideoBuild, \"settings.controlPanel.top\">): void {\n    if (!value || typeof value === \"boolean\") return;\n    const { left, center, right } = this.getSplitControls(value);\n    this.fillZone(this.zoneWs.top.left, left);\n    this.fillZone(this.zoneWs.top.center, center);\n    this.fillZone(this.zoneWs.top.right, right);\n  }\n\n  protected handleCenterLayout({ target: { value } }: Event<VideoBuild, \"settings.controlPanel.center\">): void {\n    if (!value || typeof value === \"boolean\") return;\n    this.fillZone(this.zoneWs.center, value);\n  }\n\n  protected handleBottomLayout({ target: { value } }: Event<VideoBuild, \"settings.controlPanel.bottom\">): void {\n    if (!value || typeof value === \"boolean\") return;\n    ([1, 2, 3] as Row[]).forEach((i) => {\n      const { left, center, right } = this.getSplitControls((value as ControlPanelBottomTuple)[i] ?? []);\n      this.fillZone(this.zoneWs.bottom[i].left, left);\n      this.fillZone(this.zoneWs.bottom[i].center, center);\n      this.fillZone(this.zoneWs.bottom[i].right, right);\n    });\n  }\n\n  protected getDraggableControls(): NodeListOf<HTMLElement> {\n    return this.ctlr.queryDOM(\"[data-draggable-control]\", true);\n  }\n\n  protected getDropZones(): HTMLElement[] {\n    return [...this.ctlr.queryDOM(\"[data-drop-zone][data-drag-id]\", true), ...this.getZones()];\n  }\n\n  protected setDragEventListeners(action: \"add\" | \"remove\"): void {\n    const draggable = this.ctlr.config.settings.controlPanel.draggable;\n    this.getDraggableControls().forEach((c) => {\n      c.dataset.dragId = c.dataset.dragId ?? \"\";\n      const act = !inBoolArrOpt(draggable, c.dataset.dragId) ? \"remove\" : action;\n      c.dataset.draggableControl = String((c.draggable = act === \"add\"));\n      c[`${act}EventListener` as \"addEventListener\"](\"dragstart\", this.handleDragStart, { signal: this.signal });\n      c[`${act}EventListener` as \"addEventListener\"](\"drag\", this.handleDrag, { signal: this.signal });\n      c[`${act}EventListener` as \"addEventListener\"](\"dragend\", this.handleDragEnd, { signal: this.signal });\n    });\n    this.getDropZones().forEach((c) => {\n      c.dataset.dragId = c.dataset.dragId ?? \"\";\n      const act = !inBoolArrOpt(draggable, c.dataset.dragId) ? \"remove\" : action;\n      c.dataset.dropZone = String(act === \"add\");\n      c[`${act}EventListener` as \"addEventListener\"](\"dragenter\", this.handleDragEnter, { signal: this.signal });\n      c[`${act}EventListener` as \"addEventListener\"](\"dragover\", this.handleDragOver, { signal: this.signal });\n      c[`${act}EventListener` as \"addEventListener\"](\"drop\", this.handleDrop, { signal: this.signal });\n      c[`${act}EventListener` as \"addEventListener\"](\"dragleave\", this.handleDragLeave, { signal: this.signal });\n    });\n  }\n\n  protected getUIZoneWCoord(target: HTMLElement, zoneW = false): string | { coord: string; zoneW: ZoneW } {\n    let key = \"\";\n    const pos = ({ 0: \"left\", 1: \"center\", 2: \"right\" } as const)[[...target.parentElement!.children].indexOf(target) as 0 | 1 | 2];\n    const cws = this.ctlr.queryDOM(\".tmg-video-top-controls-wrapper, .tmg-video-bottom-sub-controls-wrapper\", true);\n    cws.forEach((w, i) => w.contains(target) && (key = ({ 0: \"top.\", 1: \"bottom.1.\", 2: \"bottom.2.\", 3: \"bottom.3.\" } as const)[i as 0 | 1 | 2 | 3]));\n    return zoneW ? { coord: key + pos, zoneW: getAny(this.zoneWs as any, (key + pos) as any) } : key + pos;\n  }\n\n  protected syncControlPanelToUI(): void {\n    const id = (el: HTMLElement) => el.dataset.controlId;\n    const derive = (zoneW: ZoneW | HTMLElement, center = false) => {\n      const zone = \"zone\" in zoneW ? zoneW.zone : zoneW;\n      return [center ? \"spacer\" : \"\", ...(zone ? Array.from(zone.children as HTMLCollectionOf<HTMLElement>, id) : [id(zoneW as HTMLElement)]), center && (zone ? zone.children.length : true) ? \"spacer\" : \"\"].filter(Boolean) as SControl[];\n    };\n    this.ctlr.config.settings.controlPanel.top = [...derive(this.cZoneWs.top.left), ...derive(this.cZoneWs.top.center, true), ...derive(this.cZoneWs.top.right)];\n    this.ctlr.config.settings.controlPanel.center = derive(this.zoneWs.center) as unknown as BigControl[];\n    this.ctlr.config.settings.controlPanel.bottom = {\n      1: [...derive(this.cZoneWs.bottom[1].left), ...derive(this.cZoneWs.bottom[1].center, true), ...derive(this.cZoneWs.bottom[1].right)],\n      2: [...derive(this.cZoneWs.bottom[2].left), ...derive(this.cZoneWs.bottom[2].center, true), ...derive(this.cZoneWs.bottom[2].right)],\n      3: [...derive(this.cZoneWs.bottom[3].left), ...derive(this.cZoneWs.bottom[3].center, true), ...derive(this.cZoneWs.bottom[3].right)],\n    };\n  }\n\n  protected noDropOff(t: HTMLElement, drop = this.dragging): boolean {\n    return t.dataset.dropZone !== \"true\" || !drop?.tagName || t.dataset.dragId !== drop.dataset.dragId;\n  }\n\n  protected handleDragStart(e: DragEvent): void {\n    const t = e.target as HTMLElement;\n    if (t.dataset.draggableControl !== \"true\" || !t?.tagName) return;\n    if (t.matches(\":has(input:is(:hover, :active))\")) return e.preventDefault();\n    e.dataTransfer!.effectAllowed = \"move\";\n    this.dragging = t;\n    requestAnimationFrame(() => t.classList.add(\"tmg-video-control-dragging\"));\n    this.dragSafeTimeoutId = setTimeout(() => t.classList.remove(\"tmg-video-control-dragging\"), 1000, this.signal); // for mobile browsers supporting the API but not living up\n    if (t.dataset.dragId !== \"wrapper\" || t.parentElement?.dataset.dragId !== \"wrapper\") return;\n    const { coord, zoneW } = this.getUIZoneWCoord(t, true) as { coord: string; zoneW: ZoneW };\n    setAny(this.cZoneWs as any, coord as any, zoneW);\n    this.dragReplaced = { target: t.parentElement!, child: zoneW.cover! };\n  }\n\n  protected handleDrag(): void {\n    this.ctlr.getPlug<OverlayPlug>(\"overlay\")?.delay();\n    clearTimeout(this.dragSafeTimeoutId);\n  }\n\n  protected handleDragEnd(e: DragEvent): void {\n    const t = e.target as HTMLElement;\n    t.classList.remove(\"tmg-video-control-dragging\");\n    this.dragReplaced = this.dragging = null;\n    if (t.dataset.dragId === \"wrapper\" && t.parentElement?.dataset.dragId === \"wrapper\") setAny(this.cZoneWs as any, this.getUIZoneWCoord(t) as any, t);\n    this.syncControlPanelToUI();\n  }\n\n  protected handleDragEnter(e: DragEvent): void {\n    !this.noDropOff(e.target as HTMLElement) && this.dragging && (e.target as HTMLElement).classList.add(\"tmg-video-dragover\");\n  }\n\n  protected handleDragOver(e: DragEvent): void {\n    const t = e.target as HTMLElement;\n    const x = e.clientX;\n    if (this.noDropOff(t)) return;\n    e.preventDefault();\n    e.dataTransfer!.dropEffect = \"move\";\n    this.ctlr.throttle(\n      \"dragOver\",\n      () => {\n        if (t.dataset.dragId === \"wrapper\") {\n          const atWrapper = getElSiblingAt(x, \"x\", t.querySelectorAll<HTMLElement>('.tmg-video-side-controls-wrapper-cover:has([data-drop-zone=\"true\"][data-drag-id=\"\"]:empty)'), \"at\") as HTMLElement | undefined;\n          if (!atWrapper) return;\n          this.dragReplaced?.target.replaceChild(this.dragReplaced.child, this.dragging!);\n          this.dragReplaced = { target: t, child: atWrapper };\n          return t.replaceChild(this.dragging!, atWrapper);\n        }\n        const afterControl = getElSiblingAt(x, \"x\", t.querySelectorAll<HTMLElement>(\"[draggable=true]:not(.tmg-video-control-dragging)\"));\n        afterControl ? t.insertBefore(this.dragging!, afterControl) : t.append(this.dragging!);\n      },\n      500,\n      false\n    );\n  }\n\n  protected handleDrop(e: DragEvent): void {\n    !this.noDropOff(e.target as HTMLElement) && (e.target as HTMLElement).classList.remove(\"tmg-video-dragover\");\n  }\n\n  protected handleDragLeave(e: DragEvent): void {\n    !this.noDropOff(e.target as HTMLElement) && (e.target as HTMLElement).classList.remove(\"tmg-video-dragover\");\n  }\n\n  protected onDestroy(): void {\n    this.controls.forEach(({ instance }) => instance?.destroy());\n    this.controls.clear();\n  }\n}\n", "import { Controller } from \"../core/controller\";\nimport { BasePlug } from \".\";\nimport type { VideoBuild } from \"../types/build\";\nimport type { Event } from \"../types/reactor\";\nimport { type Reactive } from \"../tools/mixins\";\nimport { setTimeout, IS_MOBILE } from \"../utils\";\n\nexport interface Overlay {\n  delay: number;\n  curtain: \"cover\" | \"auto\";\n  behavior: \"persistent\" | \"auto\" | \"strict\" | \"hidden\";\n}\n\ninterface OverlayState {\n  visible: boolean;\n}\n\nexport class OverlayPlug extends BasePlug<Overlay, OverlayState> {\n  public static readonly plugName: string = \"overlay\";\n  public overlayDelayId = -1;\n\n  constructor(ctlr: Controller, config: Overlay) {\n    super(ctlr, config, { visible: false });\n  }\n\n  public wire(): void {\n    this.ctlr.media.on(\"state.paused\", ({ target: { value } }) => (value ? this.show() : this.delay()), { signal: this.signal, immediate: true });\n    this.ctlr.config.on(\"settings.overlay.curtain\", this.handleCurtain, { signal: this.signal, immediate: true });\n    this.ctlr.config.on(\"settings.overlay.behavior\", this.handleBehavior, { signal: this.signal, immediate: true });\n  }\n\n  protected handleCurtain({ target: { value } }: Event<VideoBuild, \"settings.overlay.curtain\">): void {\n    this.ctlr.videoContainer.dataset.curtain = value;\n  }\n\n  protected handleBehavior({ target: { value } }: Event<VideoBuild, \"settings.overlay.behavior\">): void {\n    value === \"persistent\" && this.show();\n    value === \"hidden\" && this.remove(\"force\");\n  }\n\n  public shouldShow(): boolean {\n    return this.config.behavior !== \"hidden\" && !this.ctlr.config.settings.locked && !this.ctlr.isUIActive(\"playerDragging\");\n  }\n\n  public shouldRemove(manner?: \"force\"): boolean {\n    return this.config.behavior !== \"persistent\" && (manner === \"force\" || (!this.ctlr.isUIActive(\"pictureInPicture\") && !this.ctlr.isUIActive(\"settings\") && (IS_MOBILE ? !this.ctlr.media.status.waiting && !this.ctlr.media.state.paused : this.config.behavior === \"strict\" ? true : !this.ctlr.media.state.paused)));\n  }\n\n  public show(): void {\n    if (!this.shouldShow()) return;\n    this.ctlr.videoContainer.classList.add(\"tmg-video-overlay\");\n    this.state.visible = true;\n    this.delay();\n  }\n\n  public delay(): void {\n    clearTimeout(this.overlayDelayId);\n    if (this.shouldRemove()) this.overlayDelayId = setTimeout(this.remove, this.config.delay, this.signal);\n  }\n\n  public remove(manner?: \"force\"): void {\n    if (this.shouldRemove(manner)) {\n      this.ctlr.videoContainer.classList.remove(\"tmg-video-overlay\");\n      this.state.visible = false;\n    }\n  }\n}\n", "import { BasePlug } from \".\";\nimport { StorageAdapter, LocalStorageAdapter, type StorageAdapterConstructor } from \"../core/storage\";\nimport { mergeObjs } from \"../utils\";\nimport type { Event } from \"../core/reactor\";\nimport { VideoBuild } from \"../types/build\";\n\nexport interface Persist {\n  disabled: boolean;\n  adapter: StorageAdapterConstructor;\n  throttle: number;\n}\n\nexport class PersistPlug extends BasePlug<Persist> {\n  public static readonly plugName: string = \"persist\";\n  protected adapter!: StorageAdapter;\n\n  public wire() {\n    window.addEventListener(\"pagehide\", this.onDestroy, { signal: this.signal });\n    this.ctlr.state.on(\"docVisibilityState\", ({ value }) => value === \"hidden\" && this.onDestroy(), { signal: this.signal });\n    // 1. Adapter Lifecycle (Init + Hot Swap)\n    this.ctlr.config.on(\"settings.persist.adapter\", this.handleAdapterChange, { signal: this.signal, immediate: true });\n    // 2. Persistence Lifecycle (Init + Toggle)\n    this.ctlr.config.on(\"settings.persist.disabled\", this.handleDisabledChange, { signal: this.signal, immediate: true });\n  }\n\n  protected handleAdapterChange({ value }: Event<VideoBuild, \"settings.persist.adapter\">) {\n    if (this.adapter && value === this.adapter.constructor) return; // No change\n    this.adapter?.remove(\"settings\"); // Cleanup old adapter storage, disabled will handle refresh\n    this.adapter = new (value || LocalStorageAdapter)(this.ctlr.id);\n    const saved = this.adapter.get(\"settings\"); // Hydration: Restore saved state immediately\n    if (saved) this.ctlr.config.settings = mergeObjs(this.ctlr.config.settings, saved); // this.ctlr.log(\"Settings hydrated from storage\", \"log\")\n  }\n\n  protected handleDisabledChange({ value }: Event<VideoBuild, \"settings.persist.disabled\">) {\n    this.ctlr.config.off(\"settings\", this.throttleSave); // Always unbind first to be safe (prevent double-binding)\n    if (value) this.adapter?.remove(\"settings\");\n    else this.ctlr.config.on(\"settings\", this.throttleSave, { signal: this.signal, immediate: true }); // Enabled: Start listening\n  }\n\n  protected throttleSave({ root: { settings } }: Event<VideoBuild, \"settings\">) {\n    // We use the root 'settings' object from the event context\n    this.ctlr.throttle(\"persist_save\", () => this.adapter.set(\"settings\", settings), this.config.throttle ?? 5000);\n  }\n\n  protected onDestroy() {\n    // One last save before the lights go out or rather; plane crashes\n    !this.config.disabled && this.adapter?.set(\"settings\", this.ctlr.config.settings);\n  }\n}\n", "import { BasePlug, OverlayPlug } from \".\";\nimport type { Controller } from \"../core/controller\";\nimport type { ScreenLocked } from \"../components\";\nimport type { VideoBuild } from \"../types/build\";\nimport type { Event } from \"../types/reactor\";\nimport { reactive, type Reactive } from \"../tools/mixins\";\nimport { ComponentRegistry } from \"../core/registry\";\nimport { setTimeout, parseCSSTime, mockAsync, createEl } from \"../utils\";\n\nexport type Locked = {\n  disabled: boolean;\n};\n\nexport interface LockedState {\n  visible: boolean;\n}\n\nexport class LockedPlug extends BasePlug<Locked, LockedState> {\n  public static readonly plugName: string = \"locked\";\n  public lockOverlayDelayId = -1;\n  protected btnComponent?: ScreenLocked;\n\n  constructor(ctlr: Controller, config: Locked) {\n    super(ctlr, config, { visible: false });\n  }\n\n  public mount(): void {\n    this.injectLockedWrapper();\n    this.injectScreenLockedBtn();\n  }\n\n  public wire(): void {\n    this.ctlr.videoContainer.addEventListener(\"click\", this.handleScreenClick, { signal: this.signal });\n    this.ctlr.config.on(\"settings.locked.disabled\", this.handleLockChange, { signal: this.signal, immediate: true });\n  }\n\n  protected injectLockedWrapper(): void {\n    const wrapper = createEl(\"div\", {\n      className: \"tmg-video-screen-locked-wrapper\",\n      innerHTML: `\n        <p>Screen Locked</p>\n        <p>Tap to Unlock</p>\n      `,\n    });\n    this.ctlr.DOM.containerContentWrapper?.appendChild(wrapper);\n  }\n\n  protected injectScreenLockedBtn(): void {\n    const result = ComponentRegistry.init<ScreenLocked>(\"screenlocked\", this.ctlr);\n    if (!result) return;\n    this.ctlr.queryDOM(\".tmg-video-screen-locked-wrapper\")?.prepend(result.element);\n    this.btnComponent = result.instance;\n  }\n\n  protected handleScreenClick(): void {\n    if (this.config.disabled) return;\n    this.state.visible ? this?.removeOverlay() : this?.showOverlay();\n  }\n\n  protected async handleLockChange({ target: { value } }: Event<VideoBuild, \"settings.locked.disabled\">): Promise<void> {\n    if (!value) {\n      // TODO: Implement leaveSettingsView on Controller\n      // this.ctlr.leaveSettingsView?.();\n      setTimeout(this.showOverlay, 0, this.signal);\n      this.ctlr.videoContainer.classList.add(\"tmg-video-locked\", \"tmg-video-progress-bar\");\n      this.ctlr.getPlug<OverlayPlug>(\"overlay\")?.remove(\"force\");\n      // TODO: Implement setKeyEventListeners on Controller\n      // this.ctlr.setKeyEventListeners?.(\"remove\");\n    } else {\n      this.removeOverlay();\n      await mockAsync(parseCSSTime(this.ctlr.config.settings.css.switchTransitionTime));\n      this.ctlr.videoContainer.classList.toggle(\"tmg-video-progress-bar\", this.ctlr.config.settings.controlPanel.progressBar);\n      this.ctlr.videoContainer.classList.remove(\"tmg-video-locked\");\n      this.ctlr.getPlug<OverlayPlug>(\"overlay\")?.show();\n      // TODO: Implement setKeyEventListeners on Controller\n      // this.ctlr.setKeyEventListeners?.(\"add\");\n    }\n  }\n\n  public showOverlay(): void {\n    this.ctlr.videoContainer.classList.add(\"tmg-video-locked-overlay\");\n    this.state.visible = true;\n    this.delayOverlay();\n  }\n\n  public removeOverlay(): void {\n    this.ctlr.videoContainer.classList.remove(\"tmg-video-locked-overlay\");\n    this.state.visible = false;\n  }\n\n  public delayOverlay(): void {\n    clearTimeout(this.lockOverlayDelayId);\n    this.lockOverlayDelayId = setTimeout(this.removeOverlay, this.ctlr.config.settings.overlay.delay, this.signal);\n  }\n\n  protected onDestroy(): void {\n    this.btnComponent?.destroy();\n  }\n}\n", "import { BasePlug, OverlayPlug, ControlPanelPlug, Control, BigControl } from \".\";\nimport { PosterPreview } from \"../types/generics\";\nimport { VideoBuild } from \"../types/build\";\nimport { Event, TERMINATOR } from \"../core/reactor\";\nimport { inBoolArrOpt } from \"../utils\";\n\nexport interface LightState {\n  disabled: boolean;\n  controls: (Control | BigControl)[] | boolean;\n  preview: PosterPreview;\n}\n\nexport class LightStatePlug extends BasePlug<LightState> {\n  public static readonly plugName: string = \"lightState\";\n\n  public wire(): void {\n    this.ctlr.config.set(\"lightState.disabled\", (value) => (this.ctlr.state.readyState > 1 ? TERMINATOR : value));\n    this.ctlr.config.on(\"lightState.disabled\", this.handleDisabledChange, { signal: this.signal, immediate: true });\n    this.ctlr.config.on(\"lightState.controls\", this.handleControlsChange, { signal: this.signal, immediate: true });\n    this.ctlr.config.on(\"lightState.preview.usePoster\", this.handleUsePosterChange, { signal: this.signal });\n    this.ctlr.config.on(\"lightState.preview.time\", this.handleTimeChange, { signal: this.signal });\n    if (this.config.disabled) this.ctlr.setReadyState(); // warning my compadre: gesture plug\n  }\n\n  protected handleDisabledChange({ value, target }: Event<VideoBuild, \"lightState.disabled\">): void {\n    if (value) {\n      const timeStart = this.ctlr.config.settings.time.start;\n      if (timeStart != null) this.ctlr.media.intent.currentTime = timeStart;\n      this.ctlr.videoContainer.classList.remove(\"tmg-video-light\");\n      this.ctlr.media.element.removeEventListener(\"play\", this.remove);\n      this.ctlr.DOM.controlsContainer?.removeEventListener(\"click\", this.handleLightStateClick);\n      this.ctlr.setReadyState(); // you can wire now, compadre\n    } else {\n      const { preview } = target.object;\n      this.ctlr.config.lightState.preview.usePoster = preview.usePoster;\n      this.ctlr.config.lightState.preview.time = preview.time;\n      this.ctlr.videoContainer.classList.add(\"tmg-video-light\");\n      this.ctlr.media.element.addEventListener(\"play\", this.remove, { signal: this.signal });\n      this.ctlr.DOM.controlsContainer?.addEventListener(\"click\", this.handleLightStateClick, { signal: this.signal });\n    }\n  }\n\n  protected handleControlsChange(): void {\n    this.ctlr.queryDOM(\"[data-control-id]\", true).forEach((c) => (c.dataset.lightControl = this.isLight(c.dataset.controlId!) ? \"true\" : \"false\"));\n  }\n\n  protected handleUsePosterChange({ value, root }: Event<VideoBuild, \"lightState.preview.usePoster\">): void {\n    !root.lightState.disabled && (!value || !this.ctlr.media.state.poster) && (this.ctlr.media.intent.currentTime = root.lightState.preview.time);\n  }\n\n  protected handleTimeChange({ value, target, root }: Event<VideoBuild, \"lightState.preview.time\">): void {\n    !root.lightState.disabled && (!target.object.preview.usePoster || !this.ctlr.media.state.poster) && (this.ctlr.media.intent.currentTime = value!);\n  }\n\n  protected add(): void {\n    this.ctlr.config.lightState.disabled = false;\n  }\n\n  protected remove(): void {\n    this.ctlr.config.lightState.disabled = true;\n    this.isLight(\"bigplaypause\") && this.stall();\n    this.ctlr.media.intent.paused = false;\n  }\n\n  protected handleLightStateClick({ target }: MouseEvent): void {\n    target === this.ctlr.DOM.controlsContainer && this.remove();\n  }\n\n  protected stall(): void {\n    this.ctlr.getPlug<OverlayPlug>(\"overlay\")?.show();\n    const bigPlayBtn = this.ctlr.getPlug<ControlPanelPlug>(\"controlPanel\")?.getControlEl(\"big-play-pause\");\n    bigPlayBtn && this.ctlr.videoContainer.classList.add(\"tmg-video-stall\");\n    bigPlayBtn?.addEventListener(\"animationend\", () => this.ctlr.videoContainer.classList.remove(\"tmg-video-stall\"), { once: true, signal: this.signal });\n  }\n\n  protected isLight(controlId: string): boolean {\n    return inBoolArrOpt(this.ctlr.config.lightState.controls, controlId);\n  }\n}\n", "import { BasePlug, GesturePlug, OverlayPlug } from \".\";\nimport { parseIfPercent, clamp, safeNum, formatMediaTime, parseCSSTime, setTimeout, IS_MOBILE } from \"../utils\";\nimport type { Event } from \"../types/reactor\";\nimport type { OptRange } from \"../types/generics\";\nimport type { PreviewConfig, Timeline } from \"../components\";\nimport { CMedia } from \"../types/contract\";\n\nexport interface CTime extends OptRange {\n  mode: \"elapsed\" | \"remaining\";\n  format: \"digital\" | \"human\" | \"human-long\";\n  start: number | null | undefined;\n  end: number;\n  loop: boolean;\n  previews?: Omit<PreviewConfig, \"type\"> | boolean;\n  seekSync: boolean;\n}\n\nexport class TimePlug extends BasePlug<CTime> {\n  public static readonly plugName: string = \"time\";\n  private actualStart = 0;\n  private pseudoStart = 0;\n  private skipDuration = 0;\n  private skipDurationId = -1;\n  private currentSkipNotifier: HTMLElement | null = null;\n\n  public wire(): void {\n    this.pseudoStart = this.ctlr.config.settings.time.start ?? 0;\n    this.ctlr.media.set(\"intent.currentTime\", () => clamp(this.config.min, this.config.value!, this.config.max), { signal: this.signal });\n    this.ctlr.media.on(\"state.currentTime\", this.handleTimeUpdate, { signal: this.signal, immediate: true });\n    this.ctlr.media.on(\"status.waiting\", this.handleWaitingStatus, { signal: this.signal });\n    ([\"settings.time.min\", \"settings.time.max\", \"settings.time.value\", \"settings.time.start\", \"settings.time.end\"] as const).forEach((p) => this.ctlr.config.get(p, this.toTimeVal));\n    this.ctlr.config.watch(\"settings.time.value\", this.forwardTimeValue, { signal: this.signal });\n    this.ctlr.config.watch(\"settings.time.start\", (v) => v !== this.pseudoStart && (this.actualStart = +v!), { signal: this.signal, immediate: true });\n  }\n\n  protected forwardTimeValue(value?: number): void {\n    this.ctlr.media.intent.currentTime = value!;\n  }\n\n  protected handleTimeUpdate({ target }: Event<CMedia, \"state.currentTime\">): void {\n    this.ctlr.throttle(\n      \"timeUpdating\",\n      () => {\n        const curr = target.value!,\n          min = this.ctlr.config.settings.time.min!,\n          max = this.ctlr.config.settings.time.max!,\n          dur = this.ctlr.media.status.duration,\n          end = this.ctlr.config.settings.time.end!;\n        if (curr < min || curr > max) {\n          this.ctlr.media.intent.currentTime = this.ctlr.config.settings.time.loop ? min : curr;\n          if (!this.ctlr.config.settings.time.loop) this.ctlr.media.intent.paused = true;\n        }\n        if (this.ctlr.media.status.readyState && curr) this.ctlr.config.settings.time.start = this.pseudoStart = curr > 3 && curr < (end ?? dur) - 3 ? curr : this.actualStart;\n      },\n      250\n    );\n  }\n\n  protected handleWaitingStatus({ target: { value } }: Event<CMedia, \"status.waiting\">): void {\n    if (value && IS_MOBILE && this.currentSkipNotifier) this.ctlr.media.once(\"status.waiting\", ({ target: { value } }) => !value && this.ctlr.getPlug<OverlayPlug>(\"overlay\")?.remove(), { signal: this.signal });\n  }\n\n  public toTimeVal(value: number | string | undefined | null): number {\n    return parseIfPercent(value ?? 0, this.ctlr.media.status.duration);\n  }\n  public toTimeText(time = this.ctlr.media.state.currentTime, useMode = false, showMs = false): string {\n    const format = this.ctlr.config.settings.time.format,\n      duration = this.ctlr.media.status.duration;\n    if (!useMode || this.ctlr.config.settings.time.mode !== \"remaining\") return formatMediaTime({ time, format, elapsed: true, showMs });\n    return `-${formatMediaTime({ time: duration - time, format, elapsed: false, showMs })}`;\n  }\n\n  public get nextMode(): CTime[\"mode\"] {\n    return this.ctlr.config.settings.time.mode === \"elapsed\" ? \"remaining\" : \"elapsed\";\n  }\n  public toggleMode(): void {\n    this.ctlr.config.settings.time.mode = this.nextMode;\n  }\n\n  public get nextFormat(): CTime[\"format\"] {\n    const current = this.ctlr.config.settings.time.format;\n    return current === \"digital\" ? \"human\" : current === \"human\" ? \"human-long\" : \"digital\";\n  }\n  public rotateFormat(): void {\n    this.ctlr.config.settings.time.format = this.nextFormat;\n  }\n\n  public skip(duration: number): void {\n    const overlay = this.ctlr.getPlug<OverlayPlug>(\"overlay\"),\n      notifier = duration > 0 ? this.ctlr.queryDOM(\".tmg-video-fwd-notifier\") : this.ctlr.queryDOM(\".tmg-video-bwd-notifier\");\n    duration = duration > 0 ? (this.ctlr.media.status.duration - this.ctlr.media.state.currentTime > duration ? duration : this.ctlr.media.status.duration - this.ctlr.media.state.currentTime) : duration < 0 ? (this.ctlr.media.state.currentTime > Math.abs(duration) ? duration : -this.ctlr.media.state.currentTime) : 0;\n    this.ctlr.media.intent.currentTime = this.ctlr.media.state.currentTime + duration;\n    this.ctlr.config.settings.css.currentPlayedPosition = this.ctlr.config.settings.css.currentThumbPosition = safeNum(this.ctlr.media.intent.currentTime / this.ctlr.media.status.duration);\n    const mdle = this.ctlr.getPlug<GesturePlug>(\"gesture\")?.general;\n    if (mdle?.state.skipPersist) {\n      if (this.currentSkipNotifier && notifier !== this.currentSkipNotifier) {\n        this.skipDuration = 0;\n        this.currentSkipNotifier.classList.remove(\"tmg-video-control-persist\");\n      }\n      overlay?.show();\n      this.currentSkipNotifier = notifier;\n      notifier?.classList.add(\"tmg-video-control-persist\");\n      this.skipDuration += duration;\n      clearTimeout(this.skipDurationId);\n      this.skipDurationId = setTimeout(\n        () => {\n          mdle.deactivateSkipPersist();\n          notifier?.classList.remove(\"tmg-video-control-persist\");\n          this.skipDuration = 0;\n          this.currentSkipNotifier = null;\n          !this.ctlr.media.state.paused ? overlay?.remove() : overlay?.show();\n        },\n        parseCSSTime(this.ctlr.config.settings.css.notifiersAnimationTime),\n        this.signal\n      );\n      return void notifier?.setAttribute(\"data-skip\", String(Math.trunc(this.skipDuration)));\n    } else this.currentSkipNotifier?.classList.remove(\"tmg-video-control-persist\");\n    notifier?.setAttribute(\"data-skip\", String(Math.trunc(Math.abs(duration))));\n  }\n}\n", "// building this file with just AI to test architectural soundness\nimport { BasePlug } from \"./base\";\nimport { Event } from \"../core/reactor\";\nimport { setTimeout, setAny, deleteAny } from \"../utils\";\n\n/**\n * HISTORY ENTRY: The DNA of a specific moment in time.\n * Records the 'Desire' (Intent) or the 'Fact' (State).\n */\ninterface HistoryEntry {\n  type: string; // Was it a 'set' or a 'delete' surgery?\n  path: string; // The surgical address in the Reactor\n  value: any; // The data payload at that moment\n  phase: number; // Capture (Physician) or Bubble (Artist)\n  rejected: string; // Did the Power Line disapprove?; why?\n  timestamp: number; // For chronological re-enactment\n}\n\nexport type TimeTravel = undefined;\n\n/**\n * TIME TRAVEL PLUG: The Flight Recorder (Black Box).\n * Implements S.I.A. logic to allow playback, teleportation, and undos.\n */\nexport class TimeTravelPlug extends BasePlug<TimeTravel> {\n  static plugName = \"timeTraveller\";\n  protected history: HistoryEntry[] = [];\n  protected initialState: any = null; // The \"Genesis\" snapshot (Raw Data)\n  protected isReplaying = false; // Flag to prevent recursive recording\n  protected stopRequested = false; // The emergency brake for playSession\n  protected currentFrame = -1; // The manual playhead\n  protected playbackTimer: any = null;\n\n  protected onSetup() {\n    // 1. Genesis: Capture the absolute truth before the first wish.\n    // .snapshot() ensures we hold raw data, not reactive proxies.\n    this.initialState = this.ctlr.media.snapshot();\n    const opts = { signal: this.signal, capture: false };\n    // We listen to the BUBBLE phase of the ROOT (*)\n    // to record the settled outcome of every wave.\n    this.ctlr.media.on(\"intent\", (e) => this.record(e), opts);\n    this.ctlr.media.on(\"state\", (e) => this.record(e), opts);\n    this.ctlr.media.on(\"settings\", (e) => this.record(e), opts);\n  }\n\n  /**\n   * RECORD: Chronicling the lifecycle of the system.\n   */\n  protected record(e: Event<any>) {\n    if (this.isReplaying) return;\n    this.history.push({ timestamp: Date.now(), path: e.target.path, type: e.staticType, value: e.value, phase: e.eventPhase, rejected: e.rejected });\n  }\n\n  public exportSession() {\n    return JSON.stringify({ initial: this.initialState, data: this.history });\n  }\n\n  public loadSession(json: string) {\n    try {\n      const parsed = JSON.parse(json);\n      this.pauseSession();\n      this.history = parsed.data;\n      this.initialState = parsed.initial;\n      this.jumpTo(-1); // Resync the Tech and UI to the imported Genesis\n    } catch (e) {\n      this.ctlr.log(\"Failed to load session\", \"error\");\n    }\n  }\n\n  /**\n   * PLAY SESSION: Chronological re-enactment.\n   * Replays the \"Story\" by respecting the delays between events.\n   */\n  public async playSession() {\n    if (this.isReplaying && !this.stopRequested) return;\n    this.isReplaying = true;\n    this.stopRequested = false;\n    for (let i = this.currentFrame + 1; i < this.history.length; i++) {\n      if (this.stopRequested) break;\n      const e = this.history[i],\n        delay = this.history[i + 1] ? this.history[i + 1].timestamp - e.timestamp : 0;\n      this.currentFrame = i;\n      await new Promise((res) => {\n        // We cap the delay at 2s to keep the \"Dev Experience\" snappy\n        this.playbackTimer = setTimeout(() => (this.applyEntry(e), res(0)), Math.min(delay, 2000));\n      });\n    }\n    if (!this.stopRequested) this.isReplaying = false;\n  }\n\n  public pauseSession() {\n    this.stopRequested = true;\n    clearTimeout(this.playbackTimer);\n  }\n\n  /**\n   * JUMP TO (Teleport): Instant state reconstruction.\n   * Collapses history into a single \"Truth\" map and injects it.\n   */\n  public jumpTo(index: number) {\n    this.isReplaying = true;\n    this.currentFrame = Math.max(-1, Math.min(index, this.history.length - 1));\n    // Snapshot map avoids \"flicker\" by calculating the final value per path first\n    const snapshot = new Map<string, { value: any; type: string }>();\n    // 1. Establish the Floor (Genesis)\n    const loadBase = (obj: any, prefix: string) => Object.keys(obj).forEach((p) => snapshot.set(`${prefix}.${p}`, { value: obj[p], type: \"set\" }));\n    loadBase(this.initialState.intent, \"intent\");\n    loadBase(this.initialState.state, \"state\");\n    loadBase(this.initialState.settings, \"settings\");\n    // 2. Overwrite Genesis with the Timeline up to target\n    if (this.currentFrame !== -1) {\n      for (let i = 0; i <= this.currentFrame; i++) {\n        const e = this.history[i];\n        snapshot.set(e.path, { value: e.value, type: e.type });\n      }\n    }\n    // 3. Surgical Application: Direct-path injection into Reactors\n    snapshot.forEach((entry, path) => {\n      const isState = path.startsWith(\"state\");\n      entry.type === \"delete\" ? deleteAny(this.ctlr.media, path as any) : setAny(this.ctlr.media, path as any, entry.value);\n      isState && this.ctlr.media.tick(path.replace(\"state.\", \"\") as any); //  Flush state to sync the Tech and UI instantly\n    });\n    this.isReplaying = false;\n  }\n\n  public step(forward = true) {\n    this.pauseSession();\n    forward ? this.jumpTo(this.currentFrame + 1) : this.jumpTo(this.currentFrame - 1);\n  }\n\n  /**\n   * REWIND (The Ctrl+Z): Destructive undo.\n   * Pops history entries and teleports the world to the new tail.\n   */\n  public rewind(steps = 1) {\n    this.isReplaying = true;\n    while (steps-- > 0 && this.history.length) this.history.pop();\n    this.jumpTo(this.history.length - 1);\n    this.isReplaying = false;\n  }\n\n  /**\n   * APPLY ENTRY: Internal dispatcher for single-event re-enactment.\n   */\n  protected applyEntry(e: HistoryEntry) {\n    const isState = e.path.startsWith(\"state\");\n    e.type === \"delete\" ? deleteAny(this.ctlr.media, e.path as any) : setAny(this.ctlr.media, e.path as any, e.value);\n    // Only \"Facts\" (State) need immediate flush. Intents and Settings stay in the sky.\n    isState && this.ctlr.media.tick(e.path.replace(\"state.\", \"\") as any);\n\n    if (e.rejected) this.ctlr.log(`Replaying REJECTED ${e.path}`, \"warn\");\n  }\n}\n", "import { clamp, setTimeout } from \"../../utils\";\nimport { BaseModule, ControlPanelPlug, VolumePlug } from \"../\";\n\nexport interface WheelConfig {\n  volume: { normal: boolean; slider: boolean };\n  brightness: { normal: boolean; slider: boolean };\n  timeline: { normal: boolean; slider: boolean };\n  timeout: number;\n  xRatio: number;\n  yRatio: number;\n}\n\nexport class WheelModule extends BaseModule<WheelConfig> {\n  public static readonly moduleName: string = \"wheel gesture\";\n  protected timeoutId: number | null = null;\n  protected zone: { x: \"left\" | \"right\"; y: \"top\" | \"bottom\" } | null = null;\n  protected xCheck = false;\n  protected yCheck = false;\n  protected timePercent = 0;\n  protected timeMultiplier = 1;\n  protected deltaY = 0;\n  protected nextTime = 0;\n\n  public wire() {\n    this.ctlr.videoContainer.addEventListener(\"wheel\", this.handleWheel, { passive: false, signal: this.signal });\n  }\n\n  protected canHandle(e: WheelEvent): boolean {\n    return !this.ctlr.config.settings.locked && !this.ctlr.config.disabled && e.target === this.ctlr.DOM.controlsContainer && !this.ctlr.state.gestureTouchXCheck && !this.ctlr.state.gestureTouchYCheck && !this.ctlr.state.speedCheck;\n  }\n\n  protected handleWheel(e: WheelEvent): void {\n    if (!this.canHandle(e)) return;\n    e.preventDefault();\n    this.timeoutId ? clearTimeout(this.timeoutId) : this.handleInit(e);\n    this.timeoutId = setTimeout(this.handleStop, this.config.timeout, this.signal);\n    this.handleMove(e);\n  }\n\n  protected handleInit({ clientX: x, clientY: y }: WheelEvent): void {\n    const rect = this.ctlr.videoContainer.getBoundingClientRect();\n    this.zone = { x: x - rect.left > rect.width * 0.5 ? \"right\" : \"left\", y: y - rect.top > rect.height * 0.5 ? \"bottom\" : \"top\" };\n    this.deltaY = this.timePercent = 0;\n    this.timeMultiplier = 1;\n  }\n\n  protected handleMove({ clientX: x, deltaX, deltaY, shiftKey }: WheelEvent): void {\n    deltaX = shiftKey ? deltaY : deltaX;\n    const wc = this.config,\n      rect = this.ctlr.videoContainer.getBoundingClientRect(),\n      width = shiftKey ? rect.height : rect.width,\n      height = shiftKey ? rect.width : rect.height;\n    let xPercent = -deltaX / (width * wc.xRatio);\n    xPercent = this.timePercent += xPercent;\n    const xSign = xPercent >= 0 ? \"+\" : \"-\";\n    xPercent = Math.abs(xPercent);\n    if (deltaX || shiftKey) {\n      if (!wc.timeline.normal || this.yCheck) return this.handleStop();\n      this.xCheck = true;\n      this.applyTimeline(xPercent, xSign, this.timeMultiplier);\n      if (shiftKey) return;\n    }\n    if (deltaY) {\n      if (this.xCheck) {\n        const mY = clamp(0, Math.abs((this.deltaY += deltaY)), height * wc.yRatio * 0.5);\n        this.timeMultiplier = 1 - mY / (height * wc.yRatio * 0.5);\n        return this.applyTimeline(xPercent, xSign, this.timeMultiplier);\n      }\n      const cancel = (this.zone?.x === \"right\" && !wc.volume.normal) || (this.zone?.x === \"left\" && !wc.brightness.normal),\n        currentXZone = x - rect.left > width * 0.5 ? \"right\" : \"left\";\n      if (cancel || currentXZone !== this.zone?.x) return this.handleStop();\n      this.yCheck = true;\n      const ySign = -deltaY >= 0 ? \"+\" : \"-\",\n        yPercent = clamp(0, Math.abs(deltaY), height * wc.yRatio) / (height * wc.yRatio);\n      this.zone?.x === \"right\" ? this.applyRange(\"volume\", yPercent, ySign) : this.applyRange(\"brightness\", yPercent, ySign);\n    }\n  }\n\n  protected handleStop(): void {\n    this.timeoutId = null;\n    if (this.yCheck) this.yCheck = false;\n    if (this.xCheck) {\n      this.xCheck = false;\n      this.ctlr.media.intent.currentTime = this.nextTime;\n    }\n  }\n\n  protected applyTimeline(percent: number, sign: string, multiplier: number): void {\n    const { currentTime } = this.ctlr.media.state,\n      { duration } = this.ctlr.media.status,\n      change = percent * duration * +multiplier.toFixed(1);\n    this.nextTime = clamp(0, currentTime + (sign === \"+\" ? change : -change), duration);\n  }\n\n  protected applyRange(key: \"volume\" | \"brightness\", percent: number, sign: string): void {\n    const plug = this.ctlr.getPlug<VolumePlug>(key),\n      range = this.ctlr.config.settings[key],\n      value = range.value! + (sign === \"+\" ? percent : -percent) * range.max;\n    plug?.handleSliderInput(clamp(0, Math.round(value), range.max));\n  }\n}\n", "import { clamp, setTimeout } from \"../../utils\";\nimport { BaseModule, OverlayPlug, VolumePlug } from \"../\";\n\nexport interface TouchConfig {\n  volume: boolean;\n  brightness: boolean;\n  timeline: boolean;\n  threshold: number;\n  sliderTimeout: number;\n  xRatio: number;\n  yRatio: number;\n  axesRatio: number;\n  inset: number;\n}\n\nexport class TouchModule extends BaseModule<TouchConfig> {\n  public static readonly moduleName: string = \"touch gesture\";\n  protected lastX = 0;\n  protected lastY = 0;\n  protected zone: { x: \"left\" | \"right\"; y: \"top\" | \"bottom\" } | null = null;\n  protected xCheck = false;\n  protected yCheck = false;\n  protected canCancel = true;\n  protected cancelTimeoutId = -1;\n  protected sliderTimeoutId = -1;\n  protected nextTime = 0;\n\n  public wire() {\n    this.ctlr.DOM.controlsContainer?.addEventListener(\"touchstart\", this.handleStart, { capture: true, signal: this.signal });\n  }\n\n  protected canHandle(e: TouchEvent): boolean {\n    return !this.ctlr.config.disabled && e.touches?.length === 1 && e.target === this.ctlr.DOM.controlsContainer && !this.ctlr.state.speedCheck;\n  }\n\n  protected handleStart(e: TouchEvent): void {\n    if (!this.canHandle(e)) return;\n    this.handleEnd();\n    this.lastX = e.touches[0].clientX;\n    this.lastY = e.touches[0].clientY;\n    this.ctlr.videoContainer.addEventListener(\"touchmove\", this.handleInit, { once: true, signal: this.signal });\n    this.cancelTimeoutId = setTimeout(() => (this.canCancel = false), this.config.threshold, this.signal);\n    [\"touchend\", \"touchcancel\"].forEach((evt) => this.ctlr.videoContainer.addEventListener(evt, this.handleEnd, { signal: this.signal }));\n  }\n\n  protected handleInit(e: Event): void {\n    const te = e as TouchEvent;\n    if (te.touches?.length > 1 || this.ctlr.state.speedCheck) return;\n    te.preventDefault();\n    const tc = this.config,\n      rect = this.ctlr.videoContainer.getBoundingClientRect(),\n      x = te.touches[0].clientX,\n      y = te.touches[0].clientY,\n      deltaX = Math.abs(this.lastX - x),\n      deltaY = Math.abs(this.lastY - y);\n\n    this.zone = { x: x - rect.left > rect.width * 0.5 ? \"right\" : \"left\", y: y - rect.top > rect.height * 0.5 ? \"bottom\" : \"top\" };\n    const rLeft = this.lastX - rect.left,\n      rTop = this.lastY - rect.top;\n\n    if (deltaX > deltaY * tc.axesRatio && rLeft > tc.inset && rLeft < rect.width - tc.inset) {\n      if (tc.timeline) {\n        this.ctlr.state.gestureTouchXCheck = this.xCheck = true;\n        this.ctlr.videoContainer.addEventListener(\"touchmove\", this.handleXMove, { passive: false, signal: this.signal });\n      }\n    } else if (deltaY > deltaX * tc.axesRatio && rTop > tc.inset && rTop < rect.height - tc.inset) {\n      if ((tc.volume && this.zone?.x === \"right\") || (tc.brightness && this.zone?.x === \"left\")) {\n        this.ctlr.state.gestureTouchYCheck = this.yCheck = true;\n        this.ctlr.videoContainer.addEventListener(\"touchmove\", this.handleYMove, { passive: false, signal: this.signal });\n      }\n    }\n  }\n\n  protected handleXMove(e: Event): void {\n    const te = e as TouchEvent;\n    if (this.canCancel) return this.handleEnd();\n    te.preventDefault();\n    // JS: this.DOM.touchTimelineNotifier?.classList.add(\"tmg-video-control-active\");\n    this.ctlr.DOM.touchTimelineNotifier?.classList.add(\"tmg-video-control-active\");\n    this.ctlr.throttle(\n      \"gestureTouchMove\",\n      () => {\n        const tc = this.config,\n          { offsetWidth: width, offsetHeight: height } = this.ctlr.videoContainer,\n          x = te.touches[0].clientX,\n          y = te.touches[0].clientY,\n          deltaX = x - this.lastX,\n          deltaY = y - this.lastY,\n          sign = deltaX >= 0 ? \"+\" : \"-\",\n          percent = clamp(0, Math.abs(deltaX), width * tc.xRatio) / (width * tc.xRatio),\n          mY = clamp(0, Math.abs(deltaY), height * tc.yRatio * 0.5),\n          multiplier = 1 - mY / (height * tc.yRatio * 0.5);\n        this.applyTimeline({ percent, sign, multiplier });\n      },\n      30,\n      false\n    );\n  }\n\n  protected handleYMove(e: Event): void {\n    const te = e as TouchEvent;\n    if (this.canCancel || !this.ctlr.isUIActive(\"fullscreen\")) return this.handleEnd();\n    te.preventDefault();\n    // JS: (this.zone?.x === \"right\" ? this.DOM.touchVolumeNotifier : this.DOM.touchBrightnessNotifier)?.classList.add(\"tmg-video-control-active\");\n    (this.zone?.x === \"right\" ? this.ctlr.DOM.touchVolumeNotifier : this.ctlr.DOM.touchBrightnessNotifier)?.classList.add(\"tmg-video-control-active\");\n    this.ctlr.throttle(\n      \"gestureTouchMove\",\n      () => {\n        const tc = this.config,\n          height = this.ctlr.videoContainer.offsetHeight,\n          y = te.touches[0].clientY,\n          deltaY = y - this.lastY,\n          sign = deltaY >= 0 ? \"-\" : \"+\",\n          percent = clamp(0, Math.abs(deltaY), height * tc.yRatio) / (height * tc.yRatio);\n        this.lastY = y;\n        this.applyRange(this.zone?.x === \"right\" ? \"volume\" : \"brightness\", percent, sign);\n      },\n      30,\n      false\n    );\n  }\n\n  protected handleEnd(): void {\n    if (this.xCheck) {\n      this.ctlr.state.gestureTouchXCheck = this.xCheck = false;\n      this.ctlr.videoContainer.removeEventListener(\"touchmove\", this.handleXMove);\n      // JS: this.DOM.touchTimelineNotifier?.classList.remove(\"tmg-video-control-active\");\n      this.ctlr.DOM.touchTimelineNotifier?.classList.remove(\"tmg-video-control-active\");\n      if (!this.canCancel) this.ctlr.media.intent.currentTime = this.nextTime;\n    }\n    if (this.yCheck) {\n      this.ctlr.state.gestureTouchYCheck = this.yCheck = false;\n      this.ctlr.videoContainer.removeEventListener(\"touchmove\", this.handleYMove);\n      clearTimeout(this.sliderTimeoutId);\n      this.sliderTimeoutId = setTimeout(\n        () => {\n          // JS: this.DOM.touchVolumeNotifier?.classList.remove(\"tmg-video-control-active\");\n          this.ctlr.DOM.touchVolumeNotifier?.classList.remove(\"tmg-video-control-active\");\n          // JS: this.DOM.touchBrightnessNotifier?.classList.remove(\"tmg-video-control-active\");\n          this.ctlr.DOM.touchBrightnessNotifier?.classList.remove(\"tmg-video-control-active\");\n        },\n        this.config.sliderTimeout,\n        this.signal\n      );\n      if (!this.canCancel) this.ctlr.getPlug<OverlayPlug>(\"overlay\")?.remove();\n    }\n    clearTimeout(this.cancelTimeoutId);\n    this.canCancel = true;\n    this.ctlr.videoContainer.removeEventListener(\"touchmove\", this.handleInit);\n    [\"touchend\", \"touchcancel\"].forEach((evt) => this.ctlr.videoContainer.removeEventListener(evt, this.handleEnd));\n  }\n\n  protected applyTimeline({ percent, sign, multiplier }: { percent: number; sign: string; multiplier: number }): void {\n    const { currentTime } = this.ctlr.media.state,\n      { duration } = this.ctlr.media.status,\n      change = percent * duration * +multiplier.toFixed(1);\n    this.nextTime = clamp(0, currentTime + (sign === \"+\" ? change : -change), duration);\n  }\n\n  protected applyRange(key: \"volume\" | \"brightness\", percent: number, sign: string): void {\n    const plug = this.ctlr.getPlug<VolumePlug>(key),\n      range = this.ctlr.config.settings[key],\n      value = sign === \"+\" ? range.value! + percent * range.max : range.value! - percent * range.max;\n    plug?.handleSliderInput(clamp(0, Math.round(value), range.max));\n  }\n}\n", "import { setTimeout, addSafeClicks } from \"../../utils\";\nimport { OverlayPlug, ControlPanelPlug, BaseModule } from \"../\";\nimport { Timeline } from \"../../components\";\nimport type { TimePlug } from \"../time\";\n\nexport interface GeneralConfig {\n  click: string;\n  dblClick: string;\n}\n\nexport class GeneralModule extends BaseModule<GeneralConfig> {\n  public static readonly moduleName: string = \"general gesture\";\n  protected focusSubjectId = \"\";\n  protected skipPersistPosition: \"left\" | \"right\" | null = null;\n\n  public wire(): void {\n    addSafeClicks(this.ctlr.DOM.controlsContainer, this.handleClick, this.handleDblClick, { capture: true, signal: this.signal });\n    [this.ctlr.DOM.controlsContainer, this.ctlr.DOM.bottomControlsWrapper].forEach((el) => {\n      el?.addEventListener(\"click\", this.handleAnyClick, { capture: true, signal: this.signal });\n      el?.addEventListener(\"contextmenu\", this.handleRightClick, { signal: this.signal });\n      el?.addEventListener(\"focusin\", this.handleFocusIn, { capture: true, signal: this.signal });\n      el?.addEventListener(\"keydown\", this.handleKeyFocusIn, { capture: true, signal: this.signal });\n      [\"pointermove\", \"dragenter\", \"scroll\"].forEach((evt) => el?.addEventListener(evt, this.handleHoverPointerActive, { capture: true, signal: this.signal }));\n      el?.addEventListener(\"mouseleave\", this.handleHoverPointerOut, { capture: true, signal: this.signal });\n    });\n  }\n\n  protected handleAnyClick(): void {\n    this.ctlr.getPlug<OverlayPlug>(\"overlay\")?.delay();\n    this.ctlr.getPlug<ControlPanelPlug>(\"controlPanel\")?.getControl<Timeline>(\"timeline\")?.stopScrubbing();\n  }\n\n  protected handleRightClick(e: MouseEvent): void {\n    e.preventDefault();\n  }\n\n  protected handleFocusIn({ target }: FocusEvent): void {\n    const t = target as HTMLElement;\n    this.focusSubjectId = String(!t.matches(\":focus-visible\") && (t?.dataset?.controlId ?? t?.parentElement?.dataset?.controlId));\n  }\n\n  protected handleKeyFocusIn({ target }: KeyboardEvent): void {\n    const t = target as HTMLElement;\n    if ((t?.dataset?.controlId ?? t?.parentElement?.dataset?.controlId) === this.focusSubjectId) t.blur();\n  }\n\n  protected handleHoverPointerActive(e: Event): void {\n    const { target, pointerType } = e as PointerEvent,\n      overlay = this.ctlr.getPlug<OverlayPlug>(\"overlay\");\n    (!pointerType || !this.ctlr.state.isMobile) && overlay?.show();\n    pointerType && (target as HTMLElement).closest(\".tmg-video-side-controls-wrapper\") && clearTimeout(overlay?.overlayDelayId ?? -1);\n  }\n\n  protected handleHoverPointerOut(): void {\n    const overlay = this.ctlr.getPlug<OverlayPlug>(\"overlay\");\n    setTimeout(() => !this.ctlr.state.isMobile && !this.ctlr.videoContainer.matches(\":hover\") && overlay?.remove());\n  }\n\n  protected handleClick(e: MouseEvent): void {\n    const { target } = e;\n    if (target !== this.ctlr.DOM.controlsContainer) return;\n    const onClick = this.config.click;\n    // if (onClick === \"togglePlay\")\n    this.ctlr.media.intent.paused = !this.ctlr.media.state.paused;\n    // else if (onClick === \"fullscreen\")\n    //   this.ctlr.getPlug<Mode>(\"mode\")?.toggleFullscreen();\n    // else if (onClick === \"pictureInPicture\")\n    //   this.ctlr.getPlug<Mode>(\"mode\")?.togglePictureInPicture();\n  }\n\n  protected handleDblClick(e: MouseEvent): void {\n    const { clientX: x, target, detail } = e;\n    if (target !== this.ctlr.DOM.controlsContainer) return;\n    const rect = this.ctlr.videoContainer.getBoundingClientRect(),\n      pos = x - rect.left > rect.width * 0.65 ? \"right\" : x - rect.left < rect.width * 0.35 ? \"left\" : \"center\";\n    if (this.state.skipPersist && pos !== this.skipPersistPosition) {\n      this.deactivateSkipPersist();\n      if (detail === 1) return;\n    }\n    if (pos === \"center\") {\n      const onDblClick = this.config.dblClick;\n      // if (onDblClick === \"togglePlay\")\n      this.ctlr.media.intent.paused = !this.ctlr.media.state.paused;\n      //  else if (onDblClick === \"fullscreen\")\n      //   this.ctlr.getPlug<Mode>(\"mode\")?.toggleFullscreen();\n      //  else if (onDblClick === \"pictureInPicture\")\n      //   this.ctlr.getPlug<Mode>(\"mode\")?.togglePictureInPicture();\n      return;\n    }\n    if (this.state.skipPersist && detail === 2) return;\n    if (!this.state.skipPersist) this.activateSkipPersist(pos as \"left\" | \"right\");\n    this.ctlr.getPlug<TimePlug>(\"time\")?.skip(pos === \"right\" ? this.ctlr.config.settings.time.skip : -this.ctlr.config.settings.time.skip);\n  }\n\n  public activateSkipPersist(pos: \"left\" | \"right\"): void {\n    this.state.skipPersist = true;\n    this.skipPersistPosition = pos;\n    this.ctlr.videoContainer.addEventListener(\"click\", this.handleDblClick, { signal: this.signal });\n    setTimeout(() => this.deactivateSkipPersist(), 2000);\n  }\n\n  public deactivateSkipPersist(): void {\n    this.state.skipPersist = false;\n    this.skipPersistPosition = null;\n    this.ctlr.videoContainer.removeEventListener(\"click\", this.handleDblClick);\n  }\n}\n", "import { Controller } from \"../../core/controller\";\nimport { BasePlug } from \"..\";\nimport { WheelModule, type WheelConfig } from \"./wheel\";\nimport { TouchModule, type TouchConfig } from \"./touch\";\nimport { GeneralModule } from \"./general\";\nexport * from \"./general\";\nexport * from \"./touch\";\nexport * from \"./wheel\";\n\nexport type Gesture = {\n  click: string;\n  dblClick: string;\n  wheel: WheelConfig;\n  touch: TouchConfig;\n};\n\nexport class GesturePlug extends BasePlug<Gesture> {\n  public static readonly plugName: string = \"gesture\";\n  public general!: GeneralModule;\n  public wheel!: WheelModule;\n  public touch!: TouchModule;\n\n  constructor(ctlr: Controller, config: Gesture, state?: any) {\n    super(ctlr, config, state);\n    this.general = new GeneralModule(this.ctlr, { click: this.config.click, dblClick: this.config.dblClick });\n    this.wheel = new WheelModule(this.ctlr, this.config.wheel);\n    this.touch = new TouchModule(this.ctlr, this.config.touch);\n  }\n\n  public wire() {\n    const wire = () => (this.general.wire(), this.wheel.wire(), this.touch.wire());\n    if (this.ctlr.state.readyState > 1) wire();\n    else this.ctlr.state.once(\"readyState\", wire, { signal: this.signal }); // waits for light state or first play\n  }\n\n  protected override onDestroy() {\n    super.onDestroy();\n    this.general?.destroy();\n    this.wheel?.destroy();\n    this.touch?.destroy();\n  }\n}\n", "import { BasePlug } from \".\";\nimport type { Event } from \"../core/reactor\";\nimport { VideoBuild } from \"../types/build\";\nimport { CMedia } from \"../types/contract\";\nimport type { OptRange } from \"../types/generics\";\nimport { clamp } from \"../utils\";\nimport { AUDIO_CONTEXT, connectMediaToAudioManager } from \"../tools/runtime\";\n\nexport interface Volume extends OptRange {\n  muted: boolean;\n}\n\nexport class VolumePlug extends BasePlug<Volume> {\n  public static readonly plugName: string = \"volume\";\n  protected lastVolume = 0;\n  protected sliderAptVolume = 5;\n  protected shouldMute = false;\n  protected shouldSetLastVolume = false;\n  protected audioSetup = false;\n  protected gainNode?: GainNode;\n  get ctime(): number {\n    return AUDIO_CONTEXT?.currentTime ?? 0;\n  }\n  public mount(): void {\n    if (this.ctlr.state.audioContextReady) this.setupAudio();\n    else this.ctlr.state.once(\"audioContextReady\", this.setupAudio, { signal: this.signal });\n  }\n\n  public wire(): void {\n    this.ctlr.config.set(\"settings.volume.value\", (value) => clamp(this.config.min, value!, this.config.max), { signal: this.signal });\n    this.ctlr.media.element.addEventListener(\"volumechange\", this.handleNativeVolumeChange, { signal: this.signal });\n    const configVolume = this.config.value ?? this.ctlr.media.state.volume * 100;\n    this.lastVolume = clamp(this.config.min, configVolume, this.config.max);\n    this.shouldMute = this.shouldSetLastVolume = this.ctlr.media.element?.muted ?? false;\n    this.config.value = this.shouldMute ? 0 : this.lastVolume;\n    this.ctlr.config.watch(\"settings.volume.value\", this.forwardVolume, { signal: this.signal, immediate: true });\n    this.ctlr.config.watch(\"settings.volume.muted\", this.forwardMuted, { signal: this.signal });\n    this.ctlr.media.on(\"intent.volume\", this.handleVolumeIntent, { capture: true, signal: this.signal });\n    this.ctlr.media.on(\"intent.muted\", this.handleMutedIntent, { capture: true, signal: this.signal });\n    this.ctlr.config.on(\"settings.volume.min\", this.handleMinChange, { signal: this.signal });\n    this.ctlr.config.on(\"settings.volume.max\", this.handleMaxChange, { signal: this.signal });\n  }\n\n  protected setupAudio(): void {\n    if (this.audioSetup || connectMediaToAudioManager(this.ctlr.media.element) === \"unavailable\") return;\n    this.gainNode = (this.ctlr.media.element as any)._tmgGainNode;\n    const DCN = (this.ctlr.media.element as any)._tmgDynamicsCompressorNode;\n    if (DCN) ((DCN.threshold.value = -30), (DCN.knee.value = 20), (DCN.ratio.value = 12), (DCN.attack.value = 0.003), (DCN.release.value = 0.25));\n    this.audioSetup = true;\n  }\n\n  protected cancelAudio(): void {\n    this.ctlr.media.intent.volume = clamp(0, (this.gainNode?.gain?.value ?? 2) / 2, 1);\n    (this.ctlr.media.element as any).mediaElementSourceNode?.disconnect();\n    this.gainNode?.disconnect();\n    this.audioSetup = false;\n  }\n\n  protected handleVolumeState(volume: number): void {\n    const v = clamp(this.shouldMute ? 0 : this.config.min, volume * 100, this.config.max),\n      vLevel = v === 0 ? \"muted\" : v < 50 ? \"low\" : v <= 100 ? \"high\" : \"boost\",\n      vPercent = (v - 0) / (this.config.max - 0);\n    if (this.gainNode) this.gainNode.gain.setTargetAtTime((v / 100) * 2, this.ctime, 0.05); // doubling for dat Android Feel\n    this.ctlr.media.element.muted = this.ctlr.media.element.defaultMuted = this.config.muted = v === 0;\n    this.ctlr.videoContainer.dataset.volumeLevel = vLevel;\n    this.ctlr.config.settings.css.currentVolumeTooltipPosition = `${10.5 + vPercent * 79.5}%`;\n    if (this.config.max > 100) {\n      if (v <= 100) {\n        this.ctlr.config.settings.css.currentVolumeSliderPosition = (v - 0) / (100 - 0);\n        this.ctlr.config.settings.css.currentVolumeSliderBoostPosition = 0;\n        this.ctlr.config.settings.css.volumeSliderBoostPercent = 0;\n      } else {\n        this.ctlr.config.settings.css.currentVolumeSliderPosition = 1;\n        this.ctlr.config.settings.css.currentVolumeSliderBoostPosition = (v - 100) / (this.config.max - 100);\n        this.ctlr.config.settings.css.volumeSliderBoostPercent = this.ctlr.config.settings.css.volumeSliderPercent;\n      }\n    } else this.ctlr.config.settings.css.currentVolumeSliderPosition = vPercent;\n  }\n\n  protected handleMutedState(muted: boolean): void {\n    if (muted) {\n      if (this.config.value) {\n        this.lastVolume = this.config.value;\n        this.shouldSetLastVolume = true;\n      }\n      this.shouldMute = true;\n      if (this.config.value) this.ctlr.media.intent.volume = 0;\n    } else {\n      const restore = this.shouldSetLastVolume ? this.lastVolume : this.config.value;\n      this.ctlr.media.intent.volume = (restore ? restore : this.sliderAptVolume) / 100;\n      this.shouldMute = this.shouldSetLastVolume = false;\n    }\n  }\n\n  protected forwardVolume(value?: number): void {\n    this.ctlr.media.intent.volume = value! / 100;\n  }\n\n  protected forwardMuted(value?: boolean): void {\n    this.ctlr.media.intent.muted = value!;\n  }\n\n  protected handleVolumeIntent(e: Event<CMedia, \"intent.volume\">): void {\n    if (e.resolved) return;\n    if (this.ctlr.media.element !== this.ctlr.media.tech.element) return;\n    this.handleVolumeState(e.value!);\n    this.ctlr.media.state.volume = e.value!;\n    e.resolve(this.name);\n  }\n\n  protected handleMutedIntent(e: Event<CMedia, \"intent.muted\">): void {\n    if (e.resolved) return;\n    if (this.ctlr.media.element !== this.ctlr.media.tech.element) return;\n    if (e.oldValue === e.value) return e.resolve(this.name);\n    this.handleMutedState(e.value!);\n    this.ctlr.media.state.muted = e.value!;\n    e.resolve(this.name);\n  }\n\n  protected handleMinChange({ target }: Event<VideoBuild, \"settings.volume.min\">): void {\n    const min = target.value!;\n    if (this.config.value! < min) this.config.value = min;\n    if (this.lastVolume < min) this.lastVolume = min;\n  }\n\n  protected handleMaxChange({ target }: Event<VideoBuild, \"settings.volume.max\">): void {\n    const max = target.value!;\n    if (this.config.value! > max) this.config.value = max;\n    if (this.lastVolume > max) this.lastVolume = max;\n    this.ctlr.videoContainer.classList.toggle(\"tmg-video-volume-boost\", max > 100);\n    this.ctlr.config.settings.css.volumeSliderPercent = Math.round((100 / max) * 100);\n    this.ctlr.config.settings.css.maxVolumeRatio = max / 100;\n  }\n\n  public toggleMute(option?: \"auto\"): void {\n    if (option === \"auto\" && this.shouldSetLastVolume && !this.lastVolume) {\n      this.lastVolume = this.config.skip;\n    }\n    this.config.muted = !this.config.muted;\n  }\n\n  public changeVolume(value: number): void {\n    const sign = value >= 0 ? \"+\" : \"-\";\n    value = Math.abs(value);\n    let volume = this.shouldSetLastVolume ? this.lastVolume : this.config.value!;\n    if (sign === \"-\") {\n      if (volume > this.config.min) volume -= volume % value ? volume % value : value;\n      // if (volume === 0) return this.ctlr.notify(\"volumemuted\");\n      // this.ctlr.notify(\"volumedown\");\n    } else {\n      if (volume < this.config.max) volume += volume % value ? value - (volume % value) : value;\n      // this.ctlr.notify(\"volumeup\");\n    }\n    this.shouldSetLastVolume ? (this.lastVolume = volume) : (this.config.value = volume);\n  }\n\n  public handleSliderInput(volume: number): void {\n    this.shouldMute = this.shouldSetLastVolume = false;\n    this.config.value = volume;\n    if (volume > 5) this.sliderAptVolume = volume;\n  }\n\n  protected handleNativeVolumeChange = (): void => {\n    this.ctlr.media.element.volume = 1;\n    if (this.config.muted !== this.ctlr.media.element.muted) this.toggleMute();\n  };\n}\n", "import { BasePlug } from \".\";\nimport type { Event } from \"../core/reactor\";\nimport { VideoBuild } from \"../types/build\";\nimport type { OptRange } from \"../types/generics\";\nimport { clamp, rotate } from \"../utils\";\n\nexport interface PlaybackRate extends OptRange {}\n\nexport class PlaybackRatePlug extends BasePlug<PlaybackRate> {\n  public static readonly plugName: string = \"playbackRate\";\n\n  public wire(): void {\n    this.ctlr.media.set(\"intent.playbackRate\", (value) => clamp(this.config.min, value!, this.config.max), { signal: this.signal });\n    this.ctlr.config.watch(\"settings.playbackRate.value\", this.forwardRate, { signal: this.signal, immediate: true });\n    this.ctlr.config.on(\"settings.playbackRate.min\", this.handleMinChange, { signal: this.signal });\n    this.ctlr.config.on(\"settings.playbackRate.max\", this.handleMaxChange, { signal: this.signal });\n  }\n\n  protected forwardRate(value?: number): void {\n    this.ctlr.media.intent.playbackRate = value!;\n  }\n\n  protected handleMinChange({ target }: Event<VideoBuild, \"settings.playbackRate.min\">): void {\n    const min = target.value!;\n    if (this.config.value! < min) this.config.value = min;\n  }\n\n  protected handleMaxChange({ target }: Event<VideoBuild, \"settings.playbackRate.max\">): void {\n    const max = target.value!;\n    if (this.config.value! > max) this.config.value = max;\n  }\n\n  public rotateRate(dir: \"forwards\" | \"backwards\" = \"forwards\"): void {\n    this.config.value = rotate(this.config.value!, { min: this.config.min, max: this.config.max, step: this.config.skip }, dir);\n  }\n\n  public changeRate(value: number): void {\n    const sign = value >= 0 ? \"+\" : \"-\";\n    value = Math.abs(value);\n    const rate = this.config.value!;\n    if (sign === \"-\") {\n      if (rate > this.config.min) this.config.value -= rate % value ? rate % value : value;\n      // return this.notify(\"playbackratedown\");\n    } else {\n      if (rate < this.config.max) this.config.value += rate % value ? value - (rate % value) : value;\n      // return this.notify(\"playbackrateup\");\n    }\n  }\n}\n", "import { BasePlug } from \".\";\nimport type { Event } from \"../core/reactor\";\nimport { VideoBuild } from \"../types/build\";\nimport type { OptRange } from \"../types/generics\";\nimport { clamp } from \"../utils\";\n\nexport interface Brightness extends OptRange {\n  dark: boolean;\n}\n\nexport class BrightnessPlug extends BasePlug<Brightness> {\n  public static readonly plugName: string = \"brightness\";\n  protected lastBrightness = 100;\n  protected sliderAptBrightness = 100;\n  protected shouldDark = false;\n  protected shouldSetLastBrightness = false;\n\n  public wire(): void {\n    this.ctlr.config.set(\"settings.brightness.value\", (value) => clamp(this.shouldDark ? 0 : this.config.min, value!, this.config.max), { signal: this.signal });\n    const configBrightness = this.config.value ?? this.ctlr.config.settings.css.brightness ?? 100;\n    this.lastBrightness = clamp(this.config.min, configBrightness, this.config.max);\n    this.shouldDark = this.shouldSetLastBrightness = this.config.dark ?? false;\n    this.config.value = this.shouldDark ? 0 : this.lastBrightness;\n    this.ctlr.config.on(\"settings.brightness.value\", this.handleBrightnessChange, { signal: this.signal, immediate: true });\n    this.ctlr.config.on(\"settings.brightness.dark\", this.handleDarkChange, { signal: this.signal });\n    this.ctlr.config.on(\"settings.brightness.min\", this.handleMinChange, { signal: this.signal });\n    this.ctlr.config.on(\"settings.brightness.max\", this.handleMaxChange, { signal: this.signal });\n    this.ctlr.config.get(\"settings.brightness.value\", () => Number(this.ctlr.config.settings.css.brightness ?? 100), { signal: this.signal, lazy: true });\n  }\n\n  protected handleBrightnessState(value: number): void {\n    const b = clamp(this.shouldDark ? 0 : this.config.min, value, this.config.max),\n      bLevel = b === 0 ? \"dark\" : b < 50 ? \"low\" : b <= 100 ? \"high\" : \"boost\",\n      bPercent = (b - 0) / (this.config.max - 0);\n    this.ctlr.config.settings.css.brightness = b;\n    this.config.dark = b === 0;\n    this.ctlr.videoContainer.dataset.brightnessLevel = bLevel;\n    this.ctlr.config.settings.css.currentBrightnessTooltipPosition = `${10.5 + bPercent * 79.5}%`;\n    if (this.config.max > 100) {\n      if (b <= 100) {\n        this.ctlr.config.settings.css.currentBrightnessSliderPosition = (b - 0) / (100 - 0);\n        this.ctlr.config.settings.css.currentBrightnessSliderBoostPosition = 0;\n        this.ctlr.config.settings.css.brightnessSliderBoostPercent = 0;\n      } else {\n        this.ctlr.config.settings.css.currentBrightnessSliderPosition = 1;\n        this.ctlr.config.settings.css.currentBrightnessSliderBoostPosition = (b - 100) / (this.config.max - 100);\n        this.ctlr.config.settings.css.brightnessSliderBoostPercent = this.ctlr.config.settings.css.brightnessSliderPercent;\n      }\n    } else this.ctlr.config.settings.css.currentBrightnessSliderPosition = bPercent;\n  }\n\n  protected handleDarkState(dark: boolean): void {\n    if (dark) {\n      if (this.config.value) {\n        this.lastBrightness = this.config.value;\n        this.shouldSetLastBrightness = true;\n      }\n      this.shouldDark = true;\n      if (this.config.value) this.config.value = 0;\n    } else {\n      const restore = this.shouldSetLastBrightness ? this.lastBrightness : this.config.value;\n      this.config.value = restore ? restore : this.sliderAptBrightness;\n      this.shouldDark = this.shouldSetLastBrightness = false;\n    }\n  }\n\n  protected handleBrightnessChange({ target: { value } }: Event<VideoBuild, \"settings.brightness.value\">): void {\n    this.handleBrightnessState(value!);\n  }\n\n  protected handleDarkChange({ oldValue, value: dark }: Event<VideoBuild, \"settings.brightness.dark\">): void {\n    if (oldValue === dark) return;\n    this.handleDarkState(dark!);\n  }\n\n  protected handleMinChange({ target }: Event<VideoBuild, \"settings.brightness.min\">): void {\n    const min = target.value!;\n    if (this.config.value! < min) this.config.value = min;\n    if (this.lastBrightness < min) this.lastBrightness = min;\n  }\n\n  protected handleMaxChange({ target }: Event<VideoBuild, \"settings.brightness.max\">): void {\n    const max = target.value!;\n    if (this.config.value! > max) this.config.value = max;\n    if (this.lastBrightness > max) this.lastBrightness = max;\n    this.ctlr.videoContainer.classList.toggle(\"tmg-video-brightness-boost\", max > 100);\n    this.ctlr.config.settings.css.brightnessSliderPercent = Math.round((100 / max) * 100);\n    this.ctlr.config.settings.css.maxBrightnessRatio = max / 100;\n  }\n\n  public toggleDark(option?: \"auto\"): void {\n    if (option === \"auto\" && this.shouldSetLastBrightness && !this.lastBrightness) this.lastBrightness = this.config.skip;\n    this.config.dark = !this.config.dark;\n  }\n\n  public changeBrightness(value: number): void {\n    const sign = value >= 0 ? \"+\" : \"-\";\n    value = Math.abs(value);\n    let brightness = this.shouldSetLastBrightness ? this.lastBrightness : this.config.value!;\n    if (sign === \"-\") {\n      if (brightness > this.config.min) brightness -= brightness % value ? brightness % value : value;\n      // if (brightness === 0) return this.ctlr.notify(\"brightnessdark\");\n      // this.ctlr.notify(\"brightnessdown\");\n    } else {\n      if (brightness < this.config.max) brightness += brightness % value ? value - (brightness % value) : value;\n      // this.ctlr.notify(\"brightnessup\");\n    }\n    this.shouldSetLastBrightness ? (this.lastBrightness = brightness) : (this.config.value = brightness);\n  }\n\n  public handleSliderInput(brightness: number): void {\n    this.shouldDark = this.shouldSetLastBrightness = false;\n    this.config.value = brightness;\n    if (brightness > 5) this.sliderAptBrightness = brightness;\n  }\n}\n", "import { BasePlug } from \".\";\nimport type { Event } from \"../core/reactor\";\nimport { VideoBuild } from \"../types/build\";\nimport { CMedia } from \"../types/contract\";\nimport type { AptAutoplayOption, PosterPreview } from \"../types/generics\";\nimport type { PlaylistPlug } from \"./playlist\";\nimport type { ToastsPlug } from \"./toasts\";\nimport type { TimePlug } from \"./time\";\nimport { clamp, addSources } from \"../utils\";\n\nexport interface Auto {\n  play: boolean | AptAutoplayOption;\n  pause: boolean | AptAutoplayOption;\n  next: {\n    value: number; // -1 for false\n    videoPreview: PosterPreview;\n  };\n}\n\nexport class AutoPlug extends BasePlug<Auto> {\n  public static readonly plugName: string = \"auto\";\n  protected nextVideoPreview: HTMLVideoElement | null = null;\n  protected canAutoMovePlaylist = true;\n\n  public wire(): void {\n    this.ctlr.config.watch(\"settings.auto.play\", this.forwardAutoPlay, { signal: this.signal, immediate: true });\n    this.ctlr.state.on(\"mediaParentIntersecting\", this.handleIntersectionChange, { signal: this.signal });\n    this.ctlr.media.on(\"state.currentTime\", this.handleTimeUpdate, { signal: this.signal, immediate: true });\n    this.ctlr.config.on(\"settings.auto.next.videoPreview.usePoster\", this.handleUsePoster, { signal: this.signal });\n    this.ctlr.config.on(\"settings.auto.next.videoPreview.tease\", this.handleTease, { signal: this.signal });\n    this.ctlr.config.on(\"settings.auto.next.videoPreview.time\", this.handlePreviewTime, { signal: this.signal });\n  }\n\n  protected forwardAutoPlay(value?: boolean | AptAutoplayOption): void {\n    this.ctlr.media.element.autoplay = typeof value === \"string\" ? false : !!value;\n  }\n\n  protected handleIntersectionChange(): void {\n    this.handleMediaAptAutoPlay(this.config.pause, false);\n    this.handleMediaAptAutoPlay();\n  }\n\n  protected handleTimeUpdate({ target }: Event<CMedia, \"state.currentTime\">): void {\n    const dur = this.ctlr.media.status.duration,\n      curr = target.value!;\n    if (this.ctlr.media.status.readyState && curr && Math.floor((this.ctlr.config.settings.time.end ?? dur) - curr) <= this.config.next.value) this.autonextVideo();\n  }\n\n  protected handleUsePoster({ target: { value } }: Event<VideoBuild, \"settings.auto.next.videoPreview.usePoster\">): void {\n    if (!this.nextVideoPreview || (value && this.nextVideoPreview.poster)) return;\n    if (this.config.next.videoPreview.tease) this.ctlr.config.settings.auto.next.videoPreview.tease = this.config.next.videoPreview.tease;\n    else this.ctlr.config.settings.auto.next.videoPreview.time = this.config.next.videoPreview.time;\n  }\n\n  protected handleTease({ target: { value } }: Event<VideoBuild, \"settings.auto.next.videoPreview.tease\">): void {\n    if (!this.nextVideoPreview) return;\n    this.nextVideoPreview.ontimeupdate = () => this.nextVideoPreview && Number(this.nextVideoPreview.currentTime) >= this.config.next.videoPreview.time && this.nextVideoPreview.pause();\n    if (value && (!this.config.next.videoPreview.usePoster || !this.nextVideoPreview.poster)) this.nextVideoPreview.play();\n  }\n\n  protected handlePreviewTime({ target: { value } }: Event<VideoBuild, \"settings.auto.next.videoPreview.time\">): void {\n    if (!this.nextVideoPreview || (this.config.next.videoPreview.usePoster && this.nextVideoPreview.poster)) return;\n    this.nextVideoPreview.currentTime = Number(value);\n  }\n\n  protected handleMediaAptAutoPlay(auto = this.config.play, bool = true, p = this.ctlr.state.mediaParentIntersecting ? \"in\" : \"out\"): void {\n    if (auto === `${p}-view-always`) this.ctlr.media.intent.paused = !bool;\n    else if (auto === `${p}-view` && this.ctlr.state.readyState < 3) this.ctlr.media.intent.paused = !bool;\n  }\n\n  protected autonextVideo = (): void => {\n    if (!this.ctlr.media.status.loadedMetadata || !this.ctlr.config.playlist || this.config.next.value < 0 || !this.canAutoMovePlaylist || this.ctlr.state.currentPlaylistIndex >= this.ctlr.config.playlist.length - 1 || this.ctlr.media.state.paused || this.ctlr.media.status.waiting) return;\n    this.canAutoMovePlaylist = false;\n    const count = clamp(1, Math.round((this.ctlr.config.settings.time.end ?? this.ctlr.media.status.duration) - this.ctlr.media.state.currentTime), this.config.next.value),\n      v = this.ctlr.config.playlist[this.ctlr.state.currentPlaylistIndex + 1],\n      toastsPlug = this.ctlr.getPlug<ToastsPlug>(\"toasts\"),\n      timePlug = this.ctlr.getPlug<TimePlug>(\"time\");\n    const nVTId = toastsPlug?.toast?.(\"\", {\n      autoClose: count * 1000,\n      hideProgressBar: false,\n      position: \"bottom-right\",\n      bodyHTML: `<span title=\"Play next video\" class=\"tmg-video-next-preview-wrapper\">\n        <button type=\"button\"><svg viewBox=\"0 0 25 25\"><path d=\"M8,5.14V19.14L19,12.14L8,5.14Z\" /></svg></button>\n        <video class=\"tmg-video-next-preview\" poster=\"${v.media?.artwork?.[0]?.src}\" src=\"${v.src || \"\"}\" muted playsinline webkit-playsinline preload=\"metadata\"></video>\n        <p>${timePlug?.toTimeText(NaN) ?? \"0:00\"}</p>\n      </span>\n      <span class=\"tmg-video-next-info\">\n        <h2>Next Video in <span class=\"tmg-video-next-countdown\">${count}</span></h2>\n        ${v.media.title ? `<p class=\"tmg-video-next-title\">${v.media.title}</p>` : \"\"}\n      </span>`,\n      onTimeUpdate: (time: number) => {\n        const el = this.ctlr.queryDOM(\".tmg-video-next-countdown\");\n        if (el) el.textContent = String(Math.round((count * 1000 - time) / 1000) || 1);\n      },\n      onClose: (timeElapsed: boolean) => (removeListeners(), timeElapsed && this.ctlr.getPlug<PlaylistPlug>(\"playlist\")?.nextVideo()),\n      tag: \"tmg-anvi\",\n    });\n    const cleanUp = (permanent = false) => (nVTId && window.t007?.toast.dismiss(nVTId, \"instant\"), (this.nextVideoPreview = null), (this.canAutoMovePlaylist = !permanent)),\n      cleanUpWhenNeeded = () => !this.ctlr.media.element.ended && cleanUp(),\n      autoCleanUpToast = () => Math.floor((this.ctlr.config.settings.time.end ?? this.ctlr.media.status.duration) - this.ctlr.media.state.currentTime) > this.config.next.value && cleanUp(),\n      removeListeners = () => [\"timeupdate\", \"pause\", \"waiting\"].forEach((e, i) => this.ctlr.media.element.removeEventListener(e, !i ? autoCleanUpToast : cleanUpWhenNeeded));\n    [\"timeupdate\", \"pause\", \"waiting\"].forEach((e, i) => this.ctlr.media.element.addEventListener(e, !i ? autoCleanUpToast : cleanUpWhenNeeded));\n    const nVP = (this.nextVideoPreview = this.ctlr.queryDOM<HTMLVideoElement>(\".tmg-video-next-preview\"))!;\n    if (v.sources?.length) addSources(v.sources, nVP);\n    [\"loadedmetadata\", \"loaded\", \"durationchange\"].forEach((e) => nVP?.addEventListener(e, ({ target: p }) => ((p as HTMLVideoElement).nextElementSibling!.textContent = timePlug?.toTimeText((p as HTMLVideoElement).duration) ?? \"0:00\")));\n    this.ctlr.config.settings.auto.next.videoPreview = this.config.next.videoPreview; // force update\n    nVP?.previousElementSibling?.addEventListener(\"click\", () => (cleanUp(true), this.ctlr.getPlug<PlaylistPlug>(\"playlist\")?.nextVideo()), { capture: true });\n  };\n}\n", "import { BasePlug } from \".\";\nimport type { Event } from \"../core/reactor\";\nimport { VideoBuild } from \"../types/build\";\nimport type { ToastOptions } from \"../types/t007\";\n\nexport interface Toasts extends ToastOptions {\n  disabled: boolean;\n  captureAutoClose: number;\n}\n\nexport class ToastsPlug extends BasePlug<Toasts> {\n  public static readonly plugName: string = \"toasts\";\n\n  public wire(): void {\n    this.ctlr.config.on(\"settings.toasts.disabled\", this.handleDisabled, { signal: this.signal });\n    this.ctlr.config.on(\"settings.toasts\", this.handleToastUpdate, { signal: this.signal });\n  }\n\n  protected handleDisabled({ target: { value } }: Event<VideoBuild, \"settings.toasts.disabled\">): void {\n    if (!value || !t007?.toast) return;\n    t007.toast.dismissAll(this.ctlr.id);\n  }\n\n  protected handleToastUpdate({ type, target: { path, key, value } }: Event<VideoBuild, \"settings.toasts\">): void {\n    if (type !== \"update\" || path?.match(/disabled|captureAutoClose/) || !t007?.toast) return;\n    t007.toast.doForAll(\"update\", { [key]: value }, this.ctlr.id);\n  }\n\n  public get toast() {\n    if (this.config.disabled || !t007?.toaster) return null;\n    return t007.toaster({ idPrefix: this.ctlr.id, rootElement: this.ctlr.videoContainer, ...this.config });\n  }\n}\n", "import { BasePlug } from \".\";\nimport type { TimePlug } from \"./time\";\nimport { setTimeout, setInterval } from \"../utils\";\n\nexport interface FastPlay {\n  playbackRate: number;\n  key: boolean;\n  pointer: {\n    type: string;\n    threshold: number;\n    inset: number;\n  };\n  reset: boolean;\n  rewind: boolean;\n}\n\ninterface FastPlayState {\n  speedValue: number;\n  isRewinding: boolean;\n}\n\nexport class FastPlayPlug extends BasePlug<FastPlay, FastPlayState> {\n  public static readonly plugName: string = \"fastPlay\";\n  protected speedCheck = false;\n  protected wasPaused = false;\n  protected lastPlaybackRate = 1;\n  protected rewindPlaybackRate = 0;\n  protected speedIntervalId: number | null = null;\n  protected speedPointerCheck = false;\n  protected speedDirection: \"forwards\" | \"backwards\" = \"forwards\";\n  protected speedTimeoutId: number | null = null;\n  protected playTriggerCounter = 0;\n\n  public wire(): void {\n    const attachListeners = () => {\n      this.ctlr.DOM.controlsContainer?.addEventListener(\"pointerdown\", this.handleSpeedPointerDown, { capture: true, signal: this.signal });\n    };\n    if (this.ctlr.state.readyState > 1) attachListeners();\n    else this.ctlr.state.once(\"readyState\", attachListeners, { signal: this.signal });\n  }\n\n  public fastPlay(pos: \"forwards\" | \"backwards\"): void {\n    if (this.speedCheck) return;\n    this.speedCheck = true;\n    this.wasPaused = this.ctlr.media.state.paused;\n    this.lastPlaybackRate = this.ctlr.config.settings.playbackRate.value;\n    // JS: this.DOM.playbackRateNotifier?.classList.add(\"tmg-video-control-active\");\n    this.ctlr.queryDOM(\".tmg-video-playback-rate-notifier\")?.classList.add(\"tmg-video-control-active\");\n    setTimeout(pos === \"backwards\" && this.config.rewind ? this.rewind : this.fastForward, 0, this.signal);\n  }\n\n  public fastForward(rate = this.config.playbackRate): void {\n    this.ctlr.config.settings.playbackRate.value = this.state.speedValue = rate;\n    this.state.isRewinding = false;\n    const notifier = this.ctlr.queryDOM(\".tmg-video-playback-rate-notifier\"),\n      timePlug = this.ctlr.getPlug<TimePlug>(\"time\");\n    // JS: this.DOM.playbackRateNotifier?.classList.remove(\"tmg-video-rewind\");\n    notifier?.classList.remove(\"tmg-video-rewind\");\n    notifier?.setAttribute(\"data-current-time\", timePlug?.toTimeText(this.ctlr.media.state.currentTime, true) ?? \"0:00\");\n    this.ctlr.media.intent.paused = false;\n  }\n\n  public rewind(rate = this.config.playbackRate): void {\n    this.ctlr.config.settings.playbackRate.value = this.rewindPlaybackRate = this.state.speedValue = rate;\n    this.state.isRewinding = true;\n    const notifier = this.ctlr.queryDOM(\".tmg-video-playback-rate-notifier\");\n    // JS: this.DOM.playbackRateNotifier?.classList.add(\"tmg-video-rewind\");\n    notifier?.classList.add(\"tmg-video-rewind\");\n    this.ctlr.media.element.addEventListener(\"play\", () => this.rewindReset(), { signal: this.signal });\n    this.speedIntervalId = setInterval(() => this.rewindVideo(), this.ctlr.state.pframeDelay - 20, this.signal);\n  }\n\n  protected rewindVideo(): void {\n    if (!this.ctlr.media.state.paused) this.ctlr.media.intent.paused = true;\n    const newTime = this.ctlr.media.state.currentTime - this.rewindPlaybackRate / this.ctlr.state.pfps,\n      notifier = this.ctlr.queryDOM(\".tmg-video-playback-rate-notifier\"),\n      timePlug = this.ctlr.getPlug<TimePlug>(\"time\");\n    this.ctlr.media.intent.currentTime = newTime;\n    this.ctlr.config.settings.css.currentPlayedPosition = this.ctlr.config.settings.css.currentThumbPosition = this.ctlr.media.state.currentTime / this.ctlr.media.status.duration;\n    notifier?.setAttribute(\"data-current-time\", timePlug?.toTimeText(this.ctlr.media.state.currentTime, true) ?? \"0:00\");\n  }\n\n  protected rewindReset(): void {\n    if (this.speedIntervalId) {\n      // this.notify(\"videopause\"); // TODO: when notify exists\n      this.ctlr.media.intent.paused = true;\n      clearInterval(this.speedIntervalId);\n      this.speedIntervalId = null;\n    } else {\n      this.speedIntervalId = setInterval(() => this.rewindVideo(), this.ctlr.state.pframeDelay - 20, this.signal);\n    }\n  }\n\n  public slowDown(): void {\n    if (!this.speedCheck) return;\n    this.speedCheck = false;\n    if (this.speedIntervalId) clearInterval(this.speedIntervalId);\n    this.ctlr.media.element.removeEventListener(\"play\", () => this.rewindReset());\n    this.ctlr.config.settings.playbackRate.value = this.lastPlaybackRate;\n    this.rewindPlaybackRate = 0;\n    this.state.speedValue = this.lastPlaybackRate;\n    this.state.isRewinding = false;\n    this.ctlr.media.intent.paused = this.config.reset ? this.wasPaused : false;\n    // this.removeOverlay(); // TODO: when overlay method exists\n    // JS: this.DOM.playbackRateNotifier?.classList.remove(\"tmg-video-control-active\", \"tmg-video-rewind\");\n    this.ctlr.queryDOM(\".tmg-video-playback-rate-notifier\")?.classList.remove(\"tmg-video-control-active\", \"tmg-video-rewind\");\n  }\n\n  protected handleSpeedPointerDown(e: PointerEvent): void {\n    if (!this.config.pointer.type.match(new RegExp(`all|${e.pointerType}`)) || e.target !== this.ctlr.DOM.controlsContainer || this.speedCheck) return;\n    [\"touchmove\", \"mouseup\", \"touchend\", \"touchcancel\"].forEach((evt) => this.ctlr.videoContainer?.addEventListener(evt, this.handleSpeedPointerUp, { signal: this.signal }));\n    this.ctlr.videoContainer?.addEventListener(\"mouseleave\", this.handleSpeedPointerOut, { signal: this.signal });\n    clearTimeout(this.speedTimeoutId!);\n    this.speedTimeoutId = setTimeout(\n      () => {\n        this.ctlr.videoContainer?.removeEventListener(\"touchmove\", this.handleSpeedPointerUp);\n        this.speedPointerCheck = true;\n        const x = e.clientX ?? (e as any).targetTouches?.[0]?.clientX;\n        const rect = this.ctlr.videoContainer.getBoundingClientRect();\n        const rLeft = x - rect.left;\n        this.speedDirection = rLeft >= rect.width * 0.5 ? \"forwards\" : \"backwards\";\n        if (rLeft < this.config.pointer.inset || rLeft > rect.width - this.config.pointer.inset) return;\n        if (this.config.rewind) [\"mousemove\", \"touchmove\"].forEach((evt) => this.ctlr.videoContainer?.addEventListener(evt, this.handleSpeedPointerMove, { signal: this.signal }));\n        this.fastPlay(this.speedDirection);\n      },\n      this.config.pointer.threshold,\n      this.signal\n    );\n  }\n\n  protected handleSpeedPointerMove(e: Event): void {\n    if ((e as any).touches?.length > 1) return;\n    this.ctlr.throttle(\n      \"speedPointerMove\",\n      () => {\n        const rect = this.ctlr.videoContainer.getBoundingClientRect(),\n          x = (e as any).clientX ?? (e as any).targetTouches?.[0]?.clientX,\n          currPos = x - rect.left >= rect.width * 0.5 ? \"forwards\" : \"backwards\";\n        if (currPos !== this.speedDirection) {\n          this.speedDirection = currPos;\n          this.slowDown();\n          this.fastPlay(this.speedDirection);\n        }\n      },\n      200\n    );\n  }\n\n  protected handleSpeedPointerUp(): void {\n    clearTimeout(this.speedTimeoutId!);\n    this.speedPointerCheck = false;\n    if (this.speedCheck && this.playTriggerCounter < 1) setTimeout(() => this.slowDown(), 0, this.signal);\n    [\"touchmove\", \"mouseup\", \"touchend\", \"touchcancel\"].forEach((evt) => this.ctlr.videoContainer?.removeEventListener(evt, this.handleSpeedPointerUp));\n    [\"mousemove\", \"touchmove\"].forEach((evt) => this.ctlr.videoContainer?.removeEventListener(evt, this.handleSpeedPointerMove));\n    this.ctlr.videoContainer?.removeEventListener(\"mouseleave\", this.handleSpeedPointerOut);\n  }\n\n  protected handleSpeedPointerOut(): void {\n    !this.ctlr.videoContainer?.matches(\":hover\") && this.handleSpeedPointerUp();\n  }\n}\n", "import { BasePlug } from \".\";\nimport type { DisabledPlug } from \"./disabled\";\nimport type { Event } from \"../types/reactor\";\nimport type { CMedia } from \"../types/contract\";\nimport type { ErrorCode } from \"../types/generics\";\n\nexport type ErrorMessages = Record<ErrorCode, string>;\n\nexport class ErrorMessagesPlug extends BasePlug<ErrorMessages> {\n  public static readonly plugName: string = \"errorMessages\";\n\n  public wire(): void {\n    this.ctlr.media.on(\"status.error\", this.handleError, { signal: this.signal });\n  }\n\n  protected handleError({ target: { value } }: Event<CMedia, \"status.error\">): void {\n    if (!value) return;\n    const code = value.code as ErrorCode,\n      message = this.config[code] || value.message || \"An unknown error occurred with the video :(\";\n    const disabledPlug = this.ctlr.getPlug<DisabledPlug>(\"disabled\");\n    disabledPlug?.deactivate(message);\n  }\n}\n", "export * from \"./base\";\nexport * from \"./buffer\";\nexport * from \"./duration\";\nexport * from \"./playPause\";\nexport * from \"./range\";\nexport * from \"./screenlocked\";\nexport * from \"./time\";\nexport * from \"./timeandduration\";\nexport * from \"./timeline\";\n", "import { Controllable } from \"../core/controllable\";\nimport { IconRegistry } from \"../core/registry\";\nimport { Controller } from \"../core/controller\";\nimport { parseForARIAKS } from \"../utils\";\n\nexport interface ComponentConstructor<T extends BaseComponent = BaseComponent> {\n  new (ctlr: Controller, config?: any, state?: any): T;\n  componentName: string;\n  isControl?: boolean;\n}\n\nexport interface ComponentState {\n  label: string;\n  cmd: string;\n  hidden: boolean;\n  disabled: boolean;\n}\n\nexport abstract class BaseComponent<Config = any, State extends ComponentState = any, El extends HTMLElement = HTMLElement> extends Controllable<Config, State> {\n  public static readonly componentName: string;\n  public static readonly isControl: boolean = false;\n  public get name() {\n    return (this.constructor as ComponentConstructor).componentName;\n  }\n  public element!: El;\n  protected get el() {\n    return this.element as El;\n  }\n\n  constructor(ctlr: Controller, config: Config, state?: State) {\n    super(ctlr, config, { disabled: false, hidden: false, ...state } as State);\n  }\n  protected onSetup(): void {\n    this.mount?.();\n    if (this.ctlr.state.readyState) this.wire?.();\n    else this.wire && this.ctlr.state.once(\"readyState\", this.wire, { signal: this.signal }); // wire after all plugs setup\n  }\n  protected onDestroy(): void {\n    this.unmount();\n  }\n\n  public abstract create(): El; // Must assign to this.element before returning\n  public mount?(): void {}\n  public unmount(): void {\n    this.element.isConnected && this.element.remove();\n  }\n  public wire?(): void {} // auto unwiring\n\n  public hide(): void {\n    this.el.classList.toggle(\"tmg-video-control-hidden\", (this.state.hidden = true));\n  }\n  public show(): void {\n    this.el.classList.toggle(\"tmg-video-control-hidden\", (this.state.hidden = false));\n  }\n  public disable(): void {\n    this.el.classList.toggle(\"tmg-video-control-disabled\", (this.state.disabled = true));\n  }\n  public enable(): void {\n    this.el.classList.toggle(\"tmg-video-control-disabled\", (this.state.disabled = false));\n  }\n\n  protected getIcon(name: string): string {\n    return IconRegistry.get(name);\n  }\n  protected setBtnARIA(doubleKeyAction?: string): void {\n    this.el.setAttribute(\"aria-label\", this.state.label);\n    this.el.setAttribute(\"aria-keyshortcuts\", parseForARIAKS(this.state.cmd));\n    if (doubleKeyAction) this.el.setAttribute(\"aria-description\", `Double-press for ${doubleKeyAction}`);\n    else if (this.el.hasAttribute(\"aria-description\")) this.el.removeAttribute(\"aria-description\");\n  }\n}\n", "import { BaseComponent } from \"./\";\nimport { createEl } from \"../utils\";\nimport type { Controller } from \"../core/controller\";\n\nexport class Buffer extends BaseComponent {\n  static componentName = \"buffer\";\n\n  public create(): HTMLElement {\n    this.element = createEl(\"div\", { className: \"tmg-video-buffer\", innerHTML: `<div class=\"tmg-video-buffer-accent\"></div><div class=\"tmg-video-buffer-eclipse\"><div class=\"tmg-video-buffer-left\"><div class=\"tmg-video-buffer-circle\"></div></div><div class=\"tmg-video-buffer-right\"><div class=\"tmg-video-buffer-circle\"></div></div></div>` });\n    return this.element;\n  }\n}\n", "import { BaseComponent, ComponentState } from \"./\";\nimport { createEl, formatKeyForDisplay } from \"../utils\";\nimport type { Controller } from \"../core/controller\";\nimport type { TimePlug } from \"../plugs\";\n\nexport type DurationConfig = undefined;\n\nexport class Duration extends BaseComponent<DurationConfig, ComponentState, HTMLButtonElement> {\n  public static readonly componentName: string = \"duration\";\n  public static readonly isControl: boolean = true;\n  protected plug?: TimePlug;\n\n  public create() {\n    this.element = createEl(\"button\", { className: \"tmg-video-total-time\" }, { draggableControl: \"\", controlId: this.name });\n    return this.element;\n  }\n\n  public wire(): void {\n    this.plug = this.ctlr.getPlug<TimePlug>(\"time\");\n    this.plug && this.element.addEventListener(\"click\", this.plug?.rotateFormat, { signal: this.signal });\n    this.ctlr.media.on(\"status.duration\", this.updateUI, { signal: this.signal, immediate: true });\n    this.ctlr.config.on(\"settings.time.format\", this.updateARIA, { signal: this.signal, immediate: true });\n  }\n\n  protected updateUI(): void {\n    this.element.textContent = this.plug?.toTimeText(this.ctlr.media.status.duration) ?? \"--:--\";\n  }\n  protected updateARIA() {\n    this.state.label = \"Switch time format\";\n    this.state.cmd = formatKeyForDisplay(this.ctlr.config.settings.time.format);\n    this.el.title = this.state.label;\n    this.setBtnARIA();\n  }\n}\n", "import { BaseComponent, ComponentState } from \".\";\nimport { createEl, formatKeyForDisplay } from \"../utils\";\n\nexport type PlayPauseConfig = undefined;\n\nexport class PlayPause extends BaseComponent<PlayPauseConfig, ComponentState, HTMLButtonElement> {\n  public static readonly componentName: string = \"playPause\";\n  public static readonly isControl: boolean = true;\n\n  public create() {\n    return (this.element = createEl(\"button\", { className: \"tmg-video-play-pause-btn\", innerHTML: this.getIcon(\"play\") + this.getIcon(\"pause\") + this.getIcon(\"replay\") }, { draggableControl: \"\", controlId: this.name }));\n  }\n\n  public wire(): void {\n    this.el.addEventListener(\"click\", this.togglePlay, { signal: this.signal });\n    this.ctlr.media.on(\"state.paused\", this.updateUI, { signal: this.signal, immediate: true });\n    this.ctlr.media.on(\"status.ended\", this.updateUI, { signal: this.signal });\n    this.ctlr.config.on(\"settings.keys.shortcuts.playPause\", this.updateARIA, { signal: this.signal });\n  }\n\n  protected updateUI() {\n    this.updateARIA();\n  }\n  protected updateARIA() {\n    this.state.label = this.ctlr.media.status.ended ? \"Replay\" : this.ctlr.media.state.paused ? \"Play\" : \"Pause\";\n    this.state.cmd = formatKeyForDisplay(this.ctlr.config.settings.keys.shortcuts.playPause);\n    this.el.title = this.state.label + this.state.cmd;\n    this.setBtnARIA();\n  }\n\n  protected togglePlay() {\n    if (this.ctlr.media.status.ended) {\n      this.ctlr.media.intent.currentTime = 0;\n      this.ctlr.media.intent.paused = false;\n    } else this.ctlr.media.intent.paused = !this.ctlr.media.state.paused;\n  }\n}\n", "import { BaseComponent, ComponentState } from \"./\";\nimport { reactive, type Reactive } from \"../tools/mixins\";\nimport { createEl, clamp, setTimeout, stepNum } from \"../utils\";\nimport type { Controller } from \"../core/controller\";\nimport type { Event } from \"../types/reactor\";\nimport type { AptRange } from \"../types/generics\";\n\nexport interface RangeConfig extends AptRange {\n  value: number;\n  previewValue: number;\n  label: string;\n  scrub: {\n    sync: boolean;\n    relative: boolean;\n    cancel: { delta: number; timeout: number };\n  };\n  wheel: {\n    disabled: boolean;\n    axisRatio: number;\n  };\n}\n\nexport interface RangeState extends ComponentState {\n  scrubbing: boolean;\n  shouldCancelScrub: boolean;\n  stallCancelScrub: boolean;\n}\n\nexport class RangeSlider<Config extends RangeConfig = RangeConfig, State extends RangeState = RangeState> extends BaseComponent<Reactive<Config>, State> {\n  declare public config: Reactive<Config> & Reactive<RangeConfig>;\n  public static readonly componentName: string = \"Range\";\n  protected container!: HTMLElement;\n  protected barsWrapper!: HTMLElement;\n  protected baseBar!: HTMLElement;\n  protected valueBar!: HTMLElement;\n  protected thumbIndicator!: HTMLElement;\n  protected lastPointerP = 0;\n  protected lastThumbPosition = 0;\n  protected cancelScrubTimeoutId: number | null = null;\n  protected rect!: DOMRect;\n  protected isVertical = false;\n  protected isRTL = false;\n\n  constructor(ctlr: Controller, options: Partial<Config> = {}) {\n    const defaults = { label: \"Range\", min: 0, max: 100, value: 0, previewValue: 50, step: 1, scrub: { sync: false, relative: true, cancel: { delta: 15, timeout: 2000 }, wheel: { disabled: false, axisRatio: 6 } } };\n    super(ctlr, reactive({ ...defaults, ...options }) as unknown as Reactive<Config>, { scrubbing: false, shouldCancelScrub: false, stallCancelScrub: false } as State);\n  }\n\n  public create(): HTMLElement {\n    this.container = createEl(\"div\", { className: \"tmg-video-range-container\", tabIndex: 0, role: \"slider\" });\n    this.barsWrapper = createEl(\"div\", { className: \"tmg-video-bars-wrapper\" });\n    this.baseBar = createEl(\"div\", { className: \"tmg-video-bar tmg-video-base-bar\" });\n    this.valueBar = createEl(\"div\", { className: \"tmg-video-bar tmg-video-value-bar\" });\n    this.thumbIndicator = createEl(\"div\", { className: \"tmg-video-thumb-indicator\" });\n    this.barsWrapper.append(this.baseBar, this.valueBar);\n    this.container.append(this.barsWrapper, this.thumbIndicator);\n    return (this.element = this.container);\n  }\n\n  public wire(): void {\n    this.container.addEventListener(\"pointerdown\", this.handlePointerDown, { signal: this.signal });\n    this.container.addEventListener(\"keydown\", this.handleKeyDown, { signal: this.signal });\n    this.container.addEventListener(\"wheel\", this.handleWheel, { passive: false, signal: this.signal });\n    this.barsWrapper.addEventListener(\"mousemove\", this.handleInput, { signal: this.signal });\n    [\"mouseleave\", \"touchend\", \"touchcancel\"].forEach((e) => this.barsWrapper.addEventListener(e, this.stopPreview, { signal: this.signal }));\n    this.config.set(\"value\", (value) => stepNum(value, this.config), { signal: this.signal });\n    this.config.on(\"label\", ({ value }) => (this.container.ariaLabel = value!), { signal: this.signal, immediate: true });\n    this.config.on(\"min\", ({ value }) => (this.container.ariaValueMin = String(value!)), { signal: this.signal, immediate: true });\n    this.config.on(\"max\", ({ value }) => (this.container.ariaValueMax = String(value!)), { signal: this.signal, immediate: true });\n    this.config.on(\"value\", this.handleValueChange, { signal: this.signal, immediate: true });\n  }\n  protected seek(value: number): void {\n    this.config.value = value;\n  }\n\n  protected handleValueChange({ target }: Event<RangeConfig, \"value\">): void {\n    const pos = this.getValueAsPos();\n    (this.updateThumbPosition(pos), this.updateValueBar(pos));\n    if (!this.state.scrubbing) this.container.ariaValueNow = String(target.value!);\n  }\n\n  protected handlePointerDown(e: PointerEvent): void {\n    if (this.state.scrubbing) return;\n    this.state.scrubbing = true;\n    this.container.setPointerCapture(e.pointerId);\n    this.rect = this.container.getBoundingClientRect();\n    const s = window.getComputedStyle(this.container);\n    this.isVertical = s.writingMode.includes(\"vertical\");\n    this.isRTL = s.direction === \"rtl\";\n    ((this.lastPointerP = this.getPos(e)), (this.lastThumbPosition = this.getValueAsPos()));\n    this.handleInput(e);\n    this.container.addEventListener(\"pointermove\", this.handleInput, { signal: this.signal });\n    this.container.addEventListener(\"pointerup\", this.stopScrubbing, { signal: this.signal });\n  }\n\n  protected stopScrubbing(): void {\n    if (!this.state.scrubbing) return;\n    this.state.scrubbing = false;\n    const newValue = this.state.shouldCancelScrub ? this.getPosAsValue(this.lastThumbPosition) : this.config.value;\n    this.seek(newValue);\n    this.allowScrubbing();\n    this.state.stallCancelScrub = true;\n    this.container.removeEventListener(\"pointermove\", this.handleInput);\n    this.container.removeEventListener(\"pointerup\", this.stopScrubbing);\n  }\n  protected stopPreview(): void {} // Subclasses can override to add preview cleanup logic\n\n  protected cancelScrubbing(): void {\n    if (this.state.stallCancelScrub || this.state.shouldCancelScrub || this.cancelScrubTimeoutId) return;\n    this.state.shouldCancelScrub = true;\n    this.cancelScrubTimeoutId = setTimeout(() => this.allowScrubbing(false), this.config.scrub.cancel.timeout, this.signal);\n  }\n  protected allowScrubbing(reset = true): void {\n    this.state.stallCancelScrub = this.state.shouldCancelScrub = false;\n    clearTimeout(this.cancelScrubTimeoutId!);\n    if (reset) this.cancelScrubTimeoutId = null;\n  }\n\n  protected handleInput(e: MouseEvent | PointerEvent): void {\n    this.ctlr.throttle(\n      `${this.config.label}RangeInput`,\n      () => {\n        const dimension = this.isVertical ? this.rect.height : this.rect.width,\n          progress = this.getPos(e),\n          pos = clamp(0, !this.state.scrubbing || this.config.scrub.relative ? progress : this.lastThumbPosition + progress - this.lastPointerP, 1),\n          value = this.getPosAsValue(pos);\n        this.config.previewValue = value;\n        if (this.state.scrubbing) {\n          if (!this.config.scrub.sync) this.updateThumbPosition(pos);\n          else this.seek(value);\n          Math.abs(pos - this.lastThumbPosition) < this.config.scrub.cancel.delta / dimension ? this.cancelScrubbing() : this.allowScrubbing();\n        }\n        this.onInput(e, pos);\n      },\n      30\n    );\n  }\n  protected onInput(e: MouseEvent | PointerEvent, pos: number): void {} // Subclasses override to add preview logic (timeline preview image, etc.)\n\n  protected handleWheel(e: WheelEvent): void {\n    if (this.config.wheel.disabled) return;\n    e.preventDefault();\n    const dimension = this.isVertical ? window.innerHeight : window.innerWidth,\n      pos = clamp(0, Math.abs(-e.deltaY), dimension * this.config.wheel.axisRatio) / (dimension * this.config.wheel.axisRatio),\n      value = this.config.value + (-e.deltaY >= 0 ? pos : -pos) * (this.config.max - this.config.min);\n    this.seek(Math.round(value));\n  }\n  protected handleKeyDown = (e: KeyboardEvent): void => {\n    const key = e.key?.toLowerCase();\n    if ([\"arrowleft\", \"arrowdown\", \"arrowright\", \"arrowup\"].includes(key)) {\n      e.preventDefault();\n      e.stopImmediatePropagation();\n      const delta = e.shiftKey ? 2 : 1,\n        direction = [\"arrowleft\", \"arrowdown\"].includes(key) ? -1 : 1;\n      this.config.value += direction * delta * this.config.step;\n    }\n  };\n\n  protected updateThumbPosition(pos: number): void {\n    this.thumbIndicator.style.cssText = `${this.isVertical ? \"inset-block-end\" : \"inset-inline-start\"}: ${pos * 100}%`;\n  }\n  protected updateValueBar(pos: number): void {\n    this.valueBar.style.cssText = `${this.isVertical ? \"block-size\" : \"inline-size\"}: ${pos * 100}%`;\n  }\n\n  protected getValueAsPos(value = this.config.value): number {\n    return (value - this.config.min) / (this.config.max - this.config.min);\n  }\n  protected getPosAsValue(pos: number): number {\n    return pos * (this.config.max - this.config.min) + this.config.min;\n  }\n  protected getPos(e: MouseEvent | PointerEvent): number {\n    const p = this.isVertical ? (e.clientY - this.rect.top) / this.rect.height : (e.clientX - this.rect.left) / this.rect.width;\n    return clamp(0, this.isRTL ? 1 - p : p, 1);\n  }\n}\n", "import { BaseComponent, ComponentState } from \".\";\nimport { createEl } from \"../utils\";\nimport type { LockedPlug } from \"../plugs\";\n\nexport type ScreenLockedConfig = undefined;\n\nexport class ScreenLocked extends BaseComponent<ScreenLockedConfig, ComponentState, HTMLButtonElement> {\n  public static readonly componentName: string = \"screenlocked\";\n  protected plug?: LockedPlug;\n\n  public create() {\n    return (this.element = createEl(\"button\", {\n      type: \"button\",\n      title: \"Unlock Screen\",\n      ariaLabel: \"Unlock Screen\",\n      className: \"tmg-video-screen-locked-btn\",\n      tabIndex: -1,\n      innerHTML: `${this.getIcon(\"lock\")}${this.getIcon(\"unlock\")}<p>Unlock controls?</p>`,\n    }));\n  }\n\n  public wire(): void {\n    this.plug = this.ctlr.getPlug<LockedPlug>(\"locked\");\n    if (!this.plug) return;\n    this.el.addEventListener(\"click\", this.handleClick, { signal: this.signal });\n    this.plug.state.on(\"visible\", this.updateUI, { signal: this.signal, immediate: true });\n  }\n\n  protected updateUI(): void {\n    if (!this.plug?.state.visible) this.el.classList.remove(\"tmg-video-control-unlock\");\n  }\n\n  protected handleClick(e: MouseEvent): void {\n    e.stopPropagation();\n    this.plug?.delayOverlay();\n    if (this.el.classList.contains(\"tmg-video-control-unlock\")) this.ctlr.config.settings.locked.disabled = true;\n    else this.el.classList.add(\"tmg-video-control-unlock\");\n  }\n}\n", "import { BaseComponent, ComponentState } from \"./\";\nimport { addSafeClicks, createEl, formatKeyForDisplay } from \"../utils\";\nimport type { TimePlug } from \"../plugs\";\n\nexport type TimeConfig = undefined;\n\nexport class Time extends BaseComponent<TimeConfig, ComponentState, HTMLButtonElement> {\n  public static readonly componentName: string = \"time\";\n  public static readonly isControl: boolean = true;\n  protected plug?: TimePlug;\n\n  public create() {\n    this.element = createEl(\"button\", { className: \"tmg-video-current-time\" }, { draggableControl: \"\", controlId: this.name });\n    return this.element;\n  }\n\n  public wire(): void {\n    this.plug = this.ctlr.getPlug<TimePlug>(\"time\");\n    addSafeClicks(this.element, this.plug?.toggleMode, this.plug?.rotateFormat, { signal: this.signal });\n    this.ctlr.media.on(\"state.currentTime\", this.updateUI, { signal: this.signal, immediate: true });\n    this.ctlr.config.on(\"settings.time.mode\", this.updateUI, { signal: this.signal });\n    this.ctlr.config.on(\"settings.time.format\", this.updateUI, { signal: this.signal });\n    this.ctlr.config.on(\"settings.keys.shortcuts.timeMode\", this.updateARIA, { signal: this.signal, immediate: true });\n    this.ctlr.config.on(\"settings.keys.shortcuts.timeFormat\", this.updateARIA, { signal: this.signal });\n  }\n\n  protected updateUI(): void {\n    this.element.textContent = this.plug?.toTimeText(this.ctlr.media.state.currentTime, true) || \"-:--\";\n  }\n  protected updateARIA() {\n    this.state.label = `Show ${this.plug?.nextMode} time`;\n    this.state.cmd = formatKeyForDisplay(this.ctlr.config.settings.time.mode);\n    this.el.title = `Switch (mode${this.state.cmd} / DblClick\u2192format${formatKeyForDisplay(this.ctlr.config.settings.keys.shortcuts.timeFormat)})`;\n    this.setBtnARIA(\"Switch time format\");\n  }\n}\n", "import { BaseComponent, ComponentState } from \".\";\nimport { addSafeClicks, createEl, formatKeyForDisplay } from \"../utils\";\nimport type { TimePlug } from \"../plugs\";\n\nexport type TimeAndDurationConfig = undefined;\n\nexport class TimeAndDuration extends BaseComponent<TimeAndDurationConfig, ComponentState, HTMLButtonElement> {\n  public static readonly componentName: string = \"timeandduration\";\n  public static readonly isControl: boolean = true;\n  protected plug?: TimePlug;\n  protected time!: HTMLElement;\n  protected bridge!: HTMLElement;\n  protected duration!: HTMLElement;\n\n  public create() {\n    this.element = createEl(\"button\", { className: \"tmg-video-time-and-duration\" }, { draggableControl: \"\", controlId: this.name });\n    this.time = createEl(\"span\", { className: \"tmg-video-current-time\" });\n    this.bridge = createEl(\"span\", { className: \"tmg-video-time-bridge\" });\n    this.duration = createEl(\"span\", { className: \"tmg-video-duration-time\" });\n    this.element.append(this.time, this.bridge, this.duration);\n    return this.element;\n  }\n\n  public wire(): void {\n    this.plug = this.ctlr.getPlug<TimePlug>(\"time\");\n    addSafeClicks(this.element, this.plug?.toggleMode, this.plug?.rotateFormat, { signal: this.signal });\n    this.ctlr.media.on(\"state.currentTime\", this.updateTime, { signal: this.signal });\n    this.ctlr.media.on(\"status.duration\", this.updateDuration, { signal: this.signal });\n    this.ctlr.config.on(\"settings.time.format\", this.updateUI, { signal: this.signal, immediate: true });\n    this.ctlr.config.on(\"settings.time.mode\", this.updateTime, { signal: this.signal });\n    this.ctlr.config.on(\"settings.keys.shortcuts.timeMode\", this.updateARIA, { signal: this.signal, immediate: true });\n    this.ctlr.config.on(\"settings.keys.shortcuts.timeFormat\", this.updateARIA, { signal: this.signal });\n  }\n\n  protected updateUI(): void {\n    const bridgeText = { digital: \"/\", human: \"of\", \"human-long\": \"out of\" }[this.ctlr.config.settings.time.format];\n    this.bridge.textContent = bridgeText || \"/\";\n    (this.updateTime(), this.updateDuration());\n  }\n  protected updateTime(): void {\n    this.time.textContent = this.plug?.toTimeText(this.ctlr.media.state.currentTime, true) || \"-:--\";\n  }\n  protected updateDuration(): void {\n    this.duration.textContent = this.plug?.toTimeText(this.ctlr.media.status.duration) || \"--:--\";\n  }\n  protected updateARIA() {\n    this.state.label = `Show ${this.plug?.nextMode} time`;\n    this.state.cmd = formatKeyForDisplay(this.ctlr.config.settings.time.mode);\n    this.el.title = `Switch (mode${this.state.cmd} / DblClick\u2192format${formatKeyForDisplay(this.ctlr.config.settings.keys.shortcuts.timeFormat)})`;\n    this.setBtnARIA(\"Switch time format\");\n  }\n}\n", "import { RangeSlider, type RangeConfig, type RangeState } from \"./\";\nimport { createEl, clamp, safeNum, setTimeout, formatMediaTime, getRenderedBox, IS_MOBILE } from \"../utils\";\nimport type { Controller } from \"../core/controller\";\nimport type { Event } from \"../types/reactor\";\nimport type { CMedia } from \"../types/contract\";\nimport type { TimePlug } from \"../plugs\";\n\nexport type PreviewConfig =\n  | boolean\n  | {\n      address?: string;\n      cols?: number;\n      rows?: number;\n      spf?: number;\n      type?: \"sprite\" | \"image\" | \"canvas\" | \"none\";\n    };\n\nexport interface TimelineConfig extends RangeConfig {\n  previews: PreviewConfig;\n}\n\nexport class Timeline extends RangeSlider<TimelineConfig> {\n  public static readonly componentName: string = \"timeline\";\n  public static readonly isControl: boolean = true;\n  protected plug?: TimePlug;\n  protected timeline!: HTMLElement;\n  protected previewContainer!: HTMLElement;\n  protected previewImg!: HTMLElement;\n  protected previewCanvas!: HTMLCanvasElement;\n  protected thumbnailImg!: HTMLElement;\n  protected thumbnailCanvas!: HTMLCanvasElement;\n  protected bufferedBar!: HTMLElement;\n  protected previewBar!: HTMLElement;\n  protected previewContext: CanvasRenderingContext2D | null = null;\n  protected thumbnailContext: CanvasRenderingContext2D | null = null;\n\n  constructor(ctlr: Controller, options: Partial<TimelineConfig> = {}) {\n    super(ctlr, { label: \"Video timeline\", ...{ ...options, previews: options.previews } });\n  }\n\n  public override create() {\n    const element = super.create();\n    this.thumbnailImg = createEl(\"div\", { className: \"tmg-video-thumbnail\" });\n    this.thumbnailCanvas = createEl(\"canvas\", { className: \"tmg-video-thumbnail\" });\n    this.timeline = createEl(\"div\", { className: \"tmg-video-timeline\" });\n    this.bufferedBar = createEl(\"div\", { className: \"tmg-video-bar tmg-video-buffered-bar\" });\n    this.previewBar = createEl(\"div\", { className: \"tmg-video-bar tmg-video-preview-bar\" });\n    this.previewContainer = createEl(\"div\", { className: \"tmg-video-preview-container\" });\n    this.previewImg = createEl(\"div\", { className: \"tmg-video-preview\" });\n    this.previewCanvas = createEl(\"canvas\", { className: \"tmg-video-preview\" });\n    this.previewContainer.append(this.previewImg, this.previewCanvas);\n    this.barsWrapper.append(this.bufferedBar, this.previewBar);\n    this.barsWrapper.replaceWith(this.timeline);\n    this.timeline.append(this.barsWrapper, this.previewContainer);\n    this.container.dataset.controlId = this.name;\n    return element;\n  }\n\n  public mount(): void {\n    this.ctlr.DOM.controlsContainer?.prepend(this.thumbnailImg, this.thumbnailCanvas);\n    this.previewContext = this.previewCanvas.getContext(\"2d\");\n    this.thumbnailContext = this.thumbnailCanvas.getContext(\"2d\");\n  }\n\n  public override wire(): void {\n    super.wire();\n    this.plug = this.ctlr.getPlug<TimePlug>(\"time\");\n    this.ctlr.media.on(\"status.loadedMetadata\", this.handleLoadedMetadata, { signal: this.signal, immediate: true });\n    this.ctlr.media.on(\"state.currentTime\", this.handleTimeUpdate, { signal: this.signal, immediate: true });\n    this.ctlr.media.on(\"status.buffered\", this.handleProgress, { signal: this.signal, immediate: true });\n    this.ctlr.media.on(\"status.duration\", this.handleDurationChange, { signal: this.signal, immediate: true });\n    this.ctlr.state.on(\"dimensions.container\", this.syncThumbnailSize, { signal: this.signal, immediate: true });\n    this.ctlr.config.on(\"settings.time.format\", this.updatePreviewTime, { signal: this.signal, immediate: true });\n    this.ctlr.config.on(\"settings.time.mode\", this.updatePreviewTime, { signal: this.signal });\n    this.ctlr.config.watch(\"settings.time.previews\", (value) => (this.config.previews = value!), { signal: this.signal, immediate: true });\n    this.ctlr.config.watch(\"settings.time.seekSync\", (value) => (this.config.scrub.sync = value!), { signal: this.signal, immediate: true });\n    this.ctlr.config.on(\"settings.css.currentThumbnailWidth\", ({ value }) => (this.thumbnailCanvas.width = Number(value)), { signal: this.signal, immediate: true });\n    this.ctlr.config.on(\"settings.css.currentThumbnailHeight\", ({ value }) => (this.thumbnailCanvas.height = Number(value)), { signal: this.signal, immediate: true });\n    this.state.on(\"scrubbing\", this.handleScrubbingChange, { signal: this.signal });\n    this.config.on(\"previewValue\", this.updatePreviewTime, { signal: this.signal });\n    this.config.on(\"previews\", this.handlePreviewChange, { signal: this.signal, immediate: true });\n  }\n  protected override seek(value: number): void {\n    super.seek(value);\n    this.ctlr.media.intent.currentTime = safeNum((value / 100) * this.ctlr.media.status.duration);\n  }\n\n  protected handleLoadedMetadata(): void {\n    this.ctlr.pseudoVideo.addEventListener(\"timeupdate\", (e) => ((e.target as any).ontimeupdate = this.syncCanvasPreviews), { signal: this.signal, once: true }); // anonymous low cost\n  }\n  protected handleTimeUpdate({ target }: Event<CMedia, \"state.currentTime\">): void {\n    if (this.state.scrubbing) return;\n    const duration = safeNum(this.ctlr.media.status.duration, 60);\n    this.config.value = safeNum(target.value! / duration) * 100;\n    this.container.ariaValueText = `${formatMediaTime({ time: target.value, format: \"human-long\" })} out of ${formatMediaTime({ time: duration, format: \"human-long\" })}`;\n  }\n  protected handleProgress(): void {\n    const buffered = this.ctlr.media.status.buffered;\n    for (let i = 0; i < buffered.length; i++) {\n      if (buffered.start(buffered.length - 1 - i) < this.ctlr.media.state.currentTime) {\n        this.bufferedBar.style.width = `${safeNum(buffered.end(buffered.length - 1 - i) / this.ctlr.media.status.duration) * 100}%`;\n        break;\n      }\n    }\n  }\n  protected handleDurationChange({ target }: Event<CMedia, \"status.duration\">): void {\n    this.container.ariaValueMax = String(Math.floor(target.value!));\n  }\n\n  protected handleScrubbingChange({ target }: Event<RangeState, \"scrubbing\">): void {\n    this.ctlr.videoContainer.classList.toggle(\"tmg-video-scrubbing\", target.value);\n    if (!target.value) this.stopPreview();\n  }\n  protected handlePreviewChange({ target }: Event<TimelineConfig, \"previews\">): void {\n    const value = target.value === true ? {} : target.value;\n    if (!value) return void (this.ctlr.videoContainer.dataset.previewType = \"none\");\n    const manual = value.address && (value.spf || (value.cols && value.rows)),\n      type = manual ? (value.cols && value.rows ? \"sprite\" : \"image\") : \"canvas\";\n    this.ctlr.videoContainer.dataset.previewType = type;\n    if (type === \"sprite\" && value.address) this.ctlr.config.settings.css.currentPreviewUrl = this.ctlr.config.settings.css.currentThumbnailUrl = `url(${value.address})`;\n    else this.ctlr.config.settings.css.currentPreviewPosition = this.ctlr.config.settings.css.currentThumbnailPosition = \"center\";\n    if (this.ctlr.media.status.loadedMetadata) return;\n    (this.ctlr.setCanvasFallback(this.previewCanvas, this.previewContext!), this.ctlr.setCanvasFallback(this.thumbnailCanvas, this.thumbnailContext!));\n    this.ctlr.pseudoVideo.ontimeupdate = null;\n  }\n\n  public override stopScrubbing(): void {\n    if (!this.state.scrubbing) return;\n    if (!this.state.shouldCancelScrub) this.ctlr.media.intent.currentTime = this.config.value;\n    super.stopScrubbing();\n  }\n  protected stopPreview(): void {\n    setTimeout(() => this.ctlr.videoContainer.classList.remove(\"tmg-video-previewing\"), 0, this.signal);\n  }\n\n  protected onInput(e: MouseEvent | PointerEvent, pos: number): void {\n    this.ctlr.videoContainer.classList.add(\"tmg-video-previewing\");\n    const { offsetLeft: pLeft, offsetWidth: pWidth } = this.previewContainer,\n      previewImgMin = pWidth / 2 / this.rect.width;\n    const previewImgPos = clamp(previewImgMin, pos, 1 - previewImgMin);\n    this.previewContainer.style.left = `${previewImgPos * 100}%`;\n    const arrowBW = 5,\n      arrowPositionMin = Math.max(arrowBW / 5, 5),\n      arrowPos = pos < previewImgMin ? `${Math.max(pos * this.rect.width, arrowPositionMin + arrowBW / 2 + 1)}px` : pos > 1 - previewImgMin ? `${Math.min(pWidth / 2 + pos * this.rect.width - pLeft, pWidth - arrowPositionMin - arrowBW - 1)}px` : \"50%\";\n    this.previewContainer.style.setProperty(\"--arrow-position\", arrowPos);\n    this.previewBar.style.width = `${pos * 100}%`;\n\n    const previewConfig = this.config.previews,\n      type = this.ctlr.videoContainer.dataset.previewType;\n    if (type === \"sprite\" && previewConfig && typeof previewConfig !== \"boolean\" && previewConfig.cols && previewConfig.rows) {\n      const duration = this.ctlr.media.status.duration,\n        spf = previewConfig.spf || 1,\n        frameIndex = Math.floor((pos * (duration || 0)) / spf) || 1,\n        { cols, rows } = previewConfig,\n        clampedI = Math.min(frameIndex, cols * rows - 1),\n        xPercent = ((clampedI % cols) * 100) / (cols - 1 || 1),\n        yPercent = (Math.floor(clampedI / cols) * 100) / (rows - 1 || 1);\n      if (!IS_MOBILE) this.ctlr.config.settings.css.currentPreviewPosition = `${xPercent}% ${yPercent}%`;\n      if (this.state.scrubbing) this.ctlr.config.settings.css.currentThumbnailPosition = `${xPercent}% ${yPercent}%`;\n    } else if (type === \"image\" && previewConfig && typeof previewConfig !== \"boolean\" && previewConfig.address) {\n      const duration = this.ctlr.media.status.duration,\n        spf = previewConfig.spf || 1,\n        frameIndex = Math.floor((pos * (duration || 0)) / spf) || 1,\n        url = `url(${previewConfig.address.replace(\"$\", String(frameIndex))})`;\n      if (!IS_MOBILE) this.ctlr.config.settings.css.currentPreviewUrl = url;\n      if (this.state.scrubbing) this.ctlr.config.settings.css.currentThumbnailUrl = url;\n    } else if (previewConfig && !this.ctlr.state.frameReadyPromise && this.ctlr.pseudoVideo) {\n      const duration = this.ctlr.media.status.duration;\n      this.ctlr.pseudoVideo.currentTime = pos * (duration || 0);\n    }\n  }\n\n  protected updatePreviewTime(): void {\n    if (this.plug) this.previewContainer.dataset.previewTime = this.plug.toTimeText(this.config.previewValue, true);\n  }\n  protected syncCanvasPreviews(): void {\n    if (!this.ctlr.media.status.loadedData || !this.ctlr.pseudoVideo) return;\n    this.ctlr.throttle(\n      \"canvasPreviewSync\",\n      () => {\n        const pseudoVideo = this.ctlr.pseudoVideo;\n        if (!pseudoVideo || !this.previewContext || !this.thumbnailContext) return;\n        this.previewCanvas.width = this.previewCanvas.offsetWidth || this.previewCanvas.width;\n        this.previewCanvas.height = this.previewCanvas.offsetHeight || this.previewCanvas.height;\n        this.previewContext.drawImage(pseudoVideo, 0, 0, this.previewCanvas.width, this.previewCanvas.height);\n        if (this.state.scrubbing) this.thumbnailContext.drawImage(pseudoVideo, 0, 0, this.thumbnailCanvas.width, this.thumbnailCanvas.height);\n      },\n      33\n    );\n  }\n  protected syncThumbnailSize(): void {\n    if (!this.thumbnailCanvas || !this.thumbnailImg) return;\n    const { width = this.ctlr.videoContainer.offsetWidth, height = this.ctlr.videoContainer.offsetHeight } = getRenderedBox(this.ctlr.media.element);\n    this.ctlr.config.settings.css.currentThumbnailHeight = height + 1 + \"px\";\n    this.ctlr.config.settings.css.currentThumbnailWidth = width + 1 + \"px\";\n  }\n}\n", "export * from \"./media-defaults\";\nexport * from \"./config-defaults\";\nexport * from \"./generics\";", "import \"./css/index.scss\";\nimport \"./ts/types/global.d.ts\";\nimport { loadResource } from \"./ts/utils/dom\";\nimport { init } from \"./ts/tools/runtime\";\n\nif (typeof window !== \"undefined\") {\n  window.tmg ??= {} as any;\n  window.TMG_VIDEO_ALT_IMG_SRC ??= \"/TMG_MEDIA_PROTOTYPE/assets/icons/movie-tape.png\";\n  window.TMG_VIDEO_CSS_SRC ??= \"/TMG_MEDIA_PROTOTYPE/prototype-3/prototype-3-video.css\";\n  window.T007_TOAST_CSS_SRC ??= \"/T007_TOOLS/T007_toast_library/T007_toast.css\";\n  window.T007_TOAST_JS_SRC ??= \"/T007_TOOLS/T007_toast_library/T007_toast.js\";\n  window.T007_INPUT_CSS_SRC ??= \"/T007_TOOLS/T007_input_library/T007_input.css\";\n  window.T007_INPUT_JS_SRC ??= \"/T007_TOOLS/T007_input_library/T007_input.js\";\n  console.log(\"%cTMG Media Player Available\", \"color: darkturquoise\");\n  (loadResource(window.TMG_VIDEO_CSS_SRC), loadResource(window.T007_TOAST_JS_SRC, \"script\", { module: true }), loadResource(window.T007_INPUT_JS_SRC, \"script\"));\n  init();\n} else {\n  console.log(\"\\x1b[38;2;139;69;19mTMG Media Player Unavailable\\x1b[0m\");\n  (console.error(\"TMG Media Player cannot run in a terminal!\"), console.warn(\"Consider moving to a browser environment to use the TMG Media Player\"));\n}\n\nexport * from \"./api\";\n"],
  "mappings": "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",
  "names": ["loadResource", "requestAnimationFrame", "setTimeout", "w", "w", "mutationObserver", "resizeObserver", "bbox", "object", "w", "state", "m", "base", "key", "r", "g", "b", "combo", "required", "actual", "setTimeout", "requestAnimationFrame", "loadResource", "w", "owner", "p", "state", "state", "setTimeout", "state", "requestAnimationFrame", "modes", "loadResource", "GesturePlug", "OverlayPlug", "VolumePlug", "v", "w", "w", "setTimeout", "OverlayPlug", "setTimeout", "setTimeout", "value", "setTimeout", "setTimeout", "setTimeout", "setTimeout", "setTimeout", "GesturePlug", "state", "VolumePlug", "setTimeout", "Buffer", "state", "Buffer", "setTimeout", "setTimeout", "loadResource"]
}
