{
  "version": 3,
  "sources": ["../src/ts/utils/index.ts", "../src/ts/utils/dom.ts", "../src/ts/utils/quirks/ripple.ts", "../src/ts/utils/quirks/scroll.ts", "../src/ts/utils/quirks/arrowFocusNav.ts", "../src/ts/consts/media-defaults.ts", "../src/ts/utils/media.ts", "../src/ts/utils/time.ts", "../src/ts/utils/obj.ts", "../src/ts/utils/num.ts", "../src/ts/consts/generics.ts", "../src/ts/utils/str.ts", "../src/ts/utils/file.ts", "../src/ts/utils/color.ts", "../src/ts/utils/browser.ts", "../src/ts/utils/keys.ts", "../src/ts/utils/fn.ts", "../src/ts/consts/config-defaults.ts", "../src/ts/tools/player.ts", "../src/ts/tools/runtime.ts", "../src/ts/tools/mixins/methodist.ts", "../src/ts/core/reactor.ts", "../src/ts/tools/mixins/reactive.ts", "../src/ts/tools/mixins/nuke.ts", "../src/ts/core/registry.ts", "../src/ts/core/controllable.ts", "../src/ts/media/base.ts", "../src/ts/media/html5.ts", "../src/ts/core/controller.ts", "../src/index.ts"],
  "sourcesContent": ["// DOM & UI\nexport * from \"./dom\";\nexport * from \"./quirks\";\n\n// Media\nexport * from \"./media\";\nexport * from \"./time\";\n\n// Data & Objects\nexport * from \"./obj\";\nexport * from \"./num\";\nexport * from \"./str\";\nexport * from \"./file\";\nexport * from \"./color\";\n\n// Browser & Environment\nexport * from \"./browser\";\nexport * from \"./keys\";\n\n// Utilities\nexport * from \"./fn\";\n", "import { isSameURL } from \".\";\n\n// Types\nexport type Dataset = Record<string, string | number>;\nexport type Style = Partial<CSSStyleDeclaration>;\ntype Direction = \"x\" | \"y\";\ntype Position = \"before\" | \"after\" | \"at\";\ntype ResourceType = \"style\" | \"script\" | string;\ntype SafeClickEl = HTMLElement & {\n  _clickHandler?: (e: MouseEvent) => void;\n  _dblClickHandler?: (e: MouseEvent) => void;\n  _clickTimeoutId?: ReturnType<typeof setTimeout>;\n};\n\ninterface LoadResourceOptions {\n  module?: boolean;\n  media?: string;\n  crossOrigin?: string;\n  integrity?: string;\n}\n\n// Element Factory\nexport function createEl<K extends keyof HTMLElementTagNameMap>(tag: K, props?: Partial<HTMLElementTagNameMap[K]>, dataset?: Dataset, styles?: Style): HTMLElementTagNameMap[K];\nexport function createEl(tag: string, props?: Partial<HTMLElement>, dataset?: Dataset, styles?: Style): HTMLElement | null;\nexport function createEl(tag: string, props: Record<string, unknown> = {}, dataset: Dataset = {}, styles: Style = {}): HTMLElement | null {\n  return assignEl(tag ? document?.createElement(tag) : undefined, props, dataset, styles) ?? null;\n}\n\nexport function assignEl<K extends keyof HTMLElementTagNameMap>(el?: HTMLElementTagNameMap[K], props?: Partial<HTMLElementTagNameMap[K]>, dataset?: Dataset, styles?: Style): void;\nexport function assignEl(el?: HTMLElement, props?: Partial<HTMLElement>, dataset?: Dataset, styles?: Style): void;\nexport function assignEl(el?: HTMLElement, props: Record<string, unknown> = {}, dataset: Dataset = {}, styles: Style = {}): void {\n  if (!el) return;\n  for (const k of Object.keys(props)) if (props[k] !== undefined) (el as unknown as Record<string, unknown>)[k] = props[k];\n  for (const k of Object.keys(dataset)) if (dataset[k] !== undefined) (el.dataset as DOMStringMap)[k] = String(dataset[k]);\n  for (const k of Object.keys(styles)) if (styles[k as keyof Style] !== undefined) (el.style as unknown as Record<string, unknown>)[k] = styles[k as keyof Style];\n}\n\n// Resource Loading\nconst _resourceCache: Partial<Record<string, Promise<HTMLElement | void>>> = {};\nexport function loadResource(src: string, type: ResourceType = \"style\", { module, media, crossOrigin, integrity }: LoadResourceOptions = {}): Promise<HTMLElement | void> {\n  if (_resourceCache[src]) return _resourceCache[src];\n  if (type === \"script\" ? Array.prototype.some.call(document.scripts, (s) => isSameURL(s.src, src)) : type === \"style\" ? Array.prototype.some.call(document.styleSheets, (s) => isSameURL((s as CSSStyleSheet).href ?? \"\", src)) : false) return Promise.resolve();\n  _resourceCache[src] = new Promise<HTMLElement | void>((resolve, reject) => {\n    if (type === \"script\") {\n      const script = createEl(\"script\", { src, type: module ? \"module\" : \"text/javascript\", crossOrigin, integrity, onload: () => resolve(script as HTMLElement), onerror: () => reject(new Error(`Script load error: ${src}`)) } as Partial<HTMLScriptElement>);\n      if (!script) return reject(new Error(`Script load error: ${src}`));\n      document.body.append(script);\n    } else if (type === \"style\") {\n      const link = createEl(\"link\", { rel: \"stylesheet\", href: src, media, onload: () => resolve(link as HTMLElement), onerror: () => reject(new Error(`Stylesheet load error: ${src}`)) } as Partial<HTMLLinkElement>);\n      if (!link) return reject(new Error(`Stylesheet load error: ${src}`));\n      document.head.append(link);\n    } else reject(new Error(`Unsupported resource type: ${type}`));\n  });\n  return _resourceCache[src];\n}\n\n// Viewport Checks\nexport function inDocView(el: Element, axis: \"x\" | \"y\" = \"y\"): boolean {\n  const rect = el.getBoundingClientRect(),\n    inX = rect.left + window.scrollX >= 0 && rect.right + window.scrollX <= window.scrollX + (window.innerWidth || document.documentElement.clientWidth),\n    inY = rect.top + window.scrollY >= 0 && rect.bottom + window.scrollY <= window.scrollY + (window.innerHeight || document.documentElement.clientHeight);\n  return axis === \"x\" ? inY : axis === \"y\" ? inX : inY && inX;\n}\n\nexport const getElSiblingAt = (p: number, dir: Direction, els: Element[], pos: Position = \"after\"): Element | undefined => {\n  return els?.reduce(\n    (closest: { offset: number; element: Element | undefined }, child) => {\n      const { top: cT, left: cL, width: cW, height: cH } = child.getBoundingClientRect(),\n        offset = p - (dir === \"y\" ? cT : cL) - (dir === \"y\" ? cH : cW) / 2,\n        condition = pos === \"after\" ? offset < 0 && offset > closest.offset : pos === \"before\" ? offset > 0 && offset < closest.offset : pos === \"at\" ? Math.abs(offset) <= (dir === \"y\" ? cH : cW) / 2 && Math.abs(offset) < Math.abs(closest.offset) : false;\n      return condition ? { offset, element: child } : closest;\n    },\n    { offset: pos === \"after\" ? -Infinity : Infinity, element: undefined }\n  ).element;\n};\n\n// Fullscreen & Picture-in-Picture\nexport const queryFullscreen = (): boolean => Boolean(queryFullscreenEl());\nexport const queryFullscreenEl = (): Element | null => {\n  const d = document as any;\n  return d.fullscreenElement || d.webkitFullscreenElement || d.mozFullScreenElement || d.msFullscreenElement || null;\n};\n\nexport const supportsFullscreen = (): boolean => {\n  const d = document as any,\n    v = HTMLVideoElement.prototype as any;\n  return Boolean(d.fullscreenEnabled || d.mozFullscreenEnabled || d.msFullscreenEnabled || d.webkitFullscreenEnabled || d.webkitSupportsFullscreen || v.webkitEnterFullscreen);\n};\nexport const supportsPictureInPicture = (): boolean => {\n  const w = window as any,\n    d = document as any,\n    v = HTMLVideoElement.prototype as any;\n  return Boolean(d.pictureInPictureEnabled || v.requestPictureInPicture || w.documentPictureInPicture);\n};\n\nexport const enterFullscreen = (el: Element): Promise<void> => {\n  const e = el as any;\n  return e.webkitEnterFullscreen ? e.webkitEnterFullscreen() : e.requestFullscreen ? e.requestFullscreen() : e.mozRequestFullScreen ? e.mozRequestFullScreen() : e.webkitRequestFullscreen ? e.webkitRequestFullscreen() : e.msRequestFullscreen ? e.msRequestFullscreen() : Promise.reject(new Error(\"Fullscreen API is not supported\"));\n};\nexport const exitFullscreen = (el: Element): Promise<void> => {\n  const e = el as any,\n    d = document as any;\n  return e.webkitExitFullscreen ? e.webkitExitFullscreen() : d.exitFullscreen ? d.exitFullscreen() : d.mozCancelFullScreen ? d.mozCancelFullScreen() : d.webkitExitFullscreen ? d.webkitExitFullscreen() : d.msExitFullscreen ? d.msExitFullscreen() : Promise.reject(new Error(\"Fullscreen API is not supported\"));\n};\n\n// Safe Click Handling\nexport function addSafeClicks(el: SafeClickEl | null | undefined, onClick?: (e: MouseEvent) => void | null, onDblClick?: (e: MouseEvent) => void | null, options?: boolean | AddEventListenerOptions): void {\n  el && removeSafeClicks(el);\n  el?.addEventListener(\"click\", (el._clickHandler = (e: MouseEvent) => (clearTimeout(el._clickTimeoutId), (el._clickTimeoutId = setTimeout(() => onClick?.(e), 300)))), options);\n  el?.addEventListener(\"dblclick\", (el._dblClickHandler = (e: MouseEvent) => (clearTimeout(el._clickTimeoutId), onDblClick?.(e))), options);\n}\nexport const removeSafeClicks = (el: SafeClickEl | null | undefined): void => (el?.removeEventListener(\"click\", el._clickHandler as EventListener), el?.removeEventListener(\"dblclick\", el._dblClickHandler as EventListener));\n\n// DOM Observers\ndeclare global {\n  interface Element {\n    _tmgResizeCbs?: Set<(entry: ResizeObserverEntry) => void>;\n    _tmgIntersectCbs?: Set<(entry: IntersectionObserverEntry) => void>;\n    _tmgMutationCbs?: Set<(mutations: MutationRecord[]) => void>;\n  }\n}\n\nexport const intersectionObserver =\n  typeof window !== \"undefined\"\n    ? new IntersectionObserver(\n        (entries) => {\n          for (const entry of entries) entry.target._tmgIntersectCbs?.forEach((cb) => cb(entry));\n        },\n        { root: null, rootMargin: \"0px\", threshold: 0.3 }\n      )\n    : null;\n\nexport const resizeObserver =\n  typeof window !== \"undefined\"\n    ? new ResizeObserver((entries) => {\n        for (const entry of entries) entry.target._tmgResizeCbs?.forEach((cb) => cb(entry));\n      })\n    : null;\n\nexport const mutationObserver =\n  typeof window !== \"undefined\"\n    ? new MutationObserver((mutations) => {\n        // Dispatch to specific targets if they are being observed directly\n        // Note: MutationObserver works differently; this handles the 'root' observer callbacks\n        // We map the *target* of the observation, not the mutation target usually.\n        // For this util, we assume the observer instance calls the callback associated with the observed node.\n        // Since we use one global observer, we need to map back.\n        // Actually, for MutationObserver it's cleaner to keep separate instances if configs differ,\n        // but for \"utils\" style, we can use a Map logic or just basic callback sets.\n        // Current implementation assumes the caller handles the mutation list.\n        const target = mutations[0].target as Element; // Batch usually targets one observer\n        target._tmgMutationCbs?.forEach((cb) => cb(mutations));\n      })\n    : null;\n\n// --- PUBLIC API ---\nexport function observeResize(el: Element, cb: (entry: ResizeObserverEntry) => void) {\n  (el._tmgResizeCbs ?? (el._tmgResizeCbs = new Set())).add(cb);\n  resizeObserver?.observe(el);\n  return () => (el._tmgResizeCbs?.delete(cb), !el._tmgResizeCbs?.size && resizeObserver?.unobserve(el));\n}\n\nexport function observeIntersection(el: Element, cb: (entry: IntersectionObserverEntry) => void) {\n  (el._tmgIntersectCbs ?? (el._tmgIntersectCbs = new Set())).add(cb);\n  intersectionObserver?.observe(el);\n  return () => (el._tmgIntersectCbs?.delete(cb), !el._tmgIntersectCbs?.size && intersectionObserver?.unobserve(el));\n}\n\nexport function observeMutation(el: Element, cb: (mutations: MutationRecord[]) => void, options: MutationObserverInit) {\n  (el._tmgMutationCbs ?? (el._tmgMutationCbs = new Set())).add(cb);\n  mutationObserver?.observe(el, options);\n  return () => {\n    el._tmgMutationCbs?.delete(cb);\n    // Note: MutationObserver.unobserve stops EVERYTHING on that observer.\n    // If we share one observer, we can't unobserve just one element easily without disconnecting all.\n    // For safety in this \"util\" pattern with a shared observer, we just leave it connected or use dedicated observers.\n    // Given the constraints, we'll keep it simple: disconnect if empty only works if 1-to-1.\n    // For now, we assume persistent observation for system logic.\n  };\n}\n", "import { createEl } from \"..\";\n\nexport const rippleHandler = (e: PointerEvent, target?: HTMLElement, forceCenter: boolean = false): void => {\n  const el = target || (e.currentTarget as HTMLElement);\n  if ((e.target !== e.currentTarget && (e.target as unknown as Element)?.matches(\"button,[href],input,label,select,textarea,[tabindex]:not([tabindex='-1'])\")) || el?.hasAttribute(\"disabled\") || (e.pointerType === \"mouse\" && e.button !== 0)) return;\n  e.stopPropagation?.();\n  const { offsetWidth: rW, offsetHeight: rH } = el,\n    { width: w, height: h, left: l, top: t } = el.getBoundingClientRect(),\n    size = Math.max(rW, rH),\n    x = forceCenter ? rW / 2 - size / 2 : ((e.clientX - l) * rW) / w - size / 2,\n    y = forceCenter ? rH / 2 - size / 2 : ((e.clientY - t) * rH) / h - size / 2,\n    wrapper = createEl(\"span\", { className: \"tmg-video-ripple-container\" }),\n    ripple = createEl(\"span\", { className: \"tmg-video-ripple tmg-video-ripple-hold\" }, {}, { cssText: `width:${size}px;height:${size}px;left:${x}px;top:${y}px;` });\n  let canRelease = false;\n  ripple?.addEventListener(\"animationend\", () => (canRelease = true), { once: true });\n  el.append(wrapper?.appendChild(ripple!)!.parentElement!);\n  const release = (): void => {\n    if (!canRelease) return ripple?.addEventListener(\"animationend\", release, { once: true });\n    ripple?.classList.replace(\"tmg-video-ripple-hold\", \"tmg-video-ripple-fade\");\n    ripple?.addEventListener(\"animationend\", () => setTimeout(() => wrapper?.remove()));\n    [\"pointerup\", \"pointercancel\"].forEach((evt) => el.ownerDocument.defaultView?.removeEventListener(evt, release));\n  };\n  [\"pointerup\", \"pointercancel\"].forEach((evt) => el.ownerDocument.defaultView?.addEventListener(evt, release));\n};\n", "import { createEl } from \"..\";\n\n// ============ Vertical Scrollerator ============\ninterface ScrolleratorOptions {\n  baseSpeed?: number;\n  maxSpeed?: number;\n  stepDelay?: number;\n  baseRate?: number;\n  lineHeight?: number;\n  margin?: number;\n  car?: Window | HTMLElement;\n}\n\ninterface Scrollerator {\n  drive: (clientY: number, brake?: boolean, offsetY?: number) => number;\n  reset: () => void;\n}\n\nexport const initVScrollerator = ({ baseSpeed = 3, maxSpeed = 10, stepDelay = 2000, baseRate = 16, lineHeight = 80, margin = 80, car = window }: ScrolleratorOptions = {}): Scrollerator => {\n  let linesPerSec = baseSpeed,\n    accelId: ReturnType<typeof setTimeout> | null = null,\n    lastTime: number | null = null;\n  const drive = (clientY: number, brake = false, offsetY = 0): number => {\n    if (car !== window) clientY -= offsetY;\n    const now = performance.now(),\n      speed = linesPerSec * lineHeight * ((lastTime ? now - lastTime : baseRate) / 1000);\n    if (!brake && (clientY < margin || clientY > ((car as any).innerHeight ?? (car as any).offsetHeight) - margin)) {\n      accelId === null ? (accelId = setTimeout(() => (linesPerSec += 1), stepDelay)) : linesPerSec > baseSpeed && (linesPerSec = Math.min(linesPerSec + 1, maxSpeed));\n      (car as any).scrollBy?.(0, clientY < margin ? -speed : speed);\n    } else reset();\n    return ((lastTime = !brake ? now : null), speed);\n  };\n  const reset = () => (accelId && clearTimeout(accelId), (accelId = null), (linesPerSec = baseSpeed), (lastTime = null));\n  return { drive, reset };\n};\n\n// ============ Scroll Assist ============\ninterface ScrollAssistControl {\n  update: () => void;\n  destroy: () => void;\n}\n\ninterface ScrollAssistOptions {\n  pxPerSecond?: number;\n  assistClassName?: string;\n  vertical?: boolean;\n  horizontal?: boolean;\n}\n\nconst _SCROLLERS = new WeakMap<HTMLElement, ScrollAssistControl>();\nconst _SCROLLER_R_OBSERVER: ResizeObserver | false = typeof window !== \"undefined\" && new ResizeObserver((entries) => entries.forEach(({ target }) => _SCROLLERS.get(target as HTMLElement)?.update()));\nconst _SCROLLER_M_OBSERVER: MutationObserver | false =\n  typeof window !== \"undefined\" &&\n  new MutationObserver((entries) => {\n    const els = new Set<HTMLElement>();\n    for (const entry of entries) {\n      let node: Element | null = entry.target instanceof Element ? entry.target : null;\n      while (node && !_SCROLLERS.has(node as HTMLElement)) node = node.parentElement;\n      if (node) els.add(node as HTMLElement);\n    }\n    for (const el of els) _SCROLLERS.get(el)?.update();\n  });\n\nexport const initScrollAssist = (el: HTMLElement, { pxPerSecond = 80, assistClassName = \"tmg-video-controls-scroll-assist\", vertical = true, horizontal = true }: ScrollAssistOptions = {}): ScrollAssistControl | void => {\n  const parent = el?.parentElement;\n  if (!parent || _SCROLLERS.has(el)) return;\n  const assist: Record<string, HTMLElement> = {};\n  let scrollId: number | null = null,\n    last = performance.now(),\n    assistWidth = 20,\n    assistHeight = 20;\n  const update = () => {\n    const hasInteractive = !!parent.querySelector('button, a[href], input, select, textarea, [contenteditable=\"true\"], [tabindex]:not([tabindex=\"-1\"])');\n    if (horizontal) {\n      const w = assist.left?.offsetWidth || assistWidth,\n        check = hasInteractive ? el.clientWidth < w * 2 : false;\n      assist.left.style.display = check ? \"none\" : el.scrollLeft > 0 ? \"block\" : \"none\";\n      assist.right.style.display = check ? \"none\" : el.scrollLeft + el.clientWidth < el.scrollWidth - 1 ? \"block\" : \"none\";\n      assistWidth = w;\n    }\n    if (vertical) {\n      const h = assist.up?.offsetHeight || assistHeight,\n        check = hasInteractive ? el.clientHeight < h * 2 : false;\n      assist.up.style.display = check ? \"none\" : el.scrollTop > 0 ? \"block\" : \"none\";\n      assist.down.style.display = check ? \"none\" : el.scrollTop + el.clientHeight < el.scrollHeight - 1 ? \"block\" : \"none\";\n      assistHeight = h;\n    }\n  };\n  const scroll = (dir: string) => {\n    const frame = () => {\n      const now = performance.now(),\n        dt = now - last;\n      last = now;\n      const d = (pxPerSecond * dt) / 1000;\n      if (dir === \"left\") el.scrollLeft = Math.max(0, el.scrollLeft - d);\n      if (dir === \"right\") el.scrollLeft = Math.min(el.scrollWidth - el.clientWidth, el.scrollLeft + d);\n      if (dir === \"up\") el.scrollTop = Math.max(0, el.scrollTop - d);\n      if (dir === \"down\") el.scrollTop = Math.min(el.scrollHeight - el.clientHeight, el.scrollTop + d);\n      scrollId = requestAnimationFrame(frame);\n    };\n    last = performance.now();\n    frame();\n  };\n  const stop = () => (cancelAnimationFrame(scrollId ?? 0), (scrollId = null));\n  const addAssist = (dir: string): void => {\n    const div = createEl(\"div\", { className: assistClassName }, { scrollDirection: dir }, { display: \"none\" });\n    if (!div) return;\n    [\"pointerenter\", \"dragenter\"].forEach((evt) => div.addEventListener(evt, () => scroll(dir)));\n    [\"pointerleave\", \"pointerup\", \"pointercancel\", \"dragleave\", \"dragend\"].forEach((evt) => div.addEventListener(evt, stop));\n    dir === \"left\" || dir === \"up\" ? parent.insertBefore(div, el) : parent.append(div);\n    assist[dir] = div;\n  };\n  if (horizontal) [\"left\", \"right\"].forEach(addAssist);\n  if (vertical) [\"up\", \"down\"].forEach(addAssist);\n  el.addEventListener(\"scroll\", update);\n  (_SCROLLER_R_OBSERVER as ResizeObserver).observe(el);\n  (_SCROLLER_M_OBSERVER as MutationObserver).observe(el, { childList: true, subtree: true, characterData: true });\n  _SCROLLERS.set(el, {\n    update,\n    destroy() {\n      stop();\n      el.removeEventListener(\"scroll\", update);\n      (_SCROLLER_R_OBSERVER as ResizeObserver).unobserve(el);\n      _SCROLLERS.delete(el);\n      Object.values(assist).forEach((a) => a.remove());\n    },\n  });\n  update();\n  return _SCROLLERS.get(el);\n};\n\nexport const removeScrollAssist = (el: HTMLElement) => _SCROLLERS.get(el)?.destroy();\n", "import { clamp } from \"..\";\n\n// Key sets\nconst H_NAV_KEYS = [\"ArrowRight\", \"ArrowLeft\", \"Home\", \"End\"] as const;\nconst V_NAV_KEYS = [\"ArrowUp\", \"ArrowDown\", \"PageDown\", \"PageUp\"] as const;\nconst NAV_KEYS = [...H_NAV_KEYS, ...V_NAV_KEYS];\n\nexport interface ArrowNavConfig {\n  enabled?: boolean | null;\n  selector?: string;\n  focusOnHover?: boolean;\n  loop?: boolean;\n  virtual?: boolean;\n  typeahead?: boolean;\n  resetMs?: number;\n  rtl?: boolean | null;\n  rovingTabIndex?: boolean | null;\n  defaultTabbableIndex?: number | null;\n  activeClass?: string;\n  inputSelector?: string;\n  scrollIntoView?: ScrollIntoViewOptions;\n  focusOptions?: FocusOptions;\n  grid?: Partial<Record<\"x\" | \"y\" | \"vY\", number>>;\n  onSelect?: (el: HTMLElement, e: Partial<KeyboardEvent> & { key: string }) => void;\n  onFocusOut?: () => void;\n}\n\nconst DEFAULT_CONFIG: Required<ArrowNavConfig> = {\n  enabled: null,\n  selector: \"[data-arrow-item]\",\n  focusOnHover: true,\n  loop: true,\n  virtual: false,\n  typeahead: false,\n  rovingTabIndex: null,\n  defaultTabbableIndex: null,\n  resetMs: 500,\n  rtl: null,\n  grid: {},\n  activeClass: \"focus-outlined\",\n  inputSelector: \"input[value],textarea,[contenteditable='true']\",\n  focusOptions: { preventScroll: false },\n  scrollIntoView: { block: \"nearest\", inline: \"nearest\" },\n  onSelect: () => {},\n  onFocusOut: () => {},\n};\n\ntype KeyEvent = Partial<KeyboardEvent> & { key: string };\n\nconst getCommonAncestor = (a?: Element | null, b?: Element | null): Element | null => {\n  if (!a || !b) return a || b || null;\n  const ancestors = new Set<Element>();\n  let node: Element | null = a;\n  while (node) {\n    ancestors.add(node);\n    node = node.parentElement;\n  }\n  node = b;\n  while (node) {\n    if (ancestors.has(node)) return node;\n    node = node.parentElement;\n  }\n  return null;\n};\n\nconst getGrid = (all: HTMLElement[], x = true, y = true, vY = true) => {\n  const len = all.length;\n  const grid: ArrowNavConfig[\"grid\"] = {};\n  if (!len) return grid;\n  let cols = all.findIndex((el) => el.offsetTop !== all[0].offsetTop);\n  cols = cols > 0 ? cols : len;\n  if (x) grid.x = cols;\n  let rows = Math.ceil(len / cols);\n  if (y) grid.y = rows;\n  if (vY) {\n    const containerHeight = getCommonAncestor(all[0], all[1])?.clientHeight ?? 0;\n    const itemHeight = all[0].offsetHeight ?? 0;\n    rows = clamp(1, Math.floor(containerHeight / itemHeight), rows) || rows;\n    grid.vY = rows;\n  }\n  return grid;\n};\n\nconst getTargetIndex = ({ key, currIndex, length, gridX, gridY, vGridY, loop, ctrlKey = false, rtl }: { key: string; currIndex: number; length: number; gridX: number; gridY: number; vGridY: number; loop: boolean; ctrlKey?: boolean; rtl: boolean }): number => {\n  const rowStart = currIndex - (currIndex % gridX);\n  const rowEnd = Math.min(rowStart + gridX - 1, length - 1);\n  const colStart = currIndex % gridX;\n  const colEnd = Math.min(colStart + gridX * (gridY - 1), length - 1);\n  const canX = gridX > 1,\n    canY = gridY > 1;\n  const horizontalMove = rtl ? { ArrowRight: canX ? -1 : 0, ArrowLeft: canX ? 1 : 0 } : { ArrowRight: canX ? 1 : 0, ArrowLeft: canX ? -1 : 0 };\n  const move =\n    {\n      ...horizontalMove,\n      ArrowDown: canY ? gridX : 0,\n      ArrowUp: canY ? -gridX : 0,\n      Home: ctrlKey ? 0 : rowStart,\n      End: ctrlKey ? length - 1 : rowEnd,\n      PageDown: (vGridY - 1) * gridX,\n      PageUp: -(vGridY - 1) * gridX,\n    }[key] ?? 0;\n\n  let targetIndex = key === \"Home\" || key === \"End\" ? move : currIndex + move;\n  if (key === \"ArrowDown\") {\n    if (targetIndex < gridX) targetIndex = 0;\n    if (!loop && targetIndex >= length) targetIndex -= move;\n  } else if (key === \"ArrowUp\") {\n    if (!loop && targetIndex < 0) targetIndex += Math.abs(move);\n  } else if (key === \"PageDown\") {\n    if (!loop && targetIndex >= length) targetIndex = colEnd;\n  } else if (key === \"PageUp\") {\n    if (!loop && targetIndex < 0) targetIndex = colStart;\n  }\n\n  return loop ? (targetIndex + length) % length : clamp(0, targetIndex, length - 1);\n};\n\nexport type ArrowNavHandle = {\n  goToIndex: (index: number, e?: KeyEvent) => void;\n  simulateKey: (e: KeyEvent) => void;\n  getAbleIndex: (targetIndex: number, e?: KeyEvent) => number | null;\n  typeAhead: (key: string) => void;\n  items: () => HTMLElement[];\n  activeItem: () => HTMLElement | null;\n  getGrid: () => { x: number; y: number; vY: number };\n  destroy: () => void;\n};\n\nexport const initArrowFocusNav = (container: HTMLElement, cfg: ArrowNavConfig = {}): ArrowNavHandle => {\n  const { enabled: isEnabled, selector, focusOnHover, loop, virtual, typeahead, resetMs, activeClass, inputSelector, defaultTabbableIndex, grid, rtl: isRtl, focusOptions, scrollIntoView, onSelect, onFocusOut, rovingTabIndex } = { ...DEFAULT_CONFIG, ...cfg };\n\n  let gridX = grid.x || 1;\n  let gridY = grid.y || 1;\n  let vGridY = grid.vY || 1;\n  let activeIndex = -1;\n  let buffer = \"\";\n  let timeout: ReturnType<typeof setTimeout> | null = null;\n  let items: HTMLElement[] = [];\n\n  const enabled = isEnabled ?? virtual;\n  const roving = rovingTabIndex ?? !virtual;\n  const rtl = isRtl ?? getComputedStyle(container).direction === \"rtl\";\n\n  const shouldSnub = () => !enabled || !container;\n  const isItemDisabled = (el?: HTMLElement) => !el || el.hasAttribute(\"disabled\") || el.hasAttribute(\"aria-disabled\");\n  const getItems = () => (items = Array.from(container.querySelectorAll<HTMLElement>(selector)));\n\n  const getAbleIndex = (targetIndex: number, e: KeyEvent = { key: \"ArrowRight\", ctrlKey: false }) => {\n    if (shouldSnub()) return null;\n    if (!items.length) return null;\n    let index = targetIndex;\n    let attempts = 0;\n    while (attempts < items.length) {\n      if (!isItemDisabled(items[index])) return index;\n      index = getTargetIndex({ key: e.key, currIndex: index, gridX, gridY, vGridY, length: items.length, loop, ctrlKey: e.ctrlKey, rtl });\n      attempts++;\n    }\n    return null;\n  };\n\n  const goToIndex = (targetIndex: number, e: KeyEvent = { key: \"ArrowRight\" }) => {\n    if (shouldSnub()) return;\n    const idx = getAbleIndex(targetIndex, e);\n    if (idx === null) return;\n    activeIndex = idx;\n    onSelect?.(items[idx], e);\n    if (virtual) {\n      items[idx]?.scrollIntoView(scrollIntoView);\n      container.setAttribute(\"aria-activedescendant\", items[idx].id || \"\");\n    } else {\n      items[idx]?.focus(focusOptions);\n    }\n    updateDOM();\n  };\n\n  const updateDOM = () => {\n    if (shouldSnub()) return;\n    if (!virtual && !roving) return;\n    if (!items.length) return;\n    const tabbableIndex = defaultTabbableIndex !== null && defaultTabbableIndex !== undefined && !isItemDisabled(items[defaultTabbableIndex]) ? defaultTabbableIndex : getAbleIndex(0);\n    items.forEach((el, i) => {\n      const isActive = i === activeIndex;\n      if (roving) {\n        const shouldBeTabbable = i === activeIndex || (activeIndex === -1 && i === tabbableIndex);\n        el.setAttribute(\"tabindex\", shouldBeTabbable ? \"0\" : \"-1\");\n      } else if (virtual && activeIndex > 0) {\n        const shouldBeTabbable = i > activeIndex;\n        el.setAttribute(\"tabindex\", shouldBeTabbable ? \"0\" : \"-1\");\n      } else el.setAttribute(\"tabindex\", \"0\");\n      if (virtual) {\n        el.setAttribute(\"aria-selected\", String(isActive));\n        el.classList.toggle(activeClass, isActive);\n      }\n    });\n  };\n\n  const typeAhead = (key: string) => {\n    if (shouldSnub() || !typeahead) return;\n    buffer += key.toLowerCase();\n    if (timeout) clearTimeout(timeout);\n    timeout = setTimeout(() => (buffer = \"\"), resetMs);\n    const start = activeIndex >= 0 ? activeIndex + 1 : 0;\n    for (let i = 0; i < items.length; i++) {\n      const idx = (start + i) % items.length;\n      const label = (items[idx].getAttribute(\"data-label\") || items[idx].innerText || \"\").trim().toLowerCase();\n      if (label.startsWith(buffer)) return goToIndex(idx);\n    }\n  };\n\n  const simulateKey = (e: KeyEvent) => {\n    if (shouldSnub()) return;\n    if (document.activeElement?.matches(\"option\")) return;\n    const { key } = e;\n    if (!items.length) return;\n    if (virtual && (key === \" \" || key === \"Enter\")) return items[activeIndex]?.click();\n    if (typeahead && key.length === 1 && /^[a-z0-9]$/i.test(key)) return typeAhead(key);\n    if (!NAV_KEYS.includes(key as any)) return;\n    if (!((e.currentTarget as HTMLElement)?.matches(DEFAULT_CONFIG.inputSelector) && gridX <= 1 && H_NAV_KEYS.includes(key as any))) {\n      e.preventDefault?.();\n      e.stopPropagation?.();\n    }\n    const currIndex = virtual ? activeIndex : items.indexOf(document.activeElement as HTMLElement);\n    const targetIndex = getTargetIndex({ currIndex, gridX, gridY, vGridY, length: items.length, loop, rtl, key, ctrlKey: (e as KeyboardEvent).ctrlKey });\n    goToIndex(targetIndex, e);\n  };\n\n  // Setup\n  const refresh = () => (getItems(), updateDOM());\n  refresh();\n\n  // Keydown binding\n  const interactiveEls = !virtual ? [container] : [container.querySelector<HTMLElement>(inputSelector)];\n  interactiveEls.forEach((el) => el?.addEventListener(\"keydown\", simulateKey as EventListener));\n\n  // Focus out handling\n  const handleFocusOut = (evt: FocusEvent) => {\n    if (!container.contains(evt.relatedTarget as Node)) {\n      activeIndex = -1;\n      return onFocusOut?.();\n    }\n    const among = items.includes(evt.relatedTarget as HTMLElement);\n    if (!among && (defaultTabbableIndex ?? -1) >= 0) return (activeIndex = -1);\n    if (virtual) activeIndex = -1;\n  };\n  container.addEventListener(\"focusout\", handleFocusOut);\n\n  // Hover handling\n  const handleHover = (evt: Event) => {\n    if (!enabled || !focusOnHover) return;\n    const el = evt.currentTarget as HTMLElement;\n    const i = items.indexOf(el);\n    if (i !== -1) goToIndex(i);\n  };\n\n  // Mutation handling\n  const mutationObserver = new MutationObserver(() => {\n    const oldEl = items[activeIndex];\n    refresh();\n    const newEl = items[activeIndex];\n    if (oldEl && newEl && oldEl === newEl) return;\n    activeIndex = -1;\n  });\n  mutationObserver.observe(container, { childList: true, subtree: true });\n\n  // Grid handling (ResizeObserver)\n  const setGrid = (g: Required<ArrowNavConfig>[\"grid\"]) => {\n    if (g.x !== undefined) gridX = g.x;\n    if (g.y !== undefined) gridY = g.y;\n    if (g.vY !== undefined) vGridY = g.vY;\n  };\n  setGrid(grid);\n  const calcGrid = () => setGrid(getGrid(items, !grid.x, !grid.y, !grid.vY));\n  calcGrid();\n  const resizeObserver = new ResizeObserver(() => calcGrid());\n  const ancestor = items.length > 1 ? getCommonAncestor(items[0], items[1]) : container;\n  ancestor && resizeObserver.observe(ancestor);\n\n  // Hover listeners on items\n  const bindHover = () => items.forEach((el) => el.addEventListener(\"mouseenter\", handleHover));\n  const unbindHover = () => items.forEach((el) => el.removeEventListener(\"mouseenter\", handleHover));\n  bindHover();\n\n  const destroy = () => {\n    interactiveEls.forEach((el) => el?.removeEventListener(\"keydown\", simulateKey as EventListener));\n    container.removeEventListener(\"focusout\", handleFocusOut);\n    unbindHover();\n    mutationObserver.disconnect();\n    resizeObserver.disconnect();\n    if (timeout) clearTimeout(timeout);\n  };\n\n  return {\n    goToIndex,\n    simulateKey,\n    getAbleIndex,\n    typeAhead,\n    items: () => items,\n    activeItem: () => items[activeIndex] ?? null,\n    getGrid: () => ({ x: gridX, y: gridY, vY: vGridY }),\n    destroy,\n  };\n};\n", "import { createTimeRanges } from \"../utils\";\nimport type { MediaIntent, MediaState, MediaStatus, MediaSettings } from \"../types/contract\";\n\n// DEFAULT STATE (The Reality)\nexport const DEFAULT_MEDIA_STATE: MediaState = {\n  // Core\n  src: \"\",\n  currentTime: 0,\n  paused: true,\n  // Engine\n  volume: 1,\n  muted: false,\n  playbackRate: 1,\n  // Modes\n  pictureInPicture: false,\n  fullscreen: false,\n  // Casting\n  airplay: false,\n  chromecast: false,\n  // VR / XR\n  xrSession: false,\n  xrMode: \"inline\",\n  xrReferenceSpace: \"local\",\n  projection: \"flat\",\n  stereoMode: \"none\",\n  fieldOfView: 90, // Standard FOV\n  aspectRatio: 16 / 9, // Standard Aspect Ratio\n  panningX: 0,\n  panningY: 0,\n  panningZ: 0,\n  xrInputSource: null,\n  // Tracks & Streaming\n  currentTextTrack: -1,\n  currentAudioTrack: -1,\n  currentVideoTrack: -1,\n  autoLevel: true, // Adaptive Streaming on by default\n  currentLevel: -1,\n  // HTML Attributes\n  poster: \"\",\n  autoplay: false,\n  loop: false,\n  preload: \"metadata\",\n  playsInline: true,\n  crossOrigin: null,\n  controls: false, // We disable native controls\n  controlsList: \"\",\n  disablePictureInPicture: false,\n  // HTML Lists\n  sources: [],\n  tracks: [],\n};\n\n// DEFAULT INTENT (The Wishes)\nexport const DEFAULT_MEDIA_INTENT: MediaIntent = DEFAULT_MEDIA_STATE as MediaIntent; // Intent starts as State but can diverge\n\n// DEFAULT INFO (The Facts)\nexport const DEFAULT_MEDIA_STATUS: MediaStatus = {\n  // Network\n  readyState: 0, // HAVE_NOTHING\n  networkState: 0, // EMPTY\n  error: null,\n  bandwidth: null,\n  // Buffering\n  waiting: false,\n  stalled: false,\n  seeking: false,\n  buffered: createTimeRanges(),\n  played: createTimeRanges(),\n  seekable: createTimeRanges(),\n  duration: NaN, // HTML5 Standard for \"Unknown\"\n  ended: false,\n  // Dimensions\n  videoWidth: 0,\n  videoHeight: 0,\n  // Gates\n  loadedMetadata: false,\n  loadedData: false,\n  canPlay: false,\n  canPlayThrough: false,\n  // Lists (We start with empty lists or nulls)\n  textTracks: [],\n  audioTracks: [],\n  videoTracks: [],\n  levels: [],\n  // VR\n  xrCapabilities: null,\n  // Active\n  activeCue: null,\n};\n\n// DEFAULT SETTINGS (The Config)\nexport const DEFAULT_MEDIA_SETTINGS: MediaSettings = {\n  defaultMuted: false,\n  defaultPlaybackRate: 1,\n  srcObject: null,\n};\n", "import { DEFAULT_MEDIA_INTENT, DEFAULT_MEDIA_SETTINGS, DEFAULT_MEDIA_STATE, DEFAULT_MEDIA_STATUS } from \"../consts/media-defaults\";\nimport { MediaState, MediaReport } from \"../types/contract\";\nimport type { Source, Sources, Track, Tracks } from \"../plugs\";\nimport { createEl, isIter, isSameURL, loadResource, queryFullscreenEl } from \".\";\n\n// ============ Video Utilities ============\n\n// Types\nexport type Dimensions = Record<\"width\" | \"height\", number>;\n\ntype SourceLike = Source | (HTMLSourceElement & Record<string, any>);\ntype TrackLike = Track | (HTMLTrackElement & Record<string, any>);\n\n// Report Generation\nexport function getMediaReport(m: HTMLMediaElement): MediaReport {\n  const txtTrackIdx = getTrackIdx(m, \"Text\");\n  const report = {\n    state: {\n      src: m.src,\n      currentTime: m.currentTime,\n      paused: m.paused,\n      volume: m.volume,\n      muted: m.muted,\n      playbackRate: m.playbackRate,\n      pictureInPicture: document.pictureInPictureElement === m,\n      fullscreen: queryFullscreenEl() === m,\n      currentTextTrack: txtTrackIdx,\n      currentAudioTrack: getTrackIdx(m, \"Audio\"),\n      currentVideoTrack: getTrackIdx(m, \"Video\"),\n      poster: m instanceof HTMLVideoElement ? m.poster : \"\",\n      autoplay: m.autoplay,\n      loop: m.loop,\n      preload: m.preload,\n      playsInline: m instanceof HTMLVideoElement ? m.playsInline : false,\n      crossOrigin: m.crossOrigin,\n      controls: m.controls,\n      controlsList: m.getAttribute(\"controlsList\") || \"\",\n      disablePictureInPicture: m instanceof HTMLVideoElement ? m.disablePictureInPicture : false,\n      sources: getSources(m),\n      tracks: getTracks(m),\n    },\n    status: {\n      readyState: m.readyState,\n      networkState: m.networkState,\n      error: m.error,\n      seeking: m.seeking,\n      buffered: m.buffered,\n      played: m.played,\n      seekable: m.seekable,\n      duration: m.duration,\n      ended: m.ended,\n      loadedMetadata: m.readyState >= 1,\n      loadedData: m.readyState >= 2,\n      canPlay: m.readyState >= 3,\n      canPlayThrough: m.readyState >= 4,\n      videoWidth: m instanceof HTMLVideoElement ? m.videoWidth : 0,\n      videoHeight: m instanceof HTMLVideoElement ? m.videoHeight : 0,\n      textTracks: m.textTracks,\n      audioTracks: (m as any).audioTracks,\n      videoTracks: (m as any).videoTracks,\n      activeCue: m.textTracks[txtTrackIdx]?.activeCues?.[0] || null,\n    },\n    settings: {\n      defaultMuted: m.defaultMuted,\n      defaultPlaybackRate: m.defaultPlaybackRate,\n    },\n  };\n  return {\n    state: { ...DEFAULT_MEDIA_STATE, ...report.state },\n    intent: { ...DEFAULT_MEDIA_INTENT, ...report.state },\n    status: { ...DEFAULT_MEDIA_STATUS, ...report.status },\n    settings: { ...DEFAULT_MEDIA_SETTINGS, ...report.settings },\n  };\n}\n\n// Geometry\nexport const getRenderedBox = (elem: HTMLElement & { videoWidth?: number; videoHeight?: number }): Partial<Dimensions & { left: number; top: number }> => {\n  const getResourceDimensions = (source: HTMLElement & { videoWidth?: number; videoHeight?: number }): Dimensions | null => (source.videoWidth && source.videoHeight ? { width: source.videoWidth, height: source.videoHeight } : null);\n  const parsePositionAsPx = (str: string, bboxSize: number, objectSize: number): number => {\n    const num = parseFloat(str);\n    return !str.endsWith(\"%\") ? num : bboxSize * (num / 100) - objectSize * (num / 100);\n  };\n  const parseObjectPosition = (position: string, bbox: DOMRect, object: Dimensions): { left: number; top: number } => {\n    const [left, top] = position.split(\" \");\n    return { left: parsePositionAsPx(left, bbox.width, object.width), top: parsePositionAsPx(top, bbox.height, object.height) };\n  };\n  let { objectFit, objectPosition } = getComputedStyle(elem);\n  const bbox = elem.getBoundingClientRect(),\n    object = getResourceDimensions(elem);\n  if (!object || !objectFit || !objectPosition) return {};\n  if (objectFit === \"scale-down\") objectFit = bbox.width < object.width || bbox.height < object.height ? \"contain\" : \"none\";\n  if (objectFit === \"none\") return { ...parseObjectPosition(objectPosition, bbox, object), ...object };\n  else if (objectFit === \"contain\") {\n    const objectRatio = object.height / object.width,\n      bboxRatio = bbox.height / bbox.width,\n      width = bboxRatio > objectRatio ? bbox.width : bbox.height / objectRatio,\n      height = bboxRatio > objectRatio ? bbox.width * objectRatio : bbox.height;\n    return { ...parseObjectPosition(objectPosition, bbox, { width, height }), width, height };\n  } else if (objectFit === \"fill\") {\n    const { left, top } = parseObjectPosition(objectPosition, bbox, object),\n      objPosArr = objectPosition.split(\" \");\n    return { left: objPosArr[0].endsWith(\"%\") ? 0 : left, top: objPosArr[1].endsWith(\"%\") ? 0 : top, width: bbox.width, height: bbox.height };\n  } else if (objectFit === \"cover\") {\n    const minRatio = Math.min(bbox.width / object.width, bbox.height / object.height);\n    let width = object.width * minRatio,\n      height = object.height * minRatio,\n      outRatio = 1;\n    if (width < bbox.width) outRatio = bbox.width / width;\n    if (Math.abs(outRatio - 1) < 1e-14 && height < bbox.height) outRatio = bbox.height / height;\n    width *= outRatio;\n    height *= outRatio;\n    return { ...parseObjectPosition(objectPosition, bbox, { width, height }), width, height };\n  }\n  return {};\n};\n\nexport function getSizeTier(container: HTMLElement) {\n  const { offsetWidth: w, offsetHeight: h } = container;\n  return { width: w, height: h, tier: h <= 130 ? \"xxxxx\" : w <= 280 ? \"xxxx\" : w <= 380 ? \"xxx\" : w <= 480 ? \"xx\" : w <= 630 ? \"x\" : \"\" };\n}\n\n// Media Element Cloning\nexport const cloneMedia = <M extends HTMLMediaElement>(v: M): M => {\n  const newV = v.cloneNode(true) as M;\n  newV.tmgPlayer = v.tmgPlayer;\n  v.parentElement?.replaceChild(newV, v);\n  if (v.currentTime) newV.currentTime = v.currentTime;\n  if (v.playbackRate !== 1) newV.playbackRate = v.playbackRate;\n  if (v.defaultPlaybackRate !== 1) newV.defaultPlaybackRate = v.defaultPlaybackRate;\n  if (v.volume !== 1) newV.volume = v.volume;\n  if (v.muted) newV.muted = true;\n  if (v.defaultMuted) newV.defaultMuted = true;\n  if (v.srcObject) newV.srcObject = v.srcObject;\n  if (v.autoplay) newV.autoplay = true;\n  if (v.loop) newV.loop = true;\n  if (v.controls) newV.controls = true;\n  if (v.crossOrigin) newV.crossOrigin = v.crossOrigin;\n  if (v.playsInline) newV.playsInline = true;\n  if (v.controlsList?.length) newV.controlsList = v.controlsList;\n  if (v.disablePictureInPicture) newV.disablePictureInPicture = true;\n  if (!v.paused && newV.isConnected) newV.play();\n  return newV;\n};\n\n// Source Management\nexport function putSourceDetails(source: any, el: HTMLSourceElement | Record<string, any>) {\n  if (source.src) el.src = source.src;\n  if (source.type) el.type = source.type;\n  if (source.media) el.media = source.media;\n}\nexport function addSources(sources: SourceLike | Iterable<SourceLike> = [], medium: HTMLElement): HTMLSourceElement | HTMLSourceElement[] {\n  const addSource = (source: SourceLike, med: HTMLElement) => {\n    const sourceEl = createEl(\"source\");\n    putSourceDetails(source, sourceEl);\n    return med.appendChild(sourceEl);\n  };\n  return isIter(sources) ? Array.from(sources as Iterable<SourceLike>, (source) => addSource(source, medium)) : addSource(sources, medium);\n}\nexport function getSources(medium: HTMLElement): MediaState[\"sources\"] {\n  const sources = medium.querySelectorAll<HTMLSourceElement>(\"source\"),\n    _sources: SourceLike[] = [];\n  sources.forEach((source) => {\n    const obj: Record<string, any> = {};\n    putSourceDetails(source, obj);\n    _sources.push(obj as SourceLike);\n  });\n  return _sources as MediaState[\"sources\"];\n}\nexport const removeSources = (medium: HTMLElement): void => medium?.querySelectorAll(\"source\")?.forEach((source) => source.remove());\nexport function isSameSources(a?: Sources, b?: Sources): boolean {\n  if (!a || !b || a.length !== b.length) return false;\n  return a.every((s1) => b.some((s2) => isSameURL(s1.src, s2.src) && s1.type === s2.type && s1.media === s2.media));\n}\n\n// Track Management\nexport type TrackType = \"Audio\" | \"Video\" | \"Text\";\nexport function putTrackDetails(track: any, el: HTMLTrackElement | Record<string, any>) {\n  if (track.kind) el.kind = track.kind;\n  if (track.label) el.label = track.label;\n  if (track.srclang) el.srclang = track.srclang;\n  if (track.src) el.src = track.src;\n  if (track.default) el.default = track.default;\n}\nexport function addTracks(tracks: TrackLike | Iterable<TrackLike> = [], medium: HTMLElement): HTMLTrackElement | HTMLTrackElement[] {\n  const addTrack = (track: TrackLike, med: HTMLElement) => {\n    const trackEl = createEl(\"track\");\n    putTrackDetails(track, trackEl);\n    return med.appendChild(trackEl);\n  };\n  return isIter(tracks) ? Array.from(tracks as Iterable<TrackLike>, (track) => addTrack(track, medium)) : addTrack(tracks, medium);\n}\nexport function getTracks(medium: HTMLElement, cues = false): TrackLike[] {\n  const tracks = medium.querySelectorAll<HTMLTrackElement>(!cues ? \"track\" : \"track:is([kind='captions'], [kind='subtitles'])\"),\n    _tracks: TrackLike[] = [];\n  tracks.forEach((track) => {\n    const obj: Record<string, any> = {};\n    putTrackDetails(track, obj);\n    _tracks.push(obj as TrackLike);\n  });\n  return _tracks;\n}\nexport const removeTracks = (medium: HTMLElement): void => medium.querySelectorAll(\"track\")?.forEach((track) => (track.kind === \"subtitles\" || track.kind === \"captions\") && track.remove());\nexport function isSameTracks(a?: Tracks, b?: Tracks): boolean {\n  if (!a || !b || a.length !== b.length) return false;\n  return a.every((t1) => b.some((t2) => isSameURL(t1.src, t2.src) && t1.kind === t2.kind && t1.label === t2.label && t1.srclang === t2.srclang && t1.default === t2.default));\n}\nconst isTrack = (type: TrackType, term: any) => `${type}Track` in window && term instanceof (window as any)[`${type}Track`];\nexport function getTrackIdx(medium: HTMLMediaElement, type: TrackType, term: any = \"active\"): number {\n  if (\"number\" === typeof term) return term;\n  const list = (medium as any)[`${type.toLowerCase()}Tracks`];\n  if (term === \"active\") {\n    if (type === \"Text\") for (let i = 0; i < +list?.length; i++) if (list[i].mode === \"showing\") return i;\n    if (type === \"Audio\") for (let i = 0; i < +list?.length; i++) if (list[i].enabled) return i;\n    if (type === \"Video\") return list.selectedIndex ?? -1;\n  }\n  if (isTrack(type, term)) return Array.prototype.indexOf.call(list, term);\n  if (\"string\" === typeof term) {\n    term = term.toLowerCase();\n    return !isNaN(+term) ? +term : Array.prototype.findIndex.call(list, (t: any) => t.id.toLowerCase() === term || t.label.toLowerCase() === term || t.srclang.toLowerCase() === term || t.language.toLowerCase() === term || isSameURL(t.src, term));\n  }\n  return -1;\n}\nexport function setCurrentTrack(medium: HTMLMediaElement, type: TrackType, term: any, flush = false): void {\n  const list = (medium as any)[`${type.toLowerCase()}Tracks`],\n    idx = getTrackIdx(medium, type, term);\n  if (type !== \"Video\") for (let i = 0; i < list.length; i++) type === \"Text\" ? (list[i].mode = i === idx ? \"showing\" : flush ? \"disabled\" : \"hidden\") : (list[i].enabled = i === idx);\n  else list[idx] && (list[idx].selected = true);\n}\n\n// ============ Caption/Subtitle Utilities ============\nexport const stripTags = (text: string): string => text.replace(/<(\\/)?([a-z0-9.:]+)([^>]*)>/gi, \"\");\n\n// SRT/VTT Conversion\nexport function srtToVtt(srt: string, vttLines: string[] = [\"WEBVTT\", \"\"]): string {\n  const input = srt.replace(/\\r\\n?/g, \"\\n\").trim();\n  for (const block of input.split(/\\n{2,}/)) {\n    const lines = block.split(\"\\n\");\n    let idx = /^\\d+$/.test(lines[0].trim()) ? 1 : 0;\n    const timing = lines[idx]?.trim().replace(/\\s+/g, \" \"),\n      m = timing?.match(/(\\d{1,2}:\\d{2}:\\d{2})(?:[.,](\\d{1,3}))?\\s*-->\\s*(\\d{1,2}:\\d{2}:\\d{2})(?:[.,](\\d{1,3}))?/);\n    if (!m) continue;\n    const [, startHms, startMsRaw = \"0\", endHms, endMsRaw = \"0\"] = m,\n      to3 = (ms: string) => ms.padEnd(3, \"0\").slice(0, 3);\n    vttLines.push(startHms + \".\" + to3(startMsRaw) + \" --> \" + endHms + \".\" + to3(endMsRaw));\n    for (let i = idx + 1; i < lines.length; i++) vttLines.push(lines[i]);\n    vttLines.push(\"\");\n  }\n  return vttLines.join(\"\\n\");\n}\n\nexport function parseVttText(text: string): string {\n  const state = { tag: /<(\\/)?([a-z0-9.:]+)([^>]*)>/gi, o: \"\", l: 0, p: null as string | null, c: \"\" },\n    esc = (s: string) => s.replace(/[&<>\"']/g, (c) => ({ \"&\": \"&amp;\", \"<\": \"&lt;\", \">\": \"&gt;\", '\"': \"&quot;\", \"'\": \"&#39;\" })[c]!);\n  let m: RegExpExecArray | null;\n  while ((m = state.tag.exec(text))) {\n    const chunk = text.slice(state.l, m.index);\n    if (chunk) state.c += esc(chunk);\n    const [_, cls, tag_n, rest] = m,\n      low = tag_n.toLowerCase();\n    if (/^[0-9]/.test(tag_n)) {\n      state.o += state.p ? `<span data-part=\"timed\" data-time=\"${state.p}\">${state.c}</span>` : state.c;\n      state.p = tag_n;\n      state.c = \"\";\n    } else {\n      if (cls) state.c += [\"c\", \"v\", \"lang\"].includes(low) ? \"</span>\" : `</${low}>`;\n      else if ([\"b\", \"i\", \"u\", \"ruby\", \"rt\"].includes(low)) state.c += `<${low}>`;\n      else if (low === \"c\") state.c += `<span class=\"vtt-c ${rest.replace(/\\.([a-z0-9_-]+)/gi, \"$1 \").trim()}\">`;\n      else if (low === \"v\") state.c += `<span data-part=\"voice\"${rest.trim() ? ` title=\"${esc(rest.trim())}\"` : \"\"}>`;\n      else if (low === \"lang\") state.c += `<span lang=\"${esc(rest.trim())}\">`;\n    }\n    state.l = state.tag.lastIndex;\n  }\n  const lChunk = text.slice(state.l);\n  if (lChunk) state.c += esc(lChunk);\n  return state.o + (state.p ? `<span data-part=\"timed\" data-time=\"${state.p}\">${state.c}</span>` : state.c);\n}\n\nexport function formatVttLine(p: string, maxChars: number): string[] {\n  const state = { tokens: p.match(/<[^>]+>|\\S+/g) || [], stack: [] as string[], parts: [] as string[], line: \"\", len: 0, openStr: \"\", closeStr: \"\", timeTag: \"\", lastWasTag: false },\n    updateTags = () => ((state.openStr = state.stack.map((n) => `<${n}>`).join(\"\")), (state.closeStr = state.stack.reduceRight((a, n) => a + `</${n}>`, \"\"))),\n    flush = () => state.line && (state.parts.push(state.line + state.closeStr), (state.line = (state.timeTag || \"\") + state.openStr), (state.len = 0), (state.lastWasTag = true));\n  state.tokens.forEach((tok) => {\n    const tag = tok[0] === \"<\",\n      closeTag = tag && tok[1] === \"/\";\n    if (tag) {\n      if (state.line && !state.lastWasTag && !closeTag) state.line += \" \";\n      const m = tok.match(/^<\\/?\\s*([a-z0-9._:-]+)/i),\n        n = m?.[1] || \"\",\n        timing = /^\\d/.test(n);\n      if (timing) return ((state.timeTag = tok), (state.line += tok), (state.lastWasTag = true));\n      if (!closeTag && !tok.endsWith(\"/>\") && n) (state.stack.push(n), updateTags());\n      if (closeTag && state.stack.length) (state.stack.pop(), updateTags());\n      return ((state.lastWasTag = true), (state.line += tok));\n    }\n    const len = stripTags(tok).length,\n      needSpace = state.line && !state.lastWasTag;\n    if (state.len + (needSpace ? 1 : 0) + len > maxChars) flush();\n    if (needSpace) ((state.line += \" \"), (state.len += 1));\n    ((state.line += tok), (state.len += len), (state.lastWasTag = false));\n  });\n  return (flush(), state.parts);\n}\n", "// Media Time Formatting\nexport function formatMediaTime({ time, format = \"digital\", elapsed = true, showMs = false, casing = \"normal\" }: { time?: number; format?: string; elapsed?: boolean; showMs?: boolean; casing?: \"normal\" | \"upper\" | \"title\" } = { time: 0 }): string {\n  const long = format.endsWith(\"long\"),\n    sx = (n = 0) => (n == 1 ? \"\" : \"s\"),\n    cs = (str: string) => (casing === \"upper\" ? str.toUpperCase() : casing === \"title\" ? str.replace(/^([a-z])/i, (m) => m.toUpperCase()) : str.toLowerCase()),\n    wrd = (n = 0) => ({ h: cs(long ? \" hour\" + sx(n) + \" \" : \"h\"), m: cs(long ? \" minute\" + sx(n) + \" \" : \"m\"), s: cs(long ? \" second\" + sx(n) + \" \" : \"s\"), ms: cs(long ? \" millisecond\" + sx(n) + \" \" : \"ms\") }),\n    pad = (v: string | number, n = 2, f?: boolean) => (long && !f ? v : String(v).padStart(n, \"number\" === typeof +n ? \"0\" : \"-\"));\n  if (isNaN(time ?? NaN) || time === Infinity) return format !== \"digital\" ? (\"-\" + wrd().h + pad(\"-\") + wrd().m + (!elapsed ? \"left\" : \"\")).trim() : (!elapsed ? \"--:--\" : \"-:--\");\n  const s = Math.floor(Math.abs(time!) % 60),\n    m = Math.floor(Math.abs(time!) / 60) % 60,\n    h = Math.floor(Math.abs(time!) / 3600),\n    ms = Math.floor((Math.abs(time!) % 1) * 1000); // returns early so \"!\"\n  if (format === \"digital\") {\n    const base = h ? h + \":\" + pad(m, 2, true) + \":\" + pad(s, 2, true) : m + \":\" + pad(s, 2, true);\n    return !elapsed ? \"-\" + base : base;\n  }\n  const base = h ? h + wrd(h).h + pad(m) + wrd(m).m + pad(s) + wrd(s).s : m + wrd(m).m + pad(s) + wrd(s).s,\n    msPart = showMs && ms ? pad(ms, 3) + wrd(ms).ms : \"\";\n  return (base + msPart + (!long ? \" \" : \"\") + (!elapsed ? \"left\" : \"\")).trim();\n}\n\n// Time Ranges\nexport interface TimeRange {\n  length: number;\n  start(index: number): number;\n  end(index: number): number;\n}\n\nexport const createTimeRanges = (ranges?: [number, number][] | TimeRange): TimeRange => {\n  if (!ranges || (ranges as TimeRange).length !== undefined) return (ranges as TimeRange) || { length: 0, start: () => 0, end: () => 0 };\n  const pairs = (ranges as [number, number][]).sort((a, b) => a[0] - b[0]);\n  return {\n    length: pairs.length,\n    start: (i: number) => (pairs[i] ? pairs[i][0] : 0),\n    end: (i: number) => (pairs[i] ? pairs[i][1] : 0),\n  };\n};\n", "import type { Control, ControlPanelBottomTuple } from \"../plugs\";\nimport type { DeepMerge, Unflatten, WCPaths, Paths, PathValue } from \"../types/obj\";\nimport type { UIObject, UISettings } from \"../types/UIOptions\";\nimport { camelize } from \".\";\nconst arrRx = /^([^\\[\\]]+)\\[(\\d+)\\]$/;\n\n// Type Guards\nexport function isDef(val: any): boolean {\n  return val !== undefined;\n}\n\nexport function isArr<T = unknown>(obj: any): obj is T[] {\n  return Array.isArray(obj);\n}\n\nexport function isObj<T extends object = object>(obj: any): obj is T {\n  return \"object\" === typeof obj && obj !== null && !isArr(obj) && \"function\" !== typeof obj;\n}\n\nexport function isIter<T = unknown>(obj: any): obj is Iterable<T> {\n  return obj != null && \"function\" === typeof obj[Symbol.iterator];\n}\n\nexport function isUISetting<T = unknown>(obj: any): obj is UISettings<T> {\n  return isObj(obj) && \"options\" in obj && isArr(obj.options);\n}\n\nexport function inBoolArrOpt(opt: any, str: string): boolean {\n  return opt?.includes?.(str) ?? opt;\n}\n\n// Assignment & Derivation\nexport function assignDef<T extends object>(target: T, key: Paths<T>, value: PathValue<T, typeof key>): void {\n  isDef(value) && target != null && setAny(target, key, value);\n}\n\nexport function assignHTMLConfig<T extends object>(target: T, attr: `tmg--${Paths<T, \"--\">}`, value: string): void {\n  const path = attr.replace(\"tmg--\", \"\") as Paths<T, \"--\">;\n  const parsedValue = (() => {\n    if (value.includes(\",\")) return value.split(\",\")?.map((v: string) => v.replace(/\\s+/g, \"\"));\n    if (value === \"true\") return true;\n    if (value === \"false\") return false;\n    if (value === \"null\") return null;\n    if (/^\\d+$/.test(value)) return Number(value);\n    return value;\n  })() as PathValue<T, typeof path, \"--\">;\n  setAny<T, \"--\">(target, path, parsedValue, \"--\", (p) => camelize(p));\n}\n\nexport function setAny<T extends object, const S extends string = \".\">(target: T, key: Paths<T, S>, value: PathValue<T, typeof key, S>, separator: S = \".\" as S, keyFunc?: (p: string) => string): void {\n  if (!key.includes(separator)) return void ((target as any)[keyFunc ? keyFunc(key) : key] = value);\n  const keys = key.split(separator);\n  let currObj: any = target;\n  for (let i = 0; i < keys.length; i++) {\n    let key = keyFunc ? keyFunc(keys[i]) : keys[i];\n    const match = key[0] === \"[\" && key.match(arrRx);\n    if (match) {\n      const [, key, iStr] = match;\n      if (!isArr(currObj[key])) currObj[key] = [];\n      if (i === keys.length - 1) currObj[key][Number(iStr)] = value;\n      else ((currObj[key][Number(iStr)] ||= {}), (currObj = currObj[key][Number(iStr)]));\n    } else {\n      if (i === keys.length - 1) currObj[key] = value;\n      else ((currObj[key] ||= {}), (currObj = currObj[key]));\n    }\n  }\n}\n\nexport function getAny<T extends object, const S extends string = \".\">(source: T, key: Paths<T, S>, separator: S = \".\" as S, keyFunc?: (p: string) => string): PathValue<T, typeof key, S> | undefined {\n  if (!key.includes(separator)) return (source as any)[keyFunc ? keyFunc(key) : key];\n  const keys = key.split(separator);\n  let currObj: any = source;\n  for (let i = 0; i < keys.length; i++) {\n    let key = keyFunc ? keyFunc(keys[i]) : keys[i];\n    const match = key[0] === \"[\" && key.match(arrRx);\n    if (match) {\n      const [, key, iStr] = match;\n      if (!isArr(currObj[key])) return undefined;\n      currObj = currObj[key][Number(iStr)];\n    } else {\n      if (!isObj<Record<string, any>>(currObj) || !(key in currObj)) return undefined;\n      currObj = currObj[key];\n    }\n  }\n  return currObj;\n}\n\nexport function deleteAny<T extends object, const S extends string = \".\">(target: T, key: Paths<T, S>, separator: S = \".\" as S, keyFunc?: (p: string) => string): void {\n  if (!key.includes(separator)) return void delete (target as any)[keyFunc ? keyFunc(key) : key];\n  const keys = key.split(separator);\n  let currObj: any = target;\n  for (let i = 0; i < keys.length; i++) {\n    let key = keyFunc ? keyFunc(keys[i]) : keys[i];\n    const match = key[0] === \"[\" && key.match(arrRx);\n    if (match) {\n      const [, key, iStr] = match;\n      if (!isArr(currObj[key])) return;\n      if (i === keys.length - 1) delete currObj[key][Number(iStr)];\n      else currObj = currObj[key][Number(iStr)];\n    } else {\n      if (!isObj<Record<string, any>>(currObj) || !(key in currObj)) return;\n      if (i === keys.length - 1) delete currObj[key];\n      else currObj = currObj[key];\n    }\n  }\n}\n\nexport function parseUIObj<T extends Record<string, any>>(obj: T): UIObject<T> {\n  const result: any = {} as UIObject<T>,\n    keys = Object.keys(obj);\n  for (let i = 0; i < keys.length; i++) {\n    const entry = obj[keys[i]];\n    if (!isObj(entry)) continue;\n    if (isUISetting(entry)) {\n      result[keys[i]] = {\n        values: entry.options.map((opt: any) => (\"value\" in opt ? opt.value : opt)),\n        displays: entry.options.map((opt: any) => (\"display\" in opt ? opt.display : String(opt))),\n      };\n    } else result[keys[i]] = parseUIObj(entry); // recurse on sub-branch\n  }\n  return result;\n}\n\nexport function parseAnyObj<T extends Record<string, any>, const S extends string = \".\">(obj: T, separator: S = \".\" as S, keyFunc = (p: string) => p, visited = new WeakSet()): Unflatten<T, S> {\n  if (!isObj(obj) || visited.has(obj)) return obj as Unflatten<T, S>; // no circular references\n  visited.add(obj);\n  const result: any = {};\n  Object.keys(obj).forEach((k) => (k.includes(separator) ? setAny(result, k as any, parseAnyObj(obj[k] as any, separator, keyFunc, visited), separator, keyFunc) : (result[k] = isObj(obj[k]) ? parseAnyObj(obj[k] as any, separator, keyFunc, visited) : obj[k])));\n  return result as Unflatten<T, S>;\n}\n\nexport function parsePanelBottomObj(obj: Partial<ControlPanelBottomTuple> | Control[][] | Control[] | unknown, arr?: false): ControlPanelBottomTuple | false;\nexport function parsePanelBottomObj(obj: Partial<ControlPanelBottomTuple> | Control[][] | Control[] | unknown, arr: true): Control[] | false;\nexport function parsePanelBottomObj(obj: Partial<ControlPanelBottomTuple> | Control[][] | Control[] | unknown = [], arr = false): ControlPanelBottomTuple | Control[] | false {\n  if (!isObj(obj) && !isArr(obj)) return false;\n  const [third = [], second = [], first = []] = isObj<Partial<ControlPanelBottomTuple>>(obj) ? (Object.values(obj).reverse() as Control[][]) : isArr((obj as Control[][])[0]) ? [...(obj as Control[][])].reverse() : [obj as Control[]];\n  return arr ? ([...third, ...second, ...first] as Control[]) : ({ 1: first, 2: second, 3: third } as ControlPanelBottomTuple);\n}\n\nexport function parseEvOpts<T extends object>(options: T | boolean | undefined, opts: (keyof T)[] | readonly (keyof T)[], boolOpt: keyof T = opts[0], result = {} as T): T {\n  for (let i = 0; i < opts.length; i++) (result as any)[opts[i]] = false;\n  return (Object.assign(result, \"boolean\" === typeof options ? { [boolOpt]: options } : options), result);\n}\n\n// Merging & Traversal\nexport function mergeObjs<T1 extends object, T2 extends object>(o1: T1, o2: T2): DeepMerge<T1, T2>;\nexport function mergeObjs<T1 extends object>(o1: T1): T1;\nexport function mergeObjs<T2 extends object>(o1: undefined | null, o2: T2): T2;\nexport function mergeObjs(o1: any = {}, o2: any = {}): any {\n  const merged = { ...(o1 || {}), ...(o2 || {}) };\n  return (Object.keys(merged).forEach((k) => isObj(o1?.[k]) && isObj(o2?.[k]) && (merged[k] = mergeObjs(o1[k], o2[k]))), merged);\n}\n\nexport function getTrailPaths<T>(path: WCPaths<T>, reverse: boolean = true): WCPaths<T>[] {\n  const parts = path.split(\".\"),\n    chain: WCPaths<T>[] = [\"*\"];\n  let acc = \"\";\n  for (let i = 0; i < parts.length; i++) {\n    acc += (i === 0 ? \"\" : \".\") + parts[i];\n    chain.push(acc as WCPaths<T>);\n  }\n  return reverse ? chain.reverse() : chain; // for mostly logs\n}\n\nexport function getTrailRecords<T extends object>(obj: T, path: WCPaths<T>): [WCPaths<T>, PathValue<T, WCPaths<T>>, PathValue<T, WCPaths<T>>][] {\n  const parts = path.split(\".\"),\n    record: ReturnType<typeof getTrailRecords<T>> = [[\"*\", obj, obj]];\n  let acc = \"\",\n    currObj: any = obj;\n  for (let i = 0; i < parts.length; i++) {\n    acc += (i === 0 ? \"\" : \".\") + parts[i];\n    record.push([acc as WCPaths<T>, currObj, (currObj = Reflect.get(currObj, parts[i]))]); // at most one iteration per depth, storage over derivation\n  }\n  return record;\n}\n\n// Cloning\nexport function deepClone<T>(obj: T, visited = new WeakMap()): T {\n  if (!isObj(obj) || visited.has(obj) || \"symbol\" === typeof obj || \"function\" === typeof obj || obj instanceof Map || obj instanceof Set || obj instanceof WeakMap || obj instanceof Promise || obj instanceof Element || obj instanceof EventTarget) return obj; // no circular references\n  const clone: any = isArr(obj) ? [] : {};\n  visited.set(obj, clone);\n  const keys = Object.keys(obj);\n  for (let i = 0; i < keys.length; i++) {\n    const val = (obj as any)[keys[i]];\n    clone[keys[i]] = isObj(val) || isArr(val) ? deepClone(val, visited) : val;\n  }\n  return clone;\n}\n", "import { AptRange } from \"../types/generics\";\n\n// Validators\nexport function isValidNum(val: any): boolean {\n  return !isNaN(val ?? NaN) && val !== Infinity;\n}\n\nexport function clamp(min = 0, val: number, max = Infinity) {\n  return Math.min(Math.max(val, min), max);\n}\n\nexport function safeNum(number: any, fallback = 0): number {\n  return isValidNum(number) ? number : fallback;\n}\n\n// Parsers\nexport function parseIfPercent(percent: any, amount = 100): number {\n  return percent?.endsWith?.(\"%\") ? safeNum((percent.slice(0, -1) / 100) * amount) : percent;\n}\n\nexport function parseCSSTime(time: any): number {\n  return time?.endsWith?.(\"ms\") ? parseFloat(time) : parseFloat(time) * 1000;\n}\n\nexport function parseCSSUnit(val: any): number {\n  return val?.endsWith?.(\"px\") ? parseFloat(val) : remToPx(parseFloat(val));\n}\n\nexport function remToPx(val: number): number {\n  return parseFloat(getComputedStyle(document.documentElement).fontSize) * val;\n}\n\n// Helpers\nexport function stepNum<T extends AptRange>(v = 0, { min, max, step }: T): number {\n  const s = Math.round((safeNum(v) - min) / step) * step + min;\n  return clamp(min, +(s.toFixed(10)), max);\n}\n\nconst _stepsCache = new Map<string, number[]>();\nexport function rotate<T>(cur: T, steps: T[], dir?: \"forwards\" | \"backwards\", wrap?: boolean): T;\nexport function rotate(cur: number, steps: AptRange, dir?: \"forwards\" | \"backwards\", wrap?: boolean): number;\nexport function rotate(cur: any, steps: any, dir: \"forwards\" | \"backwards\" = \"forwards\", wrap = true): any {\n  let list: any[];\n  if (Array.isArray(steps)) list = steps;\n  else {\n    const key = `${steps.min}|${steps.max}|${steps.step}`; // Generate cache key from min|max|step\n    if (_stepsCache.has(key)) list = _stepsCache.get(key)!;\n    else _stepsCache.set(key, (list = Array.from({ length: Math.floor((steps.max - steps.min) / steps.step) + 1 }, (_, i) => steps.min + i * steps.step)));\n  }\n  let idx = \"number\" === typeof cur ? list.reduce((p, c, x) => (Math.abs(c - cur) < Math.abs(list[p] - cur) ? x : p), 0) : list.indexOf(cur);\n  idx = idx + (dir === \"forwards\" ? 1 : -1);\n  return list[wrap ? (idx + list.length) % list.length : clamp(0, idx, list.length - 1)];\n}\n", "// ============ Constants ============\nexport const FN_KEY = \"tmg_fn_registry\";\nexport const LUID_KEY = \"tmg_local_uid\";\n\nexport const whiteListedKeys = [\" \", \"enter\", \"escape\", \"arrowup\", \"arrowdown\", \"arrowleft\", \"arrowright\", \"home\", \"end\", \"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"] as const;\n\nexport const errorCodes = [\n  1, // MEDIA_ERR_ABORTED\n  2, // MEDIA_ERR_NETWORK\n  3, // MEDIA_ERR_DECODE\n  4, // MEDIA_ERR_SRC_NOT_SUPPORTED\n  5, // MEDIA_ERR_UNKNOWN\n] as const;\n\n// ============ Configurations ============\n\nexport const modes = [\"fullscreen\", \"theater\", \"pictureInPicture\", \"miniplayer\"] as const;\n\nexport const controls = [\"expandminiplayer\", \"removeminiplayer\", \"meta\", \"timeline\", \"capture\", \"fullscreenorientation\", \"fullscreenlock\", \"prev\", \"playpause\", \"next\", \"brightness\", \"volume\", \"timeandduration\", \"spacer\", \"playbackrate\", \"captions\", \"settings\", \"objectfit\", \"pictureinpicture\", \"theater\", \"fullscreen\"] as const;\n\nexport const bigControls = [\"bigprev\", \"bigplaypause\", \"bignext\"] as const;\n\nexport const keyShortcutActions = [\"prev\", \"next\", \"playPause\", \"skipBwd\", \"skipFwd\", \"stepFwd\", \"stepBwd\", \"mute\", \"dark\", \"volumeUp\", \"volumeDown\", \"brightnessUp\", \"brightnessDown\", \"playbackRateUp\", \"playbackRateDown\", \"timeMode\", \"timeFormat\", \"capture\", \"objectFit\", \"pictureInPicture\", \"theater\", \"fullscreen\", \"captions\", \"captionsFontSizeUp\", \"captionsFontSizeDown\", \"captionsFontFamily\", \"captionsFontWeight\", \"captionsFontVariant\", \"captionsFontOpacity\", \"captionsBackgroundOpacity\", \"captionsWindowOpacity\", \"captionsCharacterEdgeStyle\", \"captionsTextAlignment\", \"settings\"] as const;\n\nexport const moddedKeyShortcutActions = [\"skip\", \"volume\", \"brightness\", \"playbackRate\", \"captionsFontSize\"] as const; // numerical values\n\nexport const aptAutoplayOptions = [\"in-view\", \"out-view\", \"in-view-always\", \"out-view-always\"];\n\nexport const orientationOptions = [\"auto\", \"landscape\", \"portrait\", \"portrait-primary\", \"portrait-secondary\", \"landscape-primary\", \"landscape-secondary\"] as const;\n", "import { LUID_KEY } from \"../consts/generics\";\n\n// Case Conversion\nexport function capitalize(word = \"\"): string {\n  return word.replace(/^(\\s*)([a-z])/i, (_, s, l) => s + l.toUpperCase());\n}\n\nexport function camelize(str = \"\", { source } = /[\\s_-]+/, { preserveInnerCase: pIC = true, upperFirst: uF = false } = {}): string {\n  return (pIC ? str : str.toLowerCase()).replace(new RegExp(source + \"(\\\\w)\", \"g\"), (_, c) => c.toUpperCase()).replace(/^\\w/, (c) => c[uF ? \"toUpperCase\" : \"toLowerCase\"]());\n}\n\nexport function uncamelize(str = \"\", separator = \" \"): string {\n  return str.replace(/([a-z])([A-Z])/g, `$1${separator}$2`).toLowerCase();\n}\n\n// Generation\nexport function uid(prefix = \"tmg_\"): string {\n  return prefix + Date.now().toString(36) + \"_\" + performance.now().toString(36).replace(\".\", \"\") + \"_\" + Math.random().toString(36).slice(2);\n}\nexport function luid(prefix = \"tmg_\"): string {\n  let id = localStorage.getItem(LUID_KEY);\n  return (!id && localStorage.setItem(LUID_KEY, (id = uid(prefix))), id || \"\");\n}\n\n// Checkers\nexport function isSameURL(src1: unknown, src2: unknown): boolean {\n  if (typeof src1 !== \"string\" || typeof src2 !== \"string\" || !src1 || !src2) return false;\n  try {\n    const u1 = new URL(src1, window.location.href),\n      u2 = new URL(src2, window.location.href);\n    return decodeURIComponent(u1.origin + u1.pathname) === decodeURIComponent(u2.origin + u2.pathname);\n  } catch {\n    return src1.replace(/\\\\/g, \"/\").split(\"?\")[0].trim() === src2.replace(/\\\\/g, \"/\").split(\"?\")[0].trim();\n  }\n}\n", "// File Size Formatting\nexport function formatSize(size: number, decimals = 3, base = 1e3): string {\n  if (size < base) return size + \" byte\" + (size == 1 ? \"\" : \"s\");\n  const units = [\"B\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"],\n    exponent = Math.min(Math.floor(Math.log(size) / Math.log(base)), units.length - 1);\n  return (size / Math.pow(base, exponent)).toFixed(decimals).replace(/\\.0+$/, \"\") + \" \" + units[exponent];\n}\n\n// Extension Helpers\nexport function getExtension(fn: string): string {\n  return fn.slice(fn.lastIndexOf(\".\") + 1).toLowerCase() ?? \"\";\n}\n\nexport function noExtension(fn: string): string {\n  return fn.replace(/(?:\\.(?:mp4|mkv|avi|mov|webm|flv|wmv|m4v|mpg|mpeg|3gp|ogv|ts))+$/i, \"\");\n}\n\n// MIME Type Resolution\nexport function getMimeTypeFromExtension(fn: string): string {\n  return (\n    (\n      {\n        m3u8: \"application/vnd.apple.mpegurl\",\n        mpd: \"application/dash+xml\",\n        avi: \"video/x-msvideo\",\n        mp4: \"video/mp4\",\n        mkv: \"video/x-matroska\",\n        mov: \"video/quicktime\",\n        flv: \"video/x-flv\",\n        webm: \"video/webm\",\n        ogg: \"video/ogg\",\n        wmv: \"video/x-ms-wmv\",\n        \"3gp\": \"video/3gpp\",\n        \"3g2\": \"video/3gpp2\",\n        mpeg: \"video/mpeg\",\n        ts: \"video/mp2t\",\n        m4v: \"video/x-m4v\",\n      } as Record<string, string>\n    )[getExtension(fn)] || \"application/octet-stream\"\n  );\n}\n", "import { createEl } from \"./dom\";\nimport { clamp } from \"./num\";\n\n// Types\ntype RGB = [number, number, number];\ntype DominantColorFormat = \"rgb\" | \"hex\";\n\n// RGB Analysis\nexport function getRGBBri([r, g, b]: RGB): number {\n  return 0.299 * r + 0.587 * g + 0.114 * b;\n}\n\nexport function getRGBSat([r, g, b]: RGB): number {\n  return Math.max(r, g, b) - Math.min(r, g, b);\n}\n\nexport function clampRGBBri([r, g, b]: RGB, m = 40): RGB {\n  const br = getRGBBri([r, g, b]),\n    d = br < m ? m - br : br > 255 - m ? -(br - (255 - m)) : 0;\n  return [r + d, g + d, b + d].map((v) => clamp(0, v, 255)) as RGB;\n}\n\n// Dominant Color Detection\nexport async function getDominantColor(src: string | HTMLImageElement | HTMLCanvasElement | { canvas: HTMLCanvasElement; width: number; height: number }, format: DominantColorFormat = \"rgb\", raw = false): Promise<string | RGB | null> {\n  if (typeof src == \"string\")\n    src = await new Promise<HTMLImageElement>((res, rej) => {\n      const i = createEl(\"img\", { src: String(src), crossOrigin: \"anonymous\", onload: () => res(i), onerror: () => rej(new Error(`Image load error: ${src}`)) });\n    });\n  if ((src as { canvas?: HTMLCanvasElement })?.canvas) src = (src as { canvas: HTMLCanvasElement }).canvas;\n  const c = document.createElement(\"canvas\"),\n    x = c.getContext(\"2d\"),\n    s = Math.min(100, (src as HTMLImageElement | HTMLCanvasElement).width, (src as HTMLImageElement | HTMLCanvasElement).height);\n  c.width = c.height = s;\n  src && x?.drawImage(src as CanvasImageSource, 0, 0, s, s);\n  const d = src && (x?.getImageData(0, 0, s, s).data as Uint8ClampedArray), // had to fool ts, coallesced to 0 below\n    ct: Record<string, number> = {},\n    pt: Record<string, RGB> = {} as Record<string, RGB>;\n  for (let i = 0; i < (d?.length ?? 0); i += 4) {\n    if (d[i + 3] < 128) continue;\n    const k = (d[i] & 0xf0) + \",\" + (d[i + 1] & 0xf0) + \",\" + (d[i + 2] & 0xf0);\n    ct[k] = (ct[k] || 0) + 1;\n    pt[k] = pt[k] ? [pt[k][0] + d[i], pt[k][1] + d[i + 1], pt[k][2] + d[i + 2]] : [d[i], d[i + 1], d[i + 2]];\n  }\n  const clrs = Object.keys(ct)\n    .sort((a, b) => ct[b] - ct[a])\n    .slice(0, 7)\n    .map((k) => ({ key: k, rgb: pt[k].map((v) => Math.round(v / ct[k])) as RGB }));\n  if (!clrs.length) return null;\n  const [r, g, b] = clampRGBBri(clrs.reduce((sat, curr) => (getRGBSat(sat.rgb) > getRGBSat(curr.rgb) ? sat : curr), clrs[0]).rgb, 70);\n  return format === \"hex\" ? `#${((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1)}` : raw == false ? `rgb(${r},${g},${b})` : [r, g, b];\n}\n\nexport function convertToMonoChrome(canvas: HTMLCanvasElement, context: CanvasRenderingContext2D) {\n  const frame = context.getImageData(0, 0, canvas.width || 1, canvas.height || 1);\n  for (let i = 0; i < frame.data.length / 4; i++) {\n    const grey = (frame.data[i * 4 + 0] + frame.data[i * 4 + 1] + frame.data[i * 4 + 2]) / 3;\n    ((frame.data[i * 4 + 0] = grey), (frame.data[i * 4 + 1] = grey), (frame.data[i * 4 + 2] = grey));\n  }\n  context.putImageData(frame, 0, 0);\n}\n", "/*\n * Portions of this code are derived from Video.js\n * https://github.com/videojs/video.js\n * Licensed under Apache License 2.0\n * Copyright (c) Brightcove, Inc. and contributors\n */\n\n// Types\ntype BrandEntry = { brand?: string; version?: string };\n\n// Environment guards\nconst w = typeof window !== \"undefined\" ? window : undefined;\nconst nav = w?.navigator;\nconst ua = nav?.userAgent || \"\";\nconst uaData = (nav as Navigator & { userAgentData?: { platform?: string; brands?: BrandEntry[] } })?.userAgentData;\n\n// Base flags: bools first, versions second for readability\nexport let IS_ANDROID = false;\nexport let IS_WINDOWS = false;\nexport let IS_FIREFOX = false;\nexport let IS_EDGE = false;\nexport let IS_CHROME = false;\nexport let IS_CHROMIUM = false;\nexport let IS_SAFARI = false;\nexport let IS_IE = false;\nexport let IS_TIZEN = false;\nexport let IS_WEBOS = false;\nexport let IS_IPOD = false;\nexport let IS_IPAD = false;\nexport let IS_IPHONE = false;\n// Versioned details\ntype Version = string | null;\nexport let IOS_VERSION: Version = null;\nexport let ANDROID_VERSION: Version = null;\nexport let CHROME_VERSION: Version = null;\nexport let CHROMIUM_VERSION: Version = null;\nexport let IE_VERSION: Version = null;\n\n// Capabilities\nexport const IS_CHROMECAST_RECEIVER = Boolean((w as any)?.cast?.framework?.CastReceiverContext);\nexport const TOUCH_ENABLED = Boolean(w && (\"ontouchstart\" in w || (nav as Navigator & { maxTouchPoints?: number })?.maxTouchPoints || ((w as any).DocumentTouch && w.document instanceof (w as any).DocumentTouch)));\n\n// Helpers\nconst pickVersion = (brands: BrandEntry[], needle: string): Version => brands.find((b) => b.brand === needle && b.version)?.version || null;\n\n// Modern detection first (userAgentData)\nif (uaData?.platform && uaData?.brands) {\n  // Platform first\n  IS_ANDROID = uaData.platform === \"Android\";\n  IS_WINDOWS = uaData.platform === \"Windows\";\n  // Browser family\n  IS_EDGE = uaData.brands.some((b) => b.brand === \"Microsoft Edge\");\n  IS_CHROMIUM = uaData.brands.some((b) => b.brand === \"Chromium\" || b.brand === \"Google Chrome\");\n  IS_CHROME = IS_CHROMIUM && !IS_EDGE;\n  // Versions\n  CHROMIUM_VERSION = CHROME_VERSION = pickVersion(uaData.brands, \"Chromium\") || pickVersion(uaData.brands, \"Google Chrome\");\n}\n\n// Fallback / additional parsing via UA string\nif (!IS_CHROMIUM || !CHROMIUM_VERSION) {\n  // General Platforms\n  IS_ANDROID = /Android/i.test(ua);\n  IS_WINDOWS ||= /Windows/i.test(ua);\n  // Desktop & general browsers (include iOS-branded variants)\n  IS_FIREFOX = /Firefox|FxiOS/i.test(ua);\n  IS_EDGE = /Edg|EdgiOS/i.test(ua);\n  IS_CHROMIUM = /Chrome|CriOS/i.test(ua);\n  IS_CHROME = IS_CHROMIUM && !IS_EDGE;\n  IS_SAFARI = /Safari/i.test(ua) && !IS_CHROME && !IS_FIREFOX && !IS_EDGE;\n  IS_IE = /MSIE|(Trident\\/7.0)|(rv:11.0)/i.test(ua);\n  // TVs\n  IS_TIZEN = /Tizen/i.test(ua);\n  IS_WEBOS = /Web0S/i.test(ua);\n  // Apple desktop/mobile device refinement\n  IS_IPOD = /iPod/i.test(ua);\n  IS_IPAD = /iPad/i.test(ua) || (IS_SAFARI && TOUCH_ENABLED && !/iPhone/i.test(ua));\n  IS_IPHONE = /iPhone/i.test(ua) && !IS_IPAD;\n  // Versions\n  IOS_VERSION = ua.match(/OS (\\d+)_/i)?.[1] ?? null;\n  ANDROID_VERSION = ua.match(/Android\\s(\\d+(?:\\.\\d+)+)/i)?.[1] ?? null;\n  CHROMIUM_VERSION = CHROME_VERSION = ua.match(/(?:Chrome|CriOS)\\/(\\d+)/)?.[1] ?? CHROMIUM_VERSION;\n  IE_VERSION = ua.match(/MSIE\\s(\\d+)\\.\\d/)?.[1] || (/Trident\\/7.0/i.test(ua) && /rv:11.0/.test(ua) ? \"11.0\" : null);\n}\n\n// Composite Flags\nexport const IS_IOS = IS_IPHONE || IS_IPAD || IS_IPOD;\nexport const IS_MOBILE = Boolean(IS_ANDROID || IS_IPHONE || IS_IPOD || IS_IPAD);\nexport const IS_SMART_TV = IS_TIZEN || IS_WEBOS;\n\n// Media Queries\nexport const queryMediaMobile = (query = \"(max-width: 480px), (max-width: 940px) and (max-height: 480px) and (orientation: landscape)\"): boolean => Boolean(w && \"matchMedia\" in w && w.matchMedia(query).matches);\n", "import { whiteListedKeys } from \"../consts/generics\";\nimport { isArr } from \"./obj\";\n\ntype KeyStruct = Record<\"ctrlKey\" | \"shiftKey\" | \"altKey\" | \"metaKey\", boolean> & { key: string };\n\nexport function parseKeyCombo(combo: string): KeyStruct {\n  const parts = combo.toLowerCase().split(\"+\");\n  return { ctrlKey: parts.includes(\"ctrl\"), shiftKey: parts.includes(\"shift\"), altKey: parts.includes(\"alt\"), metaKey: parts.includes(\"meta\") || parts.includes(\"cmd\"), key: parts.find((p) => ![\"ctrl\", \"shift\", \"alt\", \"meta\", \"cmd\"].includes(p)) || \"\" };\n}\n\nexport function stringifyKeyCombo(e: KeyStruct | KeyboardEvent): string {\n  const parts: string[] = [];\n  if (e.ctrlKey) parts.push(\"ctrl\");\n  if (e.altKey) parts.push(\"alt\");\n  if (e.shiftKey) parts.push(\"shift\");\n  if (e.metaKey) parts.push(\"meta\");\n  parts.push(e.key?.toLowerCase() ?? \"\");\n  return parts.join(\"+\");\n}\n\n// export function cleanKeyCombo(combo: string): string;\n// export function cleanKeyCombo(combo: string[]): string[];\nexport function cleanKeyCombo(combo: string | string[]): string | string[] {\n  const clean = (combo: string): string => {\n    const m = [\"ctrl\", \"alt\", \"shift\", \"meta\"],\n      alias: Record<string, string> = { cmd: \"meta\" };\n    if (combo === \" \" || combo === \"+\") return combo;\n    combo = combo.replace(/\\+\\s*\\+$/, \"+plus\");\n    const p = combo\n      .toLowerCase()\n      .split(\"+\")\n      .filter((k) => k !== \"\")\n      .map((k) => alias[k] || (k === \"plus\" ? \"+\" : k.trim() || \" \"));\n    return [...p.filter((k) => m.includes(k)).sort((a, b) => m.indexOf(a) - m.indexOf(b)), ...(p.filter((k) => !m.includes(k)) || \"\")].join(\"+\");\n  };\n  return isArr(combo) ? combo.map(clean) : clean(combo);\n}\n\nexport function matchKeys(required: string | string[], actual: string, strict = false): boolean {\n  const match = (required: string, actual: string): boolean => {\n    if (strict) return required === actual;\n    const reqKeys = required.split(\"+\"),\n      actKeys = actual.split(\"+\");\n    return reqKeys.every((k) => actKeys.includes(k));\n  };\n  return isArr(required) ? required.some((req) => match(req, actual)) : match(required, actual);\n}\n\nexport function getTermsForKey(combo: string, settings: any): { override: boolean; block: boolean; allowed: boolean; action: string | null } {\n  const terms = { override: false, block: false, allowed: false, action: null as string | null },\n    { overrides = [], shortcuts = {}, blocks = [], strictMatches: s = false } = settings?.keys || {};\n  if (matchKeys(overrides, combo, s)) terms.override = true;\n  if (matchKeys(blocks, combo, s)) terms.block = true;\n  if (matchKeys(whiteListedKeys as unknown as string[], combo)) terms.allowed = true;\n  terms.action = Object.keys(shortcuts).find((key) => matchKeys(shortcuts[key] as string | string[], combo, s)) || null;\n  return terms;\n}\n\nexport function keyEventAllowed(e: KeyboardEvent, settings: any): boolean | string {\n  if (settings?.keys?.disabled || ((e.key === \" \" || e.key === \"Enter\") && (e.currentTarget as any)?.document?.activeElement?.tagName === \"BUTTON\") || (e.currentTarget as any)?.document?.activeElement?.matches(\"input,textarea,[contenteditable='true']\")) return false;\n  const combo = stringifyKeyCombo(e),\n    { override, block, action, allowed } = getTermsForKey(combo, settings);\n  if (block) return false;\n  if (override) e.preventDefault();\n  if (action) return action;\n  if (allowed) return e.key.toLowerCase();\n  return false;\n}\n\nexport const formatKeyForDisplay = (combo: string | string[]): string => ` ${(isArr(combo) ? combo : [combo]).map((c) => `(${c})`).join(\" or \")}`;\n\nexport function formatKeyShortcutsForDisplay(keyShortcuts: Record<string, string | string[]>): Record<string, string> {\n  const shortcuts: Record<string, string> = {};\n  for (const action of Object.keys(keyShortcuts)) shortcuts[action] = formatKeyForDisplay(keyShortcuts[action]);\n  return shortcuts;\n}\n\nexport function parseForARIAKS(s: string) {\n  const m = { ctrl: \"Control\", cmd: \"Meta\", space: \"Space\", plus: \"+\" };\n  return s\n    .toLowerCase()\n    .replace(/[()]/g, \"\") // 1. Remove parens\n    .replace(/\\bor\\b/g, \" \") // 2. Replace \"or\" with the REQUIRED space\n    .replace(/\\w+/g, (k: any) => m[k as keyof typeof m] || k) // 3. Map keys (ctrl -> Control)\n    .replace(/\\s+/g, \" \")\n    .trim(); // 4. Cleanup extra spaces\n}\n", "import { FN_KEY } from \"../consts/generics\";\nimport { uid } from \".\";\n\n// ============ Timer Utilities ============\nconst isSig = (a: any): a is AbortSignal => a instanceof AbortSignal;\n\nexport function setTimeout(handler: TimerHandler, timeout?: number, ...args: any[]) {\n  const sig = isSig(args[0]) ? args.shift() : undefined;\n  if (sig?.aborted) return -1;\n  if (!sig) return window.setTimeout(handler, timeout, ...args);\n  const id = window.setTimeout(() => (sig.removeEventListener(\"abort\", kill), typeof handler === \"string\" ? new Function(handler) : handler(...args)), timeout),\n    kill = () => window.clearTimeout(id);\n  return (sig.addEventListener(\"abort\", kill, { once: true }), id);\n}\n\nexport function setInterval(handler: TimerHandler, timeout?: number, ...args: any[]) {\n  const sig = isSig(args[0]) ? args.shift() : undefined;\n  if (sig?.aborted) return -1;\n  const id = window.setInterval(handler, timeout, ...args);\n  return (sig?.addEventListener(\"abort\", () => window.clearInterval(id), { once: true }), id);\n}\n\nexport function requestAnimationFrame(callback: FrameRequestCallback, sig?: AbortSignal) {\n  if (sig?.aborted) return -1;\n  if (!sig) return window.requestAnimationFrame(callback);\n  const id = window.requestAnimationFrame((t) => (sig.removeEventListener(\"abort\", kill), callback(t))),\n    kill = () => window.cancelAnimationFrame(id);\n  return (sig.addEventListener(\"abort\", kill, { once: true }), id);\n}\n\n// ============ Async Utilities ============\n\nexport const mockAsync = (timeout = 250): Promise<void> => new Promise((resolve) => setTimeout(resolve, timeout));\n\n// ============ Limited Call Utilities ============\n\ninterface LimitedOptions {\n  key?: string; /** Key for localStorage persistence (if omitted, uses session-only) */\n  maxTimes?: number; /** Max times to call (default: 1) */\n}\ninterface LimitedHandle<T extends (...args: any[]) => any> {\n  (...args: Parameters<T>): ReturnType<T> | void;\n  count: number;\n  left: number;\n  reset: () => void;\n  block: () => void;\n}\n\nexport function limited<T extends (...args: any[]) => any>(fn: T, opts: LimitedOptions | string = {}): LimitedHandle<T> {\n  let count = 0,\n    { key, maxTimes: max = 1 } = \"string\" === typeof opts ? { key: opts } : opts;\n  const getReg = () => JSON.parse(localStorage.getItem(FN_KEY) || \"{}\"),\n    setReg = (r: Record<string, number>) => localStorage.setItem(FN_KEY, JSON.stringify(r));\n  const handle = (...args: Parameters<T>): ReturnType<T> | void => {\n    if (!key) return count++ < max ? fn(...args) : undefined;\n    const r = getReg(),\n      c = r[key] || 0;\n    return c < max ? ((r[key] = c + 1), setReg(r), fn(...args)) : undefined;\n  };\n  handle.left = max - (handle.count = count);\n  handle.reset = () => ((count = 0), key && ((r) => (delete r[key], setReg(r)))(getReg()));\n  handle.block = () => ((count = max), key && ((r) => ((r[key] = max), setReg(r)))(getReg()));\n  return handle;\n}\n\nexport const oncePerSession = <T extends (...args: any[]) => any>(fn: T) => limited(fn);\nexport const onceEver = <T extends (...args: any[]) => any>(fn: T, key = uid()) => limited(fn, key);\n\n// ============ Deprecation Helpers ============\n\n/**\n * Log a deprecation warning (once per session)\n * @param message - Deprecation warning message\n */\nexport function deprecate(message: string): void {\n  oncePerSession(() => console.warn(message))();\n}\n\n/**\n * Log a deprecation warning for a major version upgrade\n * @param major - Major version number when removal occurs\n * @param oldName - Name of deprecated feature\n * @param newName - Optional replacement feature name\n */\nexport function deprecateForMajor(major: number, oldName: string, newName?: string): void {\n  deprecate(newName ? `${oldName} is deprecated and will be removed in ${major}.0; use ${newName} instead.` : `${oldName} is deprecated and will be removed in ${major}.0.`);\n}\n", "import { VideoBuild } from \"../types/build\";\nimport { PlaylistItemBuild } from \"../plugs\";\nimport { DeepPartial } from \"../types/obj\";\nimport { IS_MOBILE } from \"../utils\";\n\nexport const DEFAULT_VIDEO_BUILD: DeepPartial<VideoBuild> = {\n  mediaPlayer: \"TMG\",\n  mediaType: \"video\",\n  media: { title: \"\", artist: \"\", profile: \"\", album: \"\", artwork: [], chapterInfo: [], links: { title: \"\", artist: \"\", profile: \"\" } },\n  disabled: false,\n  lightState: { disabled: false, controls: [\"meta\", \"bigplaypause\", \"fullscreenorientation\"], preview: { usePoster: true, time: 2 } },\n  debug: true,\n  settings: {\n    auto: { next: 2000000 },\n    css: {},\n    brightness: { min: 0, max: 150, value: 100, skip: 5 },\n    captions: {\n      disabled: false,\n      allowVideoOverride: true,\n      font: {\n        family: {\n          value: \"inherit\",\n          options: [\n            { value: \"inherit\", display: \"Default\" },\n            { value: \"monospace\", display: \"Monospace\" },\n            { value: \"sans-serif\", display: \"Sans Serif\" },\n            { value: \"serif\", display: \"Serif\" },\n            { value: \"cursive\", display: \"Cursive\" },\n            { value: \"fantasy\", display: \"Fantasy\" },\n            { value: \"system-ui\", display: \"System UI\" },\n            { value: \"arial\", display: \"Arial\" },\n            { value: \"verdana\", display: \"Verdana\" },\n            { value: \"tahoma\", display: \"Tahoma\" },\n            { value: \"times new roman\", display: \"Times New Roman\" },\n            { value: \"georgia\", display: \"Georgia\" },\n            { value: \"impact\", display: \"Impact\" },\n            { value: \"comic sans ms\", display: \"Comic Sans MS\" },\n          ],\n        },\n        size: {\n          min: 100,\n          max: 400,\n          value: 100,\n          skip: 100,\n          options: [\n            { value: 25, display: \"25%\" },\n            { value: 50, display: \"50%\" },\n            { value: 100, display: \"100%\" },\n            { value: 150, display: \"150%\" },\n            { value: 200, display: \"200%\" },\n            { value: 300, display: \"300%\" },\n            { value: 400, display: \"400%\" },\n          ],\n        },\n        color: {\n          value: \"white\",\n          options: [\n            { value: \"white\", display: \"White\" },\n            { value: \"yellow\", display: \"Yellow\" },\n            { value: \"green\", display: \"Green\" },\n            { value: \"cyan\", display: \"Cyan\" },\n            { value: \"blue\", display: \"Blue\" },\n            { value: \"magenta\", display: \"Magenta\" },\n            { value: \"red\", display: \"Red\" },\n            { value: \"black\", display: \"Black\" },\n          ],\n        },\n        opacity: {\n          value: 1,\n          options: [\n            { value: 0.25, display: \"25%\" },\n            { value: 0.5, display: \"50%\" },\n            { value: 0.75, display: \"75%\" },\n            { value: 1, display: \"100%\" },\n          ],\n        },\n        weight: {\n          value: \"400\",\n          options: [\n            { value: \"100\", display: \"Thin\" },\n            { value: \"200\", display: \"Extra Light\" },\n            { value: \"300\", display: \"Light\" },\n            { value: \"400\", display: \"Normal\" },\n            { value: \"500\", display: \"Medium\" },\n            { value: \"600\", display: \"Semi Bold\" },\n            { value: \"700\", display: \"Bold\" },\n            { value: \"800\", display: \"Extra Bold\" },\n            { value: \"900\", display: \"Black\" },\n          ],\n        },\n        variant: {\n          value: \"normal\",\n          options: [\n            { value: \"normal\", display: \"Normal\" },\n            { value: \"small-caps\", display: \"Small Caps\" },\n            { value: \"all-small-caps\", display: \"All Small Caps\" },\n          ],\n        },\n      },\n      background: {\n        color: {\n          value: \"black\",\n          options: [\n            { value: \"white\", display: \"White\" },\n            { value: \"yellow\", display: \"Yellow\" },\n            { value: \"green\", display: \"Green\" },\n            { value: \"cyan\", display: \"Cyan\" },\n            { value: \"blue\", display: \"Blue\" },\n            { value: \"magenta\", display: \"Magenta\" },\n            { value: \"red\", display: \"Red\" },\n            { value: \"black\", display: \"Black\" },\n          ],\n        },\n        opacity: {\n          value: 0.75,\n          options: [\n            { value: 0, display: \"0%\" },\n            { value: 0.25, display: \"25%\" },\n            { value: 0.5, display: \"50%\" },\n            { value: 0.75, display: \"75%\" },\n            { value: 1, display: \"100%\" },\n          ],\n        },\n      },\n      window: {\n        color: {\n          value: \"black\",\n          options: [\n            { value: \"white\", display: \"White\" },\n            { value: \"yellow\", display: \"Yellow\" },\n            { value: \"green\", display: \"Green\" },\n            { value: \"cyan\", display: \"Cyan\" },\n            { value: \"blue\", display: \"Blue\" },\n            { value: \"magenta\", display: \"Magenta\" },\n            { value: \"red\", display: \"Red\" },\n            { value: \"black\", display: \"Black\" },\n          ],\n        },\n        opacity: {\n          value: 0,\n          options: [\n            { value: 0, display: \"0%\" },\n            { value: 0.25, display: \"25%\" },\n            { value: 0.5, display: \"50%\" },\n            { value: 0.75, display: \"75%\" },\n            { value: 1, display: \"100%\" },\n          ],\n        },\n      },\n      characterEdgeStyle: {\n        value: \"none\",\n        options: [\n          { value: \"none\", display: \"None\" },\n          { value: \"drop-shadow\", display: \"Drop Shadow\" },\n          { value: \"raised\", display: \"Raised\" },\n          { value: \"depressed\", display: \"Depressed\" },\n          { value: \"outline\", display: \"Outline\" },\n        ],\n      },\n      textAlignment: {\n        value: \"left\",\n        options: [\n          { value: \"left\", display: \"Left\" },\n          { value: \"center\", display: \"Center\" },\n          { value: \"right\", display: \"Right\" },\n        ],\n      },\n    },\n    controlPanel: {\n      profile: true,\n      title: true,\n      artist: true,\n      top: [\"expandminiplayer\", \"spacer\", \"meta\", \"spacer\", \"capture\", \"fullscreenlock\", \"fullscreenorientation\", \"removeminiplayer\"],\n      center: [\"bigprev\", \"bigplaypause\", \"bignext\"],\n      bottom: { 1: [], 2: [\"spacer\", \"timeline\", \"spacer\"], 3: [\"prev\", \"playpause\", \"next\", \"brightness\", \"volume\", \"timeandduration\", \"spacer\", \"captions\", \"settings\", \"objectfit\", \"pictureinpicture\", \"theater\", \"fullscreen\"] },\n      buffer: \"eclipse\",\n      timeline: { thumbIndicator: true, seek: { relative: !IS_MOBILE, cancel: { delta: 15, timeout: 2000 } } },\n      progressBar: IS_MOBILE,\n      draggable: [\"\", \"wrapper\"],\n    },\n    errorMessages: { 1: \"The video playback was aborted :(\", 2: \"The video failed due to a network error :(\", 3: \"The video could not be decoded :(\", 4: \"The video source is not supported :(\" },\n    fastPlay: { playbackRate: 2, key: true, pointer: { type: \"all\", threshold: 800, inset: 20 }, reset: true, rewind: true },\n    gesture: {\n      click: IS_MOBILE ? \"\" : \"togglePlay\",\n      dblClick: IS_MOBILE ? \"togglePlay\" : \"toggleFullscreenMode\",\n      touch: { volume: true, brightness: true, timeline: true, threshold: 200, axesRatio: 3, inset: 20, sliderTimeout: 1000, xRatio: 1, yRatio: 1 },\n      wheel: { volume: { normal: true, slider: true }, brightness: { normal: true, slider: true }, timeline: { normal: true, slider: true }, timeout: 2000, xRatio: 12, yRatio: 6 },\n    },\n    keys: {\n      disabled: false,\n      strictMatches: false,\n      overrides: [\" \", \"ArrowDown\", \"ArrowUp\", \"ArrowLeft\", \"ArrowRight\", \"Home\", \"End\"],\n      shortcuts: { prev: \"Shift+p\", next: \"Shift+n\", playPause: \"k\", mute: \"m\", dark: \"d\", skipBwd: \"j\", skipFwd: \"l\", stepFwd: \".\", stepBwd: \",\", volumeUp: \"ArrowUp\", volumeDown: \"ArrowDown\", brightnessUp: \"y\", brightnessDown: \"h\", playbackRateUp: \">\", playbackRateDown: \"<\", timeFormat: \"z\", timeMode: \"q\", capture: \"s\", objectFit: \"a\", pictureInPicture: \"i\", theater: \"t\", fullscreen: \"f\", captions: \"c\", captionsFontSizeUp: [\"+\", \"=\"], captionsFontSizeDown: [\"-\", \"_\"], captionsFontFamily: \"u\", captionsFontWeight: \"g\", captionsFontVariant: \"v\", captionsFontOpacity: \"o\", captionsBackgroundOpacity: \"b\", captionsWindowOpacity: \"w\", captionsCharacterEdgeStyle: \"e\", captionsTextAlignment: \"x\", settings: \"?\" },\n      mods: { disabled: false, skip: { ctrl: 60, shift: 10 }, volume: { ctrl: 50, shift: 10 }, brightness: { ctrl: 50, shift: 10 }, playbackRate: { ctrl: 1 }, captionsFontSize: {} },\n      // prettier-ignore\n      blocks: [\"Ctrl+Tab\", \"Ctrl+Shift+Tab\", \"Ctrl+PageUp\", \"Ctrl+PageDown\", \"Cmd+Option+ArrowRight\", \"Cmd+Option+ArrowLeft\", \"Ctrl+1\", \"Ctrl+2\", \"Ctrl+3\", \"Ctrl+4\", \"Ctrl+5\", \"Ctrl+6\", \"Ctrl+7\", \"Ctrl+8\", \"Ctrl+9\", \"Cmd+1\", \"Cmd+2\", \"Cmd+3\", \"Cmd+4\", \"Cmd+5\", \"Cmd+6\", \"Cmd+7\", \"Cmd+8\", \"Cmd+9\", \"Alt+ArrowLeft\", \"Alt+ArrowRight\", \"Cmd+ArrowLeft\", \"Cmd+ArrowRight\", \"Ctrl+r\", \"Ctrl+Shift+r\", \"F5\", \"Shift+F5\", \"Cmd+r\", \"Cmd+Shift+r\", \"Ctrl+h\", \"Ctrl+j\", \"Ctrl+d\", \"Ctrl+f\", \"Cmd+y\", \"Cmd+Option+b\", \"Cmd+d\", \"Cmd+f\", \"Ctrl+Shift+i\", \"Ctrl+Shift+j\", \"Ctrl+Shift+c\", \"Ctrl+u\", \"F12\", \"Cmd+Option+i\", \"Cmd+Option+j\", \"Cmd+Option+c\", \"Cmd+Option+u\", \"Ctrl+=\", \"Ctrl+-\", \"Ctrl+0\", \"Cmd+=\", \"Cmd+-\", \"Cmd+0\", \"Ctrl+p\", \"Ctrl+s\", \"Ctrl+o\", \"Cmd+p\", \"Cmd+s\", \"Cmd+o\"],\n    },\n    locked: { disabled: true },\n    modes: { fullscreen: { disabled: false, orientationLock: \"auto\", onRotate: 90 }, theater: !IS_MOBILE, pictureInPicture: { disabled: false, floatingPlayer: { disabled: false, width: 500, height: 281, disallowReturnToOpener: false, preferInitialWindowPlacement: false } }, miniplayer: { disabled: false, minWindowWidth: 240 } },\n    notifiers: true,\n    noOverride: false,\n    overlay: { delay: 3000, behavior: \"strict\" },\n    persist: { disabled: false, throttle: 5000 },\n    playbackRate: { min: 0.25, max: 8, skip: 0.25 },\n    playsInline: true,\n    time: { min: 0, skip: 10, previews: false, mode: \"elapsed\", format: \"digital\", seekSync: false },\n    toasts: { disabled: false, nextVideoPreview: { usePoster: true, time: 2, tease: true }, captureAutoClose: 15000000, maxToasts: 7, position: \"bottom-left\", hideProgressBar: true, closeButton: !IS_MOBILE, animation: \"slide-up\", dragToCloseDir: \"x||y\" },\n    volume: { min: 0, max: 300, skip: 5 },\n  },\n};\n\nexport const DEFAULT_VIDEO_ITEM_BUILD: DeepPartial<PlaylistItemBuild> = {\n  media: { title: \"\", chapterInfo: [], links: { title: \"\" } },\n  src: \"\",\n  tracks: [],\n  settings: { time: { start: 0, previews: false } },\n}; // for a playlist\n", "import { Controller } from \"../core/controller\";\nimport { Controllers } from \"./runtime\";\nimport { loadResource, mergeObjs, parseAnyObj, isIter, assignHTMLConfig, cleanKeyCombo, isObj, supportsFullscreen, supportsPictureInPicture, setAny, luid } from \"../utils\";\nimport { DEFAULT_VIDEO_BUILD, DEFAULT_VIDEO_ITEM_BUILD } from \"../consts/config-defaults\";\nimport type { VideoBuild } from \"../types/build\";\nimport { DeepPartial, Paths, PathValue } from \"../types/obj\";\n\nconst modes: Record<string, boolean> = { fullScreen: supportsFullscreen(), pictureInPicture: supportsPictureInPicture() };\n\nexport type BuildPaths = Paths<VideoBuild>;\nexport type BuildParam = DeepPartial<VideoBuild> & Record<BuildPaths, PathValue<VideoBuild, BuildPaths>>;\n\nexport class Player {\n  #medium: HTMLMediaElement | null = null;\n  #active: boolean = false;\n  #controller: Controller | null = null;\n  #build: VideoBuild = structuredClone(DEFAULT_VIDEO_BUILD as VideoBuild);\n\n  constructor(customBuild: BuildParam = {} as BuildParam) {\n    this.configure({ ...customBuild, id: customBuild.id ?? `${luid(\"tmg_Controller_\")}_${Controllers.length + 1}` });\n  }\n\n  public get Controller() {\n    return this.#controller;\n  }\n\n  public get build(): VideoBuild {\n    return this.#build;\n  }\n  public set build(customBuild: BuildParam) {\n    this.configure(customBuild);\n  }\n  private queryBuild(): boolean {\n    return (!this.#active ? true : this.notice({ error: \"Already deployed the custom controls of your build configuration\", tip: \"Consider setting your build configuration before attaching your media element\" }), false);\n  }\n\n  private notice({ error, warning, tip }: Partial<Record<\"error\" | \"warning\" | \"tip\", string>>) {\n    error && console.error(`[TMG Player] ${error}`);\n    warning && console.warn(`[TMG Player] ${warning}`);\n    tip && console.info(`[TMG Player] ${tip}`);\n  }\n\n  public configure(customBuild: BuildParam): void {\n    if (!this.queryBuild() || !isObj(customBuild)) return;\n    this.#build = mergeObjs(this.#build, parseAnyObj(customBuild));\n    const keys = this.#build.settings.keys;\n    if (!keys) return;\n    Object.keys(keys.shortcuts || {}).forEach((k) => ((keys.shortcuts as any)[k] = cleanKeyCombo((keys.shortcuts as any)[k])));\n    [\"blocks\", \"overrides\"].forEach((k) => ((keys as any)[k] = cleanKeyCombo((keys as any)[k])));\n  }\n\n  public async attach(medium: HTMLMediaElement) {\n    if (isIter(medium)) return this.notice({ error: \"An iterable argument cannot be attached to the TMG media player\", tip: \"Consider looping the iterable argument to instantiate a new 'tmg.Player' for each\" });\n    if (this.#active) return medium;\n    medium.tmgPlayer?.detach();\n    medium.tmgPlayer = this;\n    this.#medium = medium;\n    await this.fetchCustomOptions();\n    await this.deployController();\n    return (this.#controller?.fire(\"tmgattached\", this.#controller.payload), medium);\n  }\n\n  public detach() {\n    if (!this.#active) return;\n    const medium = this.#controller?.destroy() ?? null;\n    this.#controller && Controllers.splice(Controllers.indexOf(this.#controller), 1);\n    medium?.classList.remove(`tmg-${medium?.tagName.toLowerCase()}`, \"tmg-media\");\n    if (medium) ((medium.tmgcontrols = false), (medium.tmgPlayer = null));\n    this.#active = false;\n    this.#controller?.fire(\"tmgdetached\");\n    this.#controller = this.#medium = null;\n    return medium;\n  }\n\n  public async fetchCustomOptions() {\n    if (!this.#medium) return;\n    if (this.#medium.getAttribute(\"tmg\")?.includes(\".json\")) {\n      await fetch(this.#medium.getAttribute(\"tmg\")!)\n        .then((res) => {\n          if (!res.ok) throw new Error(`JSON file not found at provided URL!. Status: ${res.status}`);\n          return res.json();\n        })\n        .then((json) => this.configure(json))\n        .catch(({ message }) => this.notice({ error: message, tip: \"A valid JSON file is required for parsing your build configuration\" }));\n    }\n    const customBuild = {} as BuildParam,\n      attributes = this.#medium.getAttributeNames().filter((attr) => attr.startsWith(\"tmg--\"));\n    attributes?.forEach((attr) => assignHTMLConfig<BuildParam>(customBuild, attr as `tmg--${BuildPaths}`, this.#medium!.getAttribute(attr)!));\n    if (this.#medium instanceof HTMLVideoElement && this.#medium.poster) this.configure({ \"media.artwork[0].src\": this.#medium.poster } as any);\n    this.configure(customBuild);\n  }\n\n  private async deployController() {\n    if (this.#active || !this.#medium?.isConnected) return;\n    if (this.#build.playlist?.[0]) this.configure(mergeObjs(DEFAULT_VIDEO_ITEM_BUILD as BuildParam, parseAnyObj(this.#build.playlist[0] as BuildParam)));\n    if (!(this.#medium instanceof HTMLVideoElement)) return this.notice({ error: `Could not deploy custom controls on the '${this.#medium.tagName}' element as it is not supported`, warning: \"Only the 'VIDEO' element is currently supported\", tip: \"\" });\n    this.#medium.tmgcontrols = this.#active = true;\n    this.#medium.controls = false;\n    this.#medium.classList.add(`tmg-${this.#medium.tagName.toLowerCase()}`, \"tmg-media\");\n    const s = this.#build.settings;\n    type Mode = keyof typeof s.modes;\n    Object.keys(s.modes).forEach((k) => (s.modes[k as Mode] = (s.modes[k as Mode] && (modes[String(k)] ?? true) ? s.modes[k as Mode] : false) as any));\n    await Promise.all([loadResource(window?.TMG_VIDEO_CSS_SRC), loadResource(window?.T007_TOAST_JS_SRC, \"script\", { module: true })]);\n    Controllers.push((this.#controller = new Controller(this.#medium, this.#build)));\n  }\n}\n", "import { Player } from \"./player\";\nimport { type Controller } from \"../core/controller\";\nimport { queryFullscreen, observeMutation, type Dimensions } from \"../utils\";\n\n// Defines states explicitly managed by the TMG Environment Observers\nexport interface RuntimeState {\n  readyState: number;\n  audioContextReady: boolean;\n  mediaIntersecting: boolean;\n  mediaParentIntersecting: boolean;\n  dimensions: {\n    container: Dimensions & { tier: string };\n    pseudoContainer: Dimensions & { tier: string };\n    window: Dimensions;\n  };\n  screenOrientation: ScreenOrientation;\n  docVisibilityState: DocumentVisibilityState;\n  docInFullscreen: boolean;\n}\n\n// --- GLOBAL STATE ---\nexport let AUDIO_CONTEXT: AudioContext | null = null;\nexport let AUDIO_LIMITER: DynamicsCompressorNode | null = null;\nexport let IS_DOC_TRANSIENT = false;\nlet _mutationId: any = null;\nconst _mutationSet = new WeakSet<HTMLElement>(); // weak set for true magic\n\n// --- EXPORTS ---\nexport const Controllers: Controller[] = [];\n\nconst handleVidMutation = (mutations: MutationRecord[]) => {\n  for (const mutation of mutations) {\n    if (mutation.type !== \"attributes\") continue;\n    const target = mutation.target as HTMLMediaElement;\n    if (mutation.attributeName === \"tmgcontrols\") !_mutationSet.has(target) && (target.tmgcontrols = target.hasAttribute(\"tmgcontrols\"));\n    else if (mutation.attributeName?.startsWith(\"tmg\")) target.hasAttribute(mutation.attributeName) && target.tmgPlayer?.fetchCustomOptions();\n    else if (mutation.attributeName === \"controls\") target.hasAttribute(\"tmgcontrols\") && target.removeAttribute(\"controls\");\n  }\n};\n\nconst handleDOMMutation = (mutations: MutationRecord[]) => {\n  for (const mutation of mutations) {\n    for (const node of Array.from(mutation.addedNodes)) {\n      if (!(node instanceof HTMLElement)) continue;\n      const videos = node.matches(\"video:not(.tmg-media)\") ? [node] : node.querySelectorAll(\"video:not(.tmg-media)\");\n      videos.forEach((el) => {\n        observeMutation(el, handleVidMutation, { attributes: true });\n        (el as HTMLMediaElement).tmgcontrols = el.hasAttribute(\"tmgcontrols\");\n      });\n    }\n    for (const node of Array.from(mutation.removedNodes)) {\n      if (!(node instanceof HTMLElement)) continue;\n      const videos = node.matches(\".tmg-media\") ? [node] : node.querySelectorAll(\".tmg-media\");\n      videos.forEach((el) => {\n        !(el as HTMLMediaElement).tmgPlayer?.Controller?.mutatingDOMM && (el as HTMLMediaElement).tmgPlayer?.detach(); // a div el without tmgcontrols eg. youtube tech\n      });\n    }\n  }\n};\n\nfunction flagMutation(m: HTMLElement, check = true) {\n  !_mutationSet.has(m) && check && _mutationSet.add(m);\n}\n\nfunction freeMutation(m: HTMLElement) {\n  clearTimeout(_mutationId);\n  _mutationId = setTimeout(() => !(_mutationId = null) && _mutationSet.delete(m));\n}\n\nexport function mountMedia() {\n  if (typeof HTMLVideoElement === \"undefined\") return;\n  Object.defineProperty(HTMLVideoElement.prototype, \"tmgcontrols\", {\n    get: function () {\n      return this.hasAttribute(\"tmgcontrols\");\n    },\n    set: async function (value) {\n      if (value) {\n        flagMutation(this);\n        await ((this as HTMLMediaElement).tmgPlayer || new Player()).attach(this);\n        this.setAttribute(\"tmgcontrols\", \"\");\n        freeMutation(this);\n      } else {\n        flagMutation(this, this.hasAttribute(\"tmgcontrols\"));\n        this.removeAttribute(\"tmgcontrols\");\n        (this as HTMLMediaElement).tmgPlayer?.detach();\n        freeMutation(this);\n      }\n    },\n    enumerable: true,\n    configurable: true,\n  });\n}\n\nexport function unmountMedia() {\n  delete (HTMLVideoElement.prototype as any).tmgcontrols;\n}\n\nexport function startAudioManager() {\n  if (!AUDIO_CONTEXT && IS_DOC_TRANSIENT && typeof window !== \"undefined\") {\n    AUDIO_CONTEXT = new (window.AudioContext || (window as any).webkitAudioContext)() as AudioContext;\n    const L = (AUDIO_LIMITER = AUDIO_CONTEXT!.createDynamicsCompressor());\n    ((L.threshold.value = -1.0), (L.knee.value = 0.0), (L.ratio.value = 20), (L.attack.value = 0.001), (L.release.value = 0.05));\n    Controllers.forEach((c) => (c.state.audioContextReady = true));\n  } else if (AUDIO_CONTEXT?.state === \"suspended\") AUDIO_CONTEXT.resume();\n}\n\nexport function connectMediaToAudioManager(medium: HTMLMediaElement) {\n  if (!AUDIO_CONTEXT) return \"unavailable\";\n  medium.mediaElementSourceNode ??= AUDIO_CONTEXT.createMediaElementSource(medium);\n  medium._tmgGainNode ??= AUDIO_CONTEXT.createGain();\n  medium._tmgDynamicsCompressorNode ??= AUDIO_CONTEXT.createDynamicsCompressor();\n  medium.mediaElementSourceNode.connect(medium._tmgDynamicsCompressorNode);\n  medium._tmgDynamicsCompressorNode.connect(medium._tmgGainNode);\n  medium._tmgGainNode.connect(AUDIO_LIMITER!);\n  AUDIO_LIMITER!.connect(AUDIO_CONTEXT!.destination);\n}\n\nexport function getAudioContext() {\n  return AUDIO_CONTEXT;\n}\n\nexport function init() {\n  mountMedia();\n  [\"pointerdown\", \"keydown\"].forEach((e) => document?.addEventListener(e, () => ((IS_DOC_TRANSIENT = true), startAudioManager()), true));\n  document?.querySelectorAll(\"video\").forEach((medium: any) => {\n    observeMutation(medium, handleVidMutation, { attributes: true });\n    medium.tmgcontrols = medium.hasAttribute(\"tmgcontrols\");\n  });\n  observeMutation(document.documentElement, handleDOMMutation, { childList: true, subtree: true });\n  window?.addEventListener(\"resize\", () => Controllers.forEach((c) => (c.state.dimensions.window = { width: window.innerWidth, height: window.innerHeight })));\n  screen?.orientation.addEventListener(\"change\", (e) => Controllers.forEach((c) => (c.state.screenOrientation = e?.target as ScreenOrientation)));\n  document?.addEventListener(\"visibilitychange\", () => Controllers.forEach((c) => (c.state.docVisibilityState = document.visibilityState)));\n  [\"fullscreenchange\", \"webkitfullscreenchange\", \"mozfullscreenchange\", \"msfullscreenchange\"].forEach((e) => document?.addEventListener(e, () => Controllers.forEach((c) => (c.state.docInFullscreen = queryFullscreen()))));\n}\n", "// A mixin method expert often used to bind all methods of a class to an instance\nexport function onAllMethods(owner: any, callback: (method: string, owner: any) => void): void {\n  let proto = owner;\n  while (proto && proto !== Object.prototype) {\n    for (const method of Object.getOwnPropertyNames(proto)) {\n      if (method === \"constructor\") continue;\n      if (\"function\" !== typeof Object.getOwnPropertyDescriptor(proto, method)?.value) continue;\n      callback(method, owner);\n    }\n    proto = Object.getPrototypeOf(proto);\n  }\n}\n\nexport function bindAllMethods(owner: any): void {\n  onAllMethods(owner, (method: string, owner: any) => {\n    owner[method] = owner[method].bind(owner);\n  });\n}\n\nexport function guardAllMethods(owner: any, guardFn: (fn: Function) => Function = guardMethod, bound = true): void {\n  onAllMethods(owner, (method: string, owner: any) => {\n    owner[method] = guardFn(bound ? owner[method].bind(owner) : owner[method]);\n  });\n}\n\nexport function guardMethod<T extends Function>(fn: T, onError: (e: any) => void = (e) => console.error(e)): T {\n  return ((...args: any[]) => {\n    try {\n      const result = fn(...args);\n      return result instanceof Promise ? result.catch((e) => onError(e)) : result;\n    } catch (e) {\n      onError(e);\n    }\n  }) as unknown as T;\n}\n", "import { Target, Payload, Getter, Setter, Listener, ListenerOptions, ListenerRecord, ReactorOptions, Watcher, WatcherRecord, GetterRecord, SetterRecord, SyncOptions } from \"../types/reactor\";\nimport type { PathParentValue, Paths, PathValue, WCPaths } from \"../types/obj\";\nimport { isObj, isArr, setAny, mergeObjs, getTrailPaths, getTrailRecords, parseEvOpts, getAny, deepClone } from \"../utils\";\nimport { isIntent, nuke } from \"../tools/mixins\";\n// low level non-stack loops considering this is surgical work on the root of reactivity, also cord is an alias for record\n\nexport const REJECTABLE: unique symbol = Symbol.for(\"S.I.A_REJECTABLE\"); // State Vs. Intent Marker\nexport const INERTIA: unique symbol = Symbol.for(\"S.I.A_INERTIA\"); // No Proxy Marker\nexport const TERMINATOR: unique symbol = Symbol.for(\"S.I.A_TERMINATOR\"); // Obj Operation Terminator\nexport const REOPTS = { LISTENER: [\"capture\", \"once\", \"signal\", \"immediate\"], MEDIATOR: [\"lazy\", \"signal\", \"immediate\"] } as const;\n\nexport class Event<T, P extends WCPaths<T> = WCPaths<T>> {\n  static readonly NONE = 0;\n  static readonly CAPTURING_PHASE = 1;\n  static readonly AT_TARGET = 2;\n  static readonly BUBBLING_PHASE = 3;\n  public type: Payload<T, P>[\"type\"];\n  public currentTarget: Payload<T, P>[\"currentTarget\"];\n  public eventPhase: number = Event.NONE;\n  readonly staticType: Payload<T, P>[\"type\"];\n  readonly target: Payload<T, P>[\"target\"];\n  readonly root: Payload<T, P>[\"root\"];\n  readonly path: Target<T, P>[\"path\"];\n  readonly value: Target<T, P>[\"value\"];\n  readonly oldValue: Target<T, P>[\"oldValue\"];\n  readonly rejectable: boolean;\n  readonly bubbles: boolean;\n  // readonly timestamp: number;\n  private _propagationStopped = false;\n  private _immediatePropagationStopped = false;\n  private _resolved = \"\";\n  private _rejected = \"\";\n\n  constructor(payload: Payload<T, P>, bubbles = true) {\n    this.type = this.staticType = payload.type;\n    this.target = payload.target;\n    this.currentTarget = payload.currentTarget;\n    this.root = payload.root;\n    this.value = payload.target.value;\n    this.oldValue = payload.target.oldValue;\n    this.path = payload.target.path;\n    this.rejectable = payload.rejectable;\n    this.bubbles = bubbles;\n    // this.timestamp = Date.now();\n  }\n  get propagationStopped(): boolean {\n    return this._propagationStopped;\n  }\n  stopPropagation(): void {\n    this._propagationStopped = true;\n  }\n  get immediatePropagationStopped(): boolean {\n    return this._immediatePropagationStopped;\n  }\n  stopImmediatePropagation(): void {\n    this._propagationStopped = true;\n    this._immediatePropagationStopped = true;\n  }\n  get resolved(): string {\n    return this._resolved;\n  }\n  resolve(message?: string): void {\n    if (!this.rejectable) return console.warn(`Ignored resolve() call on a non-rejectable ${this.staticType} at \"${this.path}\"`);\n    if (this.eventPhase !== Event.CAPTURING_PHASE) console.warn(`Resolving an intent on ${this.staticType} at \"${this.path}\" outside of the capture phase is unadvised.`);\n    if (this.rejectable) this._resolved = message || `Could ${this.staticType} intended value at \"${this.path}\"`;\n  }\n  get rejected(): string {\n    return this._rejected;\n  }\n  reject(reason?: string): void {\n    if (!this.rejectable) return console.warn(`Ignored reject() call on a non-rejectable ${this.staticType} at \"${this.path}\"`);\n    if (this.eventPhase !== Event.CAPTURING_PHASE) console.warn(`Rejecting an intent on ${this.staticType} at \"${this.path}\" outside of the capture phase is unadvised.`);\n    if (this.rejectable) this._rejected = reason || `Couldn't ${this.staticType} intended value at \"${this.path}\"`;\n  }\n  composedPath(): WCPaths<T>[] {\n    return getTrailPaths(this.path);\n  }\n}\n\nexport default class Reactor<T extends object> {\n  private getters = new Map<Paths<T>, Array<GetterRecord<T>>>();\n  private setters = new Map<Paths<T>, Array<SetterRecord<T>>>();\n  private watchers = new Map<Paths<T>, Array<WatcherRecord<T>>>();\n  private listenersRecord = new Map<WCPaths<T>, Array<ListenerRecord<T>>>();\n  private batch = new Map<Paths<T>, Payload<T>>();\n  private isBatching = false;\n  private queue: Set<() => void> | null = null; // tasks to run after flush, `null` | pay the empty set 64 byte price for what u might never use\n  private proxyCache = new WeakMap<object, any>();\n  public core: T;\n\n  constructor(obj: T = {} as T, options: ReactorOptions = {}) {\n    this.core = this._proxify(obj);\n  }\n\n  private _proxify<O>(obj: O, path = \"\", rejectable = false): O {\n    if (!(isObj(obj) || isArr(obj)) || \"symbol\" === typeof obj || \"function\" === typeof obj || (obj as any)[INERTIA] || obj instanceof Map || obj instanceof Set || obj instanceof WeakMap || obj instanceof Promise || obj instanceof Date || obj instanceof RegExp || obj instanceof Element || obj instanceof EventTarget) return obj; // handles direct objects and arrays unless inert, either we walk down that proto chain together or break a lot of tins\n    if (this.proxyCache.has(obj)) return this.proxyCache.get(obj);\n    rejectable ||= isIntent(obj);\n    const proxy = new Proxy(obj, {\n      // Robust Proxy handler\n      get: (object, key, receiver) => {\n        const safeKey = String(key),\n          fullPath = (path ? path + \".\" + safeKey : safeKey) as Paths<T>,\n          target: Target<T> = { path: fullPath, value: Reflect.get(object, key, receiver) as PathValue<T>, key: safeKey, object: object as PathParentValue<T>},\n          payload: Payload<T> = { type: \"get\", target, currentTarget: target, root: this.core, rejectable };\n        if (this.getters.has(fullPath as Paths<T>)) target.value = this._mediate(fullPath as Paths<T>, payload as Payload<T, Paths<T>>, false);\n        return this._proxify(target.value, fullPath, rejectable);\n      },\n      set: (object, key, value, receiver) => {\n        const safeKey = String(key),\n          fullPath = (path ? path + \".\" + safeKey : safeKey) as Paths<T>,\n          target: Target<T> = { path: fullPath, value, oldValue: Reflect.get(object, key, receiver) as PathValue<T>, key: safeKey, object: object as PathParentValue<T> },\n          payload: Payload<T> = { type: \"set\", target, currentTarget: target, root: this.core, rejectable };\n        if (this.setters.has(fullPath as Paths<T>)) target.value = this._mediate(fullPath as Paths<T>, payload as Payload<T, Paths<T>>, true);\n        return target.value === TERMINATOR || (Reflect.set(object, key, target.value, receiver) && (this._notify(fullPath, payload as Payload<T, Paths<T>>), true)); // soft rejection if terminated: `true`\n      },\n      deleteProperty: (object, key) => {\n        const safeKey = String(key),\n          fullPath = (path ? path + \".\" + safeKey : safeKey) as Paths<T>,\n          target: Target<T> = { path: fullPath, oldValue: Reflect.get(object, key) as PathValue<T>, key: safeKey, object: object as PathParentValue<T> },\n          payload: Payload<T> = { type: \"delete\", target, currentTarget: target, root: this.core, rejectable };\n        if (this.setters.has(fullPath as Paths<T>)) target.value = this._mediate(fullPath as Paths<T>, payload as Payload<T, Paths<T>>, true);\n        return target.value === TERMINATOR || (Reflect.deleteProperty(object, key) && (this._notify(fullPath, payload as Payload<T, Paths<T>>), true)); // soft rejection if terminated: `true`\n      },\n    });\n    return (this.proxyCache.set(obj, proxy), proxy);\n  }\n\n  private _mediate<P extends Paths<T>>(path: Paths<T>, payload: Payload<T, P>, set: boolean): any {\n    let terminated = false,\n      value = payload.target.value;\n    const cords = (set ? this.setters : this.getters)?.get(path);\n    if (!cords?.length) return value;\n    for (let i = set ? 0 : cords.length - 1; i !== (set ? cords.length : -1); i += set ? 1 : -1) {\n      if (set) terminated ||= value === TERMINATOR;\n      if (cords[i].once) (cords.splice(i--, 1), !cords.length && (set ? this.setters : this.getters)?.delete(path));\n      const response = set ? (cords[i].cb as Setter<T>)(value, terminated, payload) : (cords[i].cb as Getter<T>)(value, payload); // all will mediate\n      if (!terminated) value = response as PathValue<T, P>;\n    }\n    return value; // set - FIFO, get - LIFO\n  }\n\n  private _notify<P extends Paths<T>>(path: P, payload: Payload<T, P>) {\n    const cords = this.watchers.get(path);\n    for (let i = 0; i < (cords?.length ?? 0); i++) {\n      if (cords![i].once) (cords!.splice(i--, 1), !cords!.length && this.watchers.delete(path));\n      cords![i].cb(payload.target.value, payload); // watchers do not support termination\n    }\n    this._schedule(path, payload);\n  }\n  private _schedule(path: Paths<T>, payload: Payload<T>): void {\n    (this.batch.set(path, payload), this._initBatching());\n  }\n  private _initBatching(): void {\n    if (this.isBatching) return;\n    this.isBatching = true;\n    queueMicrotask(() => this._flush());\n  }\n  private _flush(): void {\n    (this.tick(this.batch.keys()), this.batch.clear(), (this.isBatching = false));\n    if (this.queue?.size) for (const task of this.queue) task();\n    this.queue?.clear();\n  }\n\n  private _wave(path: Paths<T>, payload: Payload<T>): void {\n    const e = new Event<T>(payload),\n      chain = getTrailRecords(this.core, path); // either build a large array to climb back up or have to derive\n    // 1: CAPTURE phase (core -> parent) - intent owners reject here, capture should preferably be used to reject\n    e.eventPhase = Event.CAPTURING_PHASE;\n    for (let i = 0; i <= chain.length - 2; i++) {\n      if (e.propagationStopped) break;\n      this._fire(chain[i], e, true);\n    }\n    if (e.propagationStopped) return;\n    // 2: TARGET phase (leaf)\n    e.eventPhase = Event.AT_TARGET;\n    this._fire(chain[chain.length - 1], e, true); // CAPTURE\n    !e.immediatePropagationStopped && this._fire(chain[chain.length - 1], e, false); // BUBBLE\n    if (!e.bubbles) return;\n    // 3: BUBBLE phase (parent -> core) - listeners always see it, rejection is just a flag for smart optimists\n    e.eventPhase = Event.BUBBLING_PHASE;\n    for (let i = chain.length - 2; i >= 0; i--) {\n      if (e.propagationStopped) break;\n      this._fire(chain[i], e, false);\n    }\n    if (e.rejected) return; // 4: DEFAULT phase if ever, whole architecture can be reimagined: `State vs Intent` is my view; reactor is dumb\n  }\n  private _fire([path, object, value]: ReturnType<typeof getTrailRecords<T>>[number], e: Event<T>, isCapture: boolean): void {\n    const cords = this.listenersRecord.get(path);\n    if (!cords?.length) return;\n    e.type = path !== e.target.path ? \"update\" : e.type; // `update` for ancestors\n    e.currentTarget = { path, value, oldValue: e.type !== \"update\" ? e.target.oldValue : undefined, key: e.type !== \"update\" ? path : path.slice(path.lastIndexOf(\".\") + 1) || \"\", object: object as PathParentValue<T> };\n    for (let i = 0; i < cords.length; i++) {\n      if (e.immediatePropagationStopped) break;\n      if (cords[i].capture !== isCapture) continue;\n      if (cords[i].once) (cords.splice(i--, 1), !cords.length && this.listenersRecord.delete(path));\n      cords[i].cb(e);\n    }\n    e.type = e.staticType; // reset type after possible `update` change\n  }\n\n  private _getContext<P extends WCPaths<T>>(path: P): Target<T, P> {\n    const lastDot = path.lastIndexOf(\".\"),\n      value = (path === \"*\" ? this.core : getAny(this.core, path as Paths<T>)) as PathValue<T, P>,\n      object = lastDot === -1 ? this.core : getAny(this.core, path.slice(0, lastDot) as Paths<T>);\n    return { path: path as P, value, key: path.slice(lastDot + 1) || \"\", object: object as PathParentValue<T, P> };\n  }\n  private _bind<Cb>(cord: any, signal?: AbortSignal): Cb {\n    signal?.aborted ? cord.clup() : signal?.addEventListener(\"abort\", cord.clup, { once: true });\n    if (!signal?.aborted) cord.sclup = () => signal?.removeEventListener(\"abort\", cord.clup);\n    return cord.clup as Cb; // once incase spec changes, memory leaks too\n  }\n\n  tick(paths?: Paths<T> | Iterable<Paths<T>>): void {\n    if (!paths) return this._flush();\n    if (\"string\" === typeof paths) {\n      const task = this.batch.get(paths);\n      task && (this._wave(paths, task), this.batch.delete(paths));\n    } else\n      for (const path of paths) {\n        const task = this.batch.get(path);\n        task && (this._wave(path, task), this.batch.delete(path));\n      }\n  }\n  stall(task: () => any): void {\n    ((this.queue ??= new Set()), this.queue.add(task), this._initBatching());\n  }\n  nostall(task: () => any): boolean | undefined {\n    return this.queue?.delete(task);\n  }\n\n  get<P extends Paths<T>>(path: P, cb: Getter<T, P>, opts?: SyncOptions): Reactor<T>[\"noget\"] {\n    const cords = this.getters.get(path),\n      { lazy, once, signal, immediate } = parseEvOpts(opts, REOPTS.MEDIATOR);\n    let cord = {} as GetterRecord<T>;\n    for (let i = 0; i < (cords?.length ?? 0); i++)\n      if (cords![i].cb === (cb as unknown as Getter<T>)) {\n        cord = cords![i];\n        break;\n      }\n    if (cord) return cord.clup;\n    cord = { cb: cb as unknown as Getter<T>, once, clup: () => (lazy && this.nostall(task), this.noget<P>(path, cb)) };\n    if (immediate) getAny(this.core, path as Paths<T>);\n    const task = () => (this.getters.get(path) ?? this.getters.set(path, []).get(path)!).push(cord);\n    lazy ? this.stall(task) : task(); // a progressive enhancment for gets that are virtual and should not affect init\n    return this._bind(cord, signal);\n  }\n  gonce<P extends Paths<T>>(path: P, cb: Getter<T, P>, opts?: SyncOptions): Reactor<T>[\"noget\"] {\n    return this.get<P>(path, cb, { ...parseEvOpts(opts, REOPTS.MEDIATOR), once: true });\n  }\n  noget<P extends Paths<T>>(path: P, cb: Getter<T, P>): boolean | undefined {\n    const cords = this.getters.get(path);\n    if (!cords) return undefined;\n    for (let i = 0; i < cords.length; i++) if (cords[i].cb === (cb as unknown as Getter<T>)) return (cords[i].sclup?.(), cords.splice(i--, 1), !cords.length && this.getters.delete(path), true);\n    return false;\n  }\n\n  set<P extends Paths<T>>(path: P, cb: Setter<T, P>, opts?: SyncOptions): Reactor<T>[\"noset\"] {\n    const cords = this.setters.get(path),\n      { lazy, once, signal, immediate } = parseEvOpts(opts, REOPTS.MEDIATOR);\n    let cord = {} as SetterRecord<T>;\n    for (let i = 0; i < (cords?.length ?? 0); i++)\n      if (cords![i].cb === (cb as unknown as Setter<T>)) {\n        cord = cords![i];\n        break;\n      }\n    if (cord) return cord.clup;\n    cord = { cb: cb as unknown as Setter<T>, once, clup: () => (lazy && this.nostall(task), this.noset<P>(path, cb)) };\n    if (immediate) setAny(this.core, path as Paths<T>, this._getContext(path).value!);\n    const task = () => (this.setters.get(path) ?? this.setters.set(path, []).get(path)!).push(cord);\n    lazy ? this.stall(task) : task();\n    return this._bind(cord, signal);\n  }\n  sonce<P extends Paths<T>>(path: P, cb: Setter<T, P>, opts?: SyncOptions): Reactor<T>[\"noset\"] {\n    return this.set<P>(path, cb, { ...parseEvOpts(opts, REOPTS.MEDIATOR), once: true });\n  }\n  noset<P extends Paths<T>>(path: P, cb: Setter<T, P>): boolean | undefined {\n    const cords = this.setters.get(path);\n    if (!cords) return undefined;\n    for (let i = 0; i < cords.length; i++) if (cords[i].cb === (cb as unknown as Setter<T>)) return (cords[i].sclup?.(), cords.splice(i--, 1), !cords.length && this.setters.delete(path), true);\n    return false;\n  }\n\n  watch<P extends Paths<T>>(path: P, cb: Watcher<T, P>, opts?: SyncOptions): Reactor<T>[\"nowatch\"] {\n    const cords = this.watchers.get(path),\n      { lazy, once, signal, immediate } = parseEvOpts(opts, REOPTS.MEDIATOR);\n    let cord = {} as WatcherRecord<T>;\n    for (let i = 0; i < (cords?.length ?? 0); i++)\n      if (cords![i].cb === cb) {\n        cord = cords![i];\n        break;\n      }\n    if (cord) return cord.clup;\n    cord = { cb: cb as Watcher<T>, once, clup: () => (lazy && this.nostall(task), this.nowatch<P>(path, cb)) };\n    if (immediate) {\n      const target = this._getContext(path);\n      cb(target.value, { type: \"init\", target, currentTarget: target, root: this.core, rejectable: false } as Payload<T, P>);\n    }\n    const task = () => (cords ?? this.watchers.set(path, []).get(path)!).push(cord);\n    lazy ? this.stall(task) : task();\n    return this._bind(cord, signal);\n  }\n  wonce<P extends Paths<T>>(path: P, cb: Watcher<T, P>, opts?: SyncOptions): Reactor<T>[\"nowatch\"] {\n    return this.watch<P>(path, cb, { ...parseEvOpts(opts, REOPTS.MEDIATOR), once: true });\n  }\n  nowatch<P extends Paths<T>>(path: P, cb: Watcher<T, P>): boolean | undefined {\n    const cords = this.watchers.get(path);\n    if (!cords) return undefined;\n    for (let i = 0; i < cords.length; i++) if (cords[i].cb === cb) return (cords[i].sclup?.(), cords.splice(i--, 1), !cords.length && this.watchers.delete(path), true);\n    return false;\n  }\n\n  on<P extends WCPaths<T>>(path: P, cb: Listener<T, P>, options?: ListenerOptions): Reactor<T>[\"off\"] {\n    const cords = this.listenersRecord.get(path),\n      { capture, once, signal, immediate } = parseEvOpts(options, REOPTS.LISTENER);\n    let cord = {} as ListenerRecord<T>;\n    for (let i = 0; i < (cords?.length ?? 0); i++)\n      if (cords![i].cb === cb && capture === cords![i].capture) {\n        cord = cords![i];\n        break;\n      }\n    if (cord) return cord.clup;\n    cord = { cb: cb as Listener<T>, capture, once, clup: () => this.off<P>(path, cb, options) };\n    if (immediate) {\n      const target = this._getContext(path as Paths<T>) as Target<T, P>;\n      cb(new Event<T, P>({ type: \"init\", target, currentTarget: target, root: this.core, rejectable: false }, false));\n    }\n    (cords ?? this.listenersRecord.set(path, []).get(path)!).push(cord);\n    return this._bind(cord, signal);\n  }\n  once<P extends WCPaths<T>>(path: P, cb: Listener<T, P>, options?: ListenerOptions): Reactor<T>[\"off\"] {\n    return this.on<P>(path, cb, { ...parseEvOpts(options, REOPTS.LISTENER), once: true });\n  }\n  off<P extends WCPaths<T>>(path: P, cb: Listener<T, P>, options?: ListenerOptions): boolean | undefined {\n    const cords = this.listenersRecord.get(path);\n    if (!cords) return undefined;\n    const { capture } = parseEvOpts(options, REOPTS.LISTENER);\n    for (let i = 0; i < cords.length; i++) if (cords[i].cb === cb && cords[i].capture === capture) return (cords[i].sclup?.(), cords.splice(i--, 1), !cords.length && this.listenersRecord.delete(path), true);\n    return false;\n  }\n\n  cascade({ type, currentTarget: { path, value: news, oldValue: olds } }: Event<T>, objSafe = true): void {\n    if (!isObj(news) || !isObj(olds) || (type !== \"set\" && type !== \"delete\")) return;\n    const obj = objSafe ? mergeObjs(olds, news) : news;\n    for (const key of Object.keys(obj)) setAny(this.core, (path + \".\" + key) as Paths<T>, (obj as any)[key]); // smart progressive enhancement for objects; !*\n  }\n\n  public snapshot(): T {\n    return deepClone(this.core);\n  }\n\n  reset(): void {\n    (this.getters.clear(), this.setters.clear(), this.watchers.clear(), this.listenersRecord.clear());\n    (this.queue?.clear(), this.batch.clear(), (this.isBatching = false));\n    this.proxyCache = new WeakMap();\n  }\n  destroy(): void {\n    (this.reset(), nuke(this));\n  }\n}\n", "import Reactor, { INERTIA, REJECTABLE } from \"../../core/reactor\";\nimport type { ReactorOptions, Inert, Intent, Live, State } from \"../../types/reactor\";\n\nconst methods = [\n  // --- Reactor public methods ---\n  \"tick\",\n  \"stall\",\n  \"nostall\",\n  \"get\",\n  \"gonce\",\n  \"noget\",\n  \"set\",\n  \"sonce\",\n  \"noset\",\n  \"watch\",\n  \"wonce\",\n  \"nowatch\",\n  \"on\",\n  \"once\",\n  \"off\",\n  \"cascade\",\n  \"snapshot\",\n  \"reset\",\n  \"destroy\",\n] as const;\nexport type Reactive<T extends object> = T & Pick<Reactor<T>, (typeof methods)[number]>;\n\nexport function reactive<T extends object>(target: T | Reactor<T>, options?: ReactorOptions): Reactive<T> {\n  const descriptors: PropertyDescriptorMap = {},\n    r = target instanceof Reactor ? target : new Reactor(target, options);\n  for (const m of methods)\n    descriptors[m] = {\n      value: r[m].bind(r),\n      writable: false,\n      enumerable: false,\n      configurable: true,\n    };\n  Object.defineProperties(r.core, descriptors);\n  return r.core as Reactive<T>;\n}\n\nexport function inert<T extends object>(target: T): Inert<T> {\n  (target as any)[INERTIA] = true;\n  return target as Inert<T>;\n}\nexport function live<T extends object>(target: T): Live<T> {\n  delete (target as any)[INERTIA];\n  return target as Live<T>;\n}\nexport function isInert<T extends object>(target: T): target is Inert<T> {\n  return !!(target as any)[INERTIA];\n}\n\nexport function intent<T extends object>(target: T): Intent<T> {\n  (target as any)[REJECTABLE] = true;\n  return target as Intent<T>;\n}\nexport function state<T extends object>(target: T): State<T> {\n  delete (target as any)[REJECTABLE];\n  return target as State<T>;\n}\nexport function isIntent<T extends object>(target: T): target is Intent<T> {\n  return !!(target as any)[REJECTABLE];\n}\n", "// A mixin method to completely nuke a class or object, it walks the whole tree nullifying everything\nexport function nuke(target: any): void {\n  let proto = target;\n  while (proto && proto !== Object.prototype) {\n    for (const key of Object.getOwnPropertyNames(proto)) {\n      if (key === \"constructor\") continue;\n      const desc = Object.getOwnPropertyDescriptor(proto, key);\n      if (\"function\" === typeof desc?.value) continue;\n      if (desc?.get || desc?.set) continue;\n      proto[key] = null; // See ya!, it's armageddon baby!\n    }\n    proto = Object.getPrototypeOf(proto);\n  }\n}\n", "import type { BaseTech, TechConstructor } from \"../media\";\nimport type { BasePlug, PlugConstructor } from \"../plugs\";\nimport type { BaseComponent, ComponentConstructor } from \"../components\";\n\nexport interface RegistryItem<T> {\n  name: string;\n  value: T;\n  options?: any; // no closed doors\n}\n\nexport class BaseRegistry<T> {\n  protected items: RegistryItem<T>[] = [];\n\n  public register(name: string, value: T, options?: any) {\n    this.unregister(name); // Safety replacement\n    return (this.items.push({ name, value, options }), this);\n  }\n\n  public unregister(name: string) {\n    return ((this.items = this.items.filter((i) => i.name !== name)), this);\n  }\n\n  public get(name: string): T | undefined {\n    return this.items.find((i) => i.name === name)?.value;\n  }\n\n  public getAll(order?: string[]): T[] {\n    if (!order) return this.items.map((i) => i.value);\n    return this.items\n      .sort((a, b) => {\n        const aIdx = order.indexOf(a.name),\n          bIdx = order.indexOf(b.name);\n        return aIdx === -1 && bIdx === -1 ? 0 : aIdx === -1 ? 1 : bIdx === -1 ? -1 : aIdx - bIdx;\n      })\n      .map((i) => i.value);\n  }\n}\n\nexport class OrderedRegistry<T> extends BaseRegistry<T> {\n  public registerPriority(name: string, value: T, options?: any) {\n    this.unregister(name);\n    return (this.items.unshift({ name, value, options }), this);\n  }\n\n  public registerBefore(key: string, name: string, value: T, options?: any) {\n    const idx = this.items.findIndex((i) => i.name === key);\n    if (idx === -1) return (console.warn(`[TMG Registry] Cannot register '${name}' before '${key}': Target '${key}' not found.`), this);\n    this.unregister(name);\n    return (this.items.splice(idx, 0, { name, value, options }), this);\n  }\n\n  public registerAfter(key: string, name: string, value: T, options?: any) {\n    const idx = this.items.findIndex((i) => i.name === key);\n    if (idx === -1) return (console.warn(`[TMG Registry] Cannot register '${name}' after '${key}': Target '${key}' not found.`), this);\n    this.unregister(name);\n    return (this.items.splice(idx + 1, 0, { name, value, options }), this);\n  }\n}\n\nexport class IconRegistry extends BaseRegistry<string> {\n  private static instance = new IconRegistry();\n\n  static get(name: string) {\n    return this.instance.get(name) || `<svg></svg>`;\n  }\n  static register(name: string, svgContent: string) {\n    this.instance.register(name, svgContent);\n  }\n  // Bulk register a map of icons { play: \"<svg...>\", pause: \"<svg...>\" }\n  static registerAll(icons: Record<string, string>) {\n    Object.entries(icons).forEach(([k, v]) => this.instance.register(k, v));\n  }\n}\n\nexport class TechRegistry extends OrderedRegistry<TechConstructor> {\n  private static instance = new TechRegistry();\n\n  static get<T extends BaseTech = BaseTech>(name: string) {\n    return this.instance.get(name) as TechConstructor<T> | undefined;\n  }\n  static register(Tech: TechConstructor) {\n    this.instance.register(Tech.techName, Tech);\n  }\n  static unregister(name: string) {\n    this.instance.unregister(name);\n  }\n  static registerBefore(key: string, Tech: TechConstructor) {\n    this.instance.registerBefore(key, Tech.techName, Tech);\n  }\n  static registerAfter(key: string, Tech: TechConstructor) {\n    this.instance.registerAfter(key, Tech.techName, Tech);\n  }\n  static pick(src: string, techOrder?: string[]): TechConstructor | null {\n    return this.instance.getAll(techOrder).find((T) => T.canPlaySource(src)) || null;\n  }\n}\n\nexport class PlugRegistry extends OrderedRegistry<PlugConstructor> {\n  private static instance = new PlugRegistry();\n\n  static get<T extends BasePlug = BasePlug>(name: string) {\n    return this.instance.get(name) as PlugConstructor<T> | undefined;\n  }\n  static register(Plug: PlugConstructor, opts?: any) {\n    this.instance.register(Plug.plugName, Plug, opts);\n  }\n  static unregister(name: string) {\n    this.instance.unregister(name);\n  }\n  static registerBefore(key: string, Plug: PlugConstructor) {\n    this.instance.registerBefore(key, Plug.plugName, Plug);\n  }\n  static registerAfter(key: string, Plug: PlugConstructor) {\n    this.instance.registerAfter(key, Plug.plugName, Plug);\n  }\n  static getOrdered(): PlugConstructor[] {\n    return this.instance.getAll();\n  }\n}\n\nexport class ComponentRegistry extends BaseRegistry<ComponentConstructor> {\n  private static instance = new ComponentRegistry();\n\n  static get<T extends BaseComponent = BaseComponent>(name: string) {\n    return this.instance.get(name) as ComponentConstructor<T> | undefined;\n  }\n  static register(Comp: ComponentConstructor) {\n    this.instance.register(Comp.componentName, Comp);\n  }\n  static init<T extends BaseComponent = BaseComponent>(name: string, ctl: any, options = {}): { element: HTMLElement; instance: T } | null {\n    const Comp = this.instance.get(name);\n    if (!Comp) return null;\n    const instance = new Comp(ctl, options) as T,\n      element = instance.create();\n    instance.setup();\n    return { element, instance };\n  }\n  static getAll(): ComponentConstructor[] {\n    return this.instance.getAll();\n  }\n}\n", "import { Controller } from \"./controller\";\nimport { guardAllMethods, type Reactive, nuke, reactive } from \"../tools/mixins\";\nimport { isObj } from \"../utils\";\n\n// A lifecylce controlled by it's Controller\n// Try to use methods for most things so they can be customized when extended and also auto guarded\nexport abstract class Controllable<Config = any, State = any> {\n  protected readonly ac = new AbortController();\n  protected readonly signal = this.ac.signal;\n\n  protected readonly ctl: Controller;\n  protected readonly guard: Controller[\"guard\"];\n  public config: Config; // may be a reactive obj node or the obj itself\n  public state!: State extends object ? Reactive<State> : State; // for reactivity needs of those who pass it up\n\n  constructor(ctl: Controller, config: Config, state?: State) {\n    guardAllMethods(this, ctl.guard, true);\n    this.signal = AbortSignal.any([this.signal, ctl.signal]);\n    this.ctl = ctl;\n    this.guard = ctl.guard;\n    this.config = config;\n    if (state) this.state = (isObj(state) ? reactive(state) : state) as Controllable[\"state\"];\n  }\n\n  public setup() {\n    this.onSetup(); // We let the subclass do its work\n  }\n  protected abstract onSetup(): void;\n\n  public destroy() {\n    !this.signal.aborted && this.ac.abort(`[TMG Controllable] Instance is being destroyed`); // incase controller already aborted, kills all listeners and timers before proper destruction below\n    this.onDestroy();\n    ((this.state as any)?.destroy?.(), (this.config as any)?.destroy?.()); // Can I clean here?... Anatoly :)\n    nuke(this);\n  }\n  protected onDestroy() {}\n}\n", "import { Controllable } from \"../core/controllable\";\nimport type { Controller } from \"../core/controller\";\nimport { Reactive } from \"../tools/mixins/reactive\";\nimport type { Media, MediaFeatures } from \"../types/contract\";\n\nexport type BaseTechConfig = Reactive<Media>; // Must extend to add more\n\nexport interface TechConstructor<T extends BaseTech = BaseTech> {\n  new (ctl: Controller, config: any): T;\n  techName: string;\n  features: MediaFeatures;\n  canPlaySource(src: string): boolean;\n}\n\nexport abstract class BaseTech<Config extends BaseTechConfig = BaseTechConfig, El extends HTMLElement = HTMLElement> extends Controllable<Config> {\n  public static readonly techName: string;\n  public get name() {\n    return (this.constructor as TechConstructor).techName;\n  }\n  public static readonly features: MediaFeatures = {};\n  public get features() {\n    return (this.constructor as TechConstructor).features;\n  }\n  public element!: HTMLElement;\n  protected get el() {\n    return this.element as El;\n  }\n\n  constructor(ctl: Controller, config: Config) {\n    super(ctl, config);\n    this.element = config.element; // must reassign if not using original\n  }\n  public onSetup() {\n    this.mount();\n    if (this.ctl.state.readyState) this.wire();\n    else this.ctl.state.wonce(\"readyState\", this.wire, { signal: this.signal }); // wire after all plugs setup\n  }\n  public onDestroy() {\n    this.unmount();\n  }\n\n  public static canPlaySource(src: string): boolean {\n    return false;\n  }\n\n  public mount() {\n    this.element && this.element !== this.config.element && this.config.element.replaceWith(this.element);\n  }\n  public unmount() {\n    this.element && this.config.element !== this.element && this.element.replaceWith(this.config.element);\n  }\n\n  // --- THE MANDATORY CORE 5 ---\n  public wire() {\n    this.wireSrc();\n    this.wireCurrentTime();\n    this.wireDuration();\n    this.wirePaused();\n    this.wireEnded();\n    this.wireFeatures();\n  }\n  // --- The Core 5 (Media \"Must Haves\") ---\n  protected abstract wireSrc(): void;\n  protected abstract wireCurrentTime(): void;\n  protected abstract wireDuration(): void;\n  protected abstract wirePaused(): void;\n  protected abstract wireEnded(): void;\n  // --- THE EXTENSIONS ---\n  protected wireFeatures() {\n    const f = this.features;\n    f.volume && this.wireVolume?.();\n    f.muted && this.wireMuted?.();\n    f.playbackRate && this.wirePlaybackRate?.();\n    f.pictureInPicture && this.wirePictureInPicture?.();\n    f.fullscreen && this.wireFullscreen?.();\n    f.airplay && this.wireAirplay?.();\n    f.chromecast && this.wireChromecast?.();\n    f.xrSession && this.wireXRSession?.();\n    f.xrMode && this.wireXRMode?.();\n    f.xrReferenceSpace && this.wireXRReferenceSpace?.();\n    f.projection && this.wireProjection?.();\n    f.stereoMode && this.wireStereoMode?.();\n    f.fieldOfView && this.wireFieldOfView?.();\n    f.aspectRatio && this.wireAspectRatio?.();\n    f.panningX && this.wirePanningX?.();\n    f.panningY && this.wirePanningY?.();\n    f.panningZ && this.wirePanningZ?.();\n    f.xrInputSource && this.wireXRInputSource?.();\n    f.currentTextTrack && this.wireCurrentTextTrack?.();\n    f.currentAudioTrack && this.wireCurrentAudioTrack?.();\n    f.currentVideoTrack && this.wireCurrentVideoTrack?.();\n    f.autoLevel && this.wireAutoLevel?.();\n    f.currentLevel && this.wireCurrentLevel?.();\n    f.poster && this.wirePoster?.();\n    f.autoplay && this.wireAutoplay?.();\n    f.loop && this.wireLoop?.();\n    f.preload && this.wirePreload?.();\n    f.playsInline && this.wirePlaysInline?.();\n    f.crossOrigin && this.wireCrossOrigin?.();\n    f.controls && this.wireControls?.();\n    f.controlsList && this.wireControlsList?.();\n    f.disablePictureInPicture && this.wireDisablePictureInPicture?.();\n    f.sources && this.wireSources?.();\n    f.tracks && this.wireTracks?.();\n  }\n  // --- The Engine Inputs (Interceptable) ---\n  protected wireVolume?(): void;\n  protected wireMuted?(): void;\n  protected wirePlaybackRate?(): void;\n  // --- The Presentation Modes (Heavily Rejectable) ---\n  protected wirePictureInPicture?(): void;\n  protected wireFullscreen?(): void;\n  // --- Casting (Connection Handshakes) ---\n  protected wireAirplay?(): void;\n  protected wireChromecast?(): void;\n  // --- VR / XR (Spatial Realities) ---\n  protected wireXRSession?(): void;\n  protected wireXRMode?(): void;\n  protected wireXRReferenceSpace?(): void;\n  // --- Projection & Stereo (The \"Content\" Logic) ---\n  protected wireProjection?(): void;\n  protected wireStereoMode?(): void;\n  // --- Camera & Viewport (The \"Lens\") ---\n  protected wireFieldOfView?(): void;\n  protected wireAspectRatio?(): void;\n  // --- Orientation (The \"Head/Camera\" Pose) ---\n  protected wirePanningX?(): void;\n  protected wirePanningY?(): void;\n  protected wirePanningZ?(): void;\n  // --- Interaction (XR Controllers) ---\n  protected wireXRInputSource?(): void;\n  // --- Track Switching (Async Buffering/Streaming) ---\n  protected wireAutoLevel?(): void;\n  protected wireCurrentLevel?(): void;\n  protected wireCurrentAudioTrack?(): void;\n  protected wireCurrentVideoTrack?(): void;\n  protected wireCurrentTextTrack?(): void;\n  // --- HTML Attributes ---\n  protected wirePoster?(): void;\n  protected wireAutoplay?(): void;\n  protected wireLoop?(): void;\n  protected wirePreload?(): void;\n  protected wirePlaysInline?(): void;\n  protected wireCrossOrigin?(): void;\n  protected wireControls?(): void;\n  protected wireControlsList?(): void;\n  protected wireDisablePictureInPicture?(): void;\n  // --- HTML Lists ---\n  protected wireSources?(): void;\n  protected wireTracks?(): void;\n}\n", "import { BaseTech, BaseTechConfig } from \".\";\nimport type { Event, ListenerOptions } from \"../types/reactor\";\nimport type { Controller } from \"../core/controller\";\nimport type { Media, MediaIntent, MediaFeatures } from \"../types/contract\";\nimport { type TrackType, createEl, enterFullscreen, exitFullscreen, getSources, getTracks, isSameURL, queryFullscreenEl, supportsFullscreen, supportsPictureInPicture, observeMutation, removeSources, addSources, isSameSources, isSameTracks, removeTracks, addTracks, getTrackIdx, setCurrentTrack } from \"../utils\";\n\nexport class HTML5Tech extends BaseTech<BaseTechConfig, HTMLVideoElement> {\n  public static readonly techName: string = \"html5\";\n  // prettier-ignore\n  public static readonly features: MediaFeatures = {\n    // Kinda Core\n    volume: HTML5Tech.canControlVolume(),\n    muted: HTML5Tech.canMuteVolume(),\n    playbackRate: HTML5Tech.canControlRate(),\n    // Modes\n    pictureInPicture: supportsPictureInPicture(),\n    fullscreen: supportsFullscreen(),\n    // Attributes\n    poster: true, autoplay: true, loop: true, playsInline: true,\n    crossOrigin: true, controls: true, controlsList: true,\n    disablePictureInPicture: true, preload: true,\n    // Lists\n    textTracks: HTML5Tech.supportsTextTracks(),\n    videoTracks: HTML5Tech.supportsVideoTracks(),\n    audioTracks: HTML5Tech.supportsAudioTracks(),\n    activeCue: HTML5Tech.supportsTextTracks(),\n    // Infos\n    readyState: true, networkState: true, error: true, waiting: true,\n    stalled: true, seeking: true, buffered: true, seekable: true,\n    videoWidth: true, videoHeight: true, loadedMetadata: true,\n    canPlay: true, canPlayThrough: true,\n    // Settings\n    defaultMuted: true, defaultPlaybackRate: true,\n  };\n  private static readonly DUMMY = createEl(\"video\");\n  protected readonly eOpts: { EL: AddEventListenerOptions; REACTOR: ListenerOptions };\n  static canPlaySource(src: string): boolean {\n    return true;\n  }\n  constructor(ctl: Controller, config: BaseTechConfig) {\n    super(ctl, config);\n    this.eOpts = { EL: { signal: this.signal }, REACTOR: { capture: true, signal: this.signal, immediate: this.ctl.payload.initialized } }; // Cached Event Options\n  }\n  // ===========================================================================\n  // WIRING (Connections Only)\n  // ===========================================================================\n  // --- Core Wiring ---\n  protected wireSrc() {\n    this.el.addEventListener(\"loadstart\", this.handleLoadStartState, this.eOpts.EL);\n    this.config.on(\"intent.src\", this.handleSrcIntent, this.eOpts.REACTOR);\n  }\n  protected wireCurrentTime() {\n    this.el.addEventListener(\"timeupdate\", this.handleTimeUpdateState, this.eOpts.EL);\n    this.el.addEventListener(\"seeking\", this.handleSeekingState, this.eOpts.EL);\n    this.el.addEventListener(\"seeked\", this.handleSeekedState, this.eOpts.EL);\n    this.config.on(\"intent.currentTime\", this.handleCurrentTimeIntent, this.eOpts.REACTOR);\n  }\n  protected wireDuration() {\n    this.el.addEventListener(\"durationchange\", this.handleDurationChangeState, this.eOpts.EL);\n  }\n  protected wirePaused() {\n    this.el.addEventListener(\"play\", this.handlePlayState, this.eOpts.EL);\n    this.el.addEventListener(\"pause\", this.handlePauseState, this.eOpts.EL);\n    this.config.on(\"intent.paused\", this.handlePausedIntent, this.eOpts.REACTOR);\n  }\n  protected wireEnded() {\n    this.el.addEventListener(\"ended\", this.handleEndedState, this.eOpts.EL);\n  }\n  // --- Features Wiring ---\n  protected override wireFeatures() {\n    super.wireFeatures(); // Calls individual feature wires (volume, etc.) above\n    this.wireHTMLState(); // Attributes Reverse-Sync (Mutation Observer)\n    // Status (Bulk wiring)\n    const loadEvents = [\"loadstart\", \"progress\", \"suspend\", \"abort\", \"emptied\", \"stalled\"];\n    loadEvents.forEach((e) => this.el.addEventListener(e, this.handleLoadStatus, this.eOpts.REACTOR));\n    this.el.addEventListener(\"error\", this.handleErrorStatus, this.eOpts.REACTOR);\n    this.el.addEventListener(\"waiting\", this.handleWaitingStatus, this.eOpts.REACTOR);\n    this.el.addEventListener(\"playing\", this.handlePlayingStatus, this.eOpts.REACTOR);\n    this.el.addEventListener(\"stalled\", this.handleStalledStatus, this.eOpts.REACTOR);\n    this.el.addEventListener(\"loadedmetadata\", this.handleLoadedMetadataStatus, this.eOpts.REACTOR);\n    this.el.addEventListener(\"loadeddata\", this.handleLoadedDataStatus, this.eOpts.REACTOR);\n    this.el.addEventListener(\"canplay\", this.handleCanPlayStatus, this.eOpts.REACTOR);\n    this.el.addEventListener(\"canplaythrough\", this.handleCanPlayThroughStatus, this.eOpts.REACTOR);\n    // Tracks\n    this.features.textTracks && this.wireTracksStatus(\"textTracks\");\n    this.features.videoTracks && this.wireTracksStatus(\"videoTracks\");\n    this.features.audioTracks && this.wireTracksStatus(\"audioTracks\");\n    this.features.activeCue && this.wireActiveCueStatus?.();\n  }\n  // --- Engine Inputs Wiring ---\n  protected wireVolume() {\n    this.el.addEventListener(\"volumechange\", this.handleVolumeChangeState, this.eOpts.EL);\n    this.config.on(\"intent.volume\", this.handleVolumeIntent, this.eOpts.REACTOR);\n  }\n  protected wireMuted() {\n    // Native 'volumechange' handles state update\n    this.config.on(\"intent.muted\", this.handleMutedIntent, this.eOpts.REACTOR);\n  }\n  protected wirePlaybackRate() {\n    this.el.addEventListener(\"ratechange\", this.handleRateChangeState, this.eOpts.EL);\n    this.config.on(\"intent.playbackRate\", this.handlePlaybackRateIntent, this.eOpts.REACTOR);\n  }\n  // --- Presentation Modes Wiring ---\n  protected wirePictureInPicture() {\n    this.el.addEventListener(\"enterpictureinpicture\", this.handleEnterPiPState, this.eOpts.EL);\n    this.el.addEventListener(\"leavepictureinpicture\", this.handleLeavePiPState, this.eOpts.EL);\n    this.config.on(\"intent.pictureInPicture\", this.handlePiPIntent, this.eOpts.REACTOR);\n  }\n  protected wireFullscreen() {\n    this.ctl.state.watch(\"docInFullscreen\", this.handleFullscreenChangeState, this.eOpts.REACTOR);\n    this.el.addEventListener(\"webkitbeginfullscreen\", this.handleWebkitBeginFullscreenState, this.eOpts.REACTOR);\n    this.el.addEventListener(\"webkitendfullscreen\", this.handleWebkitEndFullscreenState, this.eOpts.REACTOR);\n    this.config.on(\"intent.fullscreen\", this.handleFullscreenIntent, this.eOpts.REACTOR);\n  }\n  // --- Track Switching Wiring ---\n  protected wireCurrentTrack(type: TrackType) {\n    this.config.set(`intent.current${type}Track`, (term) => getTrackIdx(this.el, type, term), { signal: this.signal }); // pass `any` term, the track will surely be found if available\n    const list = (this.el as any)[`${type.toLowerCase()}Tracks`];\n    list?.addEventListener(\"change\", () => this.handleCurrentTrackState(type, list), this.eOpts.REACTOR);\n    this.config.on(`intent.current${type}Track`, (e: Event<Media, `intent.current${typeof type}Track`>) => this.handleCurrentTrackIntent(e, type), this.eOpts.REACTOR);\n  }\n  protected wireCurrentAudioTrack() {\n    this.wireCurrentTrack(\"Audio\");\n  }\n  protected wireCurrentVideoTrack() {\n    this.wireCurrentTrack(\"Video\");\n  }\n  protected wireCurrentTextTrack() {\n    this.wireCurrentTrack(\"Text\");\n  }\n  // --- HTML (Bulk Wiring) ---\n  protected wireHTMLState() {\n    this.signal.addEventListener(\"abort\", observeMutation(this.el, this.handleHTMLState, { attributes: true, childList: true, subtree: false }), { once: true });\n  }\n  // --- Attribute Wiring ---\n  protected bindAttr<K extends keyof MediaIntent>(key: K, isBool = false) {\n    this.config.on(`intent.${key}`, (e: Event<Media, `intent.${K}`>) => this.handleAttributeIntent(e, key, isBool), this.eOpts.REACTOR);\n  }\n  protected wirePoster() {\n    this.bindAttr(\"poster\");\n  }\n  protected wireAutoplay() {\n    this.bindAttr(\"autoplay\", true);\n  }\n  protected wireLoop() {\n    this.bindAttr(\"loop\", true);\n  }\n  protected wirePreload() {\n    this.bindAttr(\"preload\");\n  }\n  protected wirePlaysInline() {\n    this.bindAttr(\"playsInline\", true);\n  }\n  protected wireCrossOrigin() {\n    this.bindAttr(\"crossOrigin\");\n  }\n  protected wireControls() {\n    this.bindAttr(\"controls\", true);\n  }\n  protected wireControlsList() {\n    this.bindAttr(\"controlsList\");\n  }\n  protected wireDisablePictureInPicture() {\n    this.bindAttr(\"disablePictureInPicture\", true);\n  }\n  // --- Lists Wiring ---\n  protected wireSources() {\n    this.config.on(\"intent.sources\", this.handleSourcesIntent, this.eOpts.REACTOR);\n  }\n  protected wireTracks() {\n    this.config.on(\"intent.tracks\", this.handleTracksIntent, this.eOpts.REACTOR);\n  }\n  // --- Status Tracks Wiring ---\n  protected wireTracksStatus(type: \"textTracks\" | \"videoTracks\" | \"audioTracks\") {\n    const list = (this.el as any)[type];\n    list && [\"addtrack\", \"removetrack\"].forEach((e) => list.addEventListener(e, () => this.handleTracksStatus(type, list), this.eOpts.REACTOR));\n  }\n  // --- Active Cue Wiring ---\n  protected wireActiveCueStatus() {\n    this.config.on(\n      \"state.currentTextTrack\",\n      ({ value: curr, oldValue: prev }: Event<Media, \"state.currentTextTrack\">) => {\n        if (prev !== -1) this.el.textTracks[prev!]?.removeEventListener(\"cuechange\", this.handleActiveCueStatus, this.eOpts.EL);\n        this.el.textTracks[curr!]?.addEventListener(\"cuechange\", this.handleActiveCueStatus, this.eOpts.EL);\n        this.handleActiveCueStatus({ target: this.el.textTracks[curr!] });\n      },\n      this.eOpts.REACTOR\n    );\n  }\n  // --- Settings Wiring ---\n  protected wireDefaultMuted() {\n    this.config.on(\"settings.defaultMuted\", this.handleDefaultMutedSetting, this.eOpts.REACTOR);\n  }\n  protected wireDefaultPlaybackRate() {\n    this.config.on(\"settings.defaultPlaybackRate\", this.handleDefaultPlaybackRateSetting, this.eOpts.REACTOR);\n  }\n  // ===========================================================================\n  // HANDLERS (The Logic - Auto-Guarded by Controllable)\n  // ===========================================================================\n  // --- Core States ---\n  protected handleLoadStartState() {\n    const { state: s, status: st } = this.config;\n    st.error = null;\n    st.waiting = true;\n    st.ended = st.stalled = st.loadedData = st.loadedMetadata = st.canPlay = st.canPlayThrough = false;\n    st.duration = NaN;\n    st.buffered = this.el.buffered;\n    st.seekable = this.el.seekable;\n    if (!isSameURL(this.el.src, s.src)) s.src = this.el.src;\n    this.config.state.paused = this.el.paused;\n  }\n  protected handleTimeUpdateState() {\n    this.config.state.currentTime = this.el.currentTime;\n  }\n  protected handleSeekingState() {\n    this.config.status.seeking = true;\n  }\n  protected handleSeekedState() {\n    this.config.status.seeking = false;\n  }\n  protected handleDurationChangeState() {\n    this.config.status.duration = this.el.duration;\n  }\n  protected handlePlayState() {\n    this.config.state.paused = false;\n  }\n  protected handlePauseState() {\n    this.config.state.paused = true;\n  }\n  protected handleEndedState() {\n    this.config.status.ended = this.config.state.paused = true;\n  }\n  // --- Core Intents ---\n  protected handleSrcIntent(e: Event<Media, \"intent.src\">) {\n    if (e.resolved || isSameURL(this.el.src, e.value)) return;\n    this.el.src = e.value ?? \"\";\n    this.el.load();\n    e.resolve(HTML5Tech.techName);\n  }\n  protected handleCurrentTimeIntent(e: Event<Media, \"intent.currentTime\">) {\n    if (e.resolved) return;\n    this.el.currentTime = e.value!;\n    e.resolve(HTML5Tech.techName);\n  }\n  protected handlePausedIntent(e: Event<Media, \"intent.paused\">) {\n    if (e.resolved) return;\n    const p = e.value ? this.el.pause() : this.el.play();\n    if (p?.then) p.then(() => e.resolve(HTML5Tech.techName)).catch((err: any) => e.reject(err.message));\n    else e.resolve(HTML5Tech.techName);\n  }\n  // --- Feature States ---\n  protected handleVolumeChangeState() {\n    this.config.state.volume = this.el.volume;\n    this.config.state.muted = this.el.muted;\n  }\n  protected handleRateChangeState() {\n    this.config.state.playbackRate = this.el.playbackRate;\n  }\n  protected handleEnterPiPState() {\n    this.config.state.pictureInPicture = true;\n  }\n  protected handleLeavePiPState() {\n    this.config.state.pictureInPicture = false;\n  }\n  protected handleFullscreenChangeState(inFs?: boolean) {\n    this.config.state.fullscreen = inFs ? queryFullscreenEl() === this.el : false;\n  }\n  protected handleWebkitBeginFullscreenState() {\n    this.config.state.fullscreen = true;\n  }\n  protected handleWebkitEndFullscreenState() {\n    this.config.state.fullscreen = false;\n  }\n  protected handleCurrentTrackState(type: TrackType, list: any) {\n    this.config.state[`current${type}Track`] = getTrackIdx(this.el, type, \"active\");\n  }\n  protected handleHTMLState(mutations: MutationRecord[]) {\n    mutations.forEach((m) => {\n      const { state, settings } = this.config; // Reverse Bind: DOM -> State\n      if (m.type === \"attributes\" && m.attributeName) {\n        switch (m.attributeName) {\n          case \"poster\":\n            return (state.poster = this.el.poster);\n          case \"autoplay\":\n            return (state.autoplay = this.el.autoplay);\n          case \"loop\":\n            return (state.loop = this.el.loop);\n          case \"preload\":\n            return (state.preload = this.el.preload);\n          case \"crossorigin\":\n            return (state.crossOrigin = this.el.crossOrigin);\n          case \"controls\":\n            return (state.controls = this.el.controls);\n          case \"playsinline\":\n          case \"webkit-playsinline\":\n            return (state.playsInline = this.el.playsInline);\n          case \"controlslist\":\n            return (state.controlsList = this.el.getAttribute(\"controlslist\") || \"\");\n          case \"disablepictureinpicture\":\n            return (state.disablePictureInPicture = this.el.disablePictureInPicture);\n          case \"muted\":\n            return ((state.muted = this.el.muted), (settings.defaultMuted = this.el.defaultMuted));\n        }\n      } else if (m.type === \"childList\") {\n        const nodes = [...m.addedNodes, ...m.removedNodes];\n        if (nodes.some(({ nodeName: nm }) => nm === \"SOURCE\")) state.sources = getSources(this.el);\n        if (nodes.some(({ nodeName: nm }) => nm === \"TRACK\")) state.tracks = getTracks(this.el);\n      }\n    });\n  }\n  // --- Feature Intents ---\n  protected handleVolumeIntent(e: Event<Media, \"intent.volume\">) {\n    if (e.resolved) return;\n    this.el.volume = e.value!;\n    e.resolve(HTML5Tech.techName);\n  }\n  protected handleMutedIntent(e: Event<Media, \"intent.muted\">) {\n    if (e.resolved) return;\n    this.el.muted = e.value!;\n    e.resolve(HTML5Tech.techName);\n  }\n  protected handlePlaybackRateIntent(e: Event<Media, \"intent.playbackRate\">) {\n    if (e.resolved) return;\n    this.el.playbackRate = e.value!;\n    e.resolve(HTML5Tech.techName);\n  }\n  protected handlePiPIntent(e: Event<Media, \"intent.pictureInPicture\">) {\n    if (e.resolved) return;\n    e.value ? this.el.requestPictureInPicture() : document.exitPictureInPicture();\n    e.resolve(HTML5Tech.techName);\n  }\n  protected handleFullscreenIntent(e: Event<Media, \"intent.fullscreen\">) {\n    if (e.resolved) return;\n    e.value ? enterFullscreen(this.el) : exitFullscreen(this.el);\n    e.resolve(HTML5Tech.techName);\n  }\n  protected handleCurrentTrackIntent(e: Event<Media, `intent.current${TrackType}Track`>, type: TrackType) {\n    if (e.resolved) return;\n    setCurrentTrack(this.el, type, e.value, false); // (el), (type), (idx), (no flush: `hidden` & !`disabled`)\n    e.resolve(HTML5Tech.techName);\n  }\n  protected handleAttributeIntent(e: Event<Media, string>, key: string, isBool: boolean) {\n    if (e.resolved) return;\n    (this.el as any)[key] = isBool ? !!e.value : (e.value ?? \"\"); // Generic handler for simple attributes\n    if (key === \"playsInline\") this.el.toggleAttribute(\"webkit-playsinline\", e.value);\n    e.resolve(HTML5Tech.techName);\n  }\n  protected handleSourcesIntent(e: Event<Media, \"intent.sources\">) {\n    if (e.resolved) return;\n    if (!isSameSources(this.config.state.sources, e.value)) (removeSources(this.el), addSources(e.value, this.el));\n    e.resolve(HTML5Tech.techName);\n  }\n  protected handleTracksIntent(e: Event<Media, \"intent.tracks\">) {\n    if (e.resolved) return;\n    if (!isSameTracks(this.config.state.tracks, e.value)) (removeTracks(this.el), addTracks(e.value, this.el));\n    e.resolve(HTML5Tech.techName);\n  }\n  // --- Status (Bulk) ---\n  protected handleLoadStatus() {\n    this.config.status.readyState = this.el.readyState;\n    this.config.status.networkState = this.el.networkState;\n    this.config.status.buffered = this.el.buffered;\n    this.config.status.seekable = this.el.seekable;\n  }\n  protected handleLoadedMetadataStatus() {\n    this.config.status.loadedMetadata = true;\n    this.config.status.videoWidth = this.el.videoWidth;\n    this.config.status.videoHeight = this.el.videoHeight;\n    this.config.status.duration = this.el.duration;\n    this.handleLoadStatus(); // Update buffers too\n  }\n  protected handleLoadedDataStatus() {\n    this.config.status.loadedData = true;\n  }\n  protected handleCanPlayStatus() {\n    this.config.status.canPlay = true;\n  }\n  protected handleCanPlayThroughStatus() {\n    this.config.status.canPlayThrough = true;\n  }\n  protected handleStalledStatus() {\n    this.config.status.stalled = true;\n  }\n  protected handleWaitingStatus() {\n    this.config.status.waiting = true;\n  }\n  protected handlePlayingStatus() {\n    this.config.status.waiting = this.config.status.stalled = false;\n  }\n  protected handleErrorStatus() {\n    this.config.status.error = this.el.error;\n    this.config.status.waiting = false;\n  }\n  protected handleTracksStatus(type: \"textTracks\" | \"videoTracks\" | \"audioTracks\", list: any) {\n    this.config.status[type] = list;\n  }\n  protected handleActiveCueStatus(e?: globalThis.Event | { target?: TextTrack }) {\n    const track = e?.target as TextTrack | null;\n    // if (getTrackIdx(this.el, \"Text\", track) !== this.config.state.currentTextTrack) return; // multiple tracks `cuechange`?\n    this.config.status.activeCue = track?.activeCues?.[0] || null;\n  }\n  // --- Settings ---\n  protected handleDefaultMutedSetting(e: Event<Media, \"settings.defaultMuted\">) {\n    this.el.defaultMuted = e.value!;\n  }\n  protected handleDefaultPlaybackRateSetting(e: Event<Media, \"settings.defaultPlaybackRate\">) {\n    this.el.defaultPlaybackRate = e.value!;\n  }\n  // --- Capabilities ---\n  protected static canControlVolume(): boolean {\n    if (!this.DUMMY) return false;\n    try {\n      const prev = this.DUMMY.volume;\n      this.DUMMY.volume = 0.5;\n      const works = this.DUMMY.volume === 0.5;\n      return ((this.DUMMY.volume = prev), works);\n    } catch {\n      return false;\n    }\n  }\n  protected static canMuteVolume(): boolean {\n    return !!this.DUMMY && \"muted\" in this.DUMMY;\n  }\n  protected static canControlRate(): boolean {\n    if (!this.DUMMY) return false;\n    try {\n      const prev = this.DUMMY.playbackRate;\n      this.DUMMY.playbackRate = 0.5;\n      const works = this.DUMMY.playbackRate === 0.5;\n      return ((this.DUMMY.playbackRate = prev), works);\n    } catch {\n      return false;\n    }\n  }\n  protected static supportsTextTracks(): boolean {\n    return !!this.DUMMY && \"textTracks\" in this.DUMMY;\n  }\n  protected static supportsVideoTracks(): boolean {\n    return !!this.DUMMY && \"videoTracks\" in this.DUMMY;\n  }\n  protected static supportsAudioTracks(): boolean {\n    return !!this.DUMMY && \"audioTracks\" in this.DUMMY;\n  }\n}\n", "import { AUDIO_CONTEXT, type RuntimeState } from \"../tools/runtime\";\nimport type { VideoBuild } from \"../types/build\";\nimport type { Media } from \"../types/contract\";\nimport { reactive, type Reactive, guardAllMethods, guardMethod, nuke, inert, intent } from \"../tools/mixins\";\nimport { TechRegistry, PlugRegistry } from \"./registry\";\nimport { TechConstructor, BaseTech, HTML5Tech } from \"../media\";\nimport { PlugConstructor, type BasePlug as Plug } from \"../plugs\";\nimport { setTimeout, requestAnimationFrame, clamp, uncamelize, cloneMedia, getMediaReport, isSameURL, isSameSources, observeIntersection, observeResize, queryFullscreen, getSizeTier, createEl } from \"../utils\";\n\ninterface LifePayload {\n  readyState: number;\n  initialized: boolean;\n  destroyed: boolean;\n  instance: Controller;\n}\n\n// --- CONTROLLER (The Orchestrator) ---\nexport class Controller {\n  // --- CORE SYSTEM ---\n  public readonly id: string;\n  public plugs = new Map<string, Plug>();\n  public getPlug<T extends Plug = Plug>(name: string): T | undefined {\n    return this.plugs.get(name) as T | undefined;\n  }\n  private ac = new AbortController();\n  public readonly signal = this.ac.signal;\n  // --- RUNTIME (Global Controller States) ---\n  public config: Reactive<VideoBuild>;\n  public state: Reactive<RuntimeState> & Record<string, any>; // runtime state and states to be populated for easy reach\n  public media: Reactive<Media>;\n  // --- MEMORY ---\n  public buildCache: VideoBuild;\n  private payloadCache: LifePayload = { instance: this } as any; // must use getter for payload\n  // DOM References (Utilized by Core Plugs)\n  public videoContainer: HTMLElement = createEl(\"div\");\n  public pseudoVideo: HTMLVideoElement = createEl(\"video\");\n  public pseudoVideoContainer: HTMLElement = createEl(\"div\");\n  public DOM: Record<string, HTMLElement | null> = {}; // To be populated with common elements for easy reach\n  // --- UTILS CACHE ---\n  private throttleMap = new Map<string, any>();\n  private rafLoopMap = new Map<string, number>();\n  private rafLoopFnMap = new Map<string, Function>();\n  // --- FLAGS (Essential Only) ---\n  public mutatingDOMM = true; // Critical for Player wrapper to know when swapping modes\n\n  constructor(medium: HTMLVideoElement, build: VideoBuild) {\n    this.setReadyState(0, medium);\n    guardAllMethods(this, this.guard, true);\n    this.id = build.id;\n    this.buildCache = { ...build };\n    this.config = reactive(build);\n    this.state = reactive<RuntimeState>({\n      readyState: 0,\n      audioContextReady: !!AUDIO_CONTEXT,\n      mediaIntersecting: true,\n      mediaParentIntersecting: true,\n      dimensions: { container: { width: 0, height: 0, tier: \"x\" }, pseudoContainer: { width: 0, height: 0, tier: \"x\" }, window: { width: window.innerWidth, height: window.innerHeight } },\n      screenOrientation: window.screen.orientation,\n      docVisibilityState: document.visibilityState,\n      docInFullscreen: queryFullscreen(),\n    });\n    const defaults = getMediaReport(medium); // returns defaults and initials\n    this.media = reactive<Media>({\n      tech: {} as BaseTech, // dummy tech to be replaced on boot\n      element: medium,\n      intent: intent(defaults.intent),\n      state: defaults.state,\n      status: defaults.status,\n      settings: defaults.settings,\n    });\n    this.media.set(\"tech\", (t) => inert(t!), { signal: this.signal });\n    this.boot();\n  }\n\n  private boot() {\n    this.connectPlugs();\n    this.wireTechOverseer();\n    this.wireRuntimeState();\n    this.setReadyState(); // boot complete\n    if (!this.media.state.paused) this.setReadyState();\n    else this.media.wonce(\"state.paused\", () => this.setReadyState(), { signal: this.signal }); // first play\n    setTimeout(() => (this.mutatingDOMM = false), 0, this.signal);\n  }\n\n  private connectPlugs() {\n    for (const PlugClass of PlugRegistry.getOrdered()) {\n      const key = PlugClass.plugName,\n        config = key in this.config ? (this.config as any)[key] : (this.config.settings as any)[key];\n      this.plugin(PlugClass, config);\n    }\n  }\n  public plugin(PlugClass: PlugConstructor, config?: any): void {\n    if (this.config.noPlugList.includes(PlugClass.plugName) && !PlugClass.isCore) return; // Core plugs are mandatory\n    this.getPlug(PlugClass.plugName)?.destroy();\n    const plug = new PlugClass(this, config);\n    this.plugs.set(PlugClass.plugName, (plug.setup(), plug));\n  }\n\n  protected wireTechOverseer() {\n    const opts = { capture: true, signal: this.signal };\n    this.media.on(\"intent.src\", () => this.overseeTech(), { ...opts, immediate: true }); // load initial\n    this.media.on(\"intent.sources\", () => this.overseeTech(), opts);\n    this.media.on(\"state.src\", () => this.overseeTech(\"state\"), opts); // just in case\n    this.media.on(\"state.sources\", () => this.overseeTech(\"intent\"), opts); // just in case\n    this.media.on(\"settings.srcObject\", () => this.overseeTech(), opts);\n  }\n  protected overseeTech(pref: \"state\" | \"intent\" = \"intent\") {\n    const { src: prefSrc, sources: prefSources } = pref === \"intent\" ? this.media.intent : this.media.state,\n      { src: altSrc, sources: altSources } = pref === \"intent\" ? this.media.state : this.media.intent;\n    if (this.media.settings.srcObject) return this.switchTech(HTML5Tech);\n    let selectedTech: TechConstructor | null = null,\n      selectedSource: string | null = null;\n    if (!isSameURL(prefSrc, altSrc)) {\n      selectedTech = TechRegistry.pick(prefSrc, this.config.settings.techOrder);\n      if (selectedTech) selectedSource = prefSrc;\n    }\n    if (!selectedTech && !isSameSources(prefSources, altSources)) {\n      for (const source of prefSources) {\n        selectedTech = TechRegistry.pick(source.src, this.config.settings.techOrder);\n        if (selectedTech) {\n          selectedSource = source.src;\n          break;\n        }\n      }\n    }\n    this.switchTech(selectedTech || HTML5Tech);\n    if (selectedSource !== prefSrc && !selectedTech?.features?.sources) this.media.intent.src = selectedSource!; // since tech can't handle sources\n  }\n  public switchTech(TechClass: TechConstructor, config = this.media): void {\n    if (this.media.tech && TechClass === this.media.tech.constructor) return;\n    if (this.media.tech) (this.media.tech.destroy(), this.log(`Switching tech from '${this.media.tech.name}' -> '${TechClass.name}'`));\n    (this.media.tech = new TechClass(this, config)).setup();\n  }\n\n  private wireRuntimeState() {\n    const clups = [] as Function[];\n    clups.push(observeIntersection(this.videoContainer.parentElement!, (entry) => (this.state.mediaParentIntersecting = entry.isIntersecting)));\n    clups.push(observeIntersection(this.videoContainer, (entry) => (this.state.mediaIntersecting = entry.isIntersecting)));\n    clups.push(observeResize(this.videoContainer, () => (this.state.dimensions.container = getSizeTier(this.videoContainer))));\n    clups.push(observeResize(this.pseudoVideoContainer, () => (this.state.dimensions.pseudoContainer = getSizeTier(this.pseudoVideoContainer))));\n    this.signal.addEventListener(\"abort\", () => clups.forEach((cb) => cb()), { once: true });\n  }\n\n  public get payload() {\n    const readyState = this.state?.readyState ?? 0;\n    ((this.payloadCache.readyState = readyState), (this.payloadCache.initialized = readyState > 0), (this.payloadCache.destroyed = readyState < 0));\n    return this.payloadCache;\n  }\n  public setReadyState(state?: number, medium?: HTMLVideoElement) {\n    const readyState = !this.state ? 0 : clamp(0, state ?? this.state.readyState + 1, 3);\n    if (this.state) this.state.readyState = readyState;\n    this.fire(\"tmgreadystatechange\", this.payload, medium);\n  }\n\n  public guard = <T extends Function>(fn: T, { silent = false } = {}) => {\n    return guardMethod(\n      fn,\n      (e) => this.log(e, \"error\", \"swallow\")\n      // , !silent && this.getPlug<Toasts>(\"toast\")?.toast?.(\"Something went wrong\", { tag: \"tmg-stwr\" })\n    );\n  }; // ()=>{}: needs to be bounded even before initialization\n  public log(mssg: any, type: \"error\" | \"warn\" | \"log\" = \"log\", action?: \"swallow\") {\n    if (!this.config.debug) return;\n    switch (type) {\n      case \"error\":\n        return action === \"swallow\" ? console.warn(`[TMG Controller] swallowed error:`, mssg) : console.error(`[TMG Controller] error:`, mssg);\n      case \"warn\":\n        return console.warn(`[TMG Controller] warning:`, mssg);\n      default:\n        return console.log(`[TMG Controller] log:`, mssg);\n    }\n  }\n  public fire(eN: string, detail: any = null, el: HTMLElement | EventTarget = this.media.element, bubbles = true, cancelable = true) {\n    eN && el?.dispatchEvent(new CustomEvent(eN, { detail, bubbles, cancelable }));\n  }\n\n  public throttle(key: string, fn: Function, delay = 30, strict = true) {\n    if (strict) {\n      const now = performance.now();\n      if (now - (this.throttleMap.get(key) ?? 0) < delay) return;\n      return (this.throttleMap.set(key, now), fn());\n    }\n    if (this.throttleMap.has(key)) return;\n    const id = setTimeout(() => this.throttleMap.delete(key), delay, this.signal); // uses timeout so code runs when sync thread is free\n    return (this.throttleMap.set(key, id), fn());\n  }\n  public RAFLoop(key: string, fn: Function) {\n    this.rafLoopFnMap.set(key, fn);\n    const loop = () => (this.rafLoopFnMap.get(key)?.(), this.rafLoopMap.set(key, requestAnimationFrame(loop, this.signal)));\n    !this.rafLoopMap.has(key) && this.rafLoopMap.set(key, requestAnimationFrame(loop, this.signal));\n  }\n  public cancelRAFLoop(key: string) {\n    (cancelAnimationFrame(this.rafLoopMap.get(key)!), this.rafLoopFnMap.delete(key), this.rafLoopMap.delete(key));\n  }\n\n  public queryDOM<K extends keyof HTMLElementTagNameMap>(query: K, all: true, isPseudo?: boolean): NodeListOf<HTMLElementTagNameMap[K]>;\n  public queryDOM<K extends keyof SVGElementTagNameMap>(query: K, all: true, isPseudo?: boolean): NodeListOf<SVGElementTagNameMap[K]>;\n  public queryDOM<E extends Element = HTMLElement>(query: string, all: true, isPseudo?: boolean): NodeListOf<E>;\n  public queryDOM<K extends keyof HTMLElementTagNameMap>(query: K, all?: false, isPseudo?: boolean): HTMLElementTagNameMap[K] | null;\n  public queryDOM<K extends keyof SVGElementTagNameMap>(query: K, all?: false, isPseudo?: boolean): SVGElementTagNameMap[K] | null;\n  public queryDOM<E extends Element = HTMLElement>(query: string, all?: false, isPseudo?: boolean): E | null;\n  public queryDOM(query: string, all = false, isPseudo = false) {\n    const container = isPseudo ? this.pseudoVideoContainer : this.videoContainer;\n    return all ? container.querySelectorAll(query) : container.querySelector(query);\n  }\n  setImgLoadState<T extends { target: HTMLImageElement }>({ target: img }: T): void {\n    img?.setAttribute(\"data-loaded\", String(img.complete && img.naturalWidth > 0));\n  }\n  setImgFallback<T extends { target: HTMLImageElement }>({ target: img }: T): void {\n    img.src = window.TMG_VIDEO_ALT_IMG_SRC;\n  }\n  setCanvasFallback(canvas: HTMLCanvasElement, context: CanvasRenderingContext2D, img?: HTMLImageElement): void {\n    img = canvas && createEl(\"img\", { src: window.TMG_VIDEO_ALT_IMG_SRC, onload: () => context?.drawImage(img!, 0, 0, canvas.width, canvas.height) });\n  }\n  public isUIActive(mode: string, el = this.videoContainer): boolean {\n    if (mode === \"settings\") mode = \"settings-view\";\n    return el.classList.contains(`tmg-video-${uncamelize(mode)}`);\n  }\n\n  public destroy() {\n    this.setReadyState(-1);\n    this.rafLoopMap.keys().forEach(this.cancelRAFLoop);\n    this.ac.abort(\"[TMG Controller] Instance is being destroyed\");\n    this.mutatingDOMM = true; // plugs will mutate, flag watchers\n    [...this.plugs.values()].reverse().forEach((p) => p.destroy());\n    this.media.tech.destroy();\n    [this.plugs, this.throttleMap, this.rafLoopMap, this.rafLoopFnMap].forEach((map) => map.clear());\n    (this.media.destroy(), this.state.destroy(), this.config.destroy());\n    const el = this.config.cloneOnDetach ? cloneMedia(this.media.element) : this.media.element;\n    return (nuke(this), el);\n  }\n}\n", "import \"./css/index.scss\";\nimport \"./ts/types/global.d.ts\";\n\nif (typeof window !== \"undefined\") {\n  window.tmg ||= {};\n  window.TMG_VIDEO_ALT_IMG_SRC ??= \"/TMG_MEDIA_PROTOTYPE/assets/icons/movie-tape.png\";\n  window.TMG_VIDEO_CSS_SRC ??= \"/TMG_MEDIA_PROTOTYPE/prototype-3/prototype-3-video.css\";\n  window.T007_TOAST_JS_SRC ??= \"/T007_TOOLS/T007_toast_library/T007_toast.js\";\n} else {\n  console.log(\"\\x1b[38;2;139;69;19mTMG Media Player Unavailable\\x1b[0m\");\n  (console.error(\"TMG Media Player cannot run in a terminal!\"), console.warn(\"Consider moving to a browser environment to use the TMG Media Player\"));\n}\n\nexport { Controller } from \"./ts/core/controller\";\nexport { Player } from \"./ts/tools/player\";\n\nexport * from \"./ts/tools/runtime\";\nexport * as utils from \"./ts/utils\";\n"],
  "mappings": "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",
  "names": ["requestAnimationFrame", "setTimeout", "w", "w", "w", "mutationObserver", "resizeObserver", "bbox", "object", "w", "m", "base", "key", "b", "combo", "required", "actual", "setTimeout", "requestAnimationFrame", "owner", "setTimeout", "requestAnimationFrame"]
}
